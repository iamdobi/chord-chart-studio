{"version":3,"file":"main.f4e2d7e0682374758ee0.js","mappings":";uBAAIA,iFCESC,EAAY,WACxB,IACC,IAAMC,EAAkBC,aAAaC,QAAQ,SAC7C,IAAKF,EACJ,OAED,OAAOG,KAAKC,MAAMJ,EAGnB,CAFE,MAAOK,GACR,MACD,CACD,EAEaC,EAAY,SAACC,GACzB,IACC,IAAMP,EAAkBG,KAAKK,UAAUD,GACvCN,aAAaQ,QAAQ,QAAST,EAE9B,CADC,MAAOK,GACR,CAEF,qMCrBe,SAASK,IACvB,OAAOC,KAAKC,KACb,CCFO,IAAMC,EAAkB,kBAClBC,EAAkB,kBAClBC,EAAkB,kBAClBC,EAAkB,kBCHlBC,EAA6B,4BCA7BC,EAAgC,8BAChCC,EAAgC,8BAChCC,EAAiC,+BCFjCC,EAAqB,SAACd,GAAK,OACvCA,EAAMe,GAAGC,OAAOC,IAAIH,kBAAkB,EAE1BI,EAAsB,SAAClB,GAAK,OACxCA,EAAMe,GAAGC,OAAOC,IAAIC,mBAAmB,EAE3BC,EAAgB,SAACnB,GAAK,OAAKA,EAAMe,GAAGC,OAAOC,IAAIG,UAAU,ECNzDC,EAAgB,SAACrB,GAAK,OAAKA,EAAMsB,YAAYC,QAAQ,EAErDC,EAAe,SAACxB,GAAK,OAAKA,EAAMsB,YAAYG,OAAO,EAEnDC,EAAkB,SAAC1B,GAAK,OAAKA,EAAMsB,YAAYK,YAAY,w2CCIxE,IAGaC,GAHmBC,EAAAA,EAAAA,IAAsBC,EAAAA,GAAgBC,IAG1CC,EAC3B,SAAChC,GAAK,OACLiC,IAAKjC,EAAMkC,GAAGC,MAAMC,UAAU,YAAY,MAAQ,CAAEC,MAAd,EAALA,MAA0BC,GAAjB,EAAFA,GAAuB,GAAE,IAClE,SAACF,GAAQ,OAAKG,IAAQH,GAAU,SAACI,GAAC,OAAKA,EAAEH,MAAMI,aAAa,GAAC,IAGjDC,EAAS,SAAC1C,EAAOsC,GAC7B,OAAOtC,EAAMkC,GAAGC,MAAMC,SAASE,EAChC,EAEaK,EAAqB,SAAC3C,EAAOsC,EAAIM,GAC7C,IAAMC,EAAO7C,EAAMkC,GAAGC,MAAMC,SAASE,GAErC,GAAKO,IAEAA,EAAKC,SAAW,CAAC,GAAGF,GAAW,CAGnC,GAAmD,IAA/CG,OAAOC,KAAKH,EAAKC,QAAQF,IAAWK,OAAc,OAEtD,OAAOC,IAAWL,EAAKC,QAAQF,GAChC,CACD,EAEaO,EAAuB,SAACnD,EAAOsC,GAC3C,IAAMO,EAAO7C,EAAMkC,GAAGC,MAAMC,SAASE,GAErC,GAAKO,EAAL,CAEA,IAAMO,EAAcP,EAAKC,SAAW,CAAC,EAE/BO,EAAoB,GAM1B,GALID,EAAYE,MAAMD,EAAkBE,KAAK,EAAD,GAAMH,EAAYE,OAC1DF,EAAYI,MAAMH,EAAkBE,KAAK,EAAD,GAAMH,EAAYI,OAC1DJ,EAAYK,OAAOJ,EAAkBE,KAAK,EAAD,GAAMH,EAAYK,QAC3DL,EAAYM,QAAQL,EAAkBE,KAAK,EAAD,GAAMH,EAAYM,SAE3DL,EAAkBJ,OAIvB,OAFAI,EAAkBM,MAAK,SAACC,EAAGC,GAAC,OAAKD,EAAEE,UAAYD,EAAEC,SAAS,IAEnDT,EAAkBU,QACxB,SAACC,EAAKC,GAAW,OAAKlB,OAAOmB,OAAOF,EAAKC,EAAY,GACrD,CAAC,EAhBe,CAkBlB,ECLA,QAnD0B,CACzBX,KAAM,CAAC,QAAS,iBAAkB,uBAAwB,cAC1DE,KAAM,CACL,QAEA,iBACA,uBACA,aAEA,YACA,wBACA,YACA,mBACA,oBAEA,eAEA,YAEDC,MAAO,CACN,iBACA,uBACA,aAEA,YACA,wBACA,YACA,mBACA,oBAEA,eACA,uBACA,kBAEA,YAEDC,OAAQ,CACP,cAEA,iBACA,uBACA,aAEA,YACA,wBACA,YACA,mBACA,0vCCnCF,IAAMS,EAAe,CACpB/B,SAAU,CAAC,GA+DZ,SAASgC,EAAiBpE,EAAOqE,EAAQC,GACxC,MAAgCD,EAAOE,QAA/BC,EAAO,EAAPA,QAASC,EAAG,EAAHA,IAAKC,EAAK,EAALA,MAChBpC,EAAKjB,EAAciD,GACnBlC,EAAW,KAAKpC,EAAMoC,UAE5B,GACC,CAAC,iBAAkB,mBAAmBuC,SAASH,IAC/CpC,EAASE,GACR,CACD,IAAMlB,EAAaD,EAAcmD,GAC3BM,EACO,oBAAZJ,EAAgC,cAAgBpD,EAGjD,OADAgB,EAASE,GASX,SAAmBuC,EAAWjC,EAAU6B,EAAKC,GAC5C,OAAO,OACHG,GAAS,IACZ/B,QAAS,OACL+B,EAAU/B,SAAO,QACnBF,EAAQ,QACJiC,EAAU/B,SAAW,CAAC,GAAGF,IAAS,MACtCkB,UAAW3D,KACVsE,EAAMC,OAIX,CArBiBI,CAAU1C,EAASE,GAAKsC,EAAgBH,EAAKC,GACrD,OACH1E,GAAK,IACRoC,SAAAA,GAEF,CACA,OAAOpC,CACR,CChGO,IAAM+E,EAA2B,qBAC3BC,GAA6B,2BCC7BC,GAAiB,SAACjF,EAAOwE,EAASC,GAC9C,GACEzE,EAAMkC,GAAGY,QAAQ0B,IACjBxE,EAAMkC,GAAGY,QAAQ0B,GAASU,aACsB,IAA1ClF,EAAMkC,GAAGY,QAAQ0B,GAASU,OAAOT,GAIzC,OAAOzE,EAAMkC,GAAGY,QAAQ0B,GAASU,OAAOT,EACzC,EASaU,GAAqB,SAACnF,EAAOwE,GACzC,GAAKxE,EAAMkC,GAAGY,QAAQ0B,IAAaxE,EAAMkC,GAAGY,QAAQ0B,GAASY,SAG7D,OAAOlC,IAAWlD,EAAMkC,GAAGY,QAAQ0B,GAASY,SAC7C,kvCCbA,IAAMjB,GAAe,CAAC,EA4CtB,SAASkB,GAAef,EAAWgB,EAAQC,GAC1C,IAAMC,EAAiBL,GAAmBb,EAAW,kBACjDmB,EAAoB9C,EAAmB2B,EAAWgB,EAAQC,GAU9D,OARKE,IACJA,EAAoBtC,EAAqBmB,EAAWgB,IAAW,CAAC,UAE1DG,EAAkB3B,UAGzB2B,EAAoBC,IAAMD,EAAmBE,EAAqBJ,IAE3DxC,OAAOmB,OAAOsB,EAAgBC,EACtC,CAiCA,MClGA,IAAeG,EAAAA,EAAAA,GAAuB,CACrCzD,MJoJD,WAAsE,IAAtDnC,EAAQ,UAAH,6CAAGmE,EAAcE,EAAS,UAAH,6CAAG,CAAC,EAAGC,EAAY,UAAH,6CAAG,CAAC,EAC/D,OAAQD,EAAOwB,MACd,KAAKC,EACL,KAAKA,EACJ,OA7IH,SAAoB9F,EAAOqE,GAC1B,MAA+BA,EAAOE,QAA9BjC,EAAE,EAAFA,GAAID,EAAK,EAALA,MAAO0D,EAAO,EAAPA,QAEb3D,EAAW,KAAKpC,EAAMoC,UAO5B,OANAA,EAASE,GAAM,CACdA,GAAAA,EACAD,MAAAA,EACA0D,QAAAA,GAGM,OACH/F,GAAK,IACRoC,SAAAA,GAEF,CA+HU4D,CAAWhG,EAAOqE,GAC1B,KAAKyB,EACJ,OA/HH,SAAoB9F,EAAOqE,GAC1B,MAA+BA,EAAOE,QAA9BjC,EAAE,EAAFA,GAAID,EAAK,EAALA,MAAO0D,EAAO,EAAPA,QAEnB,IAAM1D,QAA4B,IAAZ0D,IAA6B/F,EAAMoC,SAASE,GACjE,OAAOtC,EAGR,IAAMoC,EAAW,KAAKpC,EAAMoC,UAU5B,OARAA,EAASE,GAAM,KAAKF,EAASE,IAEzBD,IACHD,EAASE,GAAID,MAAQA,QAEC,IAAZ0D,IACV3D,EAASE,GAAIyD,QAAUA,GAEjB,OACH/F,GAAK,IACRoC,SAAAA,GAEF,CA0GU6D,CAAWjG,EAAOqE,GAC1B,KAAKyB,EACJ,OA1GH,SAAoB9F,EAAOqE,GAC1B,IAAQ/B,EAAO+B,EAAOE,QAAdjC,GAER,IAAKA,IAAOtC,EAAMoC,SAASE,GAC1B,OAAOtC,EAGR,IAAMoC,EAAW,KAAKpC,EAAMoC,UAG5B,cAFOA,EAASE,GAET,OACHtC,GAAK,IACRoC,SAAAA,GAEF,CA4FU8D,CAAWlG,EAAOqE,GAC1B,KAAK3D,EACJ,OAAO0D,EAAiBpE,EAAOqE,EAAQC,GACxC,KAAK3D,EACJ,OAjDH,SAAuBX,EAAOqE,EAAQC,GACrC,IAAMgB,EAASjE,EAAciD,GACvB6B,EAAW9B,EAAOE,QAAQgB,KAQhC,IANgC5C,EAC/B2B,EACAgB,EACAa,GAG2B,CAC3B,IAAMC,EAAsBV,IAC3BvC,EAAqBmB,EAAWgB,IAAW,CAAC,EAC5CG,EAAkBU,IAGnB,GAAIpD,OAAOC,KAAKoD,GAAqBnD,OAAQ,CAC5CmD,EAAoBtC,UAAY3D,IAChC,IAAMiC,EAAW,KAAKpC,EAAMoC,UAU5B,OARAA,EAASkD,GAAU,OACflD,EAASkD,IAAO,IACnBxC,QAAS,OACLV,EAASkD,GAAQxC,SAAO,QAC1BqD,EAAWC,MAIP,OACHpG,GAAK,IACRoC,SAAAA,GAEF,CACD,CACA,OAAOpC,CACR,CAcUqG,CAAcrG,EAAOqE,EAAQC,GAEtC,OAAOtE,CACP,EIlKA8C,QDgGD,WAAsE,IAAtD9C,EAAQ,UAAH,6CAAGmE,GAAcE,EAAS,UAAH,6CAAG,CAAC,EAAGC,EAAY,UAAH,6CAAG,CAAC,EAC/D,OAAQD,EAAOwB,MACd,KAAKC,EACJ,OA3FH,SAAwB9F,EAAOqE,GAC9B,MAAgCA,EAAOE,QAA/BC,EAAO,EAAPA,QAASC,EAAG,EAAHA,IAAKC,EAAK,EAALA,MAEtB,IACE1E,EAAMwE,KACNxE,EAAMwE,GAASU,aACsB,IAA/BlF,EAAMwE,GAASU,OAAOT,GAE7B,OAAOzE,EAGR,IAAMsG,EAAW,SACbtG,GAAK,SACPwE,EAAO,SACJxE,EAAMwE,IAAQ,IACjBU,OAAQ,MAAKlF,EAAMwE,GAASU,YAK9B,OAFAoB,EAAS9B,GAASU,OAAOT,GAAOC,EAEzB4B,CACR,CAsEUC,CAAevG,EAAOqE,GAE9B,KAAK1D,EACJ,OAvEH,SAAuBX,EAAOqE,EAAQC,GACrC,IAGMkC,EAAanB,GAAef,EAHnBjD,EAAciD,GACZD,EAAOE,QAAQgB,MAIhC,OAAO,SACHvF,GAAK,IACRyG,eAAgB,SACZzG,EAAMyG,gBAAc,IACvBvB,OAAQ,MACJsB,MAIP,CAwDUH,CAAcrG,EAAOqE,EAAQC,GAErC,KAAKS,EACJ,OAxCH,SAAoB/E,EAAOqE,EAAQC,GAClC,IAAQhC,EAAO+B,EAAOE,QAAdjC,GAGFkE,EAAanB,GAAef,EAAWhC,EAF1BnB,EAAcmD,IAI3BoC,EACL/D,EAAmB2B,EAAWhC,EAAI,gBAAkB,CAAC,SAC/CoE,EAAgB5C,UAEvB,IAAM6C,EAAqBxB,GAAmBb,EAAW,mBAEnDsC,EAAiB7D,OAAOmB,OAAOyC,EAAoBD,GAEzD,OAAO,SACH1G,GAAK,IACR0G,gBAAiB,SACb1G,EAAM0G,iBAAe,IACxBxB,OAAQ,MACJ0B,KAGLH,eAAgB,SACZzG,EAAMyG,gBAAc,IACvBvB,OAAQ,MACJsB,MAIP,CAWUK,CAAW7G,EAAOqE,EAAQC,GAGnC,OAAOtE,CACP,ovCEvGD,IAAMmE,GAAe,CACpB5C,SAAU,GACVE,QAAS,GACTE,aAAc,cCfR,IAAMmF,GAA8B,6BAC9BC,GAA6B,4BAC7BC,GAA4B,0BAC5BC,GAAiC,sDCD/B,SAASC,GAAUC,GACjC,OAAOC,KAAAA,SAAmBD,EAAM,CAC/BE,aAAc,CAAC,SACfC,cAAc,GAEhB,ivCCFA,IAAMnD,GAAe,CACpB4B,QAAS,GACTwB,WAAW,EACXC,aAAa,EACbC,YAAa,OACbpF,MAAO,ovCCER,IAAM8B,GAAe,CACpBrD,oBAAoB,EACpBI,qBAAqB,EACrBE,WAAY,OACZsG,YAAa,QCbd,UAAe9B,EAAAA,EAAAA,GAAuB,CACrC3E,IDec,WAAqD,IAAnCjB,EAAQ,UAAH,6CAAGmE,GAAcE,EAAS,UAAH,6CAAG,CAAC,EAChE,OAAQA,EAAOwB,MACd,KAAKjF,EACJ,OAAO,SACHZ,GAAK,IACRc,oBAAqBd,EAAMc,qBAG7B,KAAKD,EACJ,OAAO,SACHb,GAAK,IACRkB,qBAAsBlB,EAAMkB,sBAG9B,KAAKP,EACJ,IAAQ4E,EAASlB,EAAOE,QAAhBgB,KACR,OAAO,SACHvF,GAAK,IACRoB,WAAYmE,IAGd,KAAKhF,EACL,KAAKD,EACL,KAAKE,EACJ,OAAO,SACHR,GAAK,IACRoB,WAAY,SAIf,OAAOpB,CACR,IE/CA,IAAe4F,EAAAA,EAAAA,GAAuB,CACrC5E,OAAAA,KCGD,IAAe4E,EAAAA,EAAAA,GAAuB,CACrC1D,GAAAA,GACAZ,YPSc,WAAqD,IAAnCtB,EAAQ,UAAH,6CAAGmE,GAAcE,EAAS,UAAH,6CAAG,CAAC,EAChE,OAAQA,EAAOwB,MACd,KAAKvF,EACJ,IAAQgC,EAAO+B,EAAOE,QAAdjC,GACR,OAAO,SACHtC,GAAK,IACRuB,SAAUe,EACVb,QAASa,IAIX,KAAK9B,EACJ,IAAQ8B,EAAO+B,EAAOE,QAAdjC,GACR,OAAO,SACHtC,GAAK,IACRuB,SAAUe,EACVb,QAAS,KAIX,KAAKhB,EACJ,OAAO,SACHT,GAAK,IACRyB,QAAS,KAIX,KAAKlB,EACJ,OAAO,SACHP,GAAK,IACRuB,SAAU,GACVE,QAAS,KAIX,KAAKsD,EACJ,IAAQzC,EAAO+B,EAAOE,QAAdjC,GACR,OAAO,SACHtC,GAAK,IACRuB,SAAUe,EACVb,QAASa,IAAOtC,EAAMyB,QAAUa,EAAK,KAIvC,KAAK0C,GACJ,IAAQ1C,EAAO+B,EAAOE,QAAdjC,GACR,OAAO,SACHtC,GAAK,IACRyB,QAASa,IAIZ,OAAOtC,CACR,EO7DC2H,aJGc,WAAqD,IAAnC3H,EAAQ,UAAH,6CAAGmE,GAAcE,EAAS,UAAH,6CAAG,CAAC,EAChE,OAAQA,EAAOwB,MACd,KAAK+B,GACJ,MAAgCvD,EAAOE,QAA/BwB,EAAO,EAAPA,QAAO,IAAE1D,MAAAA,OAAK,IAAG,KAAE,EAC3B,OAAO,SACHrC,GAAK,IACR+F,QAASmB,GAAUnB,GACnB1D,MAAOA,EAAQ6E,GAAU7E,GAASrC,EAAMqC,QAI1C,KAAKuF,GACJ,IAAQH,EAAgBpD,EAAOE,QAAvBkD,YAER,OAAO,SACHzH,GAAK,IACRyH,YAAAA,IAIF,KAAKjH,EACL,KAAKoH,GACJ,OAAO,SACH5H,GAAK,IACR+F,QAAS,GACT1D,MAAO,GACPmF,aAAa,IAIf,KAAKI,GACJ,MAAmDvD,EAAOE,QAAlDwB,EAAO,EAAPA,QAAS0B,EAAW,EAAXA,YAAapF,EAAK,EAALA,MAAOkF,EAAS,EAATA,UAErC,OAAO,SACHvH,GAAK,IACRwH,aAAa,EACbzB,QAASA,EAAUmB,GAAUnB,GAAW,GACxC1D,MAAOA,EAAQ6E,GAAU7E,GAAS,GAClCoF,YAAaA,GAAezH,EAAMyH,YAClCF,UAAAA,IAIH,OAAOvH,CACR,EI9CCe,GAAAA,KCTD,IACCmB,GCDD,CACCY,QCHD,CAEC+E,kBAAmB,CAClB3C,OAAQ,CACP4C,MAAO,QACPC,YAAa,aAEd3C,SAAU,CACT0C,MAAO,QACPC,YAAa,cAMfrB,gBAAiB,CAChBxB,OAAQ,CACP8C,eAAgB,EAChBC,qBAAsB,OACtBC,WAAY,SAEb9C,SAAU,CACT4C,eAAgB,EAChBC,qBAAsB,OACtBC,WAAY,UAMdzB,eAAgB,CACfvB,OAAQ,CACPiD,UAAW,MACXC,uBAAuB,EACvBC,WAAW,EACXC,kBAAkB,EAClBC,mBAAmB,EAEnBC,SAAU,EACVC,aAAc,EACdC,sBAAsB,EACtBC,gBAAiB,GAElBvD,SAAU,CACT+C,UAAW,MACXC,uBAAuB,EACvBC,WAAW,EACXC,kBAAkB,EAClBC,mBAAmB,EAEnBC,SAAU,EACVC,aAAc,EACdC,sBAAsB,EACtBC,gBAAiB,OC3CpB,IAAIC,GAkCG,SAASC,KACf,OAAOD,EACR,CC9Ce,SAASE,GAAajD,EAAMtB,GAC1C,IAAKsB,EACJ,MAAM,IAAIkD,UAAU,kDAErB,MAAO,CACNlD,KAAAA,EACAtB,QAAAA,EAEF,CCJO,ICSDyE,GAAuB,CAK5B,kBAAmB,SAACC,GACnB,IAAML,EAAQC,KAERxG,EAAQ6G,GAAWD,EAAQ5G,MAAO4G,EAAQE,QAChDP,EAAMQ,SDP0B,SAAC3B,EAAa1B,EAAS1D,GAAK,OAC7DyG,GAAaO,GAAyC,CACrDtD,QAAAA,EACA0B,YAAAA,EACApF,MAAAA,EACAkF,WAAW,GACV,CCEA+B,CAAmBL,EAAQxB,YAAawB,EAAQM,WAAYlH,GAE9D,GAGK6G,GAAa,SAACM,EAAWL,GAC9B,IAAI9G,EAAQmH,EAIZ,OAHIL,IACH9G,GAAS,MAAQ8G,GAEX9G,CACR,64BC3BO,IAAMoH,GAAiB,SAACC,GAC9B,IAAMC,oWAAc,ID6BbX,ICzBP,GAAIU,EAAEE,SAAWC,QAAUH,EAAEI,SAAWD,OAAOE,SAASD,OACvD,OAAO,EAER,IAAMb,EAAUS,EAAEM,KAKlB,MAHyC,mBAA9BL,EAAYV,EAAQpD,OAC9B8D,EAAYV,EAAQpD,MAAMoD,EAAQ1E,UAE5B,CACR,qyDChBA,IACM0F,GAAa,2TAClB,WAAYC,GAAO,MAE4B,mGAF5B,UAClB,cAAMA,IACDlK,MAAQ,CAAEmK,MAAO,KAAMC,UAAW,MAAO,CAC/C,CAuBC,SAvBA,qCAED,SAAkBD,EAAOC,GACxBC,KAAKC,SAAS,CACbH,MAAOA,EACPC,UAAWA,GAEb,GAAC,oBAED,WACC,OAAIC,KAAKrK,MAAMoK,UAEb,wBAAKG,UAAW,iBACf,2BAAI,wBACJ,4BAASC,MAAO,CAAEC,WAAY,YAAcC,MAAM,GAChDL,KAAKrK,MAAMmK,OAASE,KAAKrK,MAAMmK,MAAMQ,WACtC,4BACCN,KAAKrK,MAAMoK,UAAUQ,iBAKnBP,KAAKH,MAAMW,QACnB,sFAAC,EA3BiB,CAASC,GAAAA,WA8B5Bb,GAAcc,UAAY,CACzBF,SAAUG,KAAAA,KAGX,YChCO,IAAM3E,GAAgB,SAACd,GAAI,OACjCuD,GAAanI,EAA+B,CAAE4E,KAAAA,GAAO,oDCHtD,SAAS0F,KACR,OACC,wBAAKV,UAAW,QACf,wBAAKA,UAAW,mBACf,wBAAKA,UAAW,YACf,wBAAKA,UAAU,WACd,8BAAO,sBACP,wBAAKW,KAAMC,GAAU,gBAM3B,CAEA,SAAeL,GAAAA,KAAWG,cChB1B,SAASG,GAAKlB,GACb,IAAQmB,EAAanB,EAAbmB,SAIR,OAAO,sBAAGd,UAFQ,CAAC,OAAQ,kBAEIe,KAAK,MAAOD,EAC5C,CAEAD,GAAKL,UAAY,CAChBM,SAAUL,KAAAA,OAAAA,YAGX,SAAeF,GAAAA,KAAWM,ICZ1B,SAASG,GAASrB,GACjB,IAAQsB,EACPtB,EADOsB,MAAOC,EACdvB,EADcuB,KAAMrK,EACpB8I,EADoB9I,WAAYiF,EAChC6D,EADgC7D,cAAeqF,EAC/CxB,EAD+CwB,SAAUC,EACzDzB,EADyDyB,WAGpDC,EAAa,CAAC,gBAapB,OAXIF,GACHE,EAAWrI,KAAK,yBAEboI,GACHC,EAAWrI,KAAK,2BAQhB,uBAAIgH,UAAWqB,EAAWN,KAAK,KAAMO,QALtC,WACMF,GAAYtF,EAAcjF,EAChC,GAIE,yBAAMmJ,UAAW,qBAChB,iBAAC,GAAI,CAACc,SAAUI,KAEhBD,EAGJ,CAEAD,GAASR,UAAY,CACpBS,MAAOR,KAAAA,OAAAA,WACPS,KAAMT,KAAAA,OAAAA,WACN5J,WAAY4J,KAAAA,OAAAA,WACZ3E,cAAe2E,KAAAA,KAAAA,WACfU,SAAUV,KAAAA,KAAAA,WACVW,WAAYX,KAAAA,KAAAA,YAGb,SAAeF,GAAAA,KAAWS,2OClC1B,SAASO,GAAI5B,GACZ,IAAQ6B,EAAuD7B,EAAvD6B,YAAaC,EAA0C9B,EAA1C8B,WAAY3F,EAA8B6D,EAA9B7D,cAAe4F,EAAe/B,EAAf+B,WAEhD,OACC,wBAAK1B,UAAW,WACf,uBAAIA,UAAW,mBACbyB,EAAWE,KAAI,SAACC,EAAO1H,GAAG,OAC1B,iBAAC,GAAQ,IACRA,IAAKA,EACLiH,WACGO,GAAcE,EAAM/K,aAAe2K,EAEtCJ,YAAaM,EACb5F,cAAeA,GACX8F,GACH,KAKP,CAEAL,GAAIf,UAAY,CACfgB,YAAaf,KAAAA,OAAAA,WACb3E,cAAe2E,KAAAA,KAAAA,WACfiB,WAAYjB,KAAAA,OACZgB,WAAYhB,KAAAA,QACXA,KAAAA,MAAgB,CACf1I,GAAI0I,KAAAA,OAAAA,WACJQ,MAAOR,KAAAA,OAAAA,WACPS,KAAMT,KAAAA,OAAAA,WACN5J,WAAY4J,KAAAA,OAAAA,eAKf,SAAeF,GAAAA,KAAWgB,ICtC1B,IAAMM,GAAS,SAAH,GAA4D,IAAtDvB,EAAQ,EAARA,SAAUc,EAAU,EAAVA,WAAYU,EAAU,EAAVA,WAAYR,EAAO,EAAPA,QAAShG,EAAI,EAAJA,KACtDyG,EAAgB,CAAC,UAMvB,MAJa,YAATzG,GAAoByG,EAAc/I,KAAK,kBAC9B,cAATsC,GAAsByG,EAAc/I,KAAK,oBACzCoI,GAAYW,EAAc/I,KAAK,qBAGlC,2BACCgH,UAAW+B,EAAchB,KAAK,KAC9BiB,SAAUZ,EACV9F,KAAM,SACN2G,KAAMH,EACNR,QAASA,GAERhB,EAGJ,EAEAuB,GAAOrB,UAAY,CAClBF,SAAUG,KAAAA,OAAAA,WACVW,WAAYX,KAAAA,KACZqB,WAAYrB,KAAAA,OAAAA,WACZnF,KAAMmF,KAAAA,OAAAA,WACNa,QAASb,KAAAA,KAAAA,YAGVoB,GAAOK,aAAe,CACrBd,YAAY,GAGb,YC9BA,IAEMe,GAAY,WAKjB,OACC,wBAAKnC,UAAW,aACf,wBAAKA,UAAW,yBACf,iBAAC,GAAI,CAACc,SAAU,kBAGjB,wBAAKd,UAAW,wBACf,iBAAC,GAAM,CACN8B,WAAY,YACZxG,KAAM,UACNgG,QAdkB,WACrBhC,OAAOa,KAJY,yCAIO,UAAUiC,OACrC,GAaI,eAML,EAEAD,GAAU3B,UAAY,CAAC,EAEvB2B,GAAUD,aAAe,CAAC,EAE1B,SAAe3B,GAAAA,KAAW4B,ICrC1B,cAAe,MAAO,CAAC,qBAAqB,UAAU,eAAe,SAAS,aAAa,UAAW,ECKtG,SAASE,KACR,IAAMC,EAAWC,KACjB,OACC,wBAAKvC,UAAW,YACf,wBAAKA,UAAW,uBAAuB,sBAClBsC,EAAS,sBAC7B,4BAAM,aACKA,EAAS,cAAc,IAAC,4BAAM,eAC5BA,EAAS,gBAAgB,IAAC,4BAAM,UACrC,IACR,sBACC3B,KAAM,sCACN6B,OAAQ,SACRC,IAAK,cACL,iBAML,CAEA,SAAelC,GAAAA,KAAW8B,qBCVbK,GAAa,SAAC5K,GAAwB,IAAjB0D,EAAU,UAAH,6CAAG,GAC3C,IAAK1D,EACJ,MAAM,IAAI0G,UAAU,sCAErB,IAAMxE,EAAU,CACfjC,IAAI4K,EAAAA,GAAAA,KACJ7K,MAAAA,EACA0D,QAAAA,GAED,OAAO+C,GAAahD,EAA6BvB,EAClD,EAEa0B,GAAa,SAAC3D,GAAgC,6DAAP,CAAC,EAApBD,EAAK,EAALA,MAAO0D,EAAO,EAAPA,QACvC,IAAKzD,EACJ,MAAM,IAAIyG,UAAU,sCAOrB,OAAOD,GAAahD,EALJ,CACfxD,GAAAA,EACAD,MAAAA,EACA0D,QAAAA,GAGF,ECvCaoH,GAAa,SAACnN,GAAK,OAAKA,EAAM2H,aAAa5B,OAAO,EAElDqH,GAAiB,SAACpN,GAAK,OAAKA,EAAM2H,aAAaF,WAAW,EAE1D4F,GAAW,SAACrN,GAAK,OAAKA,EAAM2H,aAAatF,KAAK,EAE9CmF,GAAc,SAACxH,GAAK,OAAKA,EAAM2H,aAAaH,WAAW,EAEvDD,GAAY,SAACvH,GAAK,OAAKA,EAAM2H,aAAaJ,SAAS,eCHhE,SAAS+F,GAAMpD,GACd,IAAQW,EAAyBX,EAAzBW,SAAU0C,EAAerD,EAAfqD,WAelB,OAbAC,EAAAA,GAAAA,YAAU,WACT,IAAMC,EAAiB,SAAC/D,GACT,WAAVA,EAAEjF,KACL8I,GAEF,EAGA,OAFA1D,OAAO6D,iBAAiB,QAASD,GAE1B,WACN5D,OAAO8D,oBAAoB,QAASF,EACrC,CACD,IAGC,4BAASlD,UAAW,sBACnB,wBACCA,UAAW,cACXsB,QAAS0B,EACT,cAAa,kBAEd,wBAAKhD,UAAW,wBAAyBM,GAG5C,CAEAyC,GAAMvC,UAAY,CACjBF,SAAUG,KAAAA,QAAAA,WACVuC,WAAYvC,KAAAA,KAAAA,YAGb,YClCA,IAAM4C,GAAS,SAAH,GAON,IANLC,EAAY,EAAZA,aACAC,EAAgB,EAAhBA,iBACAb,EAAU,EAAVA,WACA5K,EAAK,EAALA,MACA0D,EAAO,EAAPA,QACAoE,EAAK,EAALA,MAEM4D,EAAc1L,EAAQ,WAAaA,EAAQ,IAAM,cAMvD,OACC,wBAAKkI,UAAW,wBACf,wBAAKA,UAAW,oBAAqBwD,GACrC,wBAAKxD,UAAW,sBACf,iBAAC,GAAM,CACNsB,QAASgC,EACTxB,WAAY,SACZxG,KAAM,aACN,UAGD,iBAAC,GAAM,CACNgG,QAhBa,WAChBoB,EAAW5K,GAAS,aAAcyL,EACnC,EAeIzB,WAAY,SACZxG,KAAM,UACN8F,WAAwB,KAAZ5F,GAA4B,KAAVoE,GAC9B,WAML,EAEAyD,GAAO7C,UAAY,CAClB8C,aAAc7C,KAAAA,KAAAA,WACd8C,iBAAkB9C,KAAAA,OAClBjF,QAASiF,KAAAA,OACTb,MAAOa,KAAAA,OACPiC,WAAYjC,KAAAA,KAAAA,WACZ3I,MAAO2I,KAAAA,QAGR,iDCpBMgD,GAAe,SAACnL,GAAI,OAAKA,EAAK2J,KAAKyB,OAAO,EAAGpL,EAAK2J,KAAK0B,YAAY,KAAK,EAExEC,GAAc,SAACtL,GAAI,OAAKA,EAAKuL,KA/BV,KA+BiC,EAIpDC,GAAa,SAACxL,GAAI,OACO,IAA9BA,EAAKgD,KAAKyI,QAAQ,SAAsC,IAArBzL,EAAKgD,KAAK5C,MAAY,EAEpDsL,GAAmB,SAACC,GAAU,MACnC,kCACAC,EAAAA,GAAAA,GAASD,EAAY,CAAEE,MAAO,IAC9B,mCACAD,EAAAA,GAAAA,GA1CwB,MA0CG,CAAEC,MAAO,IACpC,IAAI,EAECC,GAAsB,SAAC9L,GAAI,MAChC,8BAAgCA,EAAKgD,KAAO,GAAG,EAE1C+I,GAAuB,WAAH,MAAS,mBAAmB,EAEtD,SAhDwB,SAACC,GACxB,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC5B,GAAIH,EAAS5L,OAAQ,CACpB,IAAMJ,EAAOgM,EAAS,GAElBV,GAAYtL,GACfmM,EAAOT,GAAiB1L,EAAKuL,OAClBC,GAAWxL,GAGtBA,EAAKoM,OACHC,MAAK,SAACC,GACNJ,EAAQ,CACPhJ,QAASoJ,EACT9M,MAAO2L,GAAanL,IAEtB,IACCuM,OAAM,SAAC1F,GACPsF,EAAOtF,EACR,IAXDsF,EAAOL,GAAoB9L,GAa7B,MACCmM,EAAOJ,KAET,GACD,ECzBA,IAEMS,GAAa,SAAH,GAAuB,IAAjBC,EAAU,EAAVA,WAWrB,OACC,4BACC,0BACCC,QAAS,mBACThF,UAAW,yBACX,eAGD,0BACCjI,GAAI,mBACJkK,KAAM,mBACN3G,KAAM,OACN0E,UAAW,sBACXiF,SAvBkB,SAACC,GACrBC,GAAgBD,EAAG1C,OAAO5K,OACxB+M,MAAK,SAACrM,GACNyM,EAAWzM,EAAKkD,QAASlD,EAAKR,MAC/B,IACC+M,OAAM,SAAC1F,GACP4F,EAAW5F,EACZ,GACF,EAgBGiG,OA3BiB,kDA+BrB,EAEAN,GAAWtE,UAAY,CACtBuE,WAAYtE,KAAAA,KAAAA,YAGb,YCpCA,SAAS4E,GAAM1F,GACd,IAAQnE,EAAoCmE,EAApCnE,QAASuJ,EAA2BpF,EAA3BoF,WAAY3D,EAAezB,EAAfyB,WAMvBkE,EAAa,CAAC,sBAMpB,OAJIlE,GACHkE,EAAWtM,KAAK,+BAIhB,kCACC,wBAAKgH,UAAW,oBACf,iBAAC,GAAI,CAACc,SAAU,oBAAqB,mBAErC,iBAAC,GAAI,CAACA,SAAU,qBAEjB,6BACCd,UAAWsF,EAAWvE,KAAK,KAC3BkE,SAnBc,SAAC9F,GACjB4F,EAAW5F,EAAEqD,OAAOrI,MACrB,EAkBGA,MAAOqB,EACPwG,SAAUZ,EACV,cAAa,cAIjB,CAEAiE,GAAM7E,UAAY,CACjBhF,QAASiF,KAAAA,OAAAA,WACTW,WAAYX,KAAAA,KAAAA,WACZsE,WAAYtE,KAAAA,KAAAA,YAGb4E,GAAMnD,aAAe,CAAC,EAEtB,YCzCA,SAASqD,GAAa5F,GACrB,IAAQzC,EAAuByC,EAAvBzC,YAAa0C,EAAUD,EAAVC,MAErB,OACC,wBAAKI,UAAW,qBACf,0BAAG,mFAEuB9C,EAAY,KACrC,4BAAM,kDAEN,4BAAM,kBAGP,0BAAG,IAAO0C,EAAM,KAChB,0BAAG,0GAON,CAEA2F,GAAa/E,UAAY,CACxBZ,MAAOa,KAAAA,OACPvD,YAAauD,KAAAA,OAAAA,YAGd8E,GAAarD,aAAe,CAAC,EAE7B,YC9BA,SAASsD,GAAiB7F,GACzB,IAAQ8F,EAAuD9F,EAAvD8F,eAAgBvI,EAAuCyC,EAAvCzC,YAAanF,EAA0B4H,EAA1B5H,GAAIkJ,EAAsBtB,EAAtBsB,MAAOG,EAAezB,EAAfyB,WAQ1CsE,EAAkB,CAAC,yBACnBC,EAAkB,CAAC,yBAOzB,OALIvE,IACHsE,EAAgB1M,KAAK,kCACrB2M,EAAgB3M,KAAK,mCAIrB,kCACC,0BACCgH,UAAW0F,EAAgB3E,KAAK,KAChCzF,KAAM,QACN2G,KAAM,cACNlK,GAAIA,EACJoC,MAAOpC,EACPkN,SAtBc,SAAC9F,GACZiC,GACJqE,EAAetG,EAAEqD,OAAOrI,MAE1B,EAmBGyL,QAAS1I,IAAgBnF,IAI1B,0BAAOiI,UAAW2F,EAAgB5E,KAAK,KAAMiE,QAASjN,GACpDkJ,GAIL,CAEAuE,GAAiBhF,UAAY,CAC5BiF,eAAgBhF,KAAAA,KAAAA,WAChBvD,YAAauD,KAAAA,OAAAA,WACb1I,GAAI0I,KAAAA,OAAAA,WACJQ,MAAOR,KAAAA,OAAAA,WACPW,WAAYX,KAAAA,KAAAA,YAGb+E,GAAiBtD,aAAe,CAAC,EAEjC,YC7CA,IAAMT,GAAa,CAClB,CACC1J,GAAI,OACJkJ,MAAO,UAER,CACClJ,GAAI,WACJkJ,MAAO,+BAER,CACClJ,GAAI,mBACJkJ,MAAO,4CAIT,SAAS4E,GAAoBlG,GAC5B,IAAQ8F,EAA4C9F,EAA5C8F,eAAgBvI,EAA4ByC,EAA5BzC,YAAa4I,EAAenG,EAAfmG,WAE/BC,EAAWtE,GAAWE,KAAI,SAACC,GAAK,OACrC,iBAAC,GAAgB,CAChB6D,eAAgBA,EAChB1N,GAAI6J,EAAM7J,GACVmC,IAAK0H,EAAM7J,GACXkJ,MAAOW,EAAMX,MACb/D,YAAaA,EACbkE,WAAY0E,GACX,IAGH,OACC,wBAAK9F,UAAW,mBAAmB,gBAEjC+F,EAGJ,CAEAF,GAAoBrF,UAAY,CAC/BsF,WAAYrF,KAAAA,KAAAA,WACZgF,eAAgBhF,KAAAA,KAAAA,WAChBvD,YAAauD,KAAAA,OAAAA,YAGdoF,GAAoB3D,aAAe,CAAC,EAEpC,YCnCA,SAAS8D,GAAarG,GACrB,IACC2D,EASG3D,EATH2D,aACA9H,EAQGmE,EARHnE,QACAkH,EAOG/C,EAPH+C,WACA1F,EAMG2C,EANH3C,UACAC,EAKG0C,EALH1C,YACA8H,EAIGpF,EAJHoF,WACAU,EAGG9F,EAHH8F,eACAvI,EAEGyC,EAFHzC,YACApF,EACG6H,EADH7H,MAGD,IAAKmF,EAAa,OAAO,KAEzB,IAAIsG,EAAmB,GACnB3D,EAAQ,GAEZ,IACC2D,GAAmB0C,EAAAA,GAAAA,IAAkBzK,EAAS,CAAE0B,YAAAA,GAGjD,CAFE,MAAOiC,GACRS,EAAQT,EAAET,OACX,CAEA,OACC,iBAAC,GAAK,CAACsE,WAAYM,GAClB,wBACCtD,UAAW,kCACX,cAAa,iBAEb,iBAAC,GAAM,CACNsD,aAAcA,EACdC,iBAAkBA,EAClB/H,QAASA,EACToE,MAAOA,EACP8C,WAAYA,EACZ5K,MAAOA,IAER,wBAAKkI,UAAW,4BACf,wBAAKA,UAAW,wBACf,iBAAC,GAAU,CAAC+E,WAAYA,KAEzB,wBAAK/E,UAAW,wBACf,iBAAC,GAAmB,CACnB9C,YAAaA,EACbuI,eAAgBA,EAChBK,YAA0B,IAAd9I,MAIf,wBACCgD,UACC,gEAGD,wBAAKA,UAAW,wBACf,iBAAC,GAAK,CACLxE,QAASA,EACTuJ,WAAYA,EACZ3D,WAAYpE,KAGd,wBAAKgD,UAAW,wBACf,wBAAKA,UAAW,oBACf,iBAAC,GAAI,CAACc,SAAU,oBAAqB,oBAErC,iBAAC,GAAI,CAACA,SAAU,qBAEjB,wBACCd,UAAW,wBACX,cAAa,eAEXJ,EAGD,iBAAC,GAAY,CACZ1C,YAAaA,EACb0C,MAAOA,IAJR2D,MAaR,CAEAyC,GAAaxF,UAAY,CACxB8C,aAAc7C,KAAAA,KAAAA,WACdjF,QAASiF,KAAAA,OAAAA,WACTiC,WAAYjC,KAAAA,KAAAA,WACZzD,UAAWyD,KAAAA,KAAAA,WACXxD,YAAawD,KAAAA,KAAAA,WACbsE,WAAYtE,KAAAA,KAAAA,WACZgF,eAAgBhF,KAAAA,KAAAA,WAChBvD,YAAauD,KAAAA,OAAAA,WACb3I,MAAO2I,KAAAA,QAGRuF,GAAa9D,aAAe,CAAC,EAE7B,YCvGA,IAAegE,EAAAA,GAAAA,KACd,SAACzQ,GAAK,MAAM,CACX+F,QAASoH,GAAWnN,GACpBuH,UAAWA,GAAUvH,GACrBwH,YAAaA,GAAYxH,GACzByH,YAAa2F,GAAepN,GAC5BqC,MAAOgL,GAASrN,GAChB,GAED,CACCsP,WxBpBwB,SAACvJ,EAAS1D,GAAK,OACxCyG,GAAaO,GAAwC,CAAEtD,QAAAA,EAAS1D,MAAAA,GAAQ,EwBoBvE2N,exBlB4B,SAACvI,GAAW,OACzCqB,GAAaO,GAA6C,CAAE5B,YAAAA,GAAc,EwBkBzEoG,axBH0B,WAAH,OACxB/E,GAAaO,GAAyC,EwBGrD4D,WAAAA,IAbF,CAeEsD,IC7BF,IACC,CACCjO,GAAI,OACJkJ,MAAO,OACPC,KAAM,SACNrK,WAAY,QAEb,CACCkB,GAAI,OACJkJ,MAAO,cACPC,KAAM,aACNrK,WAAY,QAEb,CACCkB,GAAI,QACJkJ,MAAO,oBACPC,KAAM,QACNrK,WAAY,SAEb,CACCkB,GAAI,SACJkJ,MAAO,iBACPC,KAAM,WACNrK,WAAY,WCTd,SAASsP,GAAIxG,GACZ,IACC9I,EAUG8I,EAVH9I,WACAN,EASGoJ,EATHpJ,mBACAI,EAQGgJ,EARHhJ,oBACAyP,EAOGzG,EAPHyG,cACAC,EAMG1G,EANH0G,eACAvK,EAKG6D,EALH7D,cACA4F,EAIG/B,EAJH+B,WAEA4E,EAEG3G,EAFH2G,QACAC,EACG5G,EADH4G,SAGKC,EAAoB,CAAC,WACvBjQ,GACHiQ,EAAkBxN,KAAK,uBAGxB,IAAMyN,EAAqB,CAAC,YAK5B,OAJI9P,GACH8P,EAAmBzN,KAAK,wBAIxB,wBAAKgH,UAAW,qBACf,iBAAC,GAAY,MACb,4BAASA,UAAWwG,EAAkBzF,KAAK,MAC1C,wBACCf,UAAW,kBACXsB,QAAS/K,EAAqB6P,EAAgB,MAE9C,iBAAC,GAAI,MACJE,GAEF,wBACCtG,UAAW,oBACXsB,QAAS8E,EACT,cAAa,qBAEb,yBAAMpG,UAAW,yBAChB,iBAAC,GAAI,CAACc,SAAU,2BAInB,4BAASd,UAAW,kBACnB,4BAASA,UAAW,oBACnB,iBAAC,GAAG,CACHyB,WAAYiF,GACZlF,YAAa3K,EACbiF,cAAeA,EACf4F,WAAYA,KAGd,4BAAS1B,UAAW,qBAClBL,EAAMW,WAGT,4BAASN,UAAWyG,EAAmB1F,KAAK,MAC3C,wBACCf,UAAW,qBACXsB,QAAS+E,EACT,cAAa,sBAEb,yBAAMrG,UAAW,0BAChB,iBAAC,GAAI,CAACc,SAAU,2BAGlB,wBACCd,UAAW,mBACXsB,QAAS3K,EAAsB0P,EAAiB,MAEhD,iBAAC,GAAS,MACTE,EACD,iBAAC,GAAQ,QAKd,CAEAJ,GAAI3F,UAAY,CACfF,SAAUG,KAAAA,QAEVlK,mBAAoBkK,KAAAA,KACpB9J,oBAAqB8J,KAAAA,KACrBiB,WAAYjB,KAAAA,OACZ2F,cAAe3F,KAAAA,KAAAA,WACf4F,eAAgB5F,KAAAA,KAAAA,WAEhB5J,WAAY4J,KAAAA,OAAAA,WACZ3E,cAAe2E,KAAAA,KAAAA,WAEf6F,QAAS7F,KAAAA,QAAAA,WACT8F,SAAU9F,KAAAA,QAAAA,YAGX0F,GAAIjE,aAAe,CAClB3L,oBAAoB,EACpBI,qBAAqB,GAGtB,YCpGA,IAAeuP,EAAAA,GAAAA,KACd,SAACzQ,GAAK,MAAM,CACXoB,WAAYD,EAAcnB,GAC1Bc,mBAAoBA,EAAmBd,GACvCkB,oBAAqBA,EAAoBlB,GACzCiM,WAAY5K,EAAcrB,GAC1B,GAED,CACC2Q,cvBd2B,WAAH,OAAS7H,GAAalI,EAA8B,EuBe5EgQ,evBb4B,WAAH,OAC1B9H,GAAajI,EAA+B,EuBa3CwF,cAAAA,IAXF,CAaEqK,4CCzBK,ozCCcA,SAASQ,GACfC,GAIA,OAAOC,GAAOD,EAHE,UAAH,6CAAG,CAAC,EACA,UAAH,8CAEwC,OACvD,CAEA,SAASC,GAAOD,EAASE,EAAeC,EAAgBC,GACvD,GAAID,EACH,OAAQD,EAActJ,aACrB,IAAK,eACJ,MAAwB,SAAjBwJ,EAA0BC,GAAOL,GAAWA,EACpD,IAAK,WACJE,EAAcI,gBAAiBC,EAAAA,GAAAA,MAC/B,IAAMC,EAAQC,GAAWT,EAASE,GAClC,MAAwB,SAAjBE,EAA0BC,GAAOG,GAASA,EAElD,IAAK,iBACJN,EAAcI,gBAAiBI,EAAAA,GAAAA,MAC/B,IAAMC,EACLF,GAAWT,EAAS,SAChBE,GAAa,IAChBI,gBAAgBI,EAAAA,GAAAA,MAChBE,mBAAoB,QACpBC,oBAAqB,QACrBC,wBAAwB,EACxBC,2BAA2B,EAC3BC,qBAAqBC,EAAAA,GAAAA,GAAqB,IACzCC,cAAe,EAACC,EAAAA,GAAAA,MAChBC,iBAAiB,EACjBC,gBACmC,SAAlCnB,EAAcmB,gBACX,WACAnB,EAAcmB,iBACfnB,OAGL,+EACD,MAAwB,SAAjBE,EAA0BC,GAAOM,GAASA,EAKpD,IAAMW,EAAgBb,GAAWT,EAASE,GAC1C,MAAwB,SAAjBE,EAA0BkB,EAAuBA,EAuBlCC,MAAM,sBAG1BxG,KAAI,SAACyG,GAAI,OAAKzL,GAAUyL,EAAK,IAC7BzG,KAAI,SAACyG,GAAI,MAAe,WAATA,EAAoB,GAAKA,CAAI,IAC5CrH,KAAK,KA3BR,CAEA,SAASsG,GAAWT,EAASE,GAC5B,IACC,IAAMuB,GAASC,EAAAA,GAAAA,IAAU1B,GACzB,OAAO2B,EAAAA,GAAAA,IAAaF,EAAQ,MACxBvB,GAIL,CAFE,MAAO3H,GACR,OAAOA,EAAET,OACV,CACD,CAEA,SAASuI,GAAOvC,GACf,OAAOA,EACL8D,MAAM,MACN7G,KAAI,SAACyG,GAAI,MAAe,KAATA,EAAc,SAAWA,CAAI,IAC5CzG,KAAI,SAACyG,GAAI,sCAA8BA,EAAI,cAC3CrH,KAAK,GACR,CC1Ee,SAAS0H,KACvB,IACMhT,EADQ6I,KACMoK,WAEdhH,EAAa5K,EAAcrB,GAC3BkT,EAAexQ,EAAO1C,EAAOiM,GAE7BoF,EAAgB,CACrBtJ,YAAa9C,GAAejF,EAAO,oBAAqB,eAExDgI,eAAgB/C,GACfjF,EACA,kBACA,kBAEDwS,gBAAiBvN,GAChBjF,EACA,kBACA,mBAEDkI,WAAYjD,GAAejF,EAAO,kBAAmB,cAErDmI,UAAWlD,GAAejF,EAAO,iBAAkB,aACnDoI,sBAAuBnD,GACtBjF,EACA,iBACA,yBAEDqI,UAAWpD,GAAejF,EAAO,iBAAkB,aACnDsI,iBAAkBrD,GACjBjF,EACA,iBACA,oBAEDuI,kBAAmBtD,GAClBjF,EACA,iBACA,sBAIImP,EDxCA,SACNgC,GAIA,OAAOC,GAAOD,EAHE,UAAH,6CAAG,CAAC,EACA,UAAH,8CAEwC,OACvD,CCkCqBgC,CAAaD,EAAanN,QAASsL,GAAe,GAChE+B,EAAwC,aAA9B/B,EAActJ,YAA6B,MAAQ,MAC7DsL,EAAW,GAAH,OAAMH,EAAa7Q,MAAK,YAAI+Q,GAEpCE,EAAO,IAAIC,KAAK,CAACpE,GAAc,CACpCtJ,KAAM,2BACN2N,QAAS,YAEVC,EAAAA,GAAAA,QAAOH,EAAMD,EACd,CCrDA,SAASK,GAAaxJ,GACrB,IACCyJ,EAKGzJ,EALHyJ,cAAa,EAKVzJ,EAJH0J,aAAAA,OAAY,IAAG,OAAI,EACnBC,EAGG3J,EAHH2J,aAAY,EAGT3J,EAFH4J,YAAAA,OAAW,IAAG,WAAQ,EACtBjJ,EACGX,EADHW,SAGD,OACC,iBAAC,GAAK,CAAC0C,WAAYsG,GAClB,4BAAStJ,UAAW,6BACnB,wBAAKA,UAAW,2BAA4BM,GAC5C,wBAAKN,UAAW,2BACf,iBAAC,GAAM,CACNsB,QAASgI,EACThO,KAAM,YACNwG,WAAY,UAEXyH,GAEF,iBAAC,GAAM,CACNjI,QAAS8H,EACT9N,KAAM,UACNwG,WAAY,WAEXuH,KAMP,CAEAF,GAAa3I,UAAY,CACxB4I,cAAe3I,KAAAA,KAAAA,WACf4I,aAAc5I,KAAAA,OACd6I,aAAc7I,KAAAA,KAAAA,WACd8I,YAAa9I,KAAAA,OACbH,SAAUG,KAAAA,KAAAA,YAGX,YC3CA,SAAS+I,GAAmB7J,GAC3B,IAAQ3I,EAAoD2I,EAApD3I,SAAU2E,EAA0CgE,EAA1ChE,WAAY8N,EAA8B9J,EAA9B8J,WAAYC,EAAkB/J,EAAlB+J,cAE1C,IAAKD,EACJ,OAAO,KASR,OACC,iBAAC,GAAY,CACZL,cAPoB,WACrBM,GAAc,GACd/N,EAAW3E,EACZ,EAKEqS,aAAc,SACdC,aAVmB,WAAH,OAASI,GAAc,EAAM,GAW7C,6CAEA,4BAAM,gCAIT,CAEAF,GAAmBhJ,UAAY,CAC9B7E,WAAY8E,KAAAA,KAAAA,WACZgJ,WAAYhJ,KAAAA,KAAAA,WACZzJ,SAAUyJ,KAAAA,OAAAA,WACViJ,cAAejJ,KAAAA,KAAAA,YAGhB,YCjCA,SAASkJ,GAAgBhK,GACxB,IAAQuB,EAAmCvB,EAAnCuB,KAAMwD,EAA6B/E,EAA7B+E,KAAM5K,EAAuB6F,EAAvB7F,OAAQsH,EAAezB,EAAfyB,WAEtBC,EAAa,CAAC,qBAEhBD,GACHC,EAAWrI,KAAK,gCAQjB,OACC,yBAAMgH,UAAWqB,EAAWN,KAAK,KAAMO,QAPpB,WACdF,GACJtH,GAEF,GAIE,yBAAMkG,UAAW,0BAChB,iBAAC,GAAI,CAACc,SAAUI,IAAQ,IAAEwD,GAI9B,CAEAiF,GAAgBnJ,UAAY,CAC3BU,KAAMT,KAAAA,OAAAA,WACNiE,KAAMjE,KAAAA,OAAAA,WACN3G,OAAQ2G,KAAAA,KAAAA,WACRW,WAAYX,KAAAA,KAAAA,YAGb,SAAeF,GAAAA,KAAWoJ,2OC9B1B,SAASC,GAAYjK,GACpB,IACC3I,EAOG2I,EAPH3I,SACAyE,EAMGkE,EANHlE,WACAE,EAKGgE,EALHhE,WACAkO,EAIGlK,EAJHkK,aACAC,EAGGnK,EAHHmK,YACAC,EAEGpK,EAFHoK,aAIKC,EAAa,CAClB,CACC9I,KAAM,SACNwD,KAAM,SACN5K,OAAQgQ,EACR1I,YAAY,GAEb,CACCF,KAAM,aACNwD,KAAM,MACN5K,OAAQ2B,EACR2F,YAAY,GAEb,CACCF,KAAM,SACNwD,KAAM,SACN5K,OAAQ+P,EACRzI,YAAapK,GAEd,CACCkK,KAAM,SACNwD,KAAM,SACN5K,OAAQ6B,EACRyF,YAAapK,GAEd,CACCkK,KAAM,QACNwD,KAAM,QACN5K,OA9BE6F,EADHsK,UAgCC7I,YAAapK,GAEd,CACCkK,KAAM,WACNwD,KAAM,SACN5K,OAAQiQ,EACR3I,YAAapK,IAIf,OACC,wBAAKgJ,UAAW,2BACdgK,EAAWrI,KAAI,SAAC7H,EAAQI,GAAG,OAC3B,iBAAC,GAAe,MAAKJ,EAAM,CAAEI,IAAKA,IAAO,IAI7C,CAEA0P,GAAYpJ,UAAY,CACvBxJ,SAAUyJ,KAAAA,OACVhF,WAAYgF,KAAAA,KAAAA,WACZ9E,WAAY8E,KAAAA,KAAAA,WACZoJ,aAAcpJ,KAAAA,KAAAA,WACdsJ,aAActJ,KAAAA,KAAAA,WACdwJ,UAAWxJ,KAAAA,KAAAA,WACXqJ,YAAarJ,KAAAA,KAAAA,YAGd,SAAeF,GAAAA,KAAWqJ,uiCCvE1B,SAASM,GAAUvK,GAClB,IAA+C,MAArBwK,EAAAA,GAAAA,UAASxK,EAAM7H,OAAM,GAAxCA,EAAK,KAAEsS,EAAQ,KAGrBrP,EAOG4E,EAPH5E,OACAsP,EAMG1K,EANH0K,WACAC,EAKG3K,EALH2K,UACAlT,EAIGuI,EAJHvI,aACAkF,EAGGqD,EAHHrD,WACAuN,EAEGlK,EAFHkK,aACAnO,EACGiE,EADHjE,WAGK6O,EAAY,CAAC,oBACfF,GACHE,EAAUvR,KAAK,+BAEZsR,GACHC,EAAUvR,KAAK,8BAGhB,IAAMwR,EAAWjK,GAAAA,YAgDjB,SAASkK,EAAUC,GAGlBhP,EAAWX,EAAQ,CAClBjD,MAHD4S,EAAWA,GAAYtT,IAKvBgT,EAASM,GAETF,EAASG,QAAQC,WAAa,CAC/B,CAEA,OAzDA3H,EAAAA,GAAAA,YAAU,WACLqH,GACHE,EAASG,QAAQvI,OAEnB,GAAG,CAACkI,EAAWE,IAsDd,uBACCxK,UAAWuK,EAAUxJ,KAAK,KAC1BO,QAtDF,WACM+I,GACJ/N,EAAWvB,EAEb,EAmDE8P,cAjDF,SAA2B1L,GACrBmL,IACJT,EAAa9O,GACboE,EAAEqD,OAAOsI,SAEX,GA8CE,0BACC9K,UAAW,yBACX+K,IAAKP,EACLlP,KAAM,OACNnB,MAAOrC,EACPkT,SAAUV,EAAY,KAAO,WAC7BW,UAAWX,EAAY,YAAc,KACrCrF,SAzCH,SAAsB9F,GACrBiL,EAASjL,EAAEqD,OAAOrI,MACnB,EAwCG+Q,OAhCH,SAAoB/L,GACfmL,GAEHG,EADiBtL,EAAEqD,OAAOrI,MAG5B,EA4BGgR,QAvCH,SAAqBhM,GAChBmL,GACHnL,EAAEqD,OAAOsI,QAEX,EAoCGM,WAtDH,SAAwBjM,GACnBmL,GAAyB,KAAZnL,EAAEkM,QAClBlM,EAAEmM,iBACFhM,OAAOiM,eAAeC,kBAGtBf,EADiBtL,EAAEqD,OAAOrI,OAG5B,IAkDD,CAEA+P,GAAU1J,UAAY,CACrB1I,MAAO2I,KAAAA,OAAAA,WACP1F,OAAQ0F,KAAAA,OAAAA,WACR4J,WAAY5J,KAAAA,KAAAA,WACZ6J,UAAW7J,KAAAA,KAAAA,WACXrJ,aAAcqJ,KAAAA,OAAAA,WACdnE,WAAYmE,KAAAA,KAAAA,WACZoJ,aAAcpJ,KAAAA,KAAAA,WACd/E,WAAY+E,KAAAA,KAAAA,YAGb,+iCCxGA,SAASgL,GAAY9L,GACpB,IAAmD,MAAfwK,EAAAA,GAAAA,WAAS,GAAM,GAA5CV,EAAU,KAAEC,EAAa,KAG/BgC,EAYG/L,EAZH+L,UACA1U,EAWG2I,EAXH3I,SACAE,EAUGyI,EAVHzI,QACAE,EASGuI,EATHvI,aAEAqE,EAOGkE,EAPHlE,WACAE,EAMGgE,EANHhE,WACAkO,EAKGlK,EALHkK,aACAC,EAIGnK,EAJHmK,YACAxN,EAGGqD,EAHHrD,WACAZ,EAEGiE,EAFHjE,WACAI,EACG6D,EADH7D,cAGD,OACC,wBAAKkE,UAAW,eACf,iBAAC,GAAkB,CAClBrE,WAAYA,EACZ8N,WAAYA,EACZzS,SAAUA,EACV0S,cAAeA,IAEhB,wBAAK1J,UAAW,2BACf,yBAAMA,UAAW,oBAChB,iBAAC,GAAI,CAACc,SAAU,gBAIlB,wBAAKd,UAAW,0BACf,iBAAC,GAAW,CACXhJ,SAAUA,EACVyE,WAAY,kBAAMA,EAAWrE,EAAa,EAC1CuE,WAAY,kBAAM+N,GAAc,EAAK,EACrCG,aAAc,kBAAMA,EAAa7S,EAAS,EAC1C8S,YAAa,kBAAMA,GAAa,EAChCC,aAAc,WACbjO,EAAc,UACd6P,YAAW,kBAAMlD,IAA0B,GAAE,EAC9C,EACAwB,UAAW,WACVnO,EAAc,SACd6P,YAAW,kBAAMrM,OAAOpG,OAAO,GAAE,EAClC,IAED,uBAAI8G,UAAW,2BACb0L,EAAU/J,KAAI,SAACrJ,GAAI,OACnB,iBAAC,GAAS,CACTR,MAAOQ,EAAKR,MACZV,aAAcA,EACd2D,OAAQzC,EAAKP,GACbsS,WAAYrT,IAAasB,EAAKP,GAC9BuS,UAAWpT,IAAYoB,EAAKP,GAC5BuE,WAAYA,EACZZ,WAAYA,EACZmO,aAAcA,EACd3P,IAAK5B,EAAKP,IACT,MAMR,CAEA0T,GAAYjL,UAAY,CACvBkL,UAAWjL,KAAAA,QACVA,KAAAA,MAAgB,CACf3I,MAAO2I,KAAAA,OAAAA,WACP1I,GAAI0I,KAAAA,OAAAA,cAEJmL,WACF5U,SAAUyJ,KAAAA,OAAAA,WACVvJ,QAASuJ,KAAAA,OAAAA,WACTrJ,aAAcqJ,KAAAA,OAAAA,WAEdnE,WAAYmE,KAAAA,KAAAA,WACZhF,WAAYgF,KAAAA,KAAAA,WACZ9E,WAAY8E,KAAAA,KAAAA,WACZoJ,aAAcpJ,KAAAA,KAAAA,WACdqJ,YAAarJ,KAAAA,KAAAA,WACb/E,WAAY+E,KAAAA,KAAAA,WACZ3E,cAAe2E,KAAAA,KAAAA,YAGhB,YCnFA,IAAeyF,EAAAA,GAAAA,KACd,SAACzQ,GAAK,MAAM,CACXuB,SAAUF,EAAcrB,GACxByB,QAASD,EAAaxB,GACtB2B,aAAcD,EAAgB1B,GAC9BiW,UAAWrU,EAAa5B,GACxB,GAED,CACC6G,WTtBwB,SAACvE,GAAE,OAC5BwG,GAAaO,EAAuC,CAAE/G,GAAAA,GAAK,ESsB1D0D,WxBtBwB,SAAC3D,GAAwB,IAAjB0D,EAAU,UAAH,6CAAG,GAC3C,IAAK1D,EACJ,MAAM,IAAI0G,UAAU,sCAErB,IAAMxE,EAAU,CACfjC,IAAI4K,EAAAA,GAAAA,KACJ7K,MAAAA,EACA0D,QAAAA,GAED,OAAO+C,GAAahD,EAA6BvB,EAClD,EwBaE2B,WxBawB,SAAC5D,GAC1B,OAAOwG,GAAahD,EAA6B,CAAExD,GAAAA,GACpD,EwBdE2D,WAAAA,GACAmO,aTvB0B,SAAC9R,GAAE,OAC9BwG,GAAaO,GAAyC,CAAE/G,GAAAA,GAAK,ESuB5D+D,cAAAA,GACAgO,YrCtByB,WAAH,OACvBvL,GAAaO,GAAyC,CACrD9B,WAAW,GACV,GqCIH,CAiBEyO,qBChCa,SAASI,GAAWC,GAClC,OAAOjP,KAAAA,SAAmBiP,EAC3B,CCMA,SAASC,GAAapM,GACrB,IAAQnE,EAA4BmE,EAA5BnE,QAASuL,EAAmBpH,EAAnBoH,eAgBXhB,EAAWY,GAAanL,EAdRL,IAAMwE,EAAO,CAClC,cAEA,iBACA,kBACA,aAEA,YACA,wBACA,YACA,mBACA,sBAGqDoH,GAEtD,OACC,wBAAK/G,UAAW,gBACf,wBACCgM,wBAAyB,CACxBC,OAAQJ,GAAW9F,MAKxB,CAEAgG,GAAavL,UAAY,CACxBuG,eAAgBtG,KAAAA,KAAAA,WAChBjD,YAAaiD,KAAAA,OAAAA,WACbjF,QAASiF,KAAAA,QAGVsL,GAAa7J,aAAe,CAC3B1G,QAAS,GACTuL,gBAAgB,GAGjB,YC7CA,IAAeb,EAAAA,GAAAA,KAAQ,SAACzQ,GAAK,MAAM,CAElCgI,eAAgB/C,GAAejF,EAAO,kBAAmB,kBACzDwS,gBAAiBvN,GAChBjF,EACA,kBACA,wBAEDkI,WAAYjD,GAAejF,EAAO,kBAAmB,cAGrD+H,YAAa9C,GAAejF,EAAO,oBAAqB,eACxDmI,UAAWlD,GAAejF,EAAO,iBAAkB,aACnDoI,sBAAuBnD,GACtBjF,EACA,iBACA,yBAEDqI,UAAWpD,GAAejF,EAAO,iBAAkB,aACnDsI,iBAAkBrD,GACjBjF,EACA,iBACA,oBAEDuI,kBAAmBtD,GAClBjF,EACA,iBACA,qBAED,GA7BD,CA6BIsW,IC5BJ,SAASG,GAAcvM,GACtB,IAAQgJ,EAAiBhJ,EAAjBgJ,aAIR,OACC,wBAAK3I,UAHa,CAAC,iBAGQe,KAAK,MAC/B,iBAAC,GAAY,CAACvF,QAASmN,EAAanN,UAGvC,CAEA0Q,GAAc1L,UAAY,CACzBmI,aAAclI,KAAAA,OAAAA,YAGf,8FCYA,SAjCqB,IAAI0L,GAAAA,GAAO,CAC/BC,MAAO,CACNC,IAAK,CACJ7Q,QAAS,UAGV8Q,UAAW,CACV9Q,QAAS,UACT+Q,MAAO,QACPC,SAAU,CAAC,CAAEC,IAAK,MAClBC,MAAK,WACJ,MAAO,CAAC,IAAK,EACd,GAGDC,WAAY,CACXC,QAAQ,EACRL,MAAO,SACPM,YAAY,EACZL,SAAU,CAAC,CAAEC,IAAK,OAGlBC,MAAK,WACJ,MAAO,CAAC,KACT,GAGDhI,KAAM,CACL6H,MAAO,uBC3BK,SAASO,GAAYrX,GAGnC,OAFaA,EAAMsX,SAEPV,IAAI7Q,QACdmG,KAAI,SAAC2K,GACL,OAAKA,EAAU9Q,QAGR8Q,EAAU9Q,QAAQhC,QAAO,SAACC,EAAKkR,GAErC,OADAlR,GAAOkR,EAAQjG,MAAQ,IAExB,GAAG,IALK,EAMT,IACC3D,KAAK,KACR,CCRe,SAASiM,GAAWC,GAMlC,OAAOpQ,KAAAA,SAAmBoQ,EALX,CACdnQ,aAAc,CAAC,IAAK,SACpBC,cAAc,GAIhB,WC0BA,SAASmQ,GAAsBvN,GAC9B,IAoEoBxF,EACd4Q,EArEEoC,EAA8CxN,EAA9CwN,eAAgBC,EAA8BzN,EAA9ByN,cAAe1R,EAAeiE,EAAfjE,WAEjC2R,GAAaC,EAAAA,GAAAA,UACbC,GAAYD,EAAAA,GAAAA,UACZE,GAgEcrT,EAhEegT,EAiE7BpC,GAAMuC,EAAAA,GAAAA,WACZrK,EAAAA,GAAAA,YAAU,WACT8H,EAAIJ,QAAUxQ,CACf,IACO4Q,EAAIJ,SAnDX,SAAS8C,IACR,OAAOJ,EAAW1C,SAAW0C,EAAW1C,QAAQ+C,IAAIC,UACrD,CAEA,SAASC,IACRP,EAAW1C,QAAQ+C,IAAIC,WAAWE,YAAYR,EAAW1C,QAAQ+C,IAClE,CAuBA,OArBAzK,EAAAA,GAAAA,YAAU,WACT,IAnBCkK,GACEE,EAAW1C,SAAW6C,IAAmBL,EAMrCM,MAAmBN,GA4BzBS,QAhByB,CACrBH,KACHG,IAGD,IAAME,EA9DT,SAA2BV,GAC1B,OAAOW,GAAAA,GAAAA,OAAmB,CACzB1B,IAAK2B,GAAAA,GAAAA,WACQC,IACX3Y,OCf8BoP,EDed0I,ECdbxQ,EAAOiP,GAAWnH,GACtB8D,MAAM,MACN7G,KAAI,SAACyG,GAAI,mBAAWA,EAAI,WACxBrH,KAAK,IAEDmN,EAAMC,SAASC,cAAc,OACnCF,EAAIG,UAAYxC,GAAWjP,GAEpBsR,GDM4B,CAAEI,mBAAoB,SACxDC,QEjBM,EACNC,EAAAA,GAAAA,OACAC,EAAAA,GAAAA,GAAO,CAAE,QAASC,GAAAA,GAAM,QAASC,GAAAA,MACjCF,EAAAA,GAAAA,GAAOG,GAAAA,ODFM,IAAmBlK,EAC3B9H,EAKAsR,CDYP,CAuDuBW,CAAkBzB,GACtCC,EAAW1C,QAtDd,SAA0BmD,EAAapS,EAAYX,GAClD,OAAO,IAAI+T,GAAAA,GAAW,KAAM,CAC3BrZ,MAAOqY,EACPiB,oBAAqB,SAA6BC,GACjD,MACClP,KAAKrK,MAAMwZ,iBAAiBD,GADrBvZ,EAAK,EAALA,MAAOyZ,EAAY,EAAZA,aAGfpP,KAAKqP,YAAY1Z,GAEbyZ,EAAaE,MAAK,SAACC,GAAE,OAAKA,EAAGC,UAAU,KAC1C5T,EAAWX,EAAQ,CAAES,QAASsR,GAAYrX,IAE5C,GAEF,CAwCwB8Z,CACpBzB,EACApS,EACAyR,GAEDI,EAAU5C,QAAQ6E,YAAYnC,EAAW1C,QAAQ+C,KAGjDR,GAAsBG,WAAaA,EAAW1C,OAC/C,CAGD,IAEO,wBAAK3K,UAAW,qBAAsB+K,IAAKwC,GACnD,CAEAL,GAAsBhL,aAAe,CACpCiL,eAAgB,GAChBC,cAAe,IAGhBF,GAAsB1M,UAAY,CACjC2M,eAAgB1M,KAAAA,OAChB2M,cAAe3M,KAAAA,OACf/E,WAAY+E,KAAAA,KAAAA,YAGb,YGjGA,SAASgP,GAAa9P,GACrB,IAAQgJ,EAAoChJ,EAApCgJ,aAAcjN,EAAsBiE,EAAtBjE,WAEhBgU,EAAoB,CACzB,qBACA,WAJ2C/P,EAAVpC,MAKjC,uBAGD,OACC,kCACC,wBAAKyC,UAAW,sBACf,wBAAKA,UAAW,2BACf,iBAAC,GAAI,CAACc,SAAU,oBAAqB,qBAErC,sBACCH,KACC,qDAED6B,OAAQ,SACRC,IAAK,aACLzC,UAAW,SACX,YAEG,IAEJ,iBAAC,GAAI,CAACc,SAAU,qBAEjB,wBAAKd,UAAW,4BACf,iBAAC,GAAI,CAACc,SAAU,oBAAqB,iBAErC,iBAAC,GAAI,CAACA,SAAU,sBAGlB,iBAAC,KAAU,KACV,wBAAKd,UAAW,cACf,iBAAC,KAAc,CAACuM,MAAO,KACtB,wBAAKvM,UAAW,qBACf,iBAAC,GAAqB,CACrBoN,cAAezE,EAAanN,QAC5BE,WAAYA,EACZyR,eAAgBxE,EAAa5Q,OAIhC,iBAAC,KAAc,CAACwU,MAAO,KACtB,wBAAKvM,UAAW0P,EAAkB3O,KAAK,MACtC,iBAAC,GAAa,CAAC4H,aAAcA,QAOpC,CAEA8G,GAAajP,UAAY,CACxBmI,aAAclI,KAAAA,OACdlD,MAAOkD,KAAAA,OAAAA,WACP/E,WAAY+E,KAAAA,KAAAA,YAGb,YCnEA,IAAeyF,EAAAA,GAAAA,KAAQ,SAACzQ,GAAK,MAAM,CAClC8H,MAAO7C,GAAejF,EAAO,oBAAqB,SAClD,GAFD,CAEIga,ICDJ,SAASE,GAAchQ,GACtB,IAAQgJ,EAAiBhJ,EAAjBgJ,aAEFiH,EAAmBrP,GAAAA,YAEnBsP,EAAY,SAAC1Q,IACbA,EAAE2Q,SAAW3Q,EAAE4Q,UAAoC,MAAxB5Q,EAAEjF,IAAIhC,gBACrCiH,EAAEmM,iBACFhM,OAAOiM,eAAeyE,kBAAkBJ,EAAiBjF,SAE3D,EASA,OAPA1H,EAAAA,GAAAA,YAAU,WAET,OADA3D,OAAO6D,iBAAiB,UAAW0M,GAC5B,WACNvQ,OAAO8D,oBAAoB,UAAWyM,EACvC,CACD,IAGC,wBACC7P,UAAW,iCACX+K,IAAK6E,GAEL,iBAAC,GAAY,CACZpU,QAASmN,EAAanN,QACtBuL,gBAAgB,IAIpB,CAEA4I,GAAcnP,UAAY,CACzBmI,aAAclI,KAAAA,OAAAA,YAGf,YCpCA,SAASwP,GAAatQ,GACrB,IAAQpC,EAAgDoC,EAAhDpC,MAAOoL,EAAyChJ,EAAzCgJ,aAAc1K,EAA2B0B,EAA3B1B,SAAUC,EAAiByB,EAAjBzB,aAEjCgS,EAAoB,CAAC,wBAC3BA,EAAkBlX,KAAK,WAAauE,GACpC2S,EAAkBlX,KAAK,mBAAqBiF,GAE5C,IAAMoD,EAAa,CAAC,gBAGpB,OAFAA,EAAWrI,KAAK,yBAA2BkF,GAG1C,wBACC8B,UAAWkQ,EAAkBnP,KAAK,KAClC,cAAa,wBAEb,wBAAKf,UAAW,wBACf,wBACCA,UAAWqB,EAAWN,KAAK,KAC3B,cAAa,gBAEb,iBAAC,GAAY,CAACvF,QAASmN,EAAanN,YAKzC,CAEAyU,GAAazP,UAAY,CACxBjD,MAAOkD,KAAAA,OAAAA,WACPxC,SAAUwC,KAAAA,OAAAA,WACVkI,aAAclI,KAAAA,OAAAA,WACdvC,aAAcuC,KAAAA,OAAAA,YAGf,YCnCA,IAAeyF,EAAAA,GAAAA,KAAQ,SAACzQ,GAAK,MAAM,CAClC8H,MAAO7C,GAAejF,EAAO,oBAAqB,SAClDwI,SAAUvD,GAAejF,EAAO,iBAAkB,YAClDyI,aAAcxD,GAAejF,EAAO,iBAAkB,gBACtD,GAJD,CAIIwa,4CCLJ,SAASE,GAAKxQ,GACb,IACCyQ,EAKGzQ,EALHyQ,WACAC,EAIG1Q,EAJH0Q,gBACAC,EAGG3Q,EAHH2Q,aACAlS,EAEGuB,EAFHvB,gBACAH,EACG0B,EADH1B,SAGKsS,EAAsBF,EAAgB1O,KAAI,SAAC6O,EAAaC,GAC7D,IAAMC,EAAiBF,EAAYzP,KAAK,IAExC,OACC,wBACC7G,IAAKuW,EACLzQ,UAAW,0BACX,cAAa,0BACbgM,wBAAyB,CAAEC,OAAQJ,GAAW6E,KAGjD,IAEMC,EAAc,CAAC,qBACrBA,EAAY3X,KAAK,sBAAwBsX,GACzCK,EAAY3X,KAAK,mBAAqBiF,GACtC0S,EAAY3X,KAAK,UAEjB,IAAM4X,EAA4B,CAAC,mCAKnC,OAJAA,EAA0B5X,KACzB,2CAA6CoF,GAI7C,wBACC4B,UAAW2Q,EAAY5P,KAAK,KAC5B,cAAa,qBAEb,wBACCf,UAAW4Q,EAA0B7P,KAAK,KAC1C,cAAa,mCAEb,wBAAKf,UAAW,4BACdoQ,EACD,wBAAKpQ,UAAW,kCACduQ,KAMP,CACAJ,GAAKjO,aAAe,CACnBmO,gBAAiB,IAElBF,GAAK3P,UAAY,CAChB4P,WAAY3P,KAAAA,QACZ4P,gBAAiB5P,KAAAA,QAAkBA,KAAAA,QAAkBA,KAAAA,SACrD6P,aAAc7P,KAAAA,OAAAA,WACdrC,gBAAiBqC,KAAAA,OAAAA,WACjBxC,SAAUwC,KAAAA,OAAAA,YAGX,SAAeF,GAAAA,KAAW4P,IChE1B,SAASU,GAAWlR,GACnB,IAAQ7H,EAAU6H,EAAV7H,MAER,OAAO,wBAAKkI,UAAW,2BAA4BlI,EACpD,CACA+Y,GAAW3O,aAAe,CACzBmO,gBAAiB,IAElBQ,GAAWrQ,UAAY,CACtB1I,MAAO2I,KAAAA,OAAAA,YAGR,SAAeF,GAAAA,KAAWsQ,ICf1B,IAAMC,GAAa,CAClBC,UAAW,cACXC,UAAW,cACXC,SAAU,eAeI,SAASC,GACvBC,EAAkB,GASjB,IAPAjT,EAAY,EAAZA,aACAkT,EAAe,EAAfA,gBACAC,EAAgB,EAAhBA,iBACAlT,EAAoB,EAApBA,qBAAoB,IACpBmT,0BAAAA,OAAyB,IAAG,GAAI,MAChCC,iBAAAA,OAAgB,IAAG,GAAI,EAGlB9a,EAmGP,SAAuB,GAAqD,IAAnD2a,EAAe,EAAfA,gBAAiBC,EAAgB,EAAhBA,iBAAkBnT,EAAY,EAAZA,aACrDsT,EAAkB,GAEpBC,EAAY,EACZC,EAAc,EACdC,EAAkBC,IAClBC,EAAsB,EAK1B,SAASC,EAAYC,GACpBA,EAAOC,SAAQ,SAAC5J,GACX6J,EAAmBJ,EAAsBzJ,EAAK8J,SACjDC,IAEDX,EAAgBC,GAAWC,GAAa1Y,KAAKoP,EAAK5M,SAClDqW,GAAuBzJ,EAAK8J,MAC7B,GACD,CAEA,SAASN,IACR,OAAqB,IAAdH,GAAmBL,EACvBA,EACAC,CACJ,CAEA,SAASY,EAAmBG,GAC3B,OAAOA,EAAaT,CACrB,CAEA,SAASQ,IACJE,KACHZ,IACAD,EAAgBC,GAAa,GAC7BC,EAAc,GAEdA,IAEDF,EAAgBC,GAAWC,GAAe,GAC1CG,EAAsB,EACtBF,EAAkBC,GACnB,CAEA,SAASS,IACR,OAAOX,IAAgBxT,EAAe,CACvC,CAEA,OAxCAsT,EAAgBC,GAAa,GAC7BD,EAAgBC,GAAWC,GAAe,GAuCnC,CACNY,OAAM,SAACP,GACND,EAAYC,EACb,EAEAQ,mBAAkB,SAACR,GAClBI,IACAL,EAAYC,EACb,EAEAS,oBAAmB,SAACC,GACnB,OAAOZ,EAAsBY,GAAgBd,CAC9C,EAEAe,iBAAgB,SAACD,GAKhB,OAAOA,IAHQ,IAAdhB,GAAmBC,EAAcxT,GAAgBkT,EAC9CA,EACAC,EAEL,EAEAsB,IAAG,WACF,OAAOnB,CACR,EAEF,CA7KgBoB,CAAc,CAC5B1U,aAAAA,EACAkT,gBAAAA,EACAC,iBAAAA,EACAC,0BAAAA,IAGGS,EAAS,GACTU,EAAe,EAqCnB,OAnCmBrB,GAAmBC,GAErB,GAChBF,EAAmBa,SAAQ,SAAC5J,EAAMyK,IAuCpC,SAA0Bpc,EAAQ2R,EAAM2J,EAAQT,GAC/C,QACCwB,GAAY1K,KACX3R,EAAO+b,oBAAoBpK,EAAK8J,SACf,IAAlBH,EAAOrZ,SACuB,IAA9B4Y,EAEF,EA5CIyB,CACCtc,EACA2R,EACA2J,EACAT,KAGDS,EAAO/Y,KAAKoP,GACZqK,GAAgBrK,EAAK8J,QAIrBH,EAAOrZ,OAAS,GAkCpB,SACCsa,EACAC,EAAQ,GAEP,IADC1B,EAAgB,EAAhBA,iBAAkBpT,EAAoB,EAApBA,qBAEpB,GAAI2U,GAAYE,KAAiBC,EAChC,OAAO,EAGR,IAAMC,EAiBP,SAAqB9K,GACpB,OAAO+K,GAAS/K,EAAK5M,QAASsV,GAAWE,UAC1C,CAlBEoC,CAAYJ,IAoBd,SAAoB5K,GACnB,OAAO+K,GAAS/K,EAAK5M,QAASsV,GAAWG,SAC1C,CAtB8BoC,CAAWJ,GACxC,IAAyB,IAArB1B,GAA6B2B,EAChC,OAAO,EAGR,IAAMI,EAAmBR,GAAYG,GACrC,IAA6B,IAAzB9U,IAAkCmV,EACrC,OAAO,EAER,OAAO,CACR,CArDIC,CAAYnL,EAAM+I,EAAmB0B,EAAY,GAAI,CACpDtB,iBAAAA,EACApT,qBAAAA,MAGG1H,EAAO+b,oBAAoBC,GAC9Bhc,EAAO6b,OAAOP,GACJtb,EAAOic,iBAAiBD,GAClChc,EAAO8b,mBAAmBR,GAE1Btb,EAAO6b,OAAOP,GAEfA,EAAS,GACTU,EAAe,EAEjB,IAEMhc,EAAOkc,KACf,CAqCA,SAASG,GAAY1K,GACpB,OAAO+K,GAAS/K,EAAK5M,QAASsV,GAAWC,UAC1C,CAUA,SAASoC,GAAS/K,EAAMpI,GACvB,OAAOoI,EAAKrE,QAAQ/D,IAAc,CACnC,CCzHe,SAASwT,GAAqBC,EAAWC,GACvD,IAAMC,EAAYxF,SAASC,cAAc,OACzCuF,EAAUpJ,UAAUqJ,IAAI,kBACxBzF,SAAS0F,KAAKrE,YAAYmE,GAC1B,IAAMG,GAAOC,EAAAA,GAAAA,GAAWJ,GAExB,OAAO,IAAIpP,SAAQ,SAACC,GACnB,IAAMwP,EAAqB,WAM1B,OALAC,EAAAA,GAAAA,kBAAgB,WACf,IAAMC,EAAUR,EAAYC,GAC5BnP,EAAQ0P,EACT,IAEO,4BAAMT,EACd,EAEAK,EAAKjN,OAAO,iBAACmN,EAAkB,MAChC,IAAGrP,MAAK,SAACuP,GAIR,OAHAJ,EAAKK,UACLR,EAAUhG,WAAWE,YAAY8F,GAE1BO,CACR,GACD,CC5Be,SAASE,GAAWC,GAClC,IADgE,IAAjBC,EAAa,UAAH,6CAAG,GACnDC,EAAID,EAAW5b,QAAU,EAAG6b,EAAIF,EAAaE,IACrDD,EAAWtb,KAAK,IAEjB,OAAOsb,CACR,CCDO,SAASE,GAAgBC,GAC/B,OAAOA,EAAQC,YAChB,wPCLA,kiNAOA,IAAMC,GAAe,CACpBvM,KAAM,WAGQ,SAAewM,GAAkB,EAAD,mCAyB9C,cApCD,MAoCC,OApCD,EAoCC,WAzBc,WACdC,EAAQ,qFAqBP,OApBC3W,EAAY,EAAZA,aAAcoS,EAAY,EAAZA,aAAclS,EAAe,EAAfA,gBAAiBH,EAAQ,EAARA,SAEzCwV,EACL,wBAAKzT,UAAW,8BACf,iBAAC,GAAI,CACJqQ,gBAAiB+D,GAAWlW,EAAc,CAAC2W,IAC3C3W,aAAcA,EACdoS,aAAcA,EACdlS,gBAAiBA,EACjBH,SAAUA,KAKPyV,EAAc,SAACC,GACpB,IAAMmB,EAAiB,GAIvB,OAHAnB,EAAUoB,iBAAiBJ,GAAavM,MAAM4J,SAAQ,SAAC5J,GACtD0M,EAAe9b,KAAqBoP,ED9BvB4M,aC+Bd,IACOF,CACR,EAAC,SAEYtB,GAAqBC,EAAWC,GAAY,kFACzD,GApCD,gLAoCC,gRCpCD,kiNAQe,SAAekB,GAAkB,EAAD,mCA4B9C,cApCD,MAoCC,OApCD,EAoCC,WA5Bc,WACd9c,EAAK,qFAwBJ,OAvBCoG,EAAY,EAAZA,aAAcoS,EAAY,EAAZA,aAAclS,EAAe,EAAfA,gBAAiBH,EAAQ,EAARA,SAEzCwV,EACL,iBAAC,GAAI,CACJrD,WAAY,iBAAC,GAAU,CAACtY,MAAOA,IAC/BuY,gBAAiB+D,GAAWlW,GAC5BoS,aAAcA,EACdlS,gBAAiBA,EACjBH,SAAUA,IAINyV,EAAc,SAACC,GACpB,IAAMsB,EAActB,EAAUuB,cAC7B,6BAKD,MAAO,CACN9D,gBAAiBoD,GAJQb,EAAUuB,cACnC,oCAIA7D,iBAAkBmD,GAAgBS,GAEpC,EAAC,SAEYzB,GAAqBC,EAAWC,GAAY,kFACzD,GApCD,gLAoCC,gRCpCD,gmGAAAa,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,ssDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,8YAAAA,GAAA,gEAAAA,GAAA,0JAAAA,EAAA,6FAAAA,GAAA,mIAAAA,IAAA,8SAAAA,IAAA,4OAAAA,EAAA,iBAAAA,EAAA,EAAAA,IAAA,EAAAA,GAAA,EAAAA,GAAA,SAUA,SAASY,GAASxV,GACjB,IAA0D,MAAZwK,EAAAA,GAAAA,UAAS,IAAG,GAAnDqH,EAAe,KAAE4D,EAAkB,KAGzCtd,EAOG6H,EAPH7H,MACA+c,EAMGlV,EANHkV,SACA3W,EAKGyB,EALHzB,aACAC,EAIGwB,EAJHxB,qBACAmS,EAGG3Q,EAHH2Q,aACAlS,EAEGuB,EAFHvB,gBACAH,EACG0B,EADH1B,UAGDgW,EAAAA,GAAAA,kBAAgB,WACf,IAAMoB,EAAa,eAxBrB,EAwBqB,GAxBrB,EAwBqB,WAAG,iGAMpB,OALKC,EAAc,CACnBpX,aAAAA,EACAoS,aAAAA,EACAlS,gBAAAA,EACAH,SAAAA,GACA,SAE4B2W,GAC5BC,EACAS,GACA,OAHmB,OAAdR,EAAiB,EAAH,cAKgCS,GACnDzd,EACAwd,GACA,gBAHOjE,EAAgB,EAAhBA,iBAAkBD,EAAe,EAAfA,gBAKpBD,EAAqB0D,EAASlT,KAAI,SAACyG,EAAMqI,GAAK,MAAM,CACzDjV,QAAS4M,EACT8J,OAAQ4C,EAAerE,GACvB,IAEK+E,EAAStE,GAAkBC,EAAoB,CACpDjT,aAAAA,EACAC,qBAAAA,EACAkT,iBAAAA,EACAD,gBAAAA,IAGDgE,EAAmBI,GAAQ,2CAtD9B,iLAuDG,kBA/BkB,mCAgCnBH,GACD,GAAG,CACFR,EACA/c,EACAoG,EACAC,EACAmS,EACAlS,EACAH,IAGD,IAAMwX,EAAmBjE,EAAgB7P,KAAI,SAAC+T,EAAajF,GAC1D,OACC,iBAAC,GAAI,CACJvW,IAAKuW,EACLL,WAAsB,IAAVK,EAAc,iBAAC,GAAU,CAAC3Y,MAAOA,IAAY,KACzDuY,gBAAiB+D,GAAWlW,EAAcwX,GAC1CpF,aAAcA,EACdlS,gBAAiBA,EACjBH,SAAUA,GAGb,IAEA,OAAO,iBAAC,YAAc,KAAEwX,EACzB,CAEAN,GAAS3U,UAAY,CACpB1I,MAAO2I,KAAAA,OAAAA,WACPoU,SAAUpU,KAAAA,QAAkBA,KAAAA,QAAkBmL,WAC9C1N,aAAcuC,KAAAA,OAAAA,WACdtC,qBAAsBsC,KAAAA,KAAAA,WACtB6P,aAAc7P,KAAAA,OAAAA,WACdrC,gBAAiBqC,KAAAA,OAAAA,WACjBxC,SAAUwC,KAAAA,OAAAA,YAGX,u5BCrFA,SAASkV,GAAahW,GACrB,IAAQgJ,EAAiBhJ,EAAjBgJ,aAEF7B,EAAgB3L,IAAMwE,EAAO,CAClC,iBACA,kBACA,aAEA,YACA,wBACA,YACA,mBACA,sBAGKoG,EAAWY,GAAagC,EAAanN,SAAW,qWAAI,IACtDsL,IAEE+N,EAAW9O,EAASoC,MAAM,sBAIhC,OACC,wBAAKnI,UAHa,CAAC,eAAgB,iBAGRe,KAAK,KAAM,cAAa,gBAClD,iBAAC,GAAQ,CACRjJ,MAAO6Q,EAAa7Q,OAAS,GAC7B+c,SAAUA,EACV3W,aAAcyB,EAAMzB,aACpBC,qBAAsBwB,EAAMxB,qBAC5BmS,aAAc3Q,EAAM2Q,cAAgB,KACpClS,gBAAiBuB,EAAMvB,gBACvBH,SAAU0B,EAAM1B,WAIpB,CACA0X,GAAanV,UAAY,CACxB5C,UAAW6C,KAAAA,OAAAA,WACXkI,aAAclI,KAAAA,OAAAA,WACdvC,aAAcuC,KAAAA,OAAAA,WACdtC,qBAAsBsC,KAAAA,KAAAA,WACtB6P,aAAc7P,KAAAA,OACdrC,gBAAiBqC,KAAAA,OAAAA,WACjBxC,SAAUwC,KAAAA,OAAAA,YAGX,YCjDA,IAAeyF,EAAAA,GAAAA,KAAQ,SAACzQ,GAAK,MAAM,CAElCwS,gBAAiBvN,GAChBjF,EACA,kBACA,wBAEDgI,eAAgB/C,GAAejF,EAAO,kBAAmB,kBACzDkI,WAAYjD,GAAejF,EAAO,kBAAmB,cAGrDmI,UAAWlD,GAAejF,EAAO,iBAAkB,aACnDoI,sBAAuBnD,GACtBjF,EACA,iBACA,yBAEDqI,UAAWpD,GAAejF,EAAO,iBAAkB,aACnDsI,iBAAkBrD,GACjBjF,EACA,iBACA,oBAEDuI,kBAAmBtD,GAClBjF,EACA,iBACA,qBAGDyI,aAAcxD,GAAejF,EAAO,iBAAkB,gBACtD0I,qBAAsBzD,GACrBjF,EACA,iBACA,wBAED2I,gBAAiB1D,GAAejF,EAAO,iBAAkB,mBAEzDwI,SAAUvD,GAAejF,EAAO,iBAAkB,YAClD,GAtCD,CAsCIkgB,ICpCJ,SAASC,GAAOjW,GAGf,OAFuBA,EAAf9I,YAGP,IAAK,OACJ,OAAO,iBAAC,GAAiB8I,GAC1B,IAAK,OACJ,OAAO,iBAAC,GAAiBA,GAC1B,IAAK,QACJ,OAAO,iBAAC,GAAiBA,GAC1B,IAAK,SACJ,OAAO,iBAAC,GAAkBA,GAE7B,CAEAiW,GAAOpV,UAAY,CAClB3J,WAAY4J,KAAAA,OAAAA,YAGb,YCjBA,IAAeyF,EAAAA,GAAAA,KACd,SAACzQ,GAAK,MAAM,CACXkT,aAAcxQ,EAAO1C,EAAOqB,EAAcrB,KAAW,CAAC,EACtDoB,WAAYD,EAAcnB,GAC1B,GAED,CACCiG,WAAAA,IAPF,CASEka,qPChBF,SAASC,GAAalW,GACrB,IAWImW,EAAQC,EAERC,EAAiBC,EACjBC,EAAqBC,EAErBC,EAfHre,EAMG4H,EANH5H,GACAse,EAKG1W,EALH0W,WACAC,EAIG3W,EAJH2W,uBACAC,EAGG5W,EAHH4W,cACAC,EAEG7W,EAFH6W,UACAC,EACG9W,EADH8W,kBAGKpV,EAAa,CAAC,eAAgB,gBAAkBtJ,GAShD2e,EAAkBL,EAAWM,aACjCC,QAAO,SAACC,GACR,OAAQN,EAAcnc,SAASyc,EAChC,IACClV,KAAI,SAACkV,GAGL,MAAoB,kBAFpBf,EAASO,EAAWA,WAAWQ,IAEpBvb,KAmB0B,KAlBpC8a,EAAuBN,EAAOgB,kBAC5BF,QAAO,SAACG,GACR,OAAQR,EAAcnc,SAAS2c,EAChC,IACCpV,KAAI,SAACoV,GAOL,OANAhB,EAAcD,EAAOkB,gBAAgBD,GAErCZ,GACEG,EAAuBlc,SAASyc,KAChCP,EAAuBlc,SAAS2c,GAE3BE,EACNF,EACAhB,EACAI,EAEF,KAEwBzd,OACjB,MAGRud,EAAiBQ,EAAkBX,EAAOxa,MAC1C4a,GACEI,EAAuBlc,SAASyc,GAGjC,iBAACZ,EAAc,CACd/b,IAAK2c,EACLK,eAAgBhB,EAChBjV,MAAO6U,EAAO7U,MACdC,KAAM4U,EAAO5U,MAEZkV,IAIIa,EACNJ,EACAf,GACCQ,EAAuBlc,SAASyc,GAGpC,IAED,SAASI,EAAaJ,EAAUM,EAAaD,GAG5C,OAFAlB,EAAkBS,EAAkBU,EAAY7b,MAG/C,iBAAC0a,EAAe,IACf9b,IAAK2c,EACLK,eAAgBA,EAChBE,cAAeD,EAAYE,OAAOpd,QAClCqd,UAAWH,EAAYE,OAAOnd,IAC9Bqd,YAAa5X,EAAMwX,EAAYE,OAAOnd,KACtCsc,UAAWA,EACXvV,MAAOkW,EAAYlW,OACfkW,EAAYK,aAGnB,CAEA,OAAO,wBAAKxX,UAAWqB,EAAWN,KAAK,MAAO2V,EAC/C,CAEAb,GAAarV,UAAY,CACxBzI,GAAI0I,KAAAA,OAAAA,WACJ4V,WAAY5V,KAAAA,OAAAA,WACZ6V,uBAAwB7V,KAAAA,QAAkBA,KAAAA,QAAkBmL,WAC5D2K,cAAe9V,KAAAA,QAAkBA,KAAAA,QAAkBmL,WACnD4K,UAAW/V,KAAAA,KAAAA,WACXgW,kBAAmBhW,KAAAA,KAAAA,YAGpB,YCjGA,SAASgX,GAAa9X,GACrB,IAAQuX,EAAgCvX,EAAhCuX,eAAgBhW,EAAgBvB,EAAhBuB,KAAMD,EAAUtB,EAAVsB,MAExBI,EAAa,CAAC,mBASpB,OAHQ6V,GAAkBvX,EAAMW,UAAYX,EAAMW,SAAS5H,OAAS,GAJnE2I,EAAWrI,KAAK,qCAQhB,wBAAKgH,UAAWqB,EAAWN,KAAK,MAC/B,wBAAKf,UAAW,yBACf,yBAAMA,UAAW,6BAChB,iBAAC,GAAI,CAACc,SAAUI,KACT,IACPD,GAEF,wBAAKjB,UAAW,2BAA4BL,EAAMW,UAGrD,CAEAmX,GAAajX,UAAY,CACxB0W,eAAgBzW,KAAAA,KAAAA,WAChBS,KAAMT,KAAAA,OAAAA,WACNQ,MAAOR,KAAAA,OAAAA,WACPH,SAAUG,KAAAA,QAAkBA,KAAAA,UAG7BgX,GAAavV,aAAe,CAAC,EAE7B,sBClCA,SAASwV,GAAa/X,GACrB,IAEIgY,EAFItN,EAA+C1K,EAA/C0K,WAAY6M,EAAmCvX,EAAnCuX,eAAgBjW,EAAmBtB,EAAnBsB,MAAOK,EAAY3B,EAAZ2B,QAGrCD,EAAa,CAAC,yBAqBpB,OAnBIgJ,IACHhJ,EAAWrI,KAAK,oCAChB2e,EACC,yBAAM3X,UAAW,mCAChB,iBAAC,GAAI,CAACc,SAAU,YAKdoW,GACJ7V,EAAWrI,KAAK,2CAUhB,wBAAKgH,UAAWqB,EAAWN,KAAK,KAAMO,QAPvC,WACK4V,GACH5V,GAEF,GAIE,wBAAKtB,UAAW,+BACdqK,GAAcsN,GAEhB,wBAAK3X,UAAW,+BAAgCiB,GAGnD,CAEAyW,GAAalX,UAAY,CACxB6J,WAAY5J,KAAAA,KAAAA,WACZyW,eAAgBzW,KAAAA,KAAAA,WAChBQ,MAAOR,KAAAA,OAAAA,WACPa,QAASb,KAAAA,KAAAA,YAGV,SAAeF,GAAAA,KAAWmX,uiCC1C1B,SAASE,GAAOjY,GACf,IAA2C,MAAfwK,EAAAA,GAAAA,WAAS,GAAM,GAApC0N,EAAM,KAAEC,EAAS,KAGvBZ,EAOGvX,EAPHuX,eACAjW,EAMGtB,EANHsB,MACA8W,EAKGpY,EALHoY,WACAX,EAIGzX,EAJHyX,cACAE,EAGG3X,EAHH2X,UACAC,EAEG5X,EAFH4X,YACAf,EACG7W,EADH6W,UAGKnV,EAAa,CAAC,mBACf6V,GACJ7V,EAAWrI,KAAK,qCAGjB,IAAM8H,EAAW+W,EAAS,sBAAwB,uBAMlD,IAAMG,EAAmBH,EACxB,wBAAK7X,UAAW,2BACd+X,EAAWpW,KAAI,SAACsW,GAAM,OACtB,iBAAC,GAAY,CACZ/d,IAAK+d,EAAO9d,MACZ8G,MAAOgX,EAAOhX,MACdoJ,WAAYkN,IAAgBU,EAAO9d,MACnC+c,eAAgBA,EAChB5V,QAAS,WACRkV,EAAUY,EAAeE,EAAWW,EAAO9d,MAC5C,GACC,KAX6B,KAgB5B+d,EAAcH,EAAWI,MAC9B,SAACF,GAAM,OAAKV,IAAgBU,EAAO9d,KAAK,IACvC8G,MAEImX,EAAcP,EACnB5W,EAEA,6BACC,6BAAOA,EAAQ,MACf,yBAAMjB,UAAW,qCACfkY,IAKJ,OACC,wBAAKlY,UAAWqB,EAAWN,KAAK,MAC/B,wBACCf,UAAW,wBACXsB,QAAS4V,EAvCZ,WACCY,GAAWD,EACZ,EAqC6C,MAE1C,wBACC7X,UAAW,uBACX,cAAa,eAEZoY,GAEF,wBAAKpY,UAAW,0BACf,yBAAMA,UAAW,wBAChB,iBAAC,GAAI,CAACc,SAAUA,OAIlBkX,EAGJ,CAEAJ,GAAOpX,UAAY,CAClB0W,eAAgBzW,KAAAA,KAAAA,WAChBQ,MAAOR,KAAAA,OAAAA,WACPsX,WAAYtX,KAAAA,MAAAA,WACZ2W,cAAe3W,KAAAA,OAAAA,WACf6W,UAAW7W,KAAAA,OAAAA,WACX8W,YAAa9W,KAAAA,OAAAA,WACb+V,UAAW/V,KAAAA,KAAAA,YAGZ,sBC1FA,SAAS4X,GAAO1Y,GACf,IACCuX,EASGvX,EATHuX,eACAjW,EAQGtB,EARHsB,MACAqX,EAOG3Y,EAPH2Y,IACAC,EAMG5Y,EANH4Y,IACAC,EAKG7Y,EALH6Y,eACApB,EAIGzX,EAJHyX,cACAE,EAGG3X,EAHH2X,UACAC,EAEG5X,EAFH4X,YACAf,EACG7W,EADH6W,UAGKnV,EAAa,CAAC,mBACf6V,GACJ7V,EAAWrI,KAAK,qCAOjB,IAAMyf,EACLlB,EAAc,GAAKiB,EAAiB,IAAMjB,EAAcA,EAEzD,OACC,wBAAKvX,UAAWqB,EAAWN,KAAK,MAC/B,wBAAKf,UAAW,wBAAyBiB,GACzC,wBAAKjB,UAAW,yBAA0ByY,GAC1C,wBAAKzY,UAAW,yBACf,0BACCsY,IAAKA,EACLC,IAAKA,EACLpe,MAAOod,EACPjc,KAAM,QACN2J,SAAUiS,EAjBd,SAAsB/X,GACrBqX,EAAUY,EAAeE,EAAWoB,OAAOC,SAASxZ,EAAEqD,OAAOrI,OAC9D,EAe8C,KAC1C6H,UAAWkV,KAKhB,CAEAmB,GAAO7X,UAAY,CAClB0W,eAAgBzW,KAAAA,KAAAA,WAChBQ,MAAOR,KAAAA,OAAAA,WACP6X,IAAK7X,KAAAA,OAAAA,WACL8X,IAAK9X,KAAAA,OAAAA,WACL+X,eAAgB/X,KAAAA,KAChB2W,cAAe3W,KAAAA,OAAAA,WACf6W,UAAW7W,KAAAA,OAAAA,WACX8W,YAAa9W,KAAAA,OAAAA,WACb+V,UAAW/V,KAAAA,KAAAA,YAGZ4X,GAAOnW,aAAe,CACrBsW,gBAAgB,GAGjB,SAAejY,GAAAA,KAAW8X,ICzD1B,SAASO,GAAOjZ,GACf,IACCuX,EAMGvX,EANHuX,eACAjW,EAKGtB,EALHsB,MACAmW,EAIGzX,EAJHyX,cACAE,EAGG3X,EAHH2X,UACAC,EAEG5X,EAFH4X,YACAf,EACG7W,EADH6W,UAGKnV,EAAa,CAAC,mBAYpB,OAXAA,EAAWrI,MACM,IAAhBue,EAAuB,uBAAyB,yBAE5CL,GACJ7V,EAAWrI,KAAK,qCAQhB,wBACCgH,UAAWqB,EAAWN,KAAK,KAC3BO,QAAS4V,EAPX,WACCV,EAAUY,EAAeE,GAAYC,EACtC,EAK0C,MAExC,wBAAKvX,UAAW,wBAAyBiB,GACzC,wBAAKjB,UAAW,wBACf,yBAAMA,UAAW,wBAChB,iBAAC,GAAI,CACJc,UACiB,IAAhByW,EAAuB,YAAc,iBAO5C,CAEAqB,GAAOpY,UAAY,CAClB0W,eAAgBzW,KAAAA,KAAAA,WAChBQ,MAAOR,KAAAA,OAAAA,WACP2W,cAAe3W,KAAAA,OAAAA,WACf6W,UAAW7W,KAAAA,OAAAA,WACX8W,YAAa9W,KAAAA,KAAAA,WACb+V,UAAW/V,KAAAA,KAAAA,YAGZ,SAAeF,GAAAA,KAAWqY,2OC9C1B,SAASnC,GAAkBnb,GAC1B,OAAQA,GACP,IAAK,eACJ,OAAOmc,GACR,IAAK,SACJ,OAAOG,GACR,IAAK,SACJ,OAAOS,GACR,IAAK,SACJ,OAAOO,GAEV,CAEe,SAASC,GAAmBlZ,GAC1C,OACC,wBAAKK,UAAW,mBACf,iBAAC,GAAW,MAAKL,EAAK,CAAE8W,kBAAmBA,MAG9C,wOC3BO,IAAMza,GAAiB,SAAC/B,EAASC,EAAKC,GAC5C,IAAKF,EACJ,MAAM,IAAIuE,UAAU,0CAErB,IAAKtE,EACJ,MAAM,IAAIsE,UAAU,sCAOrB,OAAOD,GAAahD,EALJ,CACftB,QAAAA,EACAC,IAAAA,EACAC,MAAAA,GAGF,ghECPA,SCJe,SACdkc,EACAyC,EACAC,EACAtF,GAEA,OAAOvN,EAAAA,GAAAA,KACN,SAACzQ,GACA,IAMIqgB,EACAC,EAPEiD,EAAe,CACpB3C,WAAAA,EACAC,uBAAwBwC,EAA0BrjB,GAClD8gB,cAAewC,EAAiBtjB,IAoBjC,OAdA4gB,EAAWM,aAAa3E,SAAQ,SAAC6E,IAChCf,EAASO,EAAWA,WAAWQ,IAExBC,kBAAkB9E,SAAQ,SAAC+E,GACjChB,EAAcD,EAAOkB,gBAAgBD,GAErCiC,EAAajD,EAAYsB,OAAOnd,KAAOQ,GACtCjF,EACAsgB,EAAYsB,OAAOpd,QACnB8b,EAAYsB,OAAOnd,IAErB,GACD,IAEO8e,CACR,GAEA,CACCxC,UAAWxa,IA7BNkK,CA+BLuN,EACH,CDlCA,CERA,CACCkD,aAAc,CAAC,oBAAqB,MAAO,cAAe,UAE1DN,WAAY,CACX/Y,kBAAmB,CAClB2D,MAAO,qBACP3F,KAAM,eACN4F,KAAM,OAEN4V,kBAAmB,CAAC,QAAS,eAC7BE,gBAAiB,CAChBzZ,MAAO,CACN0D,MAAO,QACP3F,KAAM,SACNkc,YAAa,CACZO,WAAY,CACX,CACChgB,GAAI,aACJkJ,MAAO,mBACP9G,MAAO,SAER,CACCpC,GAAI,aACJkJ,MAAO,SACP9G,MAAO,SAER,CACCpC,GAAI,aACJkJ,MAAO,SACP9G,MAAO,WAIVkd,OAAQ,CACPpd,QAAS,oBACTC,IAAK,UAGPsD,YAAa,CACZyD,MAAO,gBACP3F,KAAM,SACNkc,YAAa,CACZO,WAAY,CACX,CACChgB,GAAI,kBACJkJ,MAAO,YACP9G,MAAO,aAER,CACCpC,GAAI,qBACJkJ,MAAO,qBACP9G,MAAO,gBAER,CACCpC,GAAI,iBACJkJ,MAAO,WACP9G,MAAO,YAER,CACCpC,GAAI,WACJkJ,MAAO,iBACP9G,MAAO,oBAIVkd,OAAQ,CACPpd,QAAS,oBACTC,IAAK,kBAMTA,IAAK,CACJ+G,MAAO,MACP3F,KAAM,eACN4F,KAAM,aAEN4V,kBAAmB,CAClB,iBACA,uBACA,cAEDE,gBAAiB,CAChBvZ,eAAgB,CACfwD,MAAO,YACP3F,KAAM,SACNkc,YAAa,CACZc,KAAM,GACNC,IAAK,GACLC,gBAAgB,GAEjBnB,OAAQ,CACPpd,QAAS,kBACTC,IAAK,mBAIPwD,qBAAsB,CACrBuD,MAAO,wBACP3F,KAAM,SACNkc,YAAa,CACZO,WAAY,CACX,CACChgB,GAAI,2BACJkJ,MAAO,OACP9G,MAAO,QAER,CACCpC,GAAI,4BACJkJ,MAAO,IACP9G,MAAO,SAER,CACCpC,GAAI,2BACJkJ,MAAO,IACP9G,MAAO,UAIVkd,OAAQ,CACPpd,QAAS,kBACTC,IAAK,yBAIPyD,WAAY,CACXsD,MAAO,eACP3F,KAAM,SACNkc,YAAa,CACZO,WAAY,CACX,CACChgB,GAAI,kBACJkJ,MAAO,gBACP9G,MAAO,SAER,CACCpC,GAAI,kBACJkJ,MAAO,iBACP9G,MAAO,WAIVkd,OAAQ,CACPpd,QAAS,kBACTC,IAAK,iBAMT+e,YAAa,CACZhY,MAAO,iBACP3F,KAAM,eACN4F,KAAM,OAEN4V,kBAAmB,CAClB,YACA,wBACA,YACA,mBACA,qBAEDE,gBAAiB,CAChBpZ,UAAW,CACVqD,MAAO,OACP3F,KAAM,SACNkc,YAAa,CACZO,WAAY,CACX,CACChgB,GAAI,iBACJkJ,MAAO,kBACP9G,MAAO,OAER,CACCpC,GAAI,oBACJkJ,MAAO,cACP9G,MAAO,UAER,CACCpC,GAAI,oBACJkJ,MAAO,cACP9G,MAAO,UAER,CACCpC,GAAI,kCACJkJ,MAAO,4BACP9G,MAAO,0BAIVkd,OAAQ,CACPpd,QAAS,iBACTC,IAAK,cAGP2D,sBAAuB,CACtBoD,MAAO,2BACP3F,KAAM,SACN+b,OAAQ,CACPpd,QAAS,iBACTC,IAAK,0BAGP4D,UAAW,CACVmD,MAAO,aACP3F,KAAM,SACN+b,OAAQ,CACPpd,QAAS,iBACTC,IAAK,cAGP6D,iBAAkB,CACjBkD,MAAO,qBACP3F,KAAM,SACN+b,OAAQ,CACPpd,QAAS,iBACTC,IAAK,qBAGP8D,kBAAmB,CAClBiD,MAAO,yBACP3F,KAAM,SACN+b,OAAQ,CACPpd,QAAS,iBACTC,IAAK,wBAMTzD,OAAQ,CACP6E,KAAM,eACN2F,MAAO,SACPC,KAAM,eAEN4V,kBAAmB,CAClB,WACA,eACA,uBACA,mBAGDE,gBAAiB,CAChB/Y,SAAU,CACTgD,MAAO,YACP3F,KAAM,SACNkc,YAAa,CACZc,KAAM,EACNC,IAAK,EACLC,gBAAgB,GAEjBnB,OAAQ,CACPpd,QAAS,iBACTC,IAAK,aAIPgE,aAAc,CACb+C,MAAO,UACP3F,KAAM,SACNkc,YAAa,CACZc,IAAK,EACLC,IAAK,GAENlB,OAAQ,CACPpd,QAAS,iBACTC,IAAK,iBAIPiE,qBAAsB,CACrB8C,MAAO,0BACP3F,KAAM,SACN+b,OAAQ,CACPpd,QAAS,iBACTC,IAAK,yBAIPkE,gBAAiB,CAChB6C,MAAO,UACP3F,KAAM,SACNkc,YAAa,CACZc,IAAK,EACLC,IAAK,GAENlB,OAAQ,CACPpd,QAAS,iBACTC,IAAK,yBCxR8B,SAACzE,GACzC,IAAM6gB,EAAyB,GAEzB1Y,EAAYlD,GAAejF,EAAO,iBAAkB,aACxC,WAAdmI,GACH0Y,EAAuBtd,KAAK,yBAC5Bsd,EAAuBtd,KAAK,aAC5Bsd,EAAuBtd,KAAK,qBACJ,WAAd4E,GACV0Y,EAAuBtd,KAAK,yBAG7B,IAAMwE,EAAc9C,GACnBjF,EACA,oBACA,eAcD,MAVmB,WAFAmB,EAAcnB,IAGZ,iBAAhB+H,IACH8Y,EAAuBtd,KAAK,aAC5Bsd,EAAuBtd,KAAK,yBAC5Bsd,EAAuBtd,KAAK,aAC5Bsd,EAAuBtd,KAAK,oBAC5Bsd,EAAuBtd,KAAK,sBAIvBsd,CACR,IAEgC,SAAC7gB,GAChC,IAAM8gB,EAAgB,GAEhB2C,EAAa1gB,OAAOC,KAAK,YAC3BmC,GAAmBnF,EAAO,sBAC1BmF,GAAmBnF,EAAO,mBAC1BmF,GAAmBnF,EAAO,qBAI9B,IADmBqB,EAAcrB,GAEhC,OAAOyjB,EAGR,IAAMriB,EAAaD,EAAcnB,GAE3B0jB,EAAyBC,KAC9BF,EACAhe,EAAkBrE,IAKnB,OAFA0f,EAAcvd,KAAI,MAAlBud,EAAa,GAAS4C,IAEf5C,CACR,IC1De,SAAmB5W,GACjC,OACC,wBAAKK,UAAW,yBACf,wBAAKA,UAAW,qCACf,yBAAMA,UAAW,8BAChB,iBAAC,GAAI,CAACc,SAAU,eAIlB,wBAAKd,UAAW,oCACf,iBAAC6Y,GAAkB,MAAKlZ,EAAK,CAAE5H,GAAI,gBAIvC,ICfe,SAASshB,KACvB,IAAMC,EAAK,iBAAC,GAAW,MACjBC,EAAgB,iBAAC,GAAa,MAEpC,OACC,iBAAC,GAAS,CAACjT,QAASgT,EAAI/S,SAAUgT,GACjC,iBAAC,GAAM,MAGV,CCXA,IAAMC,GAAS,CACd,CACCC,KAAM,UACN3f,OAAQ,kBAAM8b,EAAM,IAIhB8D,GAAkB,IAAIC,GAAAA,EAAgBH,IAE5C,UACCI,WAAU,SAACH,GACV,OAAOC,GAAgBlV,QAAQiV,GAAM9U,MAAK,SAACkV,GAC1C,OCTsCC,EDSdD,ECRpBlG,EAAYxF,SAAS4L,eAAe,YAC7BhG,EAAAA,GAAAA,GAAWJ,GAEnB9M,OACJ,iBAAC,MAAQ,CAACxI,MAAOC,MAChB,iBAAC,cAAgB,KAChB,iBAAC,GAAa,KACb,iBAACwb,EAAU,UARD,IAA0BA,EAClCnG,CDSL,GACD,wqC9EhBArU,OAAO6D,iBAAiB,UAAWjE,IJS7B,WACN,IAAM8a,GAAiBC,EAAAA,EAAAA,KACtBC,EAAAA,EAAAA,IAAgBC,EAAAA,IAGXC,EAAiBnlB,IAGnBmlB,GAAkBA,EAAeziB,IAAMyiB,EAAeziB,GAAGY,gBACrD6hB,EAAeziB,GAAGY,QAAQ8hB,UAclC,IAAMzgB,EAAe0gB,IAAcF,EAAgBG,KAEnDlc,IAAQmc,EAAAA,EAAAA,IAAiBC,GAAa7gB,EAAcogB,IAE9CU,WAAU,WACfllB,EAAU6I,GAAMqK,WACjB,GACD,CoFhCCiS,GCFc,WACd,IAAMtc,EAAQC,KACR7I,EAAQ4I,EAAMqK,WAIK,IAFPrR,EAAa5B,GAEjBiD,SACb2F,EAAMQ,SAAS6D,GAAW,6BAA8BkY,KACxDvc,EAAMQ,SAAS6D,GAAW,kBAAmBmY,KAE/C,CDNCC,GAEOC,GAAOnB,WAAW,aEbtBoB,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CACjDnjB,GAAImjB,EACJK,QAAQ,EACRF,QAAS,CAAC,GAUX,OANAG,EAAoBN,GAAUO,KAAKH,EAAOD,QAASC,EAAQA,EAAOD,QAASJ,GAG3EK,EAAOC,QAAS,EAGTD,EAAOD,OACf,CAGAJ,EAAoBS,EAAIF,EhH5BpBxmB,EAAW,GACfimB,EAAoBU,EAAI,CAACC,EAAQC,EAAUC,EAAIC,KAC9C,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAAS1H,EAAI,EAAGA,EAAIvf,EAAS0D,OAAQ6b,IAAK,CAGzC,IAFA,IAAKsH,EAAUC,EAAIC,GAAY/mB,EAASuf,GACpC2H,GAAY,EACPC,EAAI,EAAGA,EAAIN,EAASnjB,OAAQyjB,MACpB,EAAXJ,GAAsBC,GAAgBD,IAAavjB,OAAOC,KAAKwiB,EAAoBU,GAAGS,OAAOliB,GAAS+gB,EAAoBU,EAAEzhB,GAAK2hB,EAASM,MAC9IN,EAASQ,OAAOF,IAAK,IAErBD,GAAY,EACTH,EAAWC,IAAcA,EAAeD,IAG7C,GAAGG,EAAW,CACblnB,EAASqnB,OAAO9H,IAAK,GACrB,IAAI+H,EAAIR,SACEV,IAANkB,IAAiBV,EAASU,EAC/B,CACD,CACA,OAAOV,CAnBP,CAJCG,EAAWA,GAAY,EACvB,IAAI,IAAIxH,EAAIvf,EAAS0D,OAAQ6b,EAAI,GAAKvf,EAASuf,EAAI,GAAG,GAAKwH,EAAUxH,IAAKvf,EAASuf,GAAKvf,EAASuf,EAAI,GACrGvf,EAASuf,GAAK,CAACsH,EAAUC,EAAIC,EAqBjB,EiHzBdd,EAAoBsB,EAAKjB,IACxB,IAAIkB,EAASlB,GAAUA,EAAOmB,WAC7B,IAAOnB,EAAiB,QACxB,IAAM,EAEP,OADAL,EAAoByB,EAAEF,EAAQ,CAAEnjB,EAAGmjB,IAC5BA,CAAM,ECLdvB,EAAoByB,EAAI,CAACrB,EAASsB,KACjC,IAAI,IAAIziB,KAAOyiB,EACX1B,EAAoBhjB,EAAE0kB,EAAYziB,KAAS+gB,EAAoBhjB,EAAEojB,EAASnhB,IAC5E1B,OAAOokB,eAAevB,EAASnhB,EAAK,CAAE2iB,YAAY,EAAMlK,IAAKgK,EAAWziB,IAE1E,ECND+gB,EAAoB6B,EAAI,WACvB,GAA0B,iBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOjd,MAAQ,IAAIkd,SAAS,cAAb,EAGhB,CAFE,MAAO7d,GACR,GAAsB,iBAAXG,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxB2b,EAAoBhjB,EAAI,CAACglB,EAAKC,IAAU1kB,OAAO2kB,UAAUC,eAAe3B,KAAKwB,EAAKC,GCAlFjC,EAAoBoC,IAAO/B,IAC1BA,EAAOgC,MAAQ,GACVhC,EAAOhb,WAAUgb,EAAOhb,SAAW,IACjCgb,SCHR,IAAIiC,EACAtC,EAAoB6B,EAAEU,gBAAeD,EAAYtC,EAAoB6B,EAAEtd,SAAW,IACtF,IAAI2O,EAAW8M,EAAoB6B,EAAE3O,SACrC,IAAKoP,GAAapP,IACbA,EAASsP,gBACZF,EAAYpP,EAASsP,cAAcC,MAC/BH,GAAW,CACf,IAAII,EAAUxP,EAASyP,qBAAqB,UACzCD,EAAQjlB,SAAQ6kB,EAAYI,EAAQA,EAAQjlB,OAAS,GAAGglB,IAC5D,CAID,IAAKH,EAAW,MAAM,IAAIM,MAAM,yDAChCN,EAAYA,EAAUO,QAAQ,OAAQ,IAAIA,QAAQ,QAAS,IAAIA,QAAQ,YAAa,KACpF7C,EAAoB8C,EAAIR,YCVxB,IAAIS,EAAkB,CACrB,IAAK,GAaN/C,EAAoBU,EAAEQ,EAAK8B,GAA0C,IAA7BD,EAAgBC,GAGxD,IAAIC,EAAuB,CAACC,EAA4B1e,KACvD,IAGIyb,EAAU+C,GAHTpC,EAAUuC,EAAaC,GAAW5e,EAGhB8U,EAAI,EAC3B,GAAGsH,EAASzM,MAAMrX,GAAgC,IAAxBimB,EAAgBjmB,KAAa,CACtD,IAAImjB,KAAYkD,EACZnD,EAAoBhjB,EAAEmmB,EAAalD,KACrCD,EAAoBS,EAAER,GAAYkD,EAAYlD,IAGhD,GAAGmD,EAAS,IAAIzC,EAASyC,EAAQpD,EAClC,CAEA,IADGkD,GAA4BA,EAA2B1e,GACrD8U,EAAIsH,EAASnjB,OAAQ6b,IACzB0J,EAAUpC,EAAStH,GAChB0G,EAAoBhjB,EAAE+lB,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOhD,EAAoBU,EAAEC,EAAO,EAGjC0C,EAAqBC,KAAqC,+BAAIA,KAAqC,gCAAK,GAC5GD,EAAmBtM,QAAQkM,EAAqBM,KAAK,KAAM,IAC3DF,EAAmBtlB,KAAOklB,EAAqBM,KAAK,KAAMF,EAAmBtlB,KAAKwlB,KAAKF,QC7CvF,IAAIG,EAAsBxD,EAAoBU,OAAEP,EAAW,CAAC,MAAM,IAAOH,EAAoB,UAC7FwD,EAAsBxD,EAAoBU,EAAE8C","sources":["webpack://chord-chart-studio/webpack/runtime/chunk loaded","webpack://chord-chart-studio/./src/state/localStorage.js","webpack://chord-chart-studio/./src/core/clock.js","webpack://chord-chart-studio/./src/db/files/actionsTypes.js","webpack://chord-chart-studio/./src/db/options/actionsTypes.js","webpack://chord-chart-studio/./src/ui/layout/app/_state/actionsTypes.js","webpack://chord-chart-studio/./src/ui/layout/app/_state/selectors.js","webpack://chord-chart-studio/./src/fileManager/_state/selectors.js","webpack://chord-chart-studio/./src/db/files/selectors.js","webpack://chord-chart-studio/./src/db/options/editorModeOptions.js","webpack://chord-chart-studio/./src/db/files/reducers.js","webpack://chord-chart-studio/./src/fileManager/_state/actionsTypes.js","webpack://chord-chart-studio/./src/db/options/selectors.js","webpack://chord-chart-studio/./src/db/options/reducers.js","webpack://chord-chart-studio/./src/db/reducers.js","webpack://chord-chart-studio/./src/fileManager/_state/reducers.js","webpack://chord-chart-studio/./src/songImporter/_state/actionsTypes.js","webpack://chord-chart-studio/./src/core/stripTags.js","webpack://chord-chart-studio/./src/songImporter/_state/reducers.js","webpack://chord-chart-studio/./src/ui/layout/app/_state/reducers.js","webpack://chord-chart-studio/./src/ui/layout/reducers.js","webpack://chord-chart-studio/./src/ui/reducers.js","webpack://chord-chart-studio/./src/state/reducers.js","webpack://chord-chart-studio/./src/state/seed.js","webpack://chord-chart-studio/./src/db/seed.js","webpack://chord-chart-studio/./src/db/options/seed.js","webpack://chord-chart-studio/./src/state/store.js","webpack://chord-chart-studio/./src/core/createAction.js","webpack://chord-chart-studio/./src/songImporter/_state/actions.js","webpack://chord-chart-studio/./src/songImporter/getMessageHandlers.js","webpack://chord-chart-studio/./src/registerHandlers.js","webpack://chord-chart-studio/./src/ui/_components/ErrorBoundary.js","webpack://chord-chart-studio/./src/ui/layout/app/_state/actions.js","webpack://chord-chart-studio/./src/ui/sideBar/_components/Logo.js","webpack://chord-chart-studio/./src/ui/_components/Icon.js","webpack://chord-chart-studio/./src/ui/layout/app/_components/NavEntry.js","webpack://chord-chart-studio/./src/ui/layout/app/_components/Nav.js","webpack://chord-chart-studio/./src/ui/_components/Button.js","webpack://chord-chart-studio/./src/ui/sideBar/_components/UserGuide.js","webpack://chord-chart-studio/./src/core/getVersions.js","webpack://chord-chart-studio/./src/ui/sideBar/_components/Versions.js","webpack://chord-chart-studio/./src/db/files/actions.js","webpack://chord-chart-studio/./src/songImporter/_state/selectors.js","webpack://chord-chart-studio/./src/ui/_components/Modal.js","webpack://chord-chart-studio/./src/songImporter/_components/Header.js","webpack://chord-chart-studio/./src/songImporter/getUploadedFile.js","webpack://chord-chart-studio/./src/songImporter/_components/FilePicker.js","webpack://chord-chart-studio/./src/songImporter/_components/Input.js","webpack://chord-chart-studio/./src/songImporter/_components/PreviewError.js","webpack://chord-chart-studio/./src/songImporter/_components/InputFormatEntry.js","webpack://chord-chart-studio/./src/songImporter/_components/InputFormatSelector.js","webpack://chord-chart-studio/./src/songImporter/_components/SongImporter.js","webpack://chord-chart-studio/./src/songImporter/_containers/SongImporter.js","webpack://chord-chart-studio/./src/ui/layout/app/allNavEntries.js","webpack://chord-chart-studio/./src/ui/layout/app/_components/App.js","webpack://chord-chart-studio/./src/ui/layout/app/_containers/App.js","webpack://chord-chart-studio/./src/fileManager/_state/actions.js","webpack://chord-chart-studio/./src/core/renderSong.js","webpack://chord-chart-studio/./src/fileManager/exportSelectedFileAsText.js","webpack://chord-chart-studio/./src/ui/_components/ModalConfirm.js","webpack://chord-chart-studio/./src/fileManager/_components/DeleteConfirmModal.js","webpack://chord-chart-studio/./src/fileManager/_components/FileActionEntry.js","webpack://chord-chart-studio/./src/fileManager/_components/FileActions.js","webpack://chord-chart-studio/./src/fileManager/_components/FileEntry.js","webpack://chord-chart-studio/./src/fileManager/_components/FileManager.js","webpack://chord-chart-studio/./src/fileManager/_containers/FileManager.js","webpack://chord-chart-studio/./src/core/escapeHTML.js","webpack://chord-chart-studio/./src/songRenderers/_components/SongRenderer.js","webpack://chord-chart-studio/./src/songRenderers/_containers/SongRenderer.js","webpack://chord-chart-studio/./src/songRenderers/editorPreview/_components/EditorPreview.js","webpack://chord-chart-studio/./src/editor/songEditor/prosemirror/schema.js","webpack://chord-chart-studio/./src/editor/songEditor/prosemirror/converters/stateToText.js","webpack://chord-chart-studio/./src/editor/songEditor/prosemirror/converters/toSafeHtml.js","webpack://chord-chart-studio/./src/editor/songEditor/prosemirror/ProsemirrorEditorView.js","webpack://chord-chart-studio/./src/editor/songEditor/prosemirror/converters/textToDom.js","webpack://chord-chart-studio/./src/editor/songEditor/prosemirror/getPlugins.js","webpack://chord-chart-studio/./src/editor/songEditor/_components/EditorLayout.js","webpack://chord-chart-studio/./src/editor/songEditor/_containers/EditorLayout.js","webpack://chord-chart-studio/./src/songRenderers/exportPreview/_components/ExportPreview.js","webpack://chord-chart-studio/./src/songRenderers/playRenderer/_components/PlayRenderer.js","webpack://chord-chart-studio/./src/songRenderers/playRenderer/_containers/PlayRenderer.js","webpack://chord-chart-studio/./src/songRenderers/printPreview/_components/Page.js","webpack://chord-chart-studio/./src/songRenderers/printPreview/_components/PageHeader.js","webpack://chord-chart-studio/./src/songRenderers/printPreview/helpers/mapLinesToColumns.js","webpack://chord-chart-studio/./src/songRenderers/printPreview/helpers/getDimensionsFromDom.js","webpack://chord-chart-studio/./src/songRenderers/printPreview/helpers/padColumns.js","webpack://chord-chart-studio/./src/songRenderers/printPreview/helpers/element.js","webpack://chord-chart-studio/./src/songRenderers/printPreview/helpers/getAllLinesHeight.js","webpack://chord-chart-studio/./src/songRenderers/printPreview/helpers/getPagesHeight.js","webpack://chord-chart-studio/./src/songRenderers/printPreview/_components/AllPages.js","webpack://chord-chart-studio/./src/songRenderers/printPreview/_components/PrintPreview.js","webpack://chord-chart-studio/./src/songRenderers/printPreview/_containers/PrintPreview.js","webpack://chord-chart-studio/./src/editor/_components/Editor.js","webpack://chord-chart-studio/./src/editor/_containers/Editor.js","webpack://chord-chart-studio/./src/optionsPanels/_components/OptionsPanel.js","webpack://chord-chart-studio/./src/ui/sideBar/options/_components/OptionsGroup.js","webpack://chord-chart-studio/./src/ui/sideBar/options/_components/SelectChoice.js","webpack://chord-chart-studio/./src/ui/sideBar/options/_components/Select.js","webpack://chord-chart-studio/./src/ui/sideBar/options/_components/Slider.js","webpack://chord-chart-studio/./src/ui/sideBar/options/_components/Toggle.js","webpack://chord-chart-studio/./src/ui/sideBar/options/_components/SidebarOptionsPanel.js","webpack://chord-chart-studio/./src/db/options/actions.js","webpack://chord-chart-studio/./src/optionsPanels/rendering/_containers/Rendering.js","webpack://chord-chart-studio/./src/optionsPanels/_containers/OptionsPanelFactory.js","webpack://chord-chart-studio/./src/optionsPanels/rendering/allWidgets.js","webpack://chord-chart-studio/./src/optionsPanels/rendering/_state/selectors.js","webpack://chord-chart-studio/./src/optionsPanels/rendering/_components/Rendering.js","webpack://chord-chart-studio/./src/controllers/Editor.js","webpack://chord-chart-studio/./src/router.js","webpack://chord-chart-studio/./src/renderController.js","webpack://chord-chart-studio/./src/app.js","webpack://chord-chart-studio/./src/addSampleContent.js","webpack://chord-chart-studio/webpack/bootstrap","webpack://chord-chart-studio/webpack/runtime/compat get default export","webpack://chord-chart-studio/webpack/runtime/define property getters","webpack://chord-chart-studio/webpack/runtime/global","webpack://chord-chart-studio/webpack/runtime/hasOwnProperty shorthand","webpack://chord-chart-studio/webpack/runtime/node module decorator","webpack://chord-chart-studio/webpack/runtime/publicPath","webpack://chord-chart-studio/webpack/runtime/jsonp chunk loading","webpack://chord-chart-studio/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// @see https://egghead.io/lessons/javascript-redux-persisting-the-state-to-the-local-storage\n\nexport const loadState = () => {\n\ttry {\n\t\tconst serializedState = localStorage.getItem('state');\n\t\tif (!serializedState) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn JSON.parse(serializedState);\n\t} catch (err) {\n\t\treturn undefined;\n\t}\n};\n\nexport const saveState = (state) => {\n\ttry {\n\t\tconst serializedState = JSON.stringify(state);\n\t\tlocalStorage.setItem('state', serializedState);\n\t} catch (err) {\n\t\t// ignore write errors\n\t}\n};\n","export default function clock() {\n\treturn Date.now();\n}\n","export const DB_FILES_CREATE = 'db/files/Create';\nexport const DB_FILES_DELETE = 'db/files/Delete';\nexport const DB_FILES_IMPORT = 'db/files/Import';\nexport const DB_FILES_UPDATE = 'db/files/Update';\n","export const DB_OPTION_SET_OPTION_VALUE = 'db/options/setOptionValue';\n","export const UI_LAYOUT_APP_SET_EDITOR_MODE = 'ui/layout/app/setEditorMode';\nexport const UI_LAYOUT_APP_TOGGLE_LEFT_BAR = 'ui/layout/app/toggleLeftBar';\nexport const UI_LAYOUT_APP_TOGGLE_RIGHT_BAR = 'ui/layout/app/toggleRightBar';\n","export const isLeftBarCollapsed = (state) =>\n\tstate.ui.layout.app.isLeftBarCollapsed;\n\nexport const isRightBarCollapsed = (state) =>\n\tstate.ui.layout.app.isRightBarCollapsed;\n\nexport const getEditorMode = (state) => state.ui.layout.app.editorMode;\n","export const getSelectedId = (state) => state.fileManager.selected;\n\nexport const getRenamedId = (state) => state.fileManager.renamed;\n\nexport const getDefaultTitle = (state) => state.fileManager.defaultTitle;\n","import _map from 'lodash/map';\nimport _cloneDeep from 'lodash/cloneDeep';\nimport _isEqual from 'lodash/isEqual';\nimport _sortBy from 'lodash/sortBy';\n\nimport { createSelectorCreator, defaultMemoize } from 'reselect';\n\n// create a \"selector creator\" that uses lodash.isEqual instead of ===\nconst createDeepEqualSelector = createSelectorCreator(defaultMemoize, _isEqual);\n\n// return value should not change when file content changes\nexport const getAllTitles = createDeepEqualSelector(\n\t(state) =>\n\t\t_map(state.db.files.allFiles, ({ title, id }) => ({ title, id })),\n\t(allFiles) => _sortBy(allFiles, (o) => o.title.toLowerCase())\n);\n\nexport const getOne = (state, id) => {\n\treturn state.db.files.allFiles[id];\n};\n\nexport const getCategoryOptions = (state, id, category) => {\n\tconst file = state.db.files.allFiles[id];\n\n\tif (!file) return;\n\n\tif ((file.options || {})[category]) {\n\t\t// handle edge cases where we might have an empty object...\n\t\t// of course this _should_ never happen!\n\t\tif (Object.keys(file.options[category]).length === 0) return;\n\n\t\treturn _cloneDeep(file.options[category]);\n\t}\n};\n\nexport const getLatestModeOptions = (state, id) => {\n\tconst file = state.db.files.allFiles[id];\n\n\tif (!file) return;\n\n\tconst fileOptions = file.options || {};\n\n\tconst allOptionsPerMode = [];\n\tif (fileOptions.edit) allOptionsPerMode.push({ ...fileOptions.edit });\n\tif (fileOptions.play) allOptionsPerMode.push({ ...fileOptions.play });\n\tif (fileOptions.print) allOptionsPerMode.push({ ...fileOptions.print });\n\tif (fileOptions.export) allOptionsPerMode.push({ ...fileOptions.export });\n\n\tif (!allOptionsPerMode.length) return;\n\n\tallOptionsPerMode.sort((a, b) => a.updatedAt - b.updatedAt);\n\n\treturn allOptionsPerMode.reduce(\n\t\t(acc, modeOptions) => Object.assign(acc, modeOptions),\n\t\t{}\n\t);\n};\n","const editorModeOptions = {\n\tedit: ['theme', 'transposeValue', 'preferredAccidentals', 'symbolType'],\n\tplay: [\n\t\t'theme',\n\n\t\t'transposeValue',\n\t\t'preferredAccidentals',\n\t\t'symbolType',\n\n\t\t'chartType',\n\t\t'alignChordsWithLyrics',\n\t\t'alignBars',\n\t\t'autoRepeatChords',\n\t\t'expandSectionCopy',\n\n\t\t'columnsCount',\n\n\t\t'fontSize',\n\t],\n\tprint: [\n\t\t'transposeValue',\n\t\t'preferredAccidentals',\n\t\t'symbolType',\n\n\t\t'chartType',\n\t\t'alignChordsWithLyrics',\n\t\t'alignBars',\n\t\t'autoRepeatChords',\n\t\t'expandSectionCopy',\n\n\t\t'columnsCount',\n\t\t'columnBreakOnSection',\n\t\t'documentMargins',\n\n\t\t'fontSize',\n\t],\n\texport: [\n\t\t'chartFormat',\n\n\t\t'transposeValue',\n\t\t'preferredAccidentals',\n\t\t'symbolType',\n\n\t\t'chartType',\n\t\t'alignChordsWithLyrics',\n\t\t'alignBars',\n\t\t'autoRepeatChords',\n\t\t'expandSectionCopy',\n\t],\n};\n\nexport default editorModeOptions;\n","import _pick from 'lodash/pick';\nimport clock from '../../core/clock';\n\nimport * as actionTypes from './actionsTypes';\n\nimport { DB_OPTION_SET_OPTION_VALUE } from '../options/actionsTypes';\nimport { UI_LAYOUT_APP_SET_EDITOR_MODE } from '../../ui/layout/app/_state/actionsTypes';\nimport { getEditorMode } from '../../ui/layout/app/_state/selectors';\nimport { getSelectedId } from '../../fileManager/_state/selectors';\nimport { getLatestModeOptions, getCategoryOptions } from './selectors';\nimport editorModeOptions from '../options/editorModeOptions';\n\nconst initialState = {\n\tallFiles: {},\n};\n\nfunction createFile(state, action) {\n\tconst { id, title, content } = action.payload;\n\n\tconst allFiles = { ...state.allFiles };\n\tallFiles[id] = {\n\t\tid,\n\t\ttitle,\n\t\tcontent,\n\t};\n\n\treturn {\n\t\t...state,\n\t\tallFiles,\n\t};\n}\n\nfunction updateFile(state, action) {\n\tconst { id, title, content } = action.payload;\n\n\tif ((!title && typeof content === 'undefined') || !state.allFiles[id]) {\n\t\treturn state;\n\t}\n\n\tconst allFiles = { ...state.allFiles };\n\n\tallFiles[id] = { ...allFiles[id] };\n\n\tif (title) {\n\t\tallFiles[id].title = title;\n\t}\n\tif (typeof content !== 'undefined') {\n\t\tallFiles[id].content = content;\n\t}\n\treturn {\n\t\t...state,\n\t\tallFiles,\n\t};\n}\n\nfunction deleteFile(state, action) {\n\tconst { id } = action.payload;\n\n\tif (!id || !state.allFiles[id]) {\n\t\treturn state;\n\t}\n\n\tconst allFiles = { ...state.allFiles };\n\tdelete allFiles[id];\n\n\treturn {\n\t\t...state,\n\t\tallFiles,\n\t};\n}\n\n/**\n * Whenever the user set an option, we save it in the song entity, either:\n * - for the current editing mode if it is a formatting option\n * - in the preferences otherwise\n */\nfunction updateFileOption(state, action, fullState) {\n\tconst { context, key, value } = action.payload;\n\tconst id = getSelectedId(fullState);\n\tconst allFiles = { ...state.allFiles };\n\n\tif (\n\t\t['songFormatting', 'songPreferences'].includes(context) &&\n\t\tallFiles[id]\n\t) {\n\t\tconst editorMode = getEditorMode(fullState);\n\t\tconst optionCategory =\n\t\t\tcontext === 'songPreferences' ? 'preferences' : editorMode;\n\n\t\tallFiles[id] = addOption(allFiles[id], optionCategory, key, value);\n\t\treturn {\n\t\t\t...state,\n\t\t\tallFiles,\n\t\t};\n\t}\n\treturn state;\n}\n\nfunction addOption(fileState, category, key, value) {\n\treturn {\n\t\t...fileState,\n\t\toptions: {\n\t\t\t...fileState.options,\n\t\t\t[category]: {\n\t\t\t\t...(fileState.options || {})[category],\n\t\t\t\tupdatedAt: clock(),\n\t\t\t\t[key]: value,\n\t\t\t},\n\t\t},\n\t};\n}\n\n/**\n * When a user switch mode and the target mode does not have any saved settings yet,\n * we apply the latest saved settings (all modes merged) for a better user flow\n */\nfunction setEditorMode(state, action, fullState) {\n\tconst fileId = getSelectedId(fullState);\n\tconst nextMode = action.payload.mode;\n\n\tconst hasOptionsForNextMode = !!getCategoryOptions(\n\t\tfullState,\n\t\tfileId,\n\t\tnextMode\n\t);\n\n\tif (!hasOptionsForNextMode) {\n\t\tconst previousModeOptions = _pick(\n\t\t\tgetLatestModeOptions(fullState, fileId) || {},\n\t\t\teditorModeOptions[nextMode]\n\t\t);\n\n\t\tif (Object.keys(previousModeOptions).length) {\n\t\t\tpreviousModeOptions.updatedAt = clock();\n\t\t\tconst allFiles = { ...state.allFiles };\n\n\t\t\tallFiles[fileId] = {\n\t\t\t\t...allFiles[fileId],\n\t\t\t\toptions: {\n\t\t\t\t\t...allFiles[fileId].options,\n\t\t\t\t\t[nextMode]: previousModeOptions,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tallFiles,\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n}\n\nexport default (state = initialState, action = {}, fullState = {}) => {\n\tswitch (action.type) {\n\t\tcase actionTypes.DB_FILES_CREATE:\n\t\tcase actionTypes.DB_FILES_IMPORT:\n\t\t\treturn createFile(state, action);\n\t\tcase actionTypes.DB_FILES_UPDATE:\n\t\t\treturn updateFile(state, action);\n\t\tcase actionTypes.DB_FILES_DELETE:\n\t\t\treturn deleteFile(state, action);\n\t\tcase DB_OPTION_SET_OPTION_VALUE:\n\t\t\treturn updateFileOption(state, action, fullState);\n\t\tcase UI_LAYOUT_APP_SET_EDITOR_MODE:\n\t\t\treturn setEditorMode(state, action, fullState);\n\t}\n\treturn state;\n};\n","export const FILE_MANAGER_SELECT_FILE = 'fileManager/select';\nexport const FILE_MANAGER_ENABLE_RENAME = 'fileManager/enableRename';\n","import _cloneDeep from 'lodash/cloneDeep';\n\nexport const getOptionValue = (state, context, key) => {\n\tif (\n\t\t!state.db.options[context] ||\n\t\t!state.db.options[context].values ||\n\t\ttypeof state.db.options[context].values[key] === 'undefined'\n\t) {\n\t\treturn;\n\t}\n\treturn state.db.options[context].values[key];\n};\n\nexport const getAllOptionValues = (state, context) => {\n\tif (!state.db.options[context] || !state.db.options[context].values) {\n\t\treturn;\n\t}\n\treturn _cloneDeep(state.db.options[context].values);\n};\n\nexport const getOptionsDefaults = (state, context) => {\n\tif (!state.db.options[context] || !state.db.options[context].defaults) {\n\t\treturn;\n\t}\n\treturn _cloneDeep(state.db.options[context].defaults);\n};\n","import _pick from 'lodash/pick';\n\nimport * as actionTypes from './actionsTypes';\nimport { getCategoryOptions, getLatestModeOptions } from '../files/selectors';\n\nimport { UI_LAYOUT_APP_SET_EDITOR_MODE } from '../../ui/layout/app/_state/actionsTypes';\nimport { FILE_MANAGER_SELECT_FILE } from '../../fileManager/_state/actionsTypes';\nimport { getSelectedId } from '../../fileManager/_state/selectors';\nimport { getEditorMode } from '../../ui/layout/app/_state/selectors';\nimport { getOptionsDefaults } from './selectors';\nimport allEditorModeOptions from './editorModeOptions';\n\nconst initialState = {};\n\nfunction setOptionValue(state, action) {\n\tconst { context, key, value } = action.payload;\n\n\tif (\n\t\t!state[context] ||\n\t\t!state[context].values ||\n\t\ttypeof state[context].values[key] === 'undefined'\n\t) {\n\t\treturn state;\n\t}\n\n\tconst newState = {\n\t\t...state,\n\t\t[context]: {\n\t\t\t...state[context],\n\t\t\tvalues: { ...state[context].values },\n\t\t},\n\t};\n\tnewState[context].values[key] = value;\n\n\treturn newState;\n}\n\nfunction setEditorMode(state, action, fullState) {\n\tconst fileId = getSelectedId(fullState);\n\tconst nextMode = action.payload.mode;\n\n\tconst newOptions = getModeOptions(fullState, fileId, nextMode);\n\n\treturn {\n\t\t...state,\n\t\tsongFormatting: {\n\t\t\t...state.songFormatting,\n\t\t\tvalues: {\n\t\t\t\t...newOptions,\n\t\t\t},\n\t\t},\n\t};\n}\n\n// Get defined options for a mode, either because they exist for the given mode,\n// or building them from options stored in the other modes\nfunction getModeOptions(fullState, fileId, mode) {\n\tconst defaultOptions = getOptionsDefaults(fullState, 'songFormatting');\n\tlet editorModeOptions = getCategoryOptions(fullState, fileId, mode);\n\n\tif (!editorModeOptions) {\n\t\teditorModeOptions = getLatestModeOptions(fullState, fileId) || {};\n\t}\n\tdelete editorModeOptions.updatedAt;\n\n\t// take only relevant options for the mode\n\teditorModeOptions = _pick(editorModeOptions, allEditorModeOptions[mode]);\n\n\treturn Object.assign(defaultOptions, editorModeOptions);\n}\n\nfunction selectFile(state, action, fullState) {\n\tconst { id } = action.payload;\n\tconst editorMode = getEditorMode(fullState);\n\n\tconst newOptions = getModeOptions(fullState, id, editorMode);\n\n\tconst songPreferences =\n\t\tgetCategoryOptions(fullState, id, 'preferences') || {};\n\tdelete songPreferences.updatedAt;\n\n\tconst defaultPreferences = getOptionsDefaults(fullState, 'songPreferences');\n\n\tconst newPreferences = Object.assign(defaultPreferences, songPreferences);\n\n\treturn {\n\t\t...state,\n\t\tsongPreferences: {\n\t\t\t...state.songPreferences,\n\t\t\tvalues: {\n\t\t\t\t...newPreferences,\n\t\t\t},\n\t\t},\n\t\tsongFormatting: {\n\t\t\t...state.songFormatting,\n\t\t\tvalues: {\n\t\t\t\t...newOptions,\n\t\t\t},\n\t\t},\n\t};\n}\n\nexport default (state = initialState, action = {}, fullState = {}) => {\n\tswitch (action.type) {\n\t\tcase actionTypes.DB_OPTION_SET_OPTION_VALUE: {\n\t\t\treturn setOptionValue(state, action);\n\t\t}\n\t\tcase UI_LAYOUT_APP_SET_EDITOR_MODE: {\n\t\t\treturn setEditorMode(state, action, fullState);\n\t\t}\n\t\tcase FILE_MANAGER_SELECT_FILE: {\n\t\t\treturn selectFile(state, action, fullState);\n\t\t}\n\t}\n\treturn state;\n};\n","import combineSectionReducers from 'combine-section-reducers';\nimport files from './files/reducers';\nimport options from './options/reducers';\n\nexport default combineSectionReducers({\n\tfiles,\n\toptions,\n});\n","import {\n\tFILE_MANAGER_SELECT_FILE,\n\tFILE_MANAGER_ENABLE_RENAME,\n} from './actionsTypes';\n\nimport {\n\tDB_FILES_CREATE,\n\tDB_FILES_DELETE,\n\tDB_FILES_IMPORT,\n\tDB_FILES_UPDATE,\n} from '../../db/files/actionsTypes';\n\nconst initialState = {\n\tselected: '',\n\trenamed: '',\n\tdefaultTitle: '[untitled]',\n};\n\nexport default function reducers(state = initialState, action = {}) {\n\tswitch (action.type) {\n\t\tcase DB_FILES_CREATE: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: id,\n\t\t\t\trenamed: id,\n\t\t\t};\n\t\t}\n\n\t\tcase DB_FILES_IMPORT: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: id,\n\t\t\t\trenamed: '',\n\t\t\t};\n\t\t}\n\n\t\tcase DB_FILES_UPDATE: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trenamed: '',\n\t\t\t};\n\t\t}\n\n\t\tcase DB_FILES_DELETE: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: '',\n\t\t\t\trenamed: '',\n\t\t\t};\n\t\t}\n\n\t\tcase FILE_MANAGER_SELECT_FILE: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: id,\n\t\t\t\trenamed: id === state.renamed ? id : '',\n\t\t\t};\n\t\t}\n\n\t\tcase FILE_MANAGER_ENABLE_RENAME: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trenamed: id,\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n}\n","export const SONG_IMPORTER_IMPORT_CANCEL = 'songImporter/import/cancel';\nexport const SONG_IMPORTER_IMPORT_START = 'songImporter/import/start';\nexport const SONG_IMPORTER_SET_CONTENT = 'songImporter/setContent';\nexport const SONG_IMPORTER_SET_INPUT_FORMAT = 'songImporter/setInputFormat';\n","import domPurify from 'dompurify';\n\nexport default function stripTags(html) {\n\treturn domPurify.sanitize(html, {\n\t\tALLOWED_TAGS: ['#text'],\n\t\tKEEP_CONTENT: true,\n\t});\n}\n","import * as actions from './actionsTypes';\nimport { DB_FILES_IMPORT } from '../../db/files/actionsTypes';\n\nimport stripTags from '../../core/stripTags';\n\nconst initialState = {\n\tcontent: '',\n\tisFromWeb: false,\n\tisImporting: false,\n\tinputFormat: 'auto',\n\ttitle: '',\n};\n\nexport default function reducers(state = initialState, action = {}) {\n\tswitch (action.type) {\n\t\tcase actions.SONG_IMPORTER_SET_CONTENT: {\n\t\t\tconst { content, title = '' } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcontent: stripTags(content),\n\t\t\t\ttitle: title ? stripTags(title) : state.title,\n\t\t\t};\n\t\t}\n\n\t\tcase actions.SONG_IMPORTER_SET_INPUT_FORMAT: {\n\t\t\tconst { inputFormat } = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tinputFormat,\n\t\t\t};\n\t\t}\n\n\t\tcase DB_FILES_IMPORT:\n\t\tcase actions.SONG_IMPORTER_IMPORT_CANCEL: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcontent: '',\n\t\t\t\ttitle: '',\n\t\t\t\tisImporting: false,\n\t\t\t};\n\t\t}\n\n\t\tcase actions.SONG_IMPORTER_IMPORT_START: {\n\t\t\tconst { content, inputFormat, title, isFromWeb } = action.payload;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisImporting: true,\n\t\t\t\tcontent: content ? stripTags(content) : '',\n\t\t\t\ttitle: title ? stripTags(title) : '',\n\t\t\t\tinputFormat: inputFormat || state.inputFormat,\n\t\t\t\tisFromWeb,\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n}\n","import {\n\tUI_LAYOUT_APP_TOGGLE_RIGHT_BAR,\n\tUI_LAYOUT_APP_TOGGLE_LEFT_BAR,\n\tUI_LAYOUT_APP_SET_EDITOR_MODE,\n} from './actionsTypes';\n\nimport {\n\tDB_FILES_CREATE,\n\tDB_FILES_IMPORT,\n\tDB_FILES_DELETE,\n} from '../../../../db/files/actionsTypes';\n\nconst initialState = {\n\tisLeftBarCollapsed: false,\n\tisRightBarCollapsed: false,\n\teditorMode: 'edit',\n\tactiveModal: 'none',\n};\n\nexport default function reducers(state = initialState, action = {}) {\n\tswitch (action.type) {\n\t\tcase UI_LAYOUT_APP_TOGGLE_LEFT_BAR: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLeftBarCollapsed: !state.isLeftBarCollapsed,\n\t\t\t};\n\t\t}\n\t\tcase UI_LAYOUT_APP_TOGGLE_RIGHT_BAR: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisRightBarCollapsed: !state.isRightBarCollapsed,\n\t\t\t};\n\t\t}\n\t\tcase UI_LAYOUT_APP_SET_EDITOR_MODE: {\n\t\t\tconst { mode } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditorMode: mode,\n\t\t\t};\n\t\t}\n\t\tcase DB_FILES_DELETE:\n\t\tcase DB_FILES_CREATE:\n\t\tcase DB_FILES_IMPORT: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditorMode: 'edit',\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n}\n","import combineSectionReducers from 'combine-section-reducers';\nimport app from './app/_state/reducers';\n\nexport default combineSectionReducers({\n\tapp,\n});\n","import combineSectionReducers from 'combine-section-reducers';\nimport layout from './layout/reducers';\n\nexport default combineSectionReducers({\n\tlayout,\n});\n","import combineSectionReducers from 'combine-section-reducers';\n\nimport db from '../db/reducers';\nimport fileManager from '../fileManager/_state/reducers';\nimport songImporter from '../songImporter/_state/reducers';\nimport ui from '../ui/reducers';\n\nexport default combineSectionReducers({\n\tdb,\n\tfileManager,\n\tsongImporter,\n\tui,\n});\n","import db from '../db/seed';\n\nexport default {\n\tdb,\n};\n","import options from './options/seed';\n\nexport default {\n\toptions,\n};\n","export default {\n\t// editorPreferences are identical for all songs\n\teditorPreferences: {\n\t\tvalues: {\n\t\t\ttheme: 'dark1',\n\t\t\tchartFormat: 'chordmark',\n\t\t},\n\t\tdefaults: {\n\t\t\ttheme: 'dark1',\n\t\t\tchartFormat: 'chordmark',\n\t\t},\n\t\t//userDefaults: {},\n\t},\n\t// songPreferences are identical for all song rendering modes\n\t// therefore, they are only saved once for each song\n\tsongPreferences: {\n\t\tvalues: {\n\t\t\ttransposeValue: 0,\n\t\t\tpreferredAccidentals: 'auto',\n\t\t\tsymbolType: 'chord',\n\t\t},\n\t\tdefaults: {\n\t\t\ttransposeValue: 0,\n\t\t\tpreferredAccidentals: 'auto',\n\t\t\tsymbolType: 'chord',\n\t\t},\n\t\t//userDefaults: {},\n\t},\n\t// songFormatting options are specific to a given mode (print, export...)\n\t// they are saved separately for each song\n\tsongFormatting: {\n\t\tvalues: {\n\t\t\tchartType: 'all',\n\t\t\talignChordsWithLyrics: true,\n\t\t\talignBars: true,\n\t\t\tautoRepeatChords: true,\n\t\t\texpandSectionCopy: true,\n\n\t\t\tfontSize: 0,\n\t\t\tcolumnsCount: 1,\n\t\t\tcolumnBreakOnSection: true,\n\t\t\tdocumentMargins: 3,\n\t\t},\n\t\tdefaults: {\n\t\t\tchartType: 'all',\n\t\t\talignChordsWithLyrics: true,\n\t\t\talignBars: true,\n\t\t\tautoRepeatChords: true,\n\t\t\texpandSectionCopy: true,\n\n\t\t\tfontSize: 0,\n\t\t\tcolumnsCount: 1,\n\t\t\tcolumnBreakOnSection: true,\n\t\t\tdocumentMargins: 3,\n\t\t},\n\t\t//userDefaults: {},\n\t},\n};\n","import _defaultsDeep from 'lodash/defaultsDeep';\n\nimport { createStore as createReduxStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunkMiddleware from 'redux-thunk';\n\nimport { loadState, saveState } from './localStorage';\nimport allReducers from './reducers';\nimport seed from './seed';\n\nlet store;\n\nexport function createStore() {\n\tconst storeEnhancers = composeWithDevTools(\n\t\tapplyMiddleware(thunkMiddleware)\n\t);\n\n\tconst persistedState = loadState();\n\n\t// store migrations\n\tif (persistedState && persistedState.db && persistedState.db.options) {\n\t\tdelete persistedState.db.options.rendering; // remove old options before the options refactor in v0.9.0\n\t}\n\n\t/* Reset all options * /\n\tObject.keys(persistedState.db.files.allFiles).forEach((fileId) => {\n\t\tdelete persistedState.db.files.allFiles[fileId].options;\n\t});\n\tdelete persistedState.db.options;\n\t/**/\n\t/* misc * /\n\tdelete persistedState.songImporter;\n\tdelete persistedState.fileManager.selected;\n\t/**/\n\n\tconst initialState = _defaultsDeep(persistedState, seed);\n\n\tstore = createReduxStore(allReducers, initialState, storeEnhancers);\n\n\tstore.subscribe(() => {\n\t\tsaveState(store.getState());\n\t});\n}\n\nexport function getStore() {\n\treturn store;\n}\n","export default function createAction(type, payload) {\n\tif (!type) {\n\t\tthrow new TypeError('Cannot create an action without an action type');\n\t}\n\treturn {\n\t\ttype,\n\t\tpayload,\n\t};\n}\n","import * as actionsTypes from './actionsTypes';\n\nimport createAction from '../../core/createAction';\n\nexport const setContent = (content, title) =>\n\tcreateAction(actionsTypes.SONG_IMPORTER_SET_CONTENT, { content, title });\n\nexport const setInputFormat = (inputFormat) =>\n\tcreateAction(actionsTypes.SONG_IMPORTER_SET_INPUT_FORMAT, { inputFormat });\n\nexport const startImport = () =>\n\tcreateAction(actionsTypes.SONG_IMPORTER_IMPORT_START, {\n\t\tisFromWeb: false,\n\t});\n\nexport const startImportFromWeb = (inputFormat, content, title) =>\n\tcreateAction(actionsTypes.SONG_IMPORTER_IMPORT_START, {\n\t\tcontent,\n\t\tinputFormat,\n\t\ttitle,\n\t\tisFromWeb: true,\n\t});\n\nexport const cancelImport = () =>\n\tcreateAction(actionsTypes.SONG_IMPORTER_IMPORT_CANCEL);\n","import { getStore } from '../state/store';\nimport { startImportFromWeb } from './_state/actions';\n\n/**\n * @typedef {Object} WebsiteImportMessage\n * @type {Object}\n * @property {('ultimateGuitar')} source - website from which the tab comes from\n * @property {('chordPro|ChordOverLyrics')} inputFormat - format to pass to chord-mark-converter\n * @property {String} chordChart - content of the chord chart\n * @property {String} title - song title\n * @property {String} artist - song artist\n */\n\nconst songImporterHandlers = {\n\t/**\n\t *\n\t * @param {WebsiteImportMessage} message\n\t */\n\t'@CCS/IMPORT_TAB': (message) => {\n\t\tconst store = getStore();\n\n\t\tconst title = buildTitle(message.title, message.artist);\n\t\tstore.dispatch(\n\t\t\tstartImportFromWeb(message.inputFormat, message.chordChart, title)\n\t\t);\n\t},\n};\n\nconst buildTitle = (songTitle, artist) => {\n\tlet title = songTitle;\n\tif (artist) {\n\t\ttitle += ' - ' + artist;\n\t}\n\treturn title;\n};\n\nexport default function getSongImporterHandlers() {\n\treturn songImporterHandlers;\n}\n","import getSongImporterHandlers from './songImporter/getMessageHandlers';\n\nexport default function registerHandlers() {\n\twindow.addEventListener('message', _handleMessage);\n}\n\n// unit test backdoor, not for public usage!\nexport const _handleMessage = (e) => {\n\tconst allHandlers = {\n\t\t...getSongImporterHandlers(),\n\t};\n\n\tif (e.source !== window || e.origin !== window.location.origin) {\n\t\treturn false;\n\t}\n\tconst message = e.data;\n\n\tif (typeof allHandlers[message.type] === 'function') {\n\t\tallHandlers[message.type](message.payload);\n\t}\n\treturn true;\n};\n","import './ErrorBoundary.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n// source: https://codepen.io/gaearon/pen/wqvxGa?editors=0010\nclass ErrorBoundary extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { error: null, errorInfo: null };\n\t}\n\n\tcomponentDidCatch(error, errorInfo) {\n\t\tthis.setState({\n\t\t\terror: error,\n\t\t\terrorInfo: errorInfo,\n\t\t});\n\t}\n\n\trender() {\n\t\tif (this.state.errorInfo) {\n\t\t\treturn (\n\t\t\t\t<div className={'ErrorBoundary'}>\n\t\t\t\t\t<h2>Something went wrong</h2>\n\t\t\t\t\t<details style={{ whiteSpace: 'pre-wrap' }} open={true}>\n\t\t\t\t\t\t{this.state.error && this.state.error.toString()}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{this.state.errorInfo.componentStack}\n\t\t\t\t\t</details>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn this.props.children;\n\t}\n}\n\nErrorBoundary.propTypes = {\n\tchildren: PropTypes.any,\n};\n\nexport default ErrorBoundary;\n","import {\n\tUI_LAYOUT_APP_SET_EDITOR_MODE,\n\tUI_LAYOUT_APP_TOGGLE_LEFT_BAR,\n\tUI_LAYOUT_APP_TOGGLE_RIGHT_BAR,\n} from './actionsTypes';\n\nimport createAction from '../../../../core/createAction';\n\nexport const setEditorMode = (mode) =>\n\tcreateAction(UI_LAYOUT_APP_SET_EDITOR_MODE, { mode });\n\nexport const toggleLeftBar = () => createAction(UI_LAYOUT_APP_TOGGLE_LEFT_BAR);\n\nexport const toggleRightBar = () =>\n\tcreateAction(UI_LAYOUT_APP_TOGGLE_RIGHT_BAR);\n","import './Logo.scss';\n\nimport React from 'react';\n\nimport logoSvg from '../../../../../../logo/media/logo.svg';\n\nfunction Logo() {\n\treturn (\n\t\t<div className={'logo'}>\n\t\t\t<div className={'logo-isExpanded'}>\n\t\t\t\t<div className={'logo-img'}>\n\t\t\t\t\t<svg className=\"stacked\">\n\t\t\t\t\t\t<title>Chord Chart Studio</title>\n\t\t\t\t\t\t<use href={logoSvg + '#stacked'}></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default React.memo(Logo);\n","import './Icon.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Icon(props) {\n\tconst { iconName } = props;\n\n\tconst classList = ['icon', 'material-icons'];\n\n\treturn <i className={classList.join(' ')}>{iconName}</i>;\n}\n\nIcon.propTypes = {\n\ticonName: PropTypes.string.isRequired,\n};\n\nexport default React.memo(Icon);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon.js';\n\nfunction NavEntry(props) {\n\tconst { label, icon, editorMode, setEditorMode, isActive, isDisabled } =\n\t\tprops;\n\n\tconst classNames = ['mainNavEntry'];\n\n\tif (isActive) {\n\t\tclassNames.push('mainNavEntry-isActive');\n\t}\n\tif (isDisabled) {\n\t\tclassNames.push('mainNavEntry-isDisabled');\n\t}\n\n\tfunction handleClick() {\n\t\tif (!isDisabled) setEditorMode(editorMode);\n\t}\n\n\treturn (\n\t\t<li className={classNames.join(' ')} onClick={handleClick}>\n\t\t\t<span className={'mainNavEntry-icon'}>\n\t\t\t\t<Icon iconName={icon} />\n\t\t\t</span>\n\t\t\t{label}\n\t\t</li>\n\t);\n}\n\nNavEntry.propTypes = {\n\tlabel: PropTypes.string.isRequired,\n\ticon: PropTypes.string.isRequired,\n\teditorMode: PropTypes.string.isRequired,\n\tsetEditorMode: PropTypes.func.isRequired,\n\tisActive: PropTypes.bool.isRequired,\n\tisDisabled: PropTypes.bool.isRequired,\n};\n\nexport default React.memo(NavEntry);\n","import './Nav.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport NavEntry from './NavEntry.js';\n\nfunction Nav(props) {\n\tconst { currentMode, allEntries, setEditorMode, selectedId } = props;\n\n\treturn (\n\t\t<nav className={'mainNav'}>\n\t\t\t<ul className={'mainNav-entries'}>\n\t\t\t\t{allEntries.map((entry, key) => (\n\t\t\t\t\t<NavEntry\n\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\tisActive={\n\t\t\t\t\t\t\t!!selectedId && entry.editorMode === currentMode\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisDisabled={!selectedId}\n\t\t\t\t\t\tsetEditorMode={setEditorMode}\n\t\t\t\t\t\t{...entry}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</nav>\n\t);\n}\n\nNav.propTypes = {\n\tcurrentMode: PropTypes.string.isRequired,\n\tsetEditorMode: PropTypes.func.isRequired,\n\tselectedId: PropTypes.string,\n\tallEntries: PropTypes.arrayOf(\n\t\tPropTypes.shape({\n\t\t\tid: PropTypes.string.isRequired,\n\t\t\tlabel: PropTypes.string.isRequired,\n\t\t\ticon: PropTypes.string.isRequired,\n\t\t\teditorMode: PropTypes.string.isRequired,\n\t\t})\n\t),\n};\n\nexport default React.memo(Nav);\n","import './Button.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Button = ({ children, isDisabled, buttonName, onClick, type }) => {\n\tconst allClassNames = ['Button'];\n\n\tif (type === 'primary') allClassNames.push('Button-primary');\n\tif (type === 'secondary') allClassNames.push('Button-secondary');\n\tif (isDisabled) allClassNames.push('Button-isDisabled');\n\n\treturn (\n\t\t<button\n\t\t\tclassName={allClassNames.join(' ')}\n\t\t\tdisabled={isDisabled}\n\t\t\ttype={'button'}\n\t\t\tname={buttonName}\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t{children}\n\t\t</button>\n\t);\n};\n\nButton.propTypes = {\n\tchildren: PropTypes.string.isRequired,\n\tisDisabled: PropTypes.bool,\n\tbuttonName: PropTypes.string.isRequired,\n\ttype: PropTypes.string.isRequired,\n\tonClick: PropTypes.func.isRequired,\n};\n\nButton.defaultProps = {\n\tisDisabled: false,\n};\n\nexport default Button;\n","import './UserGuide.scss';\n\nimport React from 'react';\n\nimport Button from '../../_components/Button';\nimport Icon from '../../_components/Icon.js';\n\nconst userGuideUrl = 'https://chord-chart-studio.netlify.app';\n\nconst UserGuide = () => {\n\tconst openUserGuide = () => {\n\t\twindow.open(userGuideUrl, '_blank').focus();\n\t};\n\n\treturn (\n\t\t<div className={'userGuide'}>\n\t\t\t<div className={'userGuide-isCollapsed'}>\n\t\t\t\t<Icon iconName={'help_outline'} />\n\t\t\t</div>\n\n\t\t\t<div className={'userGuide-isExpanded'}>\n\t\t\t\t<Button\n\t\t\t\t\tbuttonName={'userGuide'}\n\t\t\t\t\ttype={'primary'}\n\t\t\t\t\tonClick={openUserGuide}\n\t\t\t\t>\n\t\t\t\t\tUser Guide\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nUserGuide.propTypes = {};\n\nUserGuide.defaultProps = {};\n\nexport default React.memo(UserGuide);\n","export default () => ({'chord-chart-studio':'v0.14.0','chord-symbol':'v4.0.0','chord-mark':'v0.13.0'});","import getVersions from '../../../core/getVersions';\nimport './Versions.scss';\n\nimport React from 'react';\n\nfunction Versions() {\n\tconst versions = getVersions();\n\treturn (\n\t\t<div className={'versions'}>\n\t\t\t<div className={'versions-isExpanded'}>\n\t\t\t\tChord Chart Studio {versions['chord-chart-studio']}\n\t\t\t\t<br />\n\t\t\t\tChordMark {versions['chord-mark']} <br />\n\t\t\t\tChordSymbol {versions['chord-symbol']} <br />\n\t\t\t\tLogo by{' '}\n\t\t\t\t<a\n\t\t\t\t\thref={'https://spelling-bee-assistant.app/'}\n\t\t\t\t\ttarget={'_blank'}\n\t\t\t\t\trel={'noreferrer'}\n\t\t\t\t>\n\t\t\t\t\tDieter Raber\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default React.memo(Versions);\n","import { v4 as uuidv4 } from 'uuid';\n\nimport createAction from '../../core/createAction';\nimport * as actionTypes from './actionsTypes';\n\nexport const createFile = (title, content = '') => {\n\tif (!title) {\n\t\tthrow new TypeError('Cannot create a file without title');\n\t}\n\tconst payload = {\n\t\tid: uuidv4(),\n\t\ttitle,\n\t\tcontent,\n\t};\n\treturn createAction(actionTypes.DB_FILES_CREATE, payload);\n};\n\nexport const importFile = (title, content = '') => {\n\tif (!title) {\n\t\tthrow new TypeError('Cannot import a file without title');\n\t}\n\tconst payload = {\n\t\tid: uuidv4(),\n\t\ttitle,\n\t\tcontent,\n\t};\n\treturn createAction(actionTypes.DB_FILES_IMPORT, payload);\n};\n\nexport const updateFile = (id, { title, content } = {}) => {\n\tif (!id) {\n\t\tthrow new TypeError('Cannot update a file without an id');\n\t}\n\tconst payload = {\n\t\tid,\n\t\ttitle,\n\t\tcontent,\n\t};\n\treturn createAction(actionTypes.DB_FILES_UPDATE, payload);\n};\n\nexport const deleteFile = (id) => {\n\treturn createAction(actionTypes.DB_FILES_DELETE, { id });\n};\n","export const getContent = (state) => state.songImporter.content;\n\nexport const getInputFormat = (state) => state.songImporter.inputFormat;\n\nexport const getTitle = (state) => state.songImporter.title;\n\nexport const isImporting = (state) => state.songImporter.isImporting;\n\nexport const isFromWeb = (state) => state.songImporter.isFromWeb;\n","import './Modal.scss';\n\nimport React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Modal(props) {\n\tconst { children, closeModal } = props;\n\n\tuseEffect(() => {\n\t\tconst handleKeyboard = (e) => {\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\t\twindow.addEventListener('keyup', handleKeyboard);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('keyup', handleKeyboard);\n\t\t};\n\t});\n\n\treturn (\n\t\t<section className={'mod-ModalContainer'}>\n\t\t\t<div\n\t\t\t\tclassName={'mod-Overlay'}\n\t\t\t\tonClick={closeModal}\n\t\t\t\tdata-testid={'modal-overlay'}\n\t\t\t></div>\n\t\t\t<div className={'mod-ContentContainer'}>{children}</div>\n\t\t</section>\n\t);\n}\n\nModal.propTypes = {\n\tchildren: PropTypes.element.isRequired,\n\tcloseModal: PropTypes.func.isRequired,\n};\n\nexport default Modal;\n","import React from 'react';\nimport Button from '../../ui/_components/Button';\nimport PropTypes from 'prop-types';\n\nconst Header = ({\n\tcancelImport,\n\tchordMarkContent,\n\timportFile,\n\ttitle,\n\tcontent,\n\terror,\n}) => {\n\tconst headerTitle = title ? 'Import \"' + title + '\"' : 'Import song';\n\n\tconst doImport = () => {\n\t\timportFile(title || '[untitled]', chordMarkContent);\n\t};\n\n\treturn (\n\t\t<div className={'sim-Header_Container'}>\n\t\t\t<div className={'sim-Header_Title'}>{headerTitle}</div>\n\t\t\t<div className={'sim-Header_Actions'}>\n\t\t\t\t<Button\n\t\t\t\t\tonClick={cancelImport}\n\t\t\t\t\tbuttonName={'cancel'}\n\t\t\t\t\ttype={'secondary'}\n\t\t\t\t>\n\t\t\t\t\tCANCEL\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tonClick={doImport}\n\t\t\t\t\tbuttonName={'import'}\n\t\t\t\t\ttype={'primary'}\n\t\t\t\t\tisDisabled={content === '' || error !== ''}\n\t\t\t\t>\n\t\t\t\t\tIMPORT\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nHeader.propTypes = {\n\tcancelImport: PropTypes.func.isRequired,\n\tchordMarkContent: PropTypes.string,\n\tcontent: PropTypes.string,\n\terror: PropTypes.string,\n\timportFile: PropTypes.func.isRequired,\n\ttitle: PropTypes.string,\n};\n\nexport default Header;\n","import { filesize } from 'filesize';\n\nconst maxFileSizeBytes = 50 * 1024;\n\nconst getUploadedFile = (fileList) => {\n\treturn new Promise((resolve, reject) => {\n\t\tif (fileList.length) {\n\t\t\tconst file = fileList[0];\n\n\t\t\tif (isOversized(file)) {\n\t\t\t\treject(getFileTooBigMsg(file.size));\n\t\t\t} else if (!isTextFile(file)) {\n\t\t\t\treject(getWrongFileTypeMsg(file));\n\t\t\t} else {\n\t\t\t\tfile.text()\n\t\t\t\t\t.then((fileContent) => {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tcontent: fileContent,\n\t\t\t\t\t\t\ttitle: getSongTitle(file),\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\treject(e);\n\t\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\treject(getNoFileSelectedMsg());\n\t\t}\n\t});\n};\n\nconst getSongTitle = (file) => file.name.substr(0, file.name.lastIndexOf('.'));\n\nconst isOversized = (file) => file.size > maxFileSizeBytes;\n\n// files with extension such as .cho or .chopro are detected with an empty mimetype\n// so we consider them as text\nconst isTextFile = (file) =>\n\tfile.type.indexOf('text') === 0 || file.type.length === 0;\n\nconst getFileTooBigMsg = (actualSize) =>\n\t'The selected file is too big: ' +\n\tfilesize(actualSize, { round: 0 }) +\n\t' (maximum allowed file size is ' +\n\tfilesize(maxFileSizeBytes, { round: 0 }) +\n\t').';\n\nconst getWrongFileTypeMsg = (file) =>\n\t'Cannot import file of type ' + file.type + '.';\n\nconst getNoFileSelectedMsg = () => 'No file selected.';\n\nexport default getUploadedFile;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport getUploadedFile from '../getUploadedFile';\n\nconst allowedFiles = 'text/*,.cho,.crd,.chopro,.chord,.pro,.txt,.md';\n\nconst FilePicker = ({ setContent }) => {\n\tconst handleChange = (ev) => {\n\t\tgetUploadedFile(ev.target.files)\n\t\t\t.then((file) => {\n\t\t\t\tsetContent(file.content, file.title);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tsetContent(e);\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<label\n\t\t\t\thtmlFor={'importSong-Input'}\n\t\t\t\tclassName={'Button Button-primary'}\n\t\t\t>\n\t\t\t\tSelect File\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\tid={'importSong-Input'}\n\t\t\t\tname={'importSong-Input'}\n\t\t\t\ttype={'file'}\n\t\t\t\tclassName={'sim-InputFile_Input'}\n\t\t\t\tonChange={handleChange}\n\t\t\t\taccept={allowedFiles}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nFilePicker.propTypes = {\n\tsetContent: PropTypes.func.isRequired,\n};\n\nexport default FilePicker;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../ui/_components/Icon';\n\nfunction Input(props) {\n\tconst { content, setContent, isDisabled } = props;\n\n\tconst onChange = (e) => {\n\t\tsetContent(e.target.value);\n\t};\n\n\tconst allClasses = ['sim-Input_Textarea'];\n\n\tif (isDisabled) {\n\t\tallClasses.push('sim-Input_Textarea-Disabled');\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<div className={'sim-Input_Header'}>\n\t\t\t\t<Icon iconName={'arrow_drop_down'} />\n\t\t\t\tCopy/paste below\n\t\t\t\t<Icon iconName={'arrow_drop_down'} />\n\t\t\t</div>\n\t\t\t<textarea\n\t\t\t\tclassName={allClasses.join(' ')}\n\t\t\t\tonChange={onChange}\n\t\t\t\tvalue={content}\n\t\t\t\tdisabled={isDisabled}\n\t\t\t\tdata-testid={'sim-input'}\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nInput.propTypes = {\n\tcontent: PropTypes.string.isRequired,\n\tisDisabled: PropTypes.bool.isRequired,\n\tsetContent: PropTypes.func.isRequired,\n};\n\nInput.defaultProps = {};\n\nexport default Input;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction PreviewError(props) {\n\tconst { inputFormat, error } = props;\n\n\treturn (\n\t\t<div className={'sim-Preview_Error'}>\n\t\t\t<p>\n\t\t\t\tThere was an error when trying to parse the song in the\n\t\t\t\tspecified input format ({inputFormat}).\n\t\t\t\t<br />\n\t\t\t\tPlease correct the input or try another format.\n\t\t\t\t<br />\n\t\t\t\tThe error was:\n\t\t\t</p>\n\t\t\t<p>&quot;{error}&quot;</p>\n\t\t\t<p>\n\t\t\t\tHint: most of the time, this is related to an unclosed\n\t\t\t\t&quot;[&quot; or &quot;&#123;&quot; or an unsupported ChordPro\n\t\t\t\tdirective\n\t\t\t</p>\n\t\t</div>\n\t);\n}\n\nPreviewError.propTypes = {\n\terror: PropTypes.string,\n\tinputFormat: PropTypes.string.isRequired,\n};\n\nPreviewError.defaultProps = {};\n\nexport default PreviewError;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction InputFormatEntry(props) {\n\tconst { setInputFormat, inputFormat, id, label, isDisabled } = props;\n\n\tconst onChange = (e) => {\n\t\tif (!isDisabled) {\n\t\t\tsetInputFormat(e.target.value);\n\t\t}\n\t};\n\n\tconst allInputClasses = ['sim-InputFormat_Entry'];\n\tconst allLabelClasses = ['sim-InputFormat_Label'];\n\n\tif (isDisabled) {\n\t\tallInputClasses.push('sim-InputFormat_Entry-Disabled');\n\t\tallLabelClasses.push('sim-InputFormat_Label-Disabled');\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<input\n\t\t\t\tclassName={allInputClasses.join(' ')}\n\t\t\t\ttype={'radio'}\n\t\t\t\tname={'inputFormat'}\n\t\t\t\tid={id}\n\t\t\t\tvalue={id}\n\t\t\t\tonChange={onChange}\n\t\t\t\tchecked={inputFormat === id}\n\t\t\t\t// Disabled radio buttons do not show the currently selected option\n\t\t\t\t// disabled={isDisabled}\n\t\t\t/>\n\t\t\t<label className={allLabelClasses.join(' ')} htmlFor={id}>\n\t\t\t\t{label}\n\t\t\t</label>\n\t\t</>\n\t);\n}\n\nInputFormatEntry.propTypes = {\n\tsetInputFormat: PropTypes.func.isRequired,\n\tinputFormat: PropTypes.string.isRequired,\n\tid: PropTypes.string.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tisDisabled: PropTypes.bool.isRequired,\n};\n\nInputFormatEntry.defaultProps = {};\n\nexport default InputFormatEntry;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport InputFormatEntry from './InputFormatEntry';\n\nconst allEntries = [\n\t{\n\t\tid: 'auto',\n\t\tlabel: 'Detect',\n\t},\n\t{\n\t\tid: 'chordPro',\n\t\tlabel: 'Bracketed chords (ChordPro)',\n\t},\n\t{\n\t\tid: 'chordsOverLyrics',\n\t\tlabel: 'Chords over lyrics (Ultimate Guitar...)',\n\t},\n];\n\nfunction InputFormatSelector(props) {\n\tconst { setInputFormat, inputFormat, disableAll } = props;\n\n\tconst rendered = allEntries.map((entry) => (\n\t\t<InputFormatEntry\n\t\t\tsetInputFormat={setInputFormat}\n\t\t\tid={entry.id}\n\t\t\tkey={entry.id}\n\t\t\tlabel={entry.label}\n\t\t\tinputFormat={inputFormat}\n\t\t\tisDisabled={disableAll}\n\t\t/>\n\t));\n\n\treturn (\n\t\t<div className={'sim-InputFormat'}>\n\t\t\tInput format:\n\t\t\t{rendered}\n\t\t</div>\n\t);\n}\n\nInputFormatSelector.propTypes = {\n\tdisableAll: PropTypes.bool.isRequired,\n\tsetInputFormat: PropTypes.func.isRequired,\n\tinputFormat: PropTypes.string.isRequired,\n};\n\nInputFormatSelector.defaultProps = {};\n\nexport default InputFormatSelector;\n","import './SongImporter.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { convert2ChordMark } from 'chord-mark-converters';\n\nimport Modal from '../../ui/_components/Modal';\nimport Header from './Header';\nimport FilePicker from './FilePicker';\nimport Input from './Input';\nimport PreviewError from './PreviewError';\nimport InputFormatSelector from './InputFormatSelector';\nimport Icon from '../../ui/_components/Icon';\n\nfunction SongImporter(props) {\n\tconst {\n\t\tcancelImport,\n\t\tcontent,\n\t\timportFile,\n\t\tisFromWeb,\n\t\tisImporting,\n\t\tsetContent,\n\t\tsetInputFormat,\n\t\tinputFormat,\n\t\ttitle,\n\t} = props;\n\n\tif (!isImporting) return null;\n\n\tlet chordMarkContent = '';\n\tlet error = '';\n\n\ttry {\n\t\tchordMarkContent = convert2ChordMark(content, { inputFormat });\n\t} catch (e) {\n\t\terror = e.message;\n\t}\n\n\treturn (\n\t\t<Modal closeModal={cancelImport}>\n\t\t\t<div\n\t\t\t\tclassName={'sim-SongImporterModal_Container'}\n\t\t\t\tdata-testid={'song-importer'}\n\t\t\t>\n\t\t\t\t<Header\n\t\t\t\t\tcancelImport={cancelImport}\n\t\t\t\t\tchordMarkContent={chordMarkContent}\n\t\t\t\t\tcontent={content}\n\t\t\t\t\terror={error}\n\t\t\t\t\timportFile={importFile}\n\t\t\t\t\ttitle={title}\n\t\t\t\t/>\n\t\t\t\t<div className={'sim-TwoColumns_Container'}>\n\t\t\t\t\t<div className={'sim-Column_Container'}>\n\t\t\t\t\t\t<FilePicker setContent={setContent} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'sim-Column_Container'}>\n\t\t\t\t\t\t<InputFormatSelector\n\t\t\t\t\t\t\tinputFormat={inputFormat}\n\t\t\t\t\t\t\tsetInputFormat={setInputFormat}\n\t\t\t\t\t\t\tdisableAll={isFromWeb === true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t'sim-TwoColumns_Container sim-TwoColumns_Container-autoHeight'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<div className={'sim-Column_Container'}>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tcontent={content}\n\t\t\t\t\t\t\tsetContent={setContent}\n\t\t\t\t\t\t\tisDisabled={isFromWeb}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'sim-Column_Container'}>\n\t\t\t\t\t\t<div className={'sim-Input_Header'}>\n\t\t\t\t\t\t\t<Icon iconName={'arrow_drop_down'} />\n\t\t\t\t\t\t\tChordMark preview\n\t\t\t\t\t\t\t<Icon iconName={'arrow_drop_down'} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={'sim-Preview_Container'}\n\t\t\t\t\t\t\tdata-testid={'sim-preview'}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{!error ? (\n\t\t\t\t\t\t\t\tchordMarkContent\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<PreviewError\n\t\t\t\t\t\t\t\t\tinputFormat={inputFormat}\n\t\t\t\t\t\t\t\t\terror={error}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n\nSongImporter.propTypes = {\n\tcancelImport: PropTypes.func.isRequired,\n\tcontent: PropTypes.string.isRequired,\n\timportFile: PropTypes.func.isRequired,\n\tisFromWeb: PropTypes.bool.isRequired,\n\tisImporting: PropTypes.bool.isRequired,\n\tsetContent: PropTypes.func.isRequired,\n\tsetInputFormat: PropTypes.func.isRequired,\n\tinputFormat: PropTypes.string.isRequired,\n\ttitle: PropTypes.string,\n};\n\nSongImporter.defaultProps = {};\n\nexport default SongImporter;\n","import { connect } from 'react-redux';\n\nimport { importFile } from '../../db/files/actions';\nimport { setContent, setInputFormat, cancelImport } from '../_state/actions';\nimport {\n\tgetInputFormat,\n\tgetContent,\n\tgetTitle,\n\tisImporting,\n\tisFromWeb,\n} from '../_state/selectors';\n\nimport SongImporter from '../_components/SongImporter';\n\nexport default connect(\n\t(state) => ({\n\t\tcontent: getContent(state),\n\t\tisFromWeb: isFromWeb(state),\n\t\tisImporting: isImporting(state),\n\t\tinputFormat: getInputFormat(state),\n\t\ttitle: getTitle(state),\n\t}),\n\n\t{\n\t\tsetContent,\n\t\tsetInputFormat,\n\t\tcancelImport,\n\t\timportFile,\n\t}\n)(SongImporter);\n","export default [\n\t{\n\t\tid: 'edit',\n\t\tlabel: 'Edit',\n\t\ticon: 'create',\n\t\teditorMode: 'edit',\n\t},\n\t{\n\t\tid: 'play',\n\t\tlabel: 'Screen view',\n\t\ticon: 'music_note',\n\t\teditorMode: 'play',\n\t},\n\t{\n\t\tid: 'print',\n\t\tlabel: 'Print/PDF Preview',\n\t\ticon: 'print',\n\t\teditorMode: 'print',\n\t},\n\t{\n\t\tid: 'export',\n\t\tlabel: 'Export Preview',\n\t\ticon: 'save_alt',\n\t\teditorMode: 'export',\n\t},\n];\n","import './App.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Logo from '../../../sideBar/_components/Logo';\nimport Nav from './Nav';\nimport UserGuide from '../../../sideBar/_components/UserGuide';\nimport Versions from '../../../sideBar/_components/Versions';\nimport Icon from '../../../_components/Icon';\nimport SongImporter from '../../../../songImporter/_containers/SongImporter';\n\nimport allNavEntries from '../allNavEntries';\n\nfunction App(props) {\n\tconst {\n\t\teditorMode,\n\t\tisLeftBarCollapsed,\n\t\tisRightBarCollapsed,\n\t\ttoggleLeftBar,\n\t\ttoggleRightBar,\n\t\tsetEditorMode,\n\t\tselectedId,\n\n\t\tleftBar,\n\t\trightBar,\n\t} = props;\n\n\tconst leftBarClassNames = ['leftBar'];\n\tif (isLeftBarCollapsed) {\n\t\tleftBarClassNames.push('leftBar-isCollapsed');\n\t}\n\n\tconst rightBarClassNames = ['rightBar'];\n\tif (isRightBarCollapsed) {\n\t\trightBarClassNames.push('rightBar-isCollapsed');\n\t}\n\n\treturn (\n\t\t<div className={'appLayout-wrapper'}>\n\t\t\t<SongImporter />\n\t\t\t<section className={leftBarClassNames.join(' ')}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'leftBar-content'}\n\t\t\t\t\tonClick={isLeftBarCollapsed ? toggleLeftBar : null}\n\t\t\t\t>\n\t\t\t\t\t<Logo />\n\t\t\t\t\t{leftBar}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'leftBar-collapser'}\n\t\t\t\t\tonClick={toggleLeftBar}\n\t\t\t\t\tdata-testid={'leftBar-collapser'}\n\t\t\t\t>\n\t\t\t\t\t<span className={'leftBar-collapserIcon'}>\n\t\t\t\t\t\t<Icon iconName={'keyboard_arrow_left'} />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t<section className={'appLayout-main'}>\n\t\t\t\t<section className={'appLayout-header'}>\n\t\t\t\t\t<Nav\n\t\t\t\t\t\tallEntries={allNavEntries}\n\t\t\t\t\t\tcurrentMode={editorMode}\n\t\t\t\t\t\tsetEditorMode={setEditorMode}\n\t\t\t\t\t\tselectedId={selectedId}\n\t\t\t\t\t/>\n\t\t\t\t</section>\n\t\t\t\t<section className={'appLayout-content'}>\n\t\t\t\t\t{props.children}\n\t\t\t\t</section>\n\t\t\t</section>\n\t\t\t<section className={rightBarClassNames.join(' ')}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'rightBar-collapser'}\n\t\t\t\t\tonClick={toggleRightBar}\n\t\t\t\t\tdata-testid={'rightBar-collapser'}\n\t\t\t\t>\n\t\t\t\t\t<span className={'rightBar-collapserIcon'}>\n\t\t\t\t\t\t<Icon iconName={'keyboard_arrow_right'} />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'rightBar-content'}\n\t\t\t\t\tonClick={isRightBarCollapsed ? toggleRightBar : null}\n\t\t\t\t>\n\t\t\t\t\t<UserGuide />\n\t\t\t\t\t{rightBar}\n\t\t\t\t\t<Versions />\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t</div>\n\t);\n}\n\nApp.propTypes = {\n\tchildren: PropTypes.element,\n\n\tisLeftBarCollapsed: PropTypes.bool,\n\tisRightBarCollapsed: PropTypes.bool,\n\tselectedId: PropTypes.string,\n\ttoggleLeftBar: PropTypes.func.isRequired,\n\ttoggleRightBar: PropTypes.func.isRequired,\n\n\teditorMode: PropTypes.string.isRequired,\n\tsetEditorMode: PropTypes.func.isRequired,\n\n\tleftBar: PropTypes.element.isRequired,\n\trightBar: PropTypes.element.isRequired,\n};\n\nApp.defaultProps = {\n\tisLeftBarCollapsed: false,\n\tisRightBarCollapsed: false,\n};\n\nexport default App;\n","import { connect } from 'react-redux';\n\nimport {\n\ttoggleLeftBar,\n\ttoggleRightBar,\n\tsetEditorMode,\n} from '../_state/actions';\nimport {\n\tisLeftBarCollapsed,\n\tisRightBarCollapsed,\n\tgetEditorMode,\n} from '../_state/selectors';\nimport { getSelectedId } from '../../../../fileManager/_state/selectors';\n\nimport App from '../_components/App';\n\nexport default connect(\n\t(state) => ({\n\t\teditorMode: getEditorMode(state),\n\t\tisLeftBarCollapsed: isLeftBarCollapsed(state),\n\t\tisRightBarCollapsed: isRightBarCollapsed(state),\n\t\tselectedId: getSelectedId(state),\n\t}),\n\n\t{\n\t\ttoggleLeftBar,\n\t\ttoggleRightBar,\n\t\tsetEditorMode,\n\t}\n)(App);\n","import createAction from '../../core/createAction';\n\nimport * as actionsTypes from './actionsTypes';\n\nexport const selectFile = (id) =>\n\tcreateAction(actionsTypes.FILE_MANAGER_SELECT_FILE, { id });\n\nexport const enableRename = (id) =>\n\tcreateAction(actionsTypes.FILE_MANAGER_ENABLE_RENAME, { id });\n","import { renderSong as renderSongCm, parseSong } from 'chord-mark';\nimport {\n\tchordMark2ChordPro,\n\tchordMark2UltimateGuitar,\n} from 'chord-mark-converters';\nimport { chordRendererFactory } from 'chord-symbol';\nimport chordSymbolUltimateGuitar from 'chord-symbol-ultimateguitar';\n\nimport stripTags from './stripTags';\n\nexport function renderAsText(\n\tsongTxt,\n\trenderOptions = {},\n\tuseChartFormat = false\n) {\n\treturn render(songTxt, renderOptions, useChartFormat, 'text');\n}\n\nexport function renderAsHtml(\n\tsongTxt,\n\trenderOptions = {},\n\tuseChartFormat = false\n) {\n\treturn render(songTxt, renderOptions, useChartFormat, 'html');\n}\n\nfunction render(songTxt, renderOptions, useChartFormat, outputFormat) {\n\tif (useChartFormat) {\n\t\tswitch (renderOptions.chartFormat) {\n\t\t\tcase 'chordmarkSrc':\n\t\t\t\treturn outputFormat === 'html' ? toHtml(songTxt) : songTxt;\n\t\t\tcase 'chordpro': {\n\t\t\t\trenderOptions.customRenderer = chordMark2ChordPro();\n\t\t\t\tconst cpTxt = renderSong(songTxt, renderOptions);\n\t\t\t\treturn outputFormat === 'html' ? toHtml(cpTxt) : cpTxt;\n\t\t\t}\n\t\t\tcase 'ultimateGuitar': {\n\t\t\t\trenderOptions.customRenderer = chordMark2UltimateGuitar();\n\t\t\t\tconst ugTxt =\n\t\t\t\t\trenderSong(songTxt, {\n\t\t\t\t\t\t...renderOptions,\n\t\t\t\t\t\tcustomRenderer: chordMark2UltimateGuitar(),\n\t\t\t\t\t\tprintBarSeparators: 'grids',\n\t\t\t\t\t\tprintChordsDuration: 'never',\n\t\t\t\t\t\tprintSubBeatDelimiters: false,\n\t\t\t\t\t\tprintInlineTimeSignatures: false,\n\t\t\t\t\t\tchordSymbolRenderer: chordRendererFactory({\n\t\t\t\t\t\t\tcustomFilters: [chordSymbolUltimateGuitar()],\n\t\t\t\t\t\t\tuseShortNamings: true,\n\t\t\t\t\t\t\taccidentalsType:\n\t\t\t\t\t\t\t\trenderOptions.accidentalsType === 'auto'\n\t\t\t\t\t\t\t\t\t? 'original'\n\t\t\t\t\t\t\t\t\t: renderOptions.accidentalsType,\n\t\t\t\t\t\t\t...renderOptions, // duh!\n\t\t\t\t\t\t}),\n\t\t\t\t\t}) +\n\t\t\t\t\t'\\n\\nCreated with Chord Chart Studio (https://chord-chart-studio.netlify.app)';\n\t\t\t\treturn outputFormat === 'html' ? toHtml(ugTxt) : ugTxt;\n\t\t\t}\n\t\t}\n\t}\n\n\tconst chordMarkHtml = renderSong(songTxt, renderOptions);\n\treturn outputFormat === 'html' ? chordMarkHtml : toText(chordMarkHtml);\n}\n\nfunction renderSong(songTxt, renderOptions) {\n\ttry {\n\t\tconst parsed = parseSong(songTxt);\n\t\treturn renderSongCm(parsed, {\n\t\t\t...renderOptions,\n\t\t});\n\t} catch (e) {\n\t\treturn e.message;\n\t}\n}\n\nfunction toHtml(text) {\n\treturn text\n\t\t.split('\\n')\n\t\t.map((line) => (line === '' ? '&nbsp;' : line))\n\t\t.map((line) => `<span class=\"txtLine\">${line}</span>`)\n\t\t.join('');\n}\n\nfunction toText(html) {\n\tconst allLines = html.match(/(<p.*?>.*?<\\/p>)/gm);\n\n\treturn allLines\n\t\t.map((line) => stripTags(line))\n\t\t.map((line) => (line === '&nbsp;' ? '' : line))\n\t\t.join('\\n');\n}\n","import { saveAs } from 'file-saver';\nimport { getStore } from '../state/store';\n\nimport { getSelectedId } from './_state/selectors';\nimport { getOne } from '../db/files/selectors';\nimport { getOptionValue } from '../db/options/selectors';\n\nimport { renderAsText } from '../core/renderSong';\n\nexport default function exportSelectedFileAsText() {\n\tconst store = getStore();\n\tconst state = store.getState();\n\n\tconst selectedId = getSelectedId(state);\n\tconst selectedFile = getOne(state, selectedId);\n\n\tconst renderOptions = {\n\t\tchartFormat: getOptionValue(state, 'editorPreferences', 'chartFormat'),\n\n\t\ttransposeValue: getOptionValue(\n\t\t\tstate,\n\t\t\t'songPreferences',\n\t\t\t'transposeValue'\n\t\t),\n\t\taccidentalsType: getOptionValue(\n\t\t\tstate,\n\t\t\t'songPreferences',\n\t\t\t'accidentalsType'\n\t\t),\n\t\tsymbolType: getOptionValue(state, 'songPreferences', 'symbolType'),\n\n\t\tchartType: getOptionValue(state, 'songFormatting', 'chartType'),\n\t\talignChordsWithLyrics: getOptionValue(\n\t\t\tstate,\n\t\t\t'songFormatting',\n\t\t\t'alignChordsWithLyrics'\n\t\t),\n\t\talignBars: getOptionValue(state, 'songFormatting', 'alignBars'),\n\t\tautoRepeatChords: getOptionValue(\n\t\t\tstate,\n\t\t\t'songFormatting',\n\t\t\t'autoRepeatChords'\n\t\t),\n\t\texpandSectionCopy: getOptionValue(\n\t\t\tstate,\n\t\t\t'songFormatting',\n\t\t\t'expandSectionCopy'\n\t\t),\n\t};\n\n\tconst fileContent = renderAsText(selectedFile.content, renderOptions, true);\n\tconst fileExt = renderOptions.chartFormat === 'chordpro' ? 'cho' : 'txt';\n\tconst fileName = `${selectedFile.title}.${fileExt}`;\n\n\tconst blob = new Blob([fileContent], {\n\t\ttype: 'text/plain;charset=utf-8',\n\t\tendings: 'native',\n\t});\n\tsaveAs(blob, fileName);\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from './Button';\nimport Modal from './Modal';\n\nfunction ModalConfirm(props) {\n\tconst {\n\t\tconfirmAction,\n\t\tconfirmTitle = 'OK',\n\t\tcancelAction,\n\t\tcancelTitle = 'CANCEL',\n\t\tchildren,\n\t} = props;\n\n\treturn (\n\t\t<Modal closeModal={cancelAction}>\n\t\t\t<section className={'mod-ModalConfirmContainer'}>\n\t\t\t\t<div className={'mod-ModalConfirmMessage'}>{children}</div>\n\t\t\t\t<div className={'mod-ModalConfirmButtons'}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={cancelAction}\n\t\t\t\t\t\ttype={'secondary'}\n\t\t\t\t\t\tbuttonName={'cancel'}\n\t\t\t\t\t>\n\t\t\t\t\t\t{cancelTitle}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={confirmAction}\n\t\t\t\t\t\ttype={'primary'}\n\t\t\t\t\t\tbuttonName={'confirm'}\n\t\t\t\t\t>\n\t\t\t\t\t\t{confirmTitle}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t</Modal>\n\t);\n}\n\nModalConfirm.propTypes = {\n\tconfirmAction: PropTypes.func.isRequired,\n\tconfirmTitle: PropTypes.string,\n\tcancelAction: PropTypes.func.isRequired,\n\tcancelTitle: PropTypes.string,\n\tchildren: PropTypes.node.isRequired,\n};\n\nexport default ModalConfirm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ModalConfirm from '../../ui/_components/ModalConfirm';\n\nfunction DeleteConfirmModal(props) {\n\tconst { selected, deleteFile, isDeleting, setIsDeleting } = props;\n\n\tif (!isDeleting) {\n\t\treturn null;\n\t}\n\n\tconst cancelDelete = () => setIsDeleting(false);\n\tconst confirmDelete = () => {\n\t\tsetIsDeleting(false);\n\t\tdeleteFile(selected);\n\t};\n\n\treturn (\n\t\t<ModalConfirm\n\t\t\tconfirmAction={confirmDelete}\n\t\t\tconfirmTitle={'DELETE'}\n\t\t\tcancelAction={cancelDelete}\n\t\t>\n\t\t\tAre you sure you want to delete this file?\n\t\t\t<br />\n\t\t\tThis action cannot be undone.\n\t\t</ModalConfirm>\n\t);\n}\n\nDeleteConfirmModal.propTypes = {\n\tdeleteFile: PropTypes.func.isRequired,\n\tisDeleting: PropTypes.bool.isRequired,\n\tselected: PropTypes.string.isRequired,\n\tsetIsDeleting: PropTypes.func.isRequired,\n};\n\nexport default DeleteConfirmModal;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../ui/_components/Icon';\n\nfunction FileActionEntry(props) {\n\tconst { icon, text, action, isDisabled } = props;\n\n\tconst classNames = ['fileManagerAction'];\n\n\tif (isDisabled) {\n\t\tclassNames.push('fileManagerAction-isDisabled');\n\t}\n\tconst handleClick = () => {\n\t\tif (!isDisabled) {\n\t\t\taction();\n\t\t}\n\t};\n\n\treturn (\n\t\t<span className={classNames.join(' ')} onClick={handleClick}>\n\t\t\t<span className={'fileManagerAction-icon'}>\n\t\t\t\t<Icon iconName={icon} /> {text}\n\t\t\t</span>\n\t\t</span>\n\t);\n}\n\nFileActionEntry.propTypes = {\n\ticon: PropTypes.string.isRequired,\n\ttext: PropTypes.string.isRequired,\n\taction: PropTypes.func.isRequired,\n\tisDisabled: PropTypes.bool.isRequired,\n};\n\nexport default React.memo(FileActionEntry);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport FileActionEntry from './FileActionEntry';\n\nfunction FileActions(props) {\n\tconst {\n\t\tselected,\n\t\tcreateFile,\n\t\tdeleteFile,\n\t\tenableRename,\n\t\tstartImport,\n\t\texportAsText,\n\t\tprintFile,\n\t} = props;\n\n\tconst allActions = [\n\t\t{\n\t\t\ticon: 'upload',\n\t\t\ttext: 'Import',\n\t\t\taction: startImport,\n\t\t\tisDisabled: false,\n\t\t},\n\t\t{\n\t\t\ticon: 'add_circle',\n\t\t\ttext: 'New',\n\t\t\taction: createFile,\n\t\t\tisDisabled: false,\n\t\t},\n\t\t{\n\t\t\ticon: 'create',\n\t\t\ttext: 'Rename',\n\t\t\taction: enableRename,\n\t\t\tisDisabled: !selected,\n\t\t},\n\t\t{\n\t\t\ticon: 'delete',\n\t\t\ttext: 'Delete',\n\t\t\taction: deleteFile,\n\t\t\tisDisabled: !selected,\n\t\t},\n\t\t{\n\t\t\ticon: 'print',\n\t\t\ttext: 'Print',\n\t\t\taction: printFile,\n\t\t\tisDisabled: !selected,\n\t\t},\n\t\t{\n\t\t\ticon: 'download',\n\t\t\ttext: 'Export',\n\t\t\taction: exportAsText,\n\t\t\tisDisabled: !selected,\n\t\t},\n\t];\n\n\treturn (\n\t\t<div className={'fileManager-actionsList'}>\n\t\t\t{allActions.map((action, key) => (\n\t\t\t\t<FileActionEntry {...action} key={key} />\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nFileActions.propTypes = {\n\tselected: PropTypes.string,\n\tcreateFile: PropTypes.func.isRequired,\n\tdeleteFile: PropTypes.func.isRequired,\n\tenableRename: PropTypes.func.isRequired,\n\texportAsText: PropTypes.func.isRequired,\n\tprintFile: PropTypes.func.isRequired,\n\tstartImport: PropTypes.func.isRequired,\n};\n\nexport default React.memo(FileActions);\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nfunction FileEntry(props) {\n\tconst [title, setTitle] = useState(props.title);\n\n\tconst {\n\t\tfileId,\n\t\tisSelected,\n\t\tisRenamed,\n\t\tdefaultTitle,\n\t\tselectFile,\n\t\tenableRename,\n\t\tupdateFile,\n\t} = props;\n\n\tconst classList = ['fileManagerEntry'];\n\tif (isSelected) {\n\t\tclassList.push('fileManagerEntry-isSelected');\n\t}\n\tif (isRenamed) {\n\t\tclassList.push('fileManagerEntry-isRenamed');\n\t}\n\n\tconst inputRef = React.createRef();\n\n\tuseEffect(() => {\n\t\tif (isRenamed) {\n\t\t\tinputRef.current.focus();\n\t\t}\n\t}, [isRenamed, inputRef]);\n\n\tfunction handleClick() {\n\t\tif (!isSelected) {\n\t\t\tselectFile(fileId);\n\t\t}\n\t}\n\n\tfunction handleDoubleClick(e) {\n\t\tif (!isRenamed) {\n\t\t\tenableRename(fileId);\n\t\t\te.target.select();\n\t\t}\n\t}\n\n\tfunction handleKeyPress(e) {\n\t\tif (isRenamed && e.which === 13) {\n\t\t\te.preventDefault();\n\t\t\twindow.getSelection().removeAllRanges();\n\n\t\t\tconst newTitle = e.target.value;\n\t\t\tsaveTitle(newTitle);\n\t\t}\n\t}\n\n\tfunction handleChange(e) {\n\t\tsetTitle(e.target.value);\n\t}\n\n\tfunction handleFocus(e) {\n\t\tif (isRenamed) {\n\t\t\te.target.select();\n\t\t}\n\t}\n\n\tfunction handleBlur(e) {\n\t\tif (isRenamed) {\n\t\t\tconst newTitle = e.target.value;\n\t\t\tsaveTitle(newTitle);\n\t\t}\n\t}\n\n\tfunction saveTitle(newTitle) {\n\t\tnewTitle = newTitle || defaultTitle;\n\n\t\tupdateFile(fileId, {\n\t\t\ttitle: newTitle,\n\t\t});\n\t\tsetTitle(newTitle);\n\n\t\tinputRef.current.scrollLeft = 0;\n\t}\n\n\treturn (\n\t\t<li\n\t\t\tclassName={classList.join(' ')}\n\t\t\tonClick={handleClick}\n\t\t\tonDoubleClick={handleDoubleClick}\n\t\t>\n\t\t\t<input\n\t\t\t\tclassName={'fileManagerEntry-input'}\n\t\t\t\tref={inputRef}\n\t\t\t\ttype={'text'}\n\t\t\t\tvalue={title}\n\t\t\t\treadOnly={isRenamed ? null : 'readOnly'}\n\t\t\t\tautoFocus={isRenamed ? 'autoFocus' : null}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tonBlur={handleBlur}\n\t\t\t\tonFocus={handleFocus}\n\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t/>\n\t\t</li>\n\t);\n}\n\nFileEntry.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n\tfileId: PropTypes.string.isRequired,\n\tisSelected: PropTypes.bool.isRequired,\n\tisRenamed: PropTypes.bool.isRequired,\n\tdefaultTitle: PropTypes.string.isRequired,\n\tselectFile: PropTypes.func.isRequired,\n\tenableRename: PropTypes.func.isRequired,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default FileEntry;\n","import './FileManager.scss';\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport exportSelectedFileAsText from '../exportSelectedFileAsText';\n\nimport DeleteConfirmModal from './DeleteConfirmModal';\nimport Icon from '../../ui/_components/Icon';\nimport FileActions from './FileActions';\nimport FileEntry from './FileEntry';\n\nfunction FileManager(props) {\n\tconst [isDeleting, setIsDeleting] = useState(false);\n\n\tconst {\n\t\tallTitles,\n\t\tselected,\n\t\trenamed,\n\t\tdefaultTitle,\n\n\t\tcreateFile,\n\t\tdeleteFile,\n\t\tenableRename,\n\t\tstartImport,\n\t\tselectFile,\n\t\tupdateFile,\n\t\tsetEditorMode,\n\t} = props;\n\n\treturn (\n\t\t<div className={'fileManager'}>\n\t\t\t<DeleteConfirmModal\n\t\t\t\tdeleteFile={deleteFile}\n\t\t\t\tisDeleting={isDeleting}\n\t\t\t\tselected={selected}\n\t\t\t\tsetIsDeleting={setIsDeleting}\n\t\t\t/>\n\t\t\t<div className={'fileManager-isCollapsed'}>\n\t\t\t\t<span className={'fileManager-icon'}>\n\t\t\t\t\t<Icon iconName={'file_copy'} />\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div className={'fileManager-isExpanded'}>\n\t\t\t\t<FileActions\n\t\t\t\t\tselected={selected}\n\t\t\t\t\tcreateFile={() => createFile(defaultTitle)}\n\t\t\t\t\tdeleteFile={() => setIsDeleting(true)}\n\t\t\t\t\tenableRename={() => enableRename(selected)}\n\t\t\t\t\tstartImport={() => startImport()}\n\t\t\t\t\texportAsText={() => {\n\t\t\t\t\t\tsetEditorMode('export');\n\t\t\t\t\t\tsetTimeout(() => exportSelectedFileAsText(), 0);\n\t\t\t\t\t}}\n\t\t\t\t\tprintFile={() => {\n\t\t\t\t\t\tsetEditorMode('print');\n\t\t\t\t\t\tsetTimeout(() => window.print(), 0);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<ul className={'fileManager-entriesList'}>\n\t\t\t\t\t{allTitles.map((file) => (\n\t\t\t\t\t\t<FileEntry\n\t\t\t\t\t\t\ttitle={file.title}\n\t\t\t\t\t\t\tdefaultTitle={defaultTitle}\n\t\t\t\t\t\t\tfileId={file.id}\n\t\t\t\t\t\t\tisSelected={selected === file.id}\n\t\t\t\t\t\t\tisRenamed={renamed === file.id}\n\t\t\t\t\t\t\tselectFile={selectFile}\n\t\t\t\t\t\t\tupdateFile={updateFile}\n\t\t\t\t\t\t\tenableRename={enableRename}\n\t\t\t\t\t\t\tkey={file.id}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nFileManager.propTypes = {\n\tallTitles: PropTypes.arrayOf(\n\t\tPropTypes.shape({\n\t\t\ttitle: PropTypes.string.isRequired,\n\t\t\tid: PropTypes.string.isRequired,\n\t\t})\n\t).isRequired,\n\tselected: PropTypes.string.isRequired,\n\trenamed: PropTypes.string.isRequired,\n\tdefaultTitle: PropTypes.string.isRequired,\n\n\tselectFile: PropTypes.func.isRequired,\n\tcreateFile: PropTypes.func.isRequired,\n\tdeleteFile: PropTypes.func.isRequired,\n\tenableRename: PropTypes.func.isRequired,\n\tstartImport: PropTypes.func.isRequired,\n\tupdateFile: PropTypes.func.isRequired,\n\tsetEditorMode: PropTypes.func.isRequired,\n};\n\nexport default FileManager;\n","import { connect } from 'react-redux';\n\nimport { selectFile, enableRename } from '../_state/actions';\nimport {\n\tgetDefaultTitle,\n\tgetSelectedId,\n\tgetRenamedId,\n} from '../_state/selectors';\n\nimport { createFile, updateFile, deleteFile } from '../../db/files/actions';\nimport { startImport } from '../../songImporter/_state/actions';\nimport { setEditorMode } from '../../ui/layout/app/_state/actions';\n\nimport { getAllTitles } from '../../db/files/selectors';\n\nimport FileManager from '../_components/FileManager';\n\nexport default connect(\n\t(state) => ({\n\t\tselected: getSelectedId(state),\n\t\trenamed: getRenamedId(state),\n\t\tdefaultTitle: getDefaultTitle(state),\n\t\tallTitles: getAllTitles(state),\n\t}),\n\n\t{\n\t\tselectFile,\n\t\tcreateFile,\n\t\tdeleteFile,\n\t\tupdateFile,\n\t\tenableRename,\n\t\tsetEditorMode,\n\t\tstartImport,\n\t}\n)(FileManager);\n","import domPurify from 'dompurify';\n\nexport default function escapeHTML(unescaped) {\n\treturn domPurify.sanitize(unescaped);\n}\n","import './SongRenderer.scss';\n\nimport _pick from 'lodash/pick';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport escapeHTML from '../../core/escapeHTML';\n\nimport { renderAsHtml } from '../../core/renderSong';\n\nfunction SongRenderer(props) {\n\tconst { content, useChartFormat } = props;\n\n\tconst renderOptions = _pick(props, [\n\t\t'chartFormat',\n\n\t\t'transposeValue',\n\t\t'accidentalsType',\n\t\t'symbolType',\n\n\t\t'chartType',\n\t\t'alignChordsWithLyrics',\n\t\t'alignBars',\n\t\t'autoRepeatChords',\n\t\t'expandSectionCopy',\n\t]);\n\n\tconst rendered = renderAsHtml(content, renderOptions, useChartFormat);\n\n\treturn (\n\t\t<div className={'songRenderer'}>\n\t\t\t<div\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: escapeHTML(rendered),\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nSongRenderer.propTypes = {\n\tuseChartFormat: PropTypes.bool.isRequired,\n\tchartFormat: PropTypes.string.isRequired,\n\tcontent: PropTypes.string,\n};\n\nSongRenderer.defaultProps = {\n\tcontent: '',\n\tuseChartFormat: false,\n};\n\nexport default SongRenderer;\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../db/options/selectors';\n\nimport SongRenderer from '../_components/SongRenderer';\n\nexport default connect((state) => ({\n\t// songPreferences\n\ttransposeValue: getOptionValue(state, 'songPreferences', 'transposeValue'),\n\taccidentalsType: getOptionValue(\n\t\tstate,\n\t\t'songPreferences',\n\t\t'preferredAccidentals'\n\t),\n\tsymbolType: getOptionValue(state, 'songPreferences', 'symbolType'),\n\n\t// songFormatting\n\tchartFormat: getOptionValue(state, 'editorPreferences', 'chartFormat'),\n\tchartType: getOptionValue(state, 'songFormatting', 'chartType'),\n\talignChordsWithLyrics: getOptionValue(\n\t\tstate,\n\t\t'songFormatting',\n\t\t'alignChordsWithLyrics'\n\t),\n\talignBars: getOptionValue(state, 'songFormatting', 'alignBars'),\n\tautoRepeatChords: getOptionValue(\n\t\tstate,\n\t\t'songFormatting',\n\t\t'autoRepeatChords'\n\t),\n\texpandSectionCopy: getOptionValue(\n\t\tstate,\n\t\t'songFormatting',\n\t\t'expandSectionCopy'\n\t),\n}))(SongRenderer);\n","import './EditorPreview.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport SongRenderer from '../../_containers/SongRenderer';\n\nfunction EditorPreview(props) {\n\tconst { selectedFile } = props;\n\n\tconst classNames = ['editorPreview'];\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<SongRenderer content={selectedFile.content} />\n\t\t</div>\n\t);\n}\n\nEditorPreview.propTypes = {\n\tselectedFile: PropTypes.object.isRequired,\n};\n\nexport default EditorPreview;\n","import { Schema } from 'prosemirror-model';\n\nconst editorSchema = new Schema({\n\tnodes: {\n\t\tdoc: {\n\t\t\tcontent: 'block+',\n\t\t},\n\n\t\tparagraph: {\n\t\t\tcontent: 'inline*',\n\t\t\tgroup: 'block',\n\t\t\tparseDOM: [{ tag: 'p' }],\n\t\t\ttoDOM() {\n\t\t\t\treturn ['p', 0];\n\t\t\t},\n\t\t},\n\n\t\thard_break: {\n\t\t\tinline: true,\n\t\t\tgroup: 'inline',\n\t\t\tselectable: false,\n\t\t\tparseDOM: [{ tag: 'br' }],\n\t\t\t// no idea how to test this!\n\t\t\t/* istanbul ignore next */\n\t\t\ttoDOM() {\n\t\t\t\treturn ['br'];\n\t\t\t},\n\t\t},\n\n\t\ttext: {\n\t\t\tgroup: 'inline',\n\t\t},\n\t},\n});\n\nexport default editorSchema;\n","/**\n * Convert a proseMirror state to plain text\n */\nexport default function stateToText(state) {\n\tconst json = state.toJSON();\n\n\treturn json.doc.content\n\t\t.map((paragraph) => {\n\t\t\tif (!paragraph.content) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn paragraph.content.reduce((acc, current) => {\n\t\t\t\tacc += current.text || '\\n';\n\t\t\t\treturn acc;\n\t\t\t}, '');\n\t\t})\n\t\t.join('\\n');\n}\n","import domPurify from 'dompurify';\n\n/**\n * Minimal wrapper around DOMPurify library.\n * Pretty drastic also: anything that is HTML is just simply ignored, including text content of tags.\n *\n * @param {String} dirty\n * @returns {String} clean HTML\n */\nexport default function toSafeHtml(dirty) {\n\tconst config = {\n\t\tALLOWED_TAGS: ['p', '#text'],\n\t\tKEEP_CONTENT: false,\n\t};\n\n\treturn domPurify.sanitize(dirty, config);\n}\n","import './ProsemirrorEditorView.scss';\n\nimport React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { EditorState } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { DOMParser as pmDOMParser } from 'prosemirror-model';\n\nimport getPlugins from './getPlugins';\nimport editorSchema from './schema';\n\nimport stateToText from './converters/stateToText';\nimport textToDom from './converters/textToDom';\n\nimport 'prosemirror-view/style/prosemirror.css';\n\nfunction createEditorState(editorContent) {\n\treturn EditorState.create({\n\t\tdoc: pmDOMParser\n\t\t\t.fromSchema(editorSchema)\n\t\t\t.parse(textToDom(editorContent), { preserveWhitespace: 'full' }),\n\t\tplugins: getPlugins(),\n\t});\n}\n\nfunction createEditorView(editorState, updateFile, fileId) {\n\treturn new EditorView(null, {\n\t\tstate: editorState,\n\t\tdispatchTransaction: function dispatchTransaction(transaction) {\n\t\t\tconst { state, transactions } =\n\t\t\t\tthis.state.applyTransaction(transaction);\n\n\t\t\tthis.updateState(state);\n\n\t\t\tif (transactions.some((tr) => tr.docChanged)) {\n\t\t\t\tupdateFile(fileId, { content: stateToText(state) });\n\t\t\t}\n\t\t},\n\t});\n}\n\nfunction ProseMirrorEditorView(props) {\n\tconst { selectedFileId, editorContent, updateFile } = props;\n\n\tconst editorView = useRef();\n\tconst editorDom = useRef();\n\tconst previousFileId = usePrevious(selectedFileId);\n\n\t/**\n\t * Editor is recreated on component mount and on file change.\n\t * The later is needed as we need to to re-bind the change handler with the new file id.\n\t */\n\tfunction shouldCreateEditor() {\n\t\treturn (\n\t\t\tselectedFileId &&\n\t\t\t(!editorView.current || previousFileId !== selectedFileId)\n\t\t);\n\t}\n\n\t// Editor has been previously created, but now no file is selected anymore\n\tfunction isEditorOrphan() {\n\t\treturn editorExists() && !selectedFileId;\n\t}\n\n\tfunction editorExists() {\n\t\treturn editorView.current && editorView.current.dom.parentNode;\n\t}\n\n\tfunction destroyEditor() {\n\t\teditorView.current.dom.parentNode.removeChild(editorView.current.dom);\n\t}\n\n\tuseEffect(() => {\n\t\tif (shouldCreateEditor()) {\n\t\t\tif (editorExists()) {\n\t\t\t\tdestroyEditor();\n\t\t\t}\n\n\t\t\tconst editorState = createEditorState(editorContent);\n\t\t\teditorView.current = createEditorView(\n\t\t\t\teditorState,\n\t\t\t\tupdateFile,\n\t\t\t\tselectedFileId\n\t\t\t);\n\t\t\teditorDom.current.appendChild(editorView.current.dom);\n\n\t\t\t// expose editor instance as a component property for unit tests\n\t\t\tProseMirrorEditorView.editorView = editorView.current;\n\t\t} else if (isEditorOrphan()) {\n\t\t\tdestroyEditor();\n\t\t}\n\t});\n\n\treturn <div className={'prosemirrorWrapper'} ref={editorDom} />;\n}\n\nProseMirrorEditorView.defaultProps = {\n\tselectedFileId: '',\n\teditorContent: '',\n};\n\nProseMirrorEditorView.propTypes = {\n\tselectedFileId: PropTypes.string,\n\teditorContent: PropTypes.string,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default ProseMirrorEditorView;\n\n// @see https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\nfunction usePrevious(value) {\n\tconst ref = useRef();\n\tuseEffect(() => {\n\t\tref.current = value;\n\t});\n\treturn ref.current;\n}\n","import escapeHTML from './toSafeHtml';\n\n/**\n * @param {String} text\n * @returns {HTMLElement}\n */\nexport default function textToDom(text) {\n\tconst html = escapeHTML(text)\n\t\t.split('\\n')\n\t\t.map((line) => `<p>${line}</p>`)\n\t\t.join('');\n\n\tconst div = document.createElement('div');\n\tdiv.innerHTML = escapeHTML(html);\n\n\treturn div;\n}\n","import { keymap } from 'prosemirror-keymap';\nimport { baseKeymap } from 'prosemirror-commands';\nimport { undo, redo, history as pmHistory } from 'prosemirror-history';\n\nexport default function getPlugins() {\n\treturn [\n\t\tpmHistory(),\n\t\tkeymap({ 'Mod-z': undo, 'Mod-y': redo }),\n\t\tkeymap(baseKeymap),\n\t];\n}\n","import './EditorLayout.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ScrollSync, ScrollSyncNode } from 'scroll-sync-react';\n\nimport EditorPreview from '../../../songRenderers/editorPreview/_components/EditorPreview';\nimport ProseMirrorEditorView from '../prosemirror/ProsemirrorEditorView';\nimport Icon from '../../../ui/_components/Icon';\n\nfunction EditorLayout(props) {\n\tconst { selectedFile, updateFile, theme } = props;\n\n\tconst previewClassNames = [\n\t\t'songEditor-preview',\n\t\t'cmTheme-' + theme,\n\t\t'cmTheme-fadeRepeats',\n\t];\n\n\treturn (\n\t\t<>\n\t\t\t<div className={'songEditor-headers'}>\n\t\t\t\t<div className={'songEditor-sourceHeader'}>\n\t\t\t\t\t<Icon iconName={'arrow_drop_down'} />\n\t\t\t\t\tChordMark source (\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t'https://chordmark.netlify.app/docs/getting-started'\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget={'_blank'}\n\t\t\t\t\t\trel={'noreferrer'}\n\t\t\t\t\t\tclassName={'link1'}\n\t\t\t\t\t>\n\t\t\t\t\t\ttutorial\n\t\t\t\t\t</a>\n\t\t\t\t\t)\n\t\t\t\t\t<Icon iconName={'arrow_drop_down'} />\n\t\t\t\t</div>\n\t\t\t\t<div className={'songEditor-previewHeader'}>\n\t\t\t\t\t<Icon iconName={'arrow_drop_down'} />\n\t\t\t\t\tResult preview\n\t\t\t\t\t<Icon iconName={'arrow_drop_down'} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ScrollSync>\n\t\t\t\t<div className={'songEditor'}>\n\t\t\t\t\t<ScrollSyncNode group={'a'}>\n\t\t\t\t\t\t<div className={'songEditor-source'}>\n\t\t\t\t\t\t\t<ProseMirrorEditorView\n\t\t\t\t\t\t\t\teditorContent={selectedFile.content}\n\t\t\t\t\t\t\t\tupdateFile={updateFile}\n\t\t\t\t\t\t\t\tselectedFileId={selectedFile.id}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</ScrollSyncNode>\n\t\t\t\t\t<ScrollSyncNode group={'a'}>\n\t\t\t\t\t\t<div className={previewClassNames.join(' ')}>\n\t\t\t\t\t\t\t<EditorPreview selectedFile={selectedFile} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</ScrollSyncNode>\n\t\t\t\t</div>\n\t\t\t</ScrollSync>\n\t\t</>\n\t);\n}\n\nEditorLayout.propTypes = {\n\tselectedFile: PropTypes.object,\n\ttheme: PropTypes.string.isRequired,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default EditorLayout;\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../../db/options/selectors';\n\nimport EditorLayout from '../_components/EditorLayout';\n\nexport default connect((state) => ({\n\ttheme: getOptionValue(state, 'editorPreferences', 'theme'),\n}))(EditorLayout);\n","import './ExportPreview.scss';\n\nimport React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport SongRenderer from '../../_containers/SongRenderer';\n\nfunction ExportPreview(props) {\n\tconst { selectedFile } = props;\n\n\tconst exportPreviewRef = React.createRef();\n\n\tconst selectAll = (e) => {\n\t\tif ((e.metaKey || e.ctrlKey) && e.key.toLowerCase() === 'a') {\n\t\t\te.preventDefault();\n\t\t\twindow.getSelection().selectAllChildren(exportPreviewRef.current);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\twindow.addEventListener('keydown', selectAll);\n\t\treturn () => {\n\t\t\twindow.removeEventListener('keydown', selectAll);\n\t\t};\n\t});\n\n\treturn (\n\t\t<div\n\t\t\tclassName={'exportPreview exp-SongRenderer'}\n\t\t\tref={exportPreviewRef}\n\t\t>\n\t\t\t<SongRenderer\n\t\t\t\tcontent={selectedFile.content}\n\t\t\t\tuseChartFormat={true}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nExportPreview.propTypes = {\n\tselectedFile: PropTypes.object.isRequired,\n};\n\nexport default ExportPreview;\n","import './PlayRenderer.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport SongRenderer from '../../_containers/SongRenderer';\n\nfunction PlayRenderer(props) {\n\tconst { theme, selectedFile, fontSize, columnsCount } = props;\n\n\tconst wrapperClassNames = ['playRendererWrapper1'];\n\twrapperClassNames.push('cmTheme-' + theme);\n\twrapperClassNames.push('cmSong--fontSize' + fontSize);\n\n\tconst classNames = ['playRenderer'];\n\tclassNames.push('playRenderer--columns-' + columnsCount);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={wrapperClassNames.join(' ')}\n\t\t\tdata-testid={'playRendererWrapper1'}\n\t\t>\n\t\t\t<div className={'playRendererWrapper2'}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames.join(' ')}\n\t\t\t\t\tdata-testid={'playRenderer'}\n\t\t\t\t>\n\t\t\t\t\t<SongRenderer content={selectedFile.content} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nPlayRenderer.propTypes = {\n\ttheme: PropTypes.string.isRequired,\n\tfontSize: PropTypes.number.isRequired,\n\tselectedFile: PropTypes.object.isRequired,\n\tcolumnsCount: PropTypes.number.isRequired,\n};\n\nexport default PlayRenderer;\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../../db/options/selectors';\n\nimport PlayRenderer from '../_components/PlayRenderer';\n\nexport default connect((state) => ({\n\ttheme: getOptionValue(state, 'editorPreferences', 'theme'),\n\tfontSize: getOptionValue(state, 'songFormatting', 'fontSize'),\n\tcolumnsCount: getOptionValue(state, 'songFormatting', 'columnsCount'),\n}))(PlayRenderer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport escapeHTML from '../../../core/escapeHTML';\n\nfunction Page(props) {\n\tconst {\n\t\tpageHeader,\n\t\tallColumnsLines,\n\t\tdocumentSize,\n\t\tdocumentMargins,\n\t\tfontSize,\n\t} = props;\n\n\tconst allSectionsRendered = allColumnsLines.map((columnLines, index) => {\n\t\tconst columnLinesTxt = columnLines.join('');\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tkey={index}\n\t\t\t\tclassName={'printPreview-pageColumn'}\n\t\t\t\tdata-testid={'printPreview-pageColumn'}\n\t\t\t\tdangerouslySetInnerHTML={{ __html: escapeHTML(columnLinesTxt) }}\n\t\t\t/>\n\t\t);\n\t});\n\n\tconst pageClasses = ['printPreview-page'];\n\tpageClasses.push('printPreview-page--' + documentSize);\n\tpageClasses.push('cmSong--fontSize' + fontSize);\n\tpageClasses.push('cmSong');\n\n\tconst pageContentWrapperClasses = ['printPreview-pageContentWrapper'];\n\tpageContentWrapperClasses.push(\n\t\t'printPreview-pageContentWrapper--padding' + documentMargins\n\t);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={pageClasses.join(' ')}\n\t\t\tdata-testid={'printPreview-page'}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={pageContentWrapperClasses.join(' ')}\n\t\t\t\tdata-testid={'printPreview-pageContentWrapper'}\n\t\t\t>\n\t\t\t\t<div className={'printPreview-pageContent'}>\n\t\t\t\t\t{pageHeader}\n\t\t\t\t\t<div className={'printPreview-pageColumnWrapper'}>\n\t\t\t\t\t\t{allSectionsRendered}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\nPage.defaultProps = {\n\tallColumnsLines: [],\n};\nPage.propTypes = {\n\tpageHeader: PropTypes.element,\n\tallColumnsLines: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)),\n\tdocumentSize: PropTypes.string.isRequired,\n\tdocumentMargins: PropTypes.number.isRequired,\n\tfontSize: PropTypes.number.isRequired,\n};\n\nexport default React.memo(Page);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction PageHeader(props) {\n\tconst { title } = props;\n\n\treturn <div className={'printPreview-pageHeader'}>{title}</div>;\n}\nPageHeader.defaultProps = {\n\tallColumnsLines: [],\n};\nPageHeader.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n};\n\nexport default React.memo(PageHeader);\n","const cssClasses = {\n\temptyLine: 'cmEmptyLine',\n\tchordLine: 'cmChordLine',\n\ttextLine: 'cmLyricLine',\n};\n\n/**\n * @param {Object[]} allLinesWithHeight\n * @param {String} allLinesWithHeight.content\n * @param {Number} allLinesWithHeight.height\n * @param {Number} columnsCount\n * @param {Number} firstPageHeight\n * @param {Number} normalPageHeight\n * @param {Boolean} columnBreakOnSection\n * @param {Boolean} noEmptyLinesOnColumnStart\n * @param {Boolean} noOrphanTextLine\n * @returns {Array} array of pages, as array of columns\n */\nexport default function mapLinesToColumns(\n\tallLinesWithHeight,\n\t{\n\t\tcolumnsCount,\n\t\tfirstPageHeight,\n\t\tnormalPageHeight,\n\t\tcolumnBreakOnSection,\n\t\tnoEmptyLinesOnColumnStart = true,\n\t\tnoOrphanTextLine = true,\n\t}\n) {\n\tconst layout = layoutFactory({\n\t\tcolumnsCount,\n\t\tfirstPageHeight,\n\t\tnormalPageHeight,\n\t\tnoEmptyLinesOnColumnStart,\n\t});\n\n\tlet buffer = [];\n\tlet bufferHeight = 0;\n\n\tconst pageHeight = firstPageHeight || normalPageHeight;\n\n\tif (pageHeight > 0) {\n\t\tallLinesWithHeight.forEach((line, lineIndex) => {\n\t\t\tif (\n\t\t\t\tshouldRenderLine(\n\t\t\t\t\tlayout,\n\t\t\t\t\tline,\n\t\t\t\t\tbuffer,\n\t\t\t\t\tnoEmptyLinesOnColumnStart\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tbuffer.push(line);\n\t\t\t\tbufferHeight += line.height;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tbuffer.length > 0 &&\n\t\t\t\tisBreakable(line, allLinesWithHeight[lineIndex + 1], {\n\t\t\t\t\tnoOrphanTextLine,\n\t\t\t\t\tcolumnBreakOnSection,\n\t\t\t\t})\n\t\t\t) {\n\t\t\t\tif (layout.fitsOnCurrentColumn(bufferHeight)) {\n\t\t\t\t\tlayout.insert(buffer);\n\t\t\t\t} else if (layout.fitsOnNextColumn(bufferHeight)) {\n\t\t\t\t\tlayout.insertOnNextColumn(buffer);\n\t\t\t\t} else {\n\t\t\t\t\tlayout.insert(buffer);\n\t\t\t\t}\n\t\t\t\tbuffer = [];\n\t\t\t\tbufferHeight = 0;\n\t\t\t}\n\t\t});\n\t}\n\treturn layout.get();\n}\n\n/**\n * Try to spot the case where the line is empty and would be rendered as the first line\n * of the next column, which we may want to avoid\n */\nfunction shouldRenderLine(layout, line, buffer, noEmptyLinesOnColumnStart) {\n\treturn !(\n\t\tisEmptyLine(line) &&\n\t\t!layout.fitsOnCurrentColumn(line.height) &&\n\t\tbuffer.length === 0 &&\n\t\tnoEmptyLinesOnColumnStart === true\n\t);\n}\n\nfunction isBreakable(\n\tcurrentLine,\n\tnextLine,\n\t{ noOrphanTextLine, columnBreakOnSection }\n) {\n\tif (isEmptyLine(currentLine) || !nextLine) {\n\t\treturn true;\n\t}\n\n\tconst wouldProduceOrphanTextLine =\n\t\tisChordLine(currentLine) && isTextLine(nextLine);\n\tif (noOrphanTextLine === true && wouldProduceOrphanTextLine) {\n\t\treturn false;\n\t}\n\n\tconst isEndOfParagraph = isEmptyLine(nextLine);\n\tif (columnBreakOnSection === true && !isEndOfParagraph) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction isEmptyLine(line) {\n\treturn hasClass(line.content, cssClasses.emptyLine);\n}\n\nfunction isChordLine(line) {\n\treturn hasClass(line.content, cssClasses.chordLine);\n}\n\nfunction isTextLine(line) {\n\treturn hasClass(line.content, cssClasses.textLine);\n}\n\nfunction hasClass(line, className) {\n\treturn line.indexOf(className) > -1;\n}\n\nfunction layoutFactory({ firstPageHeight, normalPageHeight, columnsCount }) {\n\tconst allPagesColumns = [];\n\n\tlet pageIndex = 0;\n\tlet columnIndex = 0;\n\tlet maxColumnHeight = getMaxColumnHeight();\n\tlet currentColumnHeight = 0;\n\n\tallPagesColumns[pageIndex] = [];\n\tallPagesColumns[pageIndex][columnIndex] = [];\n\n\tfunction flushBuffer(buffer) {\n\t\tbuffer.forEach((line) => {\n\t\t\tif (shouldChangeColumn(currentColumnHeight + line.height)) {\n\t\t\t\tchangeColumn();\n\t\t\t}\n\t\t\tallPagesColumns[pageIndex][columnIndex].push(line.content);\n\t\t\tcurrentColumnHeight += line.height;\n\t\t});\n\t}\n\n\tfunction getMaxColumnHeight() {\n\t\treturn pageIndex === 0 && firstPageHeight\n\t\t\t? firstPageHeight\n\t\t\t: normalPageHeight;\n\t}\n\n\tfunction shouldChangeColumn(nextHeight) {\n\t\treturn nextHeight > maxColumnHeight;\n\t}\n\n\tfunction changeColumn() {\n\t\tif (shouldChangePage()) {\n\t\t\tpageIndex++;\n\t\t\tallPagesColumns[pageIndex] = [];\n\t\t\tcolumnIndex = 0;\n\t\t} else {\n\t\t\tcolumnIndex++;\n\t\t}\n\t\tallPagesColumns[pageIndex][columnIndex] = [];\n\t\tcurrentColumnHeight = 0;\n\t\tmaxColumnHeight = getMaxColumnHeight();\n\t}\n\n\tfunction shouldChangePage() {\n\t\treturn columnIndex === columnsCount - 1;\n\t}\n\n\treturn {\n\t\tinsert(buffer) {\n\t\t\tflushBuffer(buffer);\n\t\t},\n\n\t\tinsertOnNextColumn(buffer) {\n\t\t\tchangeColumn();\n\t\t\tflushBuffer(buffer);\n\t\t},\n\n\t\tfitsOnCurrentColumn(bufferHeight) {\n\t\t\treturn currentColumnHeight + bufferHeight <= maxColumnHeight;\n\t\t},\n\n\t\tfitsOnNextColumn(bufferHeight) {\n\t\t\tconst nextColumnHeight =\n\t\t\t\tpageIndex === 0 && columnIndex < columnsCount && firstPageHeight\n\t\t\t\t\t? firstPageHeight\n\t\t\t\t\t: normalPageHeight;\n\t\t\treturn bufferHeight <= nextColumnHeight;\n\t\t},\n\n\t\tget() {\n\t\t\treturn allPagesColumns;\n\t\t},\n\t};\n}\n","import './getDimensionsFromDom.scss';\n\nimport React, { useLayoutEffect } from 'react';\nimport { createRoot } from 'react-dom/client';\n\nexport default function getDimensionsFromDom(component, measuringFn) {\n\tconst container = document.createElement('div');\n\tcontainer.classList.add('measuring-node');\n\tdocument.body.appendChild(container);\n\tconst root = createRoot(container);\n\n\treturn new Promise((resolve) => {\n\t\tconst MeasuringComponent = () => {\n\t\t\tuseLayoutEffect(() => {\n\t\t\t\tconst measure = measuringFn(container);\n\t\t\t\tresolve(measure);\n\t\t\t});\n\n\t\t\treturn <div>{component}</div>;\n\t\t};\n\n\t\troot.render(<MeasuringComponent />);\n\t}).then((measure) => {\n\t\troot.unmount();\n\t\tcontainer.parentNode.removeChild(container);\n\n\t\treturn measure;\n\t});\n}\n","export default function padColumns(columnCount, allColumns = []) {\n\tfor (let i = allColumns.length || 0; i < columnCount; i++) {\n\t\tallColumns.push([]);\n\t}\n\treturn allColumns;\n}\n","export function getOffsetHeight(element) {\n\treturn element.offsetHeight;\n}\n\nexport function getClientHeight(element) {\n\treturn element.clientHeight;\n}\n","import React from 'react';\n\nimport getDimensionsFromDom from './getDimensionsFromDom';\nimport padColumns from './padColumns';\nimport { getOffsetHeight } from './element';\n\nimport Page from '../_components/Page';\n\nconst cssSelectors = {\n\tline: '.cmLine',\n};\n\nexport default async function getAllLinesHeight(\n\tallLines,\n\t{ columnsCount, documentSize, documentMargins, fontSize }\n) {\n\tconst component = (\n\t\t<div className={'printPreview cmTheme-print'}>\n\t\t\t<Page\n\t\t\t\tallColumnsLines={padColumns(columnsCount, [allLines])}\n\t\t\t\tcolumnsCount={columnsCount}\n\t\t\t\tdocumentSize={documentSize}\n\t\t\t\tdocumentMargins={documentMargins}\n\t\t\t\tfontSize={fontSize}\n\t\t\t/>\n\t\t</div>\n\t);\n\n\tconst measuringFn = (container) => {\n\t\tconst allLinesHeight = [];\n\t\tcontainer.querySelectorAll(cssSelectors.line).forEach((line) => {\n\t\t\tallLinesHeight.push(getOffsetHeight(line));\n\t\t});\n\t\treturn allLinesHeight;\n\t};\n\n\treturn await getDimensionsFromDom(component, measuringFn);\n}\n","import React from 'react';\n\nimport getDimensionsFromDom from './getDimensionsFromDom';\nimport padColumns from './padColumns';\nimport { getClientHeight } from './element';\n\nimport Page from '../_components/Page';\nimport PageHeader from '../_components/PageHeader';\n\nexport default async function getAllLinesHeight(\n\ttitle,\n\t{ columnsCount, documentSize, documentMargins, fontSize }\n) {\n\tconst component = (\n\t\t<Page\n\t\t\tpageHeader={<PageHeader title={title} />}\n\t\t\tallColumnsLines={padColumns(columnsCount)}\n\t\t\tdocumentSize={documentSize}\n\t\t\tdocumentMargins={documentMargins}\n\t\t\tfontSize={fontSize}\n\t\t/>\n\t);\n\n\tconst measuringFn = (container) => {\n\t\tconst pageContent = container.querySelector(\n\t\t\t'.printPreview-pageContent'\n\t\t);\n\t\tconst pageColumnWrapper = container.querySelector(\n\t\t\t'.printPreview-pageColumnWrapper'\n\t\t);\n\t\treturn {\n\t\t\tfirstPageHeight: getClientHeight(pageColumnWrapper),\n\t\t\tnormalPageHeight: getClientHeight(pageContent),\n\t\t};\n\t};\n\n\treturn await getDimensionsFromDom(component, measuringFn);\n}\n","import React, { useState, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Page from './Page';\nimport PageHeader from './PageHeader';\n\nimport mapLinesToColumns from '../helpers/mapLinesToColumns';\nimport getAllLinesHeight from '../helpers/getAllLinesHeight';\nimport getPagesHeight from '../helpers/getPagesHeight';\nimport padColumns from '../helpers/padColumns';\n\nfunction AllPages(props) {\n\tconst [allPagesColumns, setAllPagesColumns] = useState([]);\n\n\tconst {\n\t\ttitle,\n\t\tallLines,\n\t\tcolumnsCount,\n\t\tcolumnBreakOnSection,\n\t\tdocumentSize,\n\t\tdocumentMargins,\n\t\tfontSize,\n\t} = props;\n\n\tuseLayoutEffect(() => {\n\t\tconst getDimensions = async () => {\n\t\t\tconst pageOptions = {\n\t\t\t\tcolumnsCount,\n\t\t\t\tdocumentSize,\n\t\t\t\tdocumentMargins,\n\t\t\t\tfontSize,\n\t\t\t};\n\n\t\t\tconst allLinesHeight = await getAllLinesHeight(\n\t\t\t\tallLines,\n\t\t\t\tpageOptions\n\t\t\t);\n\n\t\t\tconst { normalPageHeight, firstPageHeight } = await getPagesHeight(\n\t\t\t\ttitle,\n\t\t\t\tpageOptions\n\t\t\t);\n\n\t\t\tconst allLinesWithHeight = allLines.map((line, index) => ({\n\t\t\t\tcontent: line,\n\t\t\t\theight: allLinesHeight[index],\n\t\t\t}));\n\n\t\t\tconst mapped = mapLinesToColumns(allLinesWithHeight, {\n\t\t\t\tcolumnsCount,\n\t\t\t\tcolumnBreakOnSection,\n\t\t\t\tnormalPageHeight,\n\t\t\t\tfirstPageHeight,\n\t\t\t});\n\n\t\t\tsetAllPagesColumns(mapped);\n\t\t};\n\t\tgetDimensions();\n\t}, [\n\t\tallLines,\n\t\ttitle,\n\t\tcolumnsCount,\n\t\tcolumnBreakOnSection,\n\t\tdocumentSize,\n\t\tdocumentMargins,\n\t\tfontSize,\n\t]);\n\n\tconst allPagesRendered = allPagesColumns.map((pageColumns, index) => {\n\t\treturn (\n\t\t\t<Page\n\t\t\t\tkey={index}\n\t\t\t\tpageHeader={index === 0 ? <PageHeader title={title} /> : null}\n\t\t\t\tallColumnsLines={padColumns(columnsCount, pageColumns)}\n\t\t\t\tdocumentSize={documentSize}\n\t\t\t\tdocumentMargins={documentMargins}\n\t\t\t\tfontSize={fontSize}\n\t\t\t/>\n\t\t);\n\t});\n\n\treturn <React.Fragment>{allPagesRendered}</React.Fragment>;\n}\n\nAllPages.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n\tallLines: PropTypes.arrayOf(PropTypes.string).isRequired,\n\tcolumnsCount: PropTypes.number.isRequired,\n\tcolumnBreakOnSection: PropTypes.bool.isRequired,\n\tdocumentSize: PropTypes.string.isRequired,\n\tdocumentMargins: PropTypes.number.isRequired,\n\tfontSize: PropTypes.number.isRequired,\n};\n\nexport default AllPages;\n","import './PrintPreview.scss';\n\nimport _pick from 'lodash/pick';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { renderAsHtml } from '../../../core/renderSong';\nimport AllPages from './AllPages';\n\nfunction PrintPreview(props) {\n\tconst { selectedFile } = props;\n\n\tconst renderOptions = _pick(props, [\n\t\t'transposeValue',\n\t\t'accidentalsType',\n\t\t'symbolType',\n\n\t\t'chartType',\n\t\t'alignChordsWithLyrics',\n\t\t'alignBars',\n\t\t'autoRepeatChords',\n\t\t'expandSectionCopy',\n\t]);\n\n\tconst rendered = renderAsHtml(selectedFile.content || '', {\n\t\t...renderOptions,\n\t});\n\tconst allLines = rendered.match(/(<p.*?>.*?<\\/p>)/gm);\n\n\tconst classNames = ['printPreview', 'cmTheme-print'];\n\n\treturn (\n\t\t<div className={classNames.join(' ')} data-testid={'printPreview'}>\n\t\t\t<AllPages\n\t\t\t\ttitle={selectedFile.title || ''}\n\t\t\t\tallLines={allLines}\n\t\t\t\tcolumnsCount={props.columnsCount}\n\t\t\t\tcolumnBreakOnSection={props.columnBreakOnSection}\n\t\t\t\tdocumentSize={props.documentSize || 'a4'}\n\t\t\t\tdocumentMargins={props.documentMargins}\n\t\t\t\tfontSize={props.fontSize}\n\t\t\t/>\n\t\t</div>\n\t);\n}\nPrintPreview.propTypes = {\n\tchartType: PropTypes.string.isRequired,\n\tselectedFile: PropTypes.object.isRequired,\n\tcolumnsCount: PropTypes.number.isRequired,\n\tcolumnBreakOnSection: PropTypes.bool.isRequired,\n\tdocumentSize: PropTypes.string,\n\tdocumentMargins: PropTypes.number.isRequired,\n\tfontSize: PropTypes.number.isRequired,\n};\n\nexport default PrintPreview;\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../../db/options/selectors';\n\nimport PrintPreview from '../_components/PrintPreview';\n\nexport default connect((state) => ({\n\t// songPreferences\n\taccidentalsType: getOptionValue(\n\t\tstate,\n\t\t'songPreferences',\n\t\t'preferredAccidentals'\n\t),\n\ttransposeValue: getOptionValue(state, 'songPreferences', 'transposeValue'),\n\tsymbolType: getOptionValue(state, 'songPreferences', 'symbolType'),\n\n\t// songFormatting\n\tchartType: getOptionValue(state, 'songFormatting', 'chartType'),\n\talignChordsWithLyrics: getOptionValue(\n\t\tstate,\n\t\t'songFormatting',\n\t\t'alignChordsWithLyrics'\n\t),\n\talignBars: getOptionValue(state, 'songFormatting', 'alignBars'),\n\tautoRepeatChords: getOptionValue(\n\t\tstate,\n\t\t'songFormatting',\n\t\t'autoRepeatChords'\n\t),\n\texpandSectionCopy: getOptionValue(\n\t\tstate,\n\t\t'songFormatting',\n\t\t'expandSectionCopy'\n\t),\n\n\tcolumnsCount: getOptionValue(state, 'songFormatting', 'columnsCount'),\n\tcolumnBreakOnSection: getOptionValue(\n\t\tstate,\n\t\t'songFormatting',\n\t\t'columnBreakOnSection'\n\t),\n\tdocumentMargins: getOptionValue(state, 'songFormatting', 'documentMargins'),\n\n\tfontSize: getOptionValue(state, 'songFormatting', 'fontSize'),\n}))(PrintPreview);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport EditorLayout from '../songEditor/_containers/EditorLayout';\nimport ExportPreview from '../../songRenderers/exportPreview/_components/ExportPreview';\nimport PlayRenderer from '../../songRenderers/playRenderer/_containers/PlayRenderer';\nimport PrintPreview from '../../songRenderers/printPreview/_containers/PrintPreview';\n\nfunction Editor(props) {\n\tconst { editorMode } = props;\n\n\tswitch (editorMode) {\n\t\tcase 'edit':\n\t\t\treturn <EditorLayout {...props} />;\n\t\tcase 'play':\n\t\t\treturn <PlayRenderer {...props} />;\n\t\tcase 'print':\n\t\t\treturn <PrintPreview {...props} />;\n\t\tcase 'export':\n\t\t\treturn <ExportPreview {...props} />;\n\t}\n}\n\nEditor.propTypes = {\n\teditorMode: PropTypes.string.isRequired,\n};\n\nexport default Editor;\n","import { connect } from 'react-redux';\n\nimport { getSelectedId } from '../../fileManager/_state/selectors';\nimport { getEditorMode } from '../../ui/layout/app/_state/selectors';\n\nimport { getOne } from '../../db/files/selectors';\nimport { updateFile } from '../../db/files/actions';\n\nimport Editor from '../_components/Editor';\n\nexport default connect(\n\t(state) => ({\n\t\tselectedFile: getOne(state, getSelectedId(state)) || {},\n\t\teditorMode: getEditorMode(state),\n\t}),\n\n\t{\n\t\tupdateFile,\n\t}\n)(Editor);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction OptionsPanel(props) {\n\tconst {\n\t\tid,\n\t\tallWidgets,\n\t\tnonInteractableWidgets,\n\t\thiddenWidgets,\n\t\tsetOption,\n\t\tgetEntryComponent,\n\t} = props;\n\n\tconst classNames = ['optionsPanel', 'optionsPanel-' + id];\n\n\tlet widget, groupWidget;\n\n\tlet WidgetComponent, GroupComponent;\n\tlet isGroupInteractable, isGroupWidgetInteractable;\n\n\tlet renderedGroupWidgets;\n\n\tconst renderedWidgets = allWidgets.widgetsOrder\n\t\t.filter((widgetId) => {\n\t\t\treturn !hiddenWidgets.includes(widgetId);\n\t\t})\n\t\t.map((widgetId) => {\n\t\t\twidget = allWidgets.allWidgets[widgetId];\n\n\t\t\tif (widget.type === 'optionsGroup') {\n\t\t\t\trenderedGroupWidgets = widget.groupWidgetsOrder\n\t\t\t\t\t.filter((groupWidgetId) => {\n\t\t\t\t\t\treturn !hiddenWidgets.includes(groupWidgetId);\n\t\t\t\t\t})\n\t\t\t\t\t.map((groupWidgetId) => {\n\t\t\t\t\t\tgroupWidget = widget.allGroupWidgets[groupWidgetId];\n\n\t\t\t\t\t\tisGroupWidgetInteractable =\n\t\t\t\t\t\t\t!nonInteractableWidgets.includes(widgetId) &&\n\t\t\t\t\t\t\t!nonInteractableWidgets.includes(groupWidgetId);\n\n\t\t\t\t\t\treturn renderWidget(\n\t\t\t\t\t\t\tgroupWidgetId,\n\t\t\t\t\t\t\tgroupWidget,\n\t\t\t\t\t\t\tisGroupWidgetInteractable\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\tif (renderedGroupWidgets.length === 0) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tGroupComponent = getEntryComponent(widget.type);\n\t\t\t\tisGroupInteractable =\n\t\t\t\t\t!nonInteractableWidgets.includes(widgetId);\n\n\t\t\t\treturn (\n\t\t\t\t\t<GroupComponent\n\t\t\t\t\t\tkey={widgetId}\n\t\t\t\t\t\tisInteractable={isGroupInteractable}\n\t\t\t\t\t\tlabel={widget.label}\n\t\t\t\t\t\ticon={widget.icon}\n\t\t\t\t\t>\n\t\t\t\t\t\t{renderedGroupWidgets}\n\t\t\t\t\t</GroupComponent>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn renderWidget(\n\t\t\t\t\twidgetId,\n\t\t\t\t\twidget,\n\t\t\t\t\t!nonInteractableWidgets.includes(widgetId)\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\tfunction renderWidget(widgetId, localWidget, isInteractable) {\n\t\tWidgetComponent = getEntryComponent(localWidget.type);\n\n\t\treturn (\n\t\t\t<WidgetComponent\n\t\t\t\tkey={widgetId}\n\t\t\t\tisInteractable={isInteractable}\n\t\t\t\toptionContext={localWidget.option.context}\n\t\t\t\toptionKey={localWidget.option.key}\n\t\t\t\toptionValue={props[localWidget.option.key]}\n\t\t\t\tsetOption={setOption}\n\t\t\t\tlabel={localWidget.label}\n\t\t\t\t{...localWidget.typeOptions}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn <div className={classNames.join(' ')}>{renderedWidgets}</div>;\n}\n\nOptionsPanel.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tallWidgets: PropTypes.object.isRequired,\n\tnonInteractableWidgets: PropTypes.arrayOf(PropTypes.string).isRequired,\n\thiddenWidgets: PropTypes.arrayOf(PropTypes.string).isRequired,\n\tsetOption: PropTypes.func.isRequired,\n\tgetEntryComponent: PropTypes.func.isRequired,\n};\n\nexport default OptionsPanel;\n","import './OptionsGroup.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon';\n\nfunction OptionsGroup(props) {\n\tconst { isInteractable, icon, label } = props;\n\n\tconst classNames = ['sb-optionsGroup'];\n\tif (!shouldBeInteractable()) {\n\t\tclassNames.push('sb-optionsGroup-isNotInteractable');\n\t}\n\n\tfunction shouldBeInteractable() {\n\t\treturn isInteractable && props.children && props.children.length > 0;\n\t}\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<div className={'sb-optionsGroup-title'}>\n\t\t\t\t<span className={'sb-optionsGroup-iconTitle'}>\n\t\t\t\t\t<Icon iconName={icon} />\n\t\t\t\t</span>{' '}\n\t\t\t\t{label}\n\t\t\t</div>\n\t\t\t<div className={'sb-optionsGroup-content'}>{props.children}</div>\n\t\t</div>\n\t);\n}\n\nOptionsGroup.propTypes = {\n\tisInteractable: PropTypes.bool.isRequired,\n\ticon: PropTypes.string.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tchildren: PropTypes.arrayOf(PropTypes.element),\n};\n\nOptionsGroup.defaultProps = {};\n\nexport default OptionsGroup;\n","import './Select.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon';\n\nfunction SelectChoice(props) {\n\tconst { isSelected, isInteractable, label, onClick } = props;\n\n\tlet checkIcon;\n\tconst classNames = ['sb-optionSelectChoice'];\n\n\tif (isSelected) {\n\t\tclassNames.push('sb-optionSelectChoice-isSelected');\n\t\tcheckIcon = (\n\t\t\t<span className={'sb-optionSelectChoice-checkIcon'}>\n\t\t\t\t<Icon iconName={'check'} />\n\t\t\t</span>\n\t\t);\n\t}\n\n\tif (!isInteractable) {\n\t\tclassNames.push('sb-optionSelectChoice-isNotInteractable');\n\t}\n\n\tfunction handleClick() {\n\t\tif (isInteractable) {\n\t\t\tonClick();\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={classNames.join(' ')} onClick={handleClick}>\n\t\t\t<div className={'sb-optionSelectChoice-check'}>\n\t\t\t\t{isSelected && checkIcon}\n\t\t\t</div>\n\t\t\t<div className={'sb-optionSelectChoice-label'}>{label}</div>\n\t\t</div>\n\t);\n}\n\nSelectChoice.propTypes = {\n\tisSelected: PropTypes.bool.isRequired,\n\tisInteractable: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tonClick: PropTypes.func.isRequired,\n};\n\nexport default React.memo(SelectChoice);\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport SelectChoice from './SelectChoice';\n\nimport Icon from '../../../_components/Icon';\n\nfunction Select(props) {\n\tconst [isOpen, setIsOpen] = useState(false);\n\n\tconst {\n\t\tisInteractable,\n\t\tlabel,\n\t\tallChoices,\n\t\toptionContext,\n\t\toptionKey,\n\t\toptionValue,\n\t\tsetOption,\n\t} = props;\n\n\tconst classNames = ['sb-optionSelect'];\n\tif (!isInteractable) {\n\t\tclassNames.push('sb-optionSelect-isNotInteractable');\n\t}\n\n\tconst iconName = isOpen ? 'keyboard_arrow_down' : 'keyboard_arrow_right';\n\n\tfunction toggleChoices() {\n\t\tsetIsOpen(!isOpen);\n\t}\n\n\tconst renderedChoices = !isOpen ? null : (\n\t\t<div className={'sb-optionSelect-choices'}>\n\t\t\t{allChoices.map((choice) => (\n\t\t\t\t<SelectChoice\n\t\t\t\t\tkey={choice.value}\n\t\t\t\t\tlabel={choice.label}\n\t\t\t\t\tisSelected={optionValue === choice.value}\n\t\t\t\t\tisInteractable={isInteractable}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetOption(optionContext, optionKey, choice.value);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t);\n\n\tconst activeLabel = allChoices.find(\n\t\t(choice) => optionValue === choice.value\n\t).label;\n\n\tconst selectLabel = isOpen ? (\n\t\tlabel\n\t) : (\n\t\t<span>\n\t\t\t<span>{label + ': '}</span>\n\t\t\t<span className={'sb-optionSelectChoice-activeLabel'}>\n\t\t\t\t{activeLabel}\n\t\t\t</span>\n\t\t</span>\n\t);\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<div\n\t\t\t\tclassName={'sb-optionSelect-title'}\n\t\t\t\tonClick={isInteractable ? toggleChoices : null}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'sb-optionSelect-desc'}\n\t\t\t\t\tdata-testid={'selectLabel'}\n\t\t\t\t>\n\t\t\t\t\t{selectLabel}\n\t\t\t\t</div>\n\t\t\t\t<div className={'sb-optionSelect-toggle'}>\n\t\t\t\t\t<span className={'sb-optionSelect-icon'}>\n\t\t\t\t\t\t<Icon iconName={iconName} />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{renderedChoices}\n\t\t</div>\n\t);\n}\n\nSelect.propTypes = {\n\tisInteractable: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tallChoices: PropTypes.array.isRequired,\n\toptionContext: PropTypes.string.isRequired,\n\toptionKey: PropTypes.string.isRequired,\n\toptionValue: PropTypes.string.isRequired,\n\tsetOption: PropTypes.func.isRequired,\n};\n\nexport default Select;\n","import './Slider.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Slider(props) {\n\tconst {\n\t\tisInteractable,\n\t\tlabel,\n\t\tmin,\n\t\tmax,\n\t\tshowPlusSymbol,\n\t\toptionContext,\n\t\toptionKey,\n\t\toptionValue,\n\t\tsetOption,\n\t} = props;\n\n\tconst classNames = ['sb-optionSlider'];\n\tif (!isInteractable) {\n\t\tclassNames.push('sb-optionSlider-isNotInteractable');\n\t}\n\n\tfunction handleChange(e) {\n\t\tsetOption(optionContext, optionKey, Number.parseInt(e.target.value));\n\t}\n\n\tconst valueDisplay =\n\t\toptionValue > 0 && showPlusSymbol ? '+' + optionValue : optionValue;\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<div className={'sb-optionSlider-desc'}>{label}</div>\n\t\t\t<div className={'sb-optionSlider-value'}>{valueDisplay}</div>\n\t\t\t<div className={'sb-optionSlider-range'}>\n\t\t\t\t<input\n\t\t\t\t\tmin={min}\n\t\t\t\t\tmax={max}\n\t\t\t\t\tvalue={optionValue}\n\t\t\t\t\ttype={'range'}\n\t\t\t\t\tonChange={isInteractable ? handleChange : null}\n\t\t\t\t\tdisabled={!isInteractable}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nSlider.propTypes = {\n\tisInteractable: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tmin: PropTypes.number.isRequired,\n\tmax: PropTypes.number.isRequired,\n\tshowPlusSymbol: PropTypes.bool,\n\toptionContext: PropTypes.string.isRequired,\n\toptionKey: PropTypes.string.isRequired,\n\toptionValue: PropTypes.number.isRequired,\n\tsetOption: PropTypes.func.isRequired,\n};\n\nSlider.defaultProps = {\n\tshowPlusSymbol: true,\n};\n\nexport default React.memo(Slider);\n","import './Toggle.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon';\n\nfunction Toggle(props) {\n\tconst {\n\t\tisInteractable,\n\t\tlabel,\n\t\toptionContext,\n\t\toptionKey,\n\t\toptionValue,\n\t\tsetOption,\n\t} = props;\n\n\tconst classNames = ['sb-optionToggle'];\n\tclassNames.push(\n\t\toptionValue === true ? 'sb-optionToggle-isOn' : 'sb-optionToggle-isOff'\n\t);\n\tif (!isInteractable) {\n\t\tclassNames.push('sb-optionToggle-isNotInteractable');\n\t}\n\n\tfunction handleClick() {\n\t\tsetOption(optionContext, optionKey, !optionValue);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames.join(' ')}\n\t\t\tonClick={isInteractable ? handleClick : null}\n\t\t>\n\t\t\t<div className={'sb-optionToggle-desc'}>{label}</div>\n\t\t\t<div className={'sb-optionToggle-icon'}>\n\t\t\t\t<span className={'sb-optionToggle-icon'}>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticonName={\n\t\t\t\t\t\t\toptionValue === true ? 'toggle_on' : 'toggle_off'\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nToggle.propTypes = {\n\tisInteractable: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\toptionContext: PropTypes.string.isRequired,\n\toptionKey: PropTypes.string.isRequired,\n\toptionValue: PropTypes.bool.isRequired,\n\tsetOption: PropTypes.func.isRequired,\n};\n\nexport default React.memo(Toggle);\n","import './SidebarOptionsPanel.scss';\n\nimport React from 'react';\n\nimport OptionPanel from '../../../../optionsPanels/_components/OptionsPanel';\n\nimport OptionsGroup from './OptionsGroup';\nimport Select from './Select';\nimport Slider from './Slider';\nimport Toggle from './Toggle';\n\nfunction getEntryComponent(type) {\n\tswitch (type) {\n\t\tcase 'optionsGroup':\n\t\t\treturn OptionsGroup;\n\t\tcase 'select':\n\t\t\treturn Select;\n\t\tcase 'slider':\n\t\t\treturn Slider;\n\t\tcase 'toggle':\n\t\t\treturn Toggle;\n\t}\n}\n\nexport default function SidebarOptionPanel(props) {\n\treturn (\n\t\t<div className={'sb-optionsPanel'}>\n\t\t\t<OptionPanel {...props} getEntryComponent={getEntryComponent} />\n\t\t</div>\n\t);\n}\n","import createAction from '../../core/createAction';\nimport * as actionTypes from './actionsTypes';\n\nexport const setOptionValue = (context, key, value) => {\n\tif (!context) {\n\t\tthrow new TypeError('Cannot set an option without a context');\n\t}\n\tif (!key) {\n\t\tthrow new TypeError('Cannot set an option without a key');\n\t}\n\tconst payload = {\n\t\tcontext,\n\t\tkey,\n\t\tvalue,\n\t};\n\treturn createAction(actionTypes.DB_OPTION_SET_OPTION_VALUE, payload);\n};\n","import Rendering from '../_components/Rendering';\nimport OptionsPanelFactory from '../../_containers/OptionsPanelFactory';\n\nimport allWidgets from '../allWidgets';\nimport {\n\tgetNonInteractableWidgets,\n\tgetHiddenWidgets,\n} from '../_state/selectors';\n\nexport default OptionsPanelFactory(\n\tallWidgets,\n\tgetNonInteractableWidgets,\n\tgetHiddenWidgets,\n\tRendering\n);\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../db/options/selectors';\nimport { setOptionValue } from '../../db/options/actions';\n\nexport default function OptionsPanelFactory(\n\tallWidgets,\n\tgetNonInteractableWidgets,\n\tgetHiddenWidgets,\n\tcomponent\n) {\n\treturn connect(\n\t\t(state) => {\n\t\t\tconst stateToProps = {\n\t\t\t\tallWidgets,\n\t\t\t\tnonInteractableWidgets: getNonInteractableWidgets(state),\n\t\t\t\thiddenWidgets: getHiddenWidgets(state),\n\t\t\t};\n\n\t\t\tlet widget;\n\t\t\tlet groupWidget;\n\n\t\t\tallWidgets.widgetsOrder.forEach((widgetId) => {\n\t\t\t\twidget = allWidgets.allWidgets[widgetId];\n\n\t\t\t\twidget.groupWidgetsOrder.forEach((groupWidgetId) => {\n\t\t\t\t\tgroupWidget = widget.allGroupWidgets[groupWidgetId];\n\n\t\t\t\t\tstateToProps[groupWidget.option.key] = getOptionValue(\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tgroupWidget.option.context,\n\t\t\t\t\t\tgroupWidget.option.key\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn stateToProps;\n\t\t},\n\n\t\t{\n\t\t\tsetOption: setOptionValue,\n\t\t}\n\t)(component);\n}\n","/* eslint-disable max-lines */\nexport default {\n\twidgetsOrder: ['editorPreferences', 'key', 'preferences', 'layout'],\n\n\tallWidgets: {\n\t\teditorPreferences: {\n\t\t\tlabel: 'Editor preferences',\n\t\t\ttype: 'optionsGroup',\n\t\t\ticon: 'tune',\n\n\t\t\tgroupWidgetsOrder: ['theme', 'chartFormat'],\n\t\t\tallGroupWidgets: {\n\t\t\t\ttheme: {\n\t\t\t\t\tlabel: 'Theme',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'themeDark1',\n\t\t\t\t\t\t\t\tlabel: 'Dark 1 (default)',\n\t\t\t\t\t\t\t\tvalue: 'dark1',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'themeDark2',\n\t\t\t\t\t\t\t\tlabel: 'Dark 2',\n\t\t\t\t\t\t\t\tvalue: 'dark2',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'themeDark3',\n\t\t\t\t\t\t\t\tlabel: 'Dark 3',\n\t\t\t\t\t\t\t\tvalue: 'dark3',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'editorPreferences',\n\t\t\t\t\t\tkey: 'theme',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tchartFormat: {\n\t\t\t\t\tlabel: 'Export format',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'formatChordMark',\n\t\t\t\t\t\t\t\tlabel: 'ChordMark',\n\t\t\t\t\t\t\t\tvalue: 'chordmark',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'formatChordMarkSrc',\n\t\t\t\t\t\t\t\tlabel: 'ChordMark (Source)',\n\t\t\t\t\t\t\t\tvalue: 'chordmarkSrc',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'formatChordpro',\n\t\t\t\t\t\t\t\tlabel: 'ChordPro',\n\t\t\t\t\t\t\t\tvalue: 'chordpro',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'formatUG',\n\t\t\t\t\t\t\t\tlabel: 'UltimateGuitar',\n\t\t\t\t\t\t\t\tvalue: 'ultimateGuitar',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'editorPreferences',\n\t\t\t\t\t\tkey: 'chartFormat',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\tkey: {\n\t\t\tlabel: 'Key',\n\t\t\ttype: 'optionsGroup',\n\t\t\ticon: 'music_note',\n\n\t\t\tgroupWidgetsOrder: [\n\t\t\t\t'transposeValue',\n\t\t\t\t'preferredAccidentals',\n\t\t\t\t'symbolType',\n\t\t\t],\n\t\t\tallGroupWidgets: {\n\t\t\t\ttransposeValue: {\n\t\t\t\t\tlabel: 'Transpose',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: -11,\n\t\t\t\t\t\tmax: 11,\n\t\t\t\t\t\tshowPlusSymbol: true,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songPreferences',\n\t\t\t\t\t\tkey: 'transposeValue',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tpreferredAccidentals: {\n\t\t\t\t\tlabel: 'Preferred accidentals',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'preferredAccidentalsAuto',\n\t\t\t\t\t\t\t\tlabel: 'Auto',\n\t\t\t\t\t\t\t\tvalue: 'auto',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'preferredAccidentalsSharp',\n\t\t\t\t\t\t\t\tlabel: '♯',\n\t\t\t\t\t\t\t\tvalue: 'sharp',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'preferredAccidentalsFlat',\n\t\t\t\t\t\t\t\tlabel: '♭',\n\t\t\t\t\t\t\t\tvalue: 'flat',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songPreferences',\n\t\t\t\t\t\tkey: 'preferredAccidentals',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tsymbolType: {\n\t\t\t\t\tlabel: 'Symbols type',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'symbolTypeChord',\n\t\t\t\t\t\t\t\tlabel: 'Chord symbols',\n\t\t\t\t\t\t\t\tvalue: 'chord',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'symbolTypeRoman',\n\t\t\t\t\t\t\t\tlabel: 'Roman numerals',\n\t\t\t\t\t\t\t\tvalue: 'roman',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songPreferences',\n\t\t\t\t\t\tkey: 'symbolType',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\tpreferences: {\n\t\t\tlabel: 'Chart settings',\n\t\t\ttype: 'optionsGroup',\n\t\t\ticon: 'tune',\n\n\t\t\tgroupWidgetsOrder: [\n\t\t\t\t'chartType',\n\t\t\t\t'alignChordsWithLyrics',\n\t\t\t\t'alignBars',\n\t\t\t\t'autoRepeatChords',\n\t\t\t\t'expandSectionCopy',\n\t\t\t],\n\t\t\tallGroupWidgets: {\n\t\t\t\tchartType: {\n\t\t\t\t\tlabel: 'Type',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'typedisplayAll',\n\t\t\t\t\t\t\t\tlabel: 'Show everything',\n\t\t\t\t\t\t\t\tvalue: 'all',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'typedisplayLyrics',\n\t\t\t\t\t\t\t\tlabel: 'Lyrics only',\n\t\t\t\t\t\t\t\tvalue: 'lyrics',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'typedisplayChords',\n\t\t\t\t\t\t\t\tlabel: 'Chords only',\n\t\t\t\t\t\t\t\tvalue: 'chords',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'typedisplayChordsFirstLyricLine',\n\t\t\t\t\t\t\t\tlabel: 'Chords + First lyric line',\n\t\t\t\t\t\t\t\tvalue: 'chordsFirstLyricLine',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'chartType',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\talignChordsWithLyrics: {\n\t\t\t\t\tlabel: 'Align chords with lyrics',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'alignChordsWithLyrics',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\talignBars: {\n\t\t\t\t\tlabel: 'Align bars',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'alignBars',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tautoRepeatChords: {\n\t\t\t\t\tlabel: 'Auto repeat chords',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'autoRepeatChords',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpandSectionCopy: {\n\t\t\t\t\tlabel: 'Expand copied sections',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'expandSectionCopy',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\tlayout: {\n\t\t\ttype: 'optionsGroup',\n\t\t\tlabel: 'Layout',\n\t\t\ticon: 'view_compact',\n\n\t\t\tgroupWidgetsOrder: [\n\t\t\t\t'fontSize',\n\t\t\t\t'columnsCount',\n\t\t\t\t'columnBreakOnSection',\n\t\t\t\t'documentMargins',\n\t\t\t],\n\n\t\t\tallGroupWidgets: {\n\t\t\t\tfontSize: {\n\t\t\t\t\tlabel: 'Font size',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: -5,\n\t\t\t\t\t\tmax: +5,\n\t\t\t\t\t\tshowPlusSymbol: true,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'fontSize',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tcolumnsCount: {\n\t\t\t\t\tlabel: 'Columns',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\tmax: 4,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'columnsCount',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tcolumnBreakOnSection: {\n\t\t\t\t\tlabel: 'Column Break on section',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'columnBreakOnSection',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tdocumentMargins: {\n\t\t\t\t\tlabel: 'Margins',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\tmax: 5,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'documentMargins',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n};\n","import _difference from 'lodash/difference';\n\nimport editorModeOptions from '../../../db/options/editorModeOptions'; // duh!\nimport { getEditorMode } from '../../../ui/layout/app/_state/selectors';\nimport { getSelectedId } from '../../../fileManager/_state/selectors';\nimport {\n\tgetOptionsDefaults,\n\tgetOptionValue,\n} from '../../../db/options/selectors';\n\nexport const getNonInteractableWidgets = (state) => {\n\tconst nonInteractableWidgets = [];\n\n\tconst chartType = getOptionValue(state, 'songFormatting', 'chartType');\n\tif (chartType === 'lyrics') {\n\t\tnonInteractableWidgets.push('alignChordsWithLyrics');\n\t\tnonInteractableWidgets.push('alignBars');\n\t\tnonInteractableWidgets.push('autoRepeatChords');\n\t} else if (chartType === 'chords') {\n\t\tnonInteractableWidgets.push('alignChordsWithLyrics');\n\t}\n\n\tconst chartFormat = getOptionValue(\n\t\tstate,\n\t\t'editorPreferences',\n\t\t'chartFormat'\n\t);\n\tconst editorMode = getEditorMode(state);\n\n\tif (editorMode === 'export') {\n\t\tif (chartFormat === 'chordmarkSrc') {\n\t\t\tnonInteractableWidgets.push('chartType');\n\t\t\tnonInteractableWidgets.push('alignChordsWithLyrics');\n\t\t\tnonInteractableWidgets.push('alignBars');\n\t\t\tnonInteractableWidgets.push('autoRepeatChords');\n\t\t\tnonInteractableWidgets.push('expandSectionCopy');\n\t\t}\n\t}\n\n\treturn nonInteractableWidgets;\n};\n\nexport const getHiddenWidgets = (state) => {\n\tconst hiddenWidgets = [];\n\n\tconst allOptions = Object.keys({\n\t\t...getOptionsDefaults(state, 'editorPreferences'),\n\t\t...getOptionsDefaults(state, 'songFormatting'),\n\t\t...getOptionsDefaults(state, 'songPreferences'),\n\t});\n\n\tconst selectedId = getSelectedId(state);\n\tif (!selectedId) {\n\t\treturn allOptions;\n\t}\n\n\tconst editorMode = getEditorMode(state);\n\n\tconst nonInteractableOptions = _difference(\n\t\tallOptions,\n\t\teditorModeOptions[editorMode]\n\t);\n\n\thiddenWidgets.push(...nonInteractableOptions);\n\n\treturn hiddenWidgets;\n};\n","import './Rendering.scss';\n\nimport React from 'react';\n\nimport Icon from '../../../ui/_components/Icon';\n\nimport SidebarOptionPanel from '../../../ui/sideBar/options/_components/SidebarOptionsPanel';\n\nexport default function Rendering(props) {\n\treturn (\n\t\t<div className={'renderingOptionsPanel'}>\n\t\t\t<div className={'renderingOptionsPanel-isCollapsed'}>\n\t\t\t\t<span className={'renderingOptionsPanel-icon'}>\n\t\t\t\t\t<Icon iconName={'settings'} />\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div className={'renderingOptionsPanel-isExpanded'}>\n\t\t\t\t<SidebarOptionPanel {...props} id={'rendering'} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nimport AppLayout from '../ui/layout/app/_containers/App';\nimport FileManager from '../fileManager/_containers/FileManager';\nimport Editor from '../editor/_containers/Editor';\nimport RightBarPanel from '../optionsPanels/rendering/_containers/Rendering';\n\nexport default function Edit() {\n\tconst fm = <FileManager />;\n\tconst rightBarPanel = <RightBarPanel />;\n\n\treturn (\n\t\t<AppLayout leftBar={fm} rightBar={rightBarPanel}>\n\t\t\t<Editor />\n\t\t</AppLayout>\n\t);\n}\n","import UniversalRouter from 'universal-router';\nimport renderController from './renderController';\n\nimport Editor from './controllers/Editor';\n\nconst routes = [\n\t{\n\t\tpath: '/editor',\n\t\taction: () => Editor,\n\t},\n];\n\nconst universalRouter = new UniversalRouter(routes);\n\nexport default {\n\tnavigateTo(path) {\n\t\treturn universalRouter.resolve(path).then((controller) => {\n\t\t\treturn renderController(controller);\n\t\t});\n\t},\n};\n","import React from 'react';\nimport { createRoot } from 'react-dom/client';\n\nimport { Provider } from 'react-redux';\nimport { getStore } from './state/store';\n\nimport ErrorBoundary from './ui/_components/ErrorBoundary';\n\nexport default function renderController(Controller) {\n\tconst container = document.getElementById('app');\n\tconst root = createRoot(container);\n\n\troot.render(\n\t\t<Provider store={getStore()}>\n\t\t\t<React.StrictMode>\n\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t<Controller />\n\t\t\t\t</ErrorBoundary>\n\t\t\t</React.StrictMode>\n\t\t</Provider>\n\t);\n}\n","import '../scss/styles.scss';\n\nimport { createStore } from './state/store';\nimport registerHandlers from './registerHandlers';\nimport router from './router';\nimport addSampleContent from './addSampleContent';\n\nregisterHandlers();\n\nexport default function run() {\n\tcreateStore();\n\n\taddSampleContent();\n\n\treturn router.navigateTo('/editor');\n}\n","import { getStore } from './state/store';\n\nimport { getAllTitles } from './db/files/selectors';\nimport { importFile } from './db/files/actions';\n\nimport gettingStarted from './gettingStarted.txt';\nimport sampleSong from './sampleSong.txt';\n\nexport default function addSampleContent() {\n\tconst store = getStore();\n\tconst state = store.getState();\n\n\tconst allTitles = getAllTitles(state);\n\n\tif (allTitles.length === 0) {\n\t\tstore.dispatch(importFile('Hallelujah - Leonard Cohen', sampleSong));\n\t\tstore.dispatch(importFile('Getting started', gettingStarted));\n\t}\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkchord_chart_studio\"] = self[\"webpackChunkchord_chart_studio\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216], () => (__webpack_require__(\"TBfH\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","loadState","serializedState","localStorage","getItem","JSON","parse","err","saveState","state","stringify","setItem","clock","Date","now","DB_FILES_CREATE","DB_FILES_DELETE","DB_FILES_IMPORT","DB_FILES_UPDATE","DB_OPTION_SET_OPTION_VALUE","UI_LAYOUT_APP_SET_EDITOR_MODE","UI_LAYOUT_APP_TOGGLE_LEFT_BAR","UI_LAYOUT_APP_TOGGLE_RIGHT_BAR","isLeftBarCollapsed","ui","layout","app","isRightBarCollapsed","getEditorMode","editorMode","getSelectedId","fileManager","selected","getRenamedId","renamed","getDefaultTitle","defaultTitle","getAllTitles","createSelectorCreator","defaultMemoize","_isEqual","createDeepEqualSelector","_map","db","files","allFiles","title","id","_sortBy","o","toLowerCase","getOne","getCategoryOptions","category","file","options","Object","keys","length","_cloneDeep","getLatestModeOptions","fileOptions","allOptionsPerMode","edit","push","play","print","export","sort","a","b","updatedAt","reduce","acc","modeOptions","assign","initialState","updateFileOption","action","fullState","payload","context","key","value","includes","optionCategory","fileState","addOption","FILE_MANAGER_SELECT_FILE","FILE_MANAGER_ENABLE_RENAME","getOptionValue","values","getOptionsDefaults","defaults","getModeOptions","fileId","mode","defaultOptions","editorModeOptions","_pick","allEditorModeOptions","combineSectionReducers","type","actionTypes","content","createFile","updateFile","deleteFile","nextMode","previousModeOptions","setEditorMode","newState","setOptionValue","newOptions","songFormatting","songPreferences","defaultPreferences","newPreferences","selectFile","SONG_IMPORTER_IMPORT_CANCEL","SONG_IMPORTER_IMPORT_START","SONG_IMPORTER_SET_CONTENT","SONG_IMPORTER_SET_INPUT_FORMAT","stripTags","html","domPurify","ALLOWED_TAGS","KEEP_CONTENT","isFromWeb","isImporting","inputFormat","activeModal","songImporter","actions","editorPreferences","theme","chartFormat","transposeValue","preferredAccidentals","symbolType","chartType","alignChordsWithLyrics","alignBars","autoRepeatChords","expandSectionCopy","fontSize","columnsCount","columnBreakOnSection","documentMargins","store","getStore","createAction","TypeError","songImporterHandlers","message","buildTitle","artist","dispatch","actionsTypes","startImportFromWeb","chordChart","songTitle","_handleMessage","e","allHandlers","source","window","origin","location","data","ErrorBoundary","props","error","errorInfo","this","setState","className","style","whiteSpace","open","toString","componentStack","children","React","propTypes","PropTypes","Logo","href","logoSvg","Icon","iconName","join","NavEntry","label","icon","isActive","isDisabled","classNames","onClick","Nav","currentMode","allEntries","selectedId","map","entry","Button","buttonName","allClassNames","disabled","name","defaultProps","UserGuide","focus","Versions","versions","getVersions","target","rel","importFile","uuidv4","getContent","getInputFormat","getTitle","Modal","closeModal","useEffect","handleKeyboard","addEventListener","removeEventListener","Header","cancelImport","chordMarkContent","headerTitle","getSongTitle","substr","lastIndexOf","isOversized","size","isTextFile","indexOf","getFileTooBigMsg","actualSize","filesize","round","getWrongFileTypeMsg","getNoFileSelectedMsg","fileList","Promise","resolve","reject","text","then","fileContent","catch","FilePicker","setContent","htmlFor","onChange","ev","getUploadedFile","accept","Input","allClasses","PreviewError","InputFormatEntry","setInputFormat","allInputClasses","allLabelClasses","checked","InputFormatSelector","disableAll","rendered","SongImporter","convert2ChordMark","connect","App","toggleLeftBar","toggleRightBar","leftBar","rightBar","leftBarClassNames","rightBarClassNames","allNavEntries","renderAsHtml","songTxt","render","renderOptions","useChartFormat","outputFormat","toHtml","customRenderer","chordMark2ChordPro","cpTxt","renderSong","chordMark2UltimateGuitar","ugTxt","printBarSeparators","printChordsDuration","printSubBeatDelimiters","printInlineTimeSignatures","chordSymbolRenderer","chordRendererFactory","customFilters","chordSymbolUltimateGuitar","useShortNamings","accidentalsType","chordMarkHtml","match","line","parsed","parseSong","renderSongCm","split","exportSelectedFileAsText","getState","selectedFile","renderAsText","fileExt","fileName","blob","Blob","endings","saveAs","ModalConfirm","confirmAction","confirmTitle","cancelAction","cancelTitle","DeleteConfirmModal","isDeleting","setIsDeleting","FileActionEntry","FileActions","enableRename","startImport","exportAsText","allActions","printFile","FileEntry","useState","setTitle","isSelected","isRenamed","classList","inputRef","saveTitle","newTitle","current","scrollLeft","onDoubleClick","select","ref","readOnly","autoFocus","onBlur","onFocus","onKeyPress","which","preventDefault","getSelection","removeAllRanges","FileManager","allTitles","setTimeout","isRequired","escapeHTML","unescaped","SongRenderer","dangerouslySetInnerHTML","__html","EditorPreview","Schema","nodes","doc","paragraph","group","parseDOM","tag","toDOM","hard_break","inline","selectable","stateToText","toJSON","toSafeHtml","dirty","ProseMirrorEditorView","selectedFileId","editorContent","editorView","useRef","editorDom","previousFileId","editorExists","dom","parentNode","destroyEditor","removeChild","editorState","EditorState","pmDOMParser","editorSchema","div","document","createElement","innerHTML","preserveWhitespace","plugins","pmHistory","keymap","undo","redo","baseKeymap","createEditorState","EditorView","dispatchTransaction","transaction","applyTransaction","transactions","updateState","some","tr","docChanged","createEditorView","appendChild","EditorLayout","previewClassNames","ExportPreview","exportPreviewRef","selectAll","metaKey","ctrlKey","selectAllChildren","PlayRenderer","wrapperClassNames","Page","pageHeader","allColumnsLines","documentSize","allSectionsRendered","columnLines","index","columnLinesTxt","pageClasses","pageContentWrapperClasses","PageHeader","cssClasses","emptyLine","chordLine","textLine","mapLinesToColumns","allLinesWithHeight","firstPageHeight","normalPageHeight","noEmptyLinesOnColumnStart","noOrphanTextLine","allPagesColumns","pageIndex","columnIndex","maxColumnHeight","getMaxColumnHeight","currentColumnHeight","flushBuffer","buffer","forEach","shouldChangeColumn","height","changeColumn","nextHeight","shouldChangePage","insert","insertOnNextColumn","fitsOnCurrentColumn","bufferHeight","fitsOnNextColumn","get","layoutFactory","lineIndex","isEmptyLine","shouldRenderLine","currentLine","nextLine","wouldProduceOrphanTextLine","hasClass","isChordLine","isTextLine","isEndOfParagraph","isBreakable","getDimensionsFromDom","component","measuringFn","container","add","body","root","createRoot","MeasuringComponent","useLayoutEffect","measure","unmount","padColumns","columnCount","allColumns","i","getClientHeight","element","clientHeight","cssSelectors","getAllLinesHeight","allLines","allLinesHeight","querySelectorAll","offsetHeight","pageContent","querySelector","AllPages","setAllPagesColumns","getDimensions","pageOptions","getPagesHeight","mapped","allPagesRendered","pageColumns","PrintPreview","Editor","OptionsPanel","widget","groupWidget","WidgetComponent","GroupComponent","isGroupInteractable","isGroupWidgetInteractable","renderedGroupWidgets","allWidgets","nonInteractableWidgets","hiddenWidgets","setOption","getEntryComponent","renderedWidgets","widgetsOrder","filter","widgetId","groupWidgetsOrder","groupWidgetId","allGroupWidgets","renderWidget","isInteractable","localWidget","optionContext","option","optionKey","optionValue","typeOptions","OptionsGroup","SelectChoice","checkIcon","Select","isOpen","setIsOpen","allChoices","renderedChoices","choice","activeLabel","find","selectLabel","Slider","min","max","showPlusSymbol","valueDisplay","Number","parseInt","Toggle","SidebarOptionPanel","getNonInteractableWidgets","getHiddenWidgets","stateToProps","preferences","allOptions","nonInteractableOptions","_difference","Edit","fm","rightBarPanel","routes","path","universalRouter","UniversalRouter","navigateTo","controller","Controller","getElementById","storeEnhancers","composeWithDevTools","applyMiddleware","thunkMiddleware","persistedState","rendering","_defaultsDeep","seed","createReduxStore","allReducers","subscribe","createStore","sampleSong","gettingStarted","addSampleContent","router","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","loaded","__webpack_modules__","call","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","r","n","getter","__esModule","d","definition","defineProperty","enumerable","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","nmd","paths","scriptUrl","importScripts","currentScript","src","scripts","getElementsByTagName","Error","replace","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}