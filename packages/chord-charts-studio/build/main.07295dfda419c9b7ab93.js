(()=>{"use strict";var e,t={KyL9:(e,t,n)=>{var r=n("P4Tr"),o=n.n(r),i=n("m14p"),a=n("5HXA"),c=n("sINF"),s=n("R0vF"),l=(n("yq1k"),n("tkto"),n("pNMO"),n("TeQF"),n("07d7"),n("5DmW"),n("FZtP"),n("27RR"),n("JZM8")),u=n.n(l);function d(){return Date.now()}var p="db/files/Create",m="db/files/Delete",f="db/files/Import",g="db/files/Update",h="db/options/setOptionValue",y="ui/layout/app/setEditorMode",b="ui/layout/app/toggleLeftBar",v="ui/layout/app/toggleRightBar",E=function(e){return e.ui.layout.app.isLeftBarCollapsed},O=function(e){return e.ui.layout.app.isRightBarCollapsed},C=function(e){return e.ui.layout.app.editorMode},w=function(e){return e.fileManager.selected},P=function(e){return e.fileManager.renamed},R=function(e){return e.fileManager.defaultTitle},S=(n("ToJy"),n("zKZe"),n("3WF5")),j=n.n(S),F=n("BkRI"),N=n.n(F),k=n("Y+p1"),q=n.n(k),T=n("xweI"),x=n.n(T),I=n("G4qV"),A=n("EsgF");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=(0,I.wN)(A.PW,q())((function(e){return j()(e.db.files.allFiles,(function(e){return{title:e.title,id:e.id}}))}),(function(e){return x()(e,(function(e){return e.title.toLowerCase()}))})),L=function(e,t){return e.db.files.allFiles[t]},z=function(e,t,n){var r=e.db.files.allFiles[t];if(r&&(r.options||{})[n]){if(0===Object.keys(r.options[n]).length)return;return N()(r.options[n])}},W=function(e,t){var n=e.db.files.allFiles[t];if(n){var r=n.options||{},o=[];if(r.edit&&o.push(M({},r.edit)),r.play&&o.push(M({},r.play)),r.print&&o.push(M({},r.print)),r.export&&o.push(M({},r.export)),o.length)return o.sort((function(e,t){return e.updatedAt-t.updatedAt})),o.reduce((function(e,t){return Object.assign(e,t)}),{})}};const H={edit:["theme","transposeValue","harmonizeAccidentals","preferredAccidentals"],play:["theme","transposeValue","harmonizeAccidentals","preferredAccidentals","chartType","alignChordsWithLyrics","alignBars","autoRepeatChords","expandSectionCopy","columnsCount","fontSize"],print:["transposeValue","harmonizeAccidentals","preferredAccidentals","chartType","alignChordsWithLyrics","alignBars","autoRepeatChords","expandSectionCopy","columnsCount","columnBreakOnSection","documentMargins","fontSize"],export:["chartFormat","transposeValue","harmonizeAccidentals","preferredAccidentals","chartType","alignChordsWithLyrics","alignBars","autoRepeatChords","expandSectionCopy"]};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K={allFiles:{}};function Z(e,t){var n=t.payload,r=n.id,o=n.title,i=n.content,a=V({},e.allFiles);return a[r]={id:r,title:o,content:i},V(V({},e),{},{allFiles:a})}function U(e,t){var n=t.payload,r=n.id,o=n.title,i=n.content;if(!o&&void 0===i||!e.allFiles[r])return e;var a=V({},e.allFiles);return a[r]=V({},a[r]),o&&(a[r].title=o),void 0!==i&&(a[r].content=i),V(V({},e),{},{allFiles:a})}function J(e,t){var n=t.payload.id;if(!n||!e.allFiles[n])return e;var r=V({},e.allFiles);return delete r[n],V(V({},e),{},{allFiles:r})}function Y(e,t,n){var r=t.payload,o=r.context,i=r.key,a=r.value,c=w(n),s=V({},e.allFiles);if(["songFormatting","songPreferences"].includes(o)&&s[c]){var l=C(n),u="songPreferences"===o?"preferences":l;return s[c]=function(e,t,n,r){return V(V({},e),{},{options:V(V({},e.options),{},$({},t,V(V({},(e.options||{})[t]),{},$({updatedAt:d()},n,r))))})}(s[c],u,i,a),V(V({},e),{},{allFiles:s})}return e}function X(e,t,n){var r=w(n),o=t.payload.mode;if(!!!z(n,r,o)){var i=u()(W(n,r)||{},H[o]);if(Object.keys(i).length){i.updatedAt=d();var a=V({},e.allFiles);return a[r]=V(V({},a[r]),{},{options:V(V({},a[r].options),{},$({},o,i))}),V(V({},e),{},{allFiles:a})}}return e}n("4mDm"),n("3bBZ");var Q="fileManager/select",ee="fileManager/enableRename",te=function(e,t,n){if(e.db.options[t]&&e.db.options[t].values&&void 0!==e.db.options[t].values[n])return e.db.options[t].values[n]},ne=function(e,t){if(e.db.options[t]&&e.db.options[t].defaults)return N()(e.db.options[t].defaults)};function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae={};function ce(e,t){var n=t.payload,r=n.context,o=n.key,i=n.value;if(!e[r]||!e[r].values||void 0===e[r].values[o])return e;var a=oe(oe({},e),{},ie({},r,oe(oe({},e[r]),{},{values:oe({},e[r].values)})));return a[r].values[o]=i,a}function se(e,t,n){var r=le(n,w(n),t.payload.mode);return oe(oe({},e),{},{songFormatting:oe(oe({},e.songFormatting),{},{values:oe({},r)})})}function le(e,t,n){var r=ne(e,"songFormatting"),o=z(e,t,n);return o||(o=W(e,t)||{}),delete o.updatedAt,o=u()(o,H[n]),Object.assign(r,o)}function ue(e,t,n){var r=t.payload.id,o=le(n,r,C(n)),i=z(n,r,"preferences")||{};delete i.updatedAt;var a=ne(n,"songPreferences"),c=Object.assign(a,i);return oe(oe({},e),{},{songPreferences:oe(oe({},e.songPreferences),{},{values:oe({},c)}),songFormatting:oe(oe({},e.songFormatting),{},{values:oe({},o)})})}const de=(0,s.Z)({files:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(t.type){case p:case f:return Z(e,t);case g:return U(e,t);case m:return J(e,t);case h:return Y(e,t,n);case y:return X(e,t,n)}return e},options:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(t.type){case h:return ce(e,t);case y:return se(e,t,n);case Q:return ue(e,t,n)}return e}});function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge={selected:"",renamed:"",defaultTitle:"[untitled]"};var he="songImporter/import/cancel",ye="songImporter/import/start",be="songImporter/setContent",ve="songImporter/setInputFormat",Ee=n("wMS7"),Oe=n.n(Ee);function Ce(e){return Oe().sanitize(e,{ALLOWED_TAGS:["#text"],KEEP_CONTENT:!0})}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){Re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Se={content:"",isFromWeb:!1,isImporting:!1,inputFormat:"basic",title:""};function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke={isLeftBarCollapsed:!1,isRightBarCollapsed:!1,editorMode:"edit",activeModal:"none"};const qe=(0,s.Z)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case b:return Fe(Fe({},e),{},{isLeftBarCollapsed:!e.isLeftBarCollapsed});case v:return Fe(Fe({},e),{},{isRightBarCollapsed:!e.isRightBarCollapsed});case y:var n=t.payload.mode;return Fe(Fe({},e),{},{editorMode:n});case m:case p:case f:return Fe(Fe({},e),{},{editorMode:"edit"})}return e}}),Te=(0,s.Z)({layout:qe}),xe=(0,s.Z)({db:de,fileManager:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case p:var n=t.payload.id;return me(me({},e),{},{selected:n,renamed:n});case f:var r=t.payload.id;return me(me({},e),{},{selected:r,renamed:""});case g:return me(me({},e),{},{renamed:""});case m:return me(me({},e),{},{selected:"",renamed:""});case Q:var o=t.payload.id;return me(me({},e),{},{selected:o,renamed:o===e.renamed?o:""});case ee:var i=t.payload.id;return me(me({},e),{},{renamed:i})}return e},songImporter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case be:var n=t.payload,r=n.content,o=n.title,i=void 0===o?"":o;return Pe(Pe({},e),{},{content:Ce(r),title:i?Ce(i):e.title});case ve:var a=t.payload.inputFormat;return Pe(Pe({},e),{},{inputFormat:a});case f:case he:return Pe(Pe({},e),{},{content:"",title:"",isImporting:!1});case ye:var c=t.payload,s=c.content,l=c.inputFormat,u=c.title,d=c.isFromWeb;return Pe(Pe({},e),{},{isImporting:!0,content:s?Ce(s):"",title:u?Ce(u):"",inputFormat:l||e.inputFormat,isFromWeb:d})}return e},ui:Te}),Ie={db:{options:{editorPreferences:{values:{theme:"dark1",chartFormat:"chordmark"},defaults:{theme:"dark1",chartFormat:"chordmark"}},songPreferences:{values:{transposeValue:0,harmonizeAccidentals:!0,preferredAccidentals:"auto"},defaults:{transposeValue:0,harmonizeAccidentals:!0,preferredAccidentals:"auto"}},songFormatting:{values:{chartType:"all",alignChordsWithLyrics:!0,alignBars:!0,autoRepeatChords:!0,expandSectionCopy:!0,fontSize:0,columnsCount:1,columnBreakOnSection:!0,documentMargins:3},defaults:{chartType:"all",alignChordsWithLyrics:!0,alignBars:!0,autoRepeatChords:!0,expandSectionCopy:!0,fontSize:0,columnsCount:1,columnBreakOnSection:!0,documentMargins:3}}}}};var Ae;function _e(){var e=(0,a.Uo)((0,i.md)(c.Z)),t=function(){try{var e=localStorage.getItem("state");if(!e)return;return JSON.parse(e)}catch(e){return}}();t&&t.db&&t.db.options&&delete t.db.options.rendering;var n=o()(t,Ie);(Ae=(0,i.MT)(xe,n,e)).subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(e){}}(Ae.getState())}))}function Me(){return Ae}function Be(e,t){if(!e)throw new TypeError("Cannot create an action without an action type");return{type:e,payload:t}}var De={"@CCS/IMPORT_TAB":function(e){var t=Me(),n=Le(e.title,e.artist);t.dispatch(function(e,t,n){return Be(ye,{content:t,inputFormat:e,title:n,isFromWeb:!0})}(e.source,e.chordChart,n))}},Le=function(e,t){var n=e;return t&&(n+=" - "+t),n};function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var He=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){We(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},De);if(e.source!==window||e.origin!==window.location.origin)return!1;var n=e.data;return"function"==typeof t[n.type]&&t[n.type](n.payload),!0},Ge=n("9Mdx"),Ve=n("q1tI"),$e=n("i8i4"),Ke=n("rL7s"),Ze=(n("JfAA"),n("NBAS"),n("SuFq"),n("4Brf"),n("0oug"),n("PKPk"),n("17x9")),Ue=n.n(Ze);function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t){return Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Xe(e,t)}function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tt(e);if(t){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return et(this,n)}}function et(e,t){if(t&&("object"===Je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}var nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&Xe(e,t)}(i,e);var t,n,r,o=Qe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={error:null,errorInfo:null},t}return t=i,(n=[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?Ve.createElement("div",{className:"ErrorBoundary"},Ve.createElement("h2",null,"Something went wrong"),Ve.createElement("details",{style:{whiteSpace:"pre-wrap"},open:!0},this.state.error&&this.state.error.toString(),Ve.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}])&&Ye(t.prototype,n),r&&Ye(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ve.Component);nt.propTypes={children:Ue().any};const rt=nt;var ot=function(e){return Be(y,{mode:e})},it=(n("oVuX"),n("/ysv"));function at(){return Ve.createElement("div",{className:"logo"},Ve.createElement("div",{className:"logo-isExpanded"},Ve.createElement("div",{className:"logo-img"},Ve.createElement("img",{src:it,alt:"Chord Charts Studio"}))))}const ct=Ve.memo(at);n("2B1R");function st(e){var t=e.iconName;return Ve.createElement("i",{className:["icon","material-icons"].join(" ")},t)}st.propTypes={iconName:Ue().string.isRequired};const lt=Ve.memo(st);function ut(e){var t=e.label,n=e.icon,r=e.editorMode,o=e.setEditorMode,i=e.isActive,a=e.isDisabled,c=["mainNavEntry"];return i&&c.push("mainNavEntry-isActive"),a&&c.push("mainNavEntry-isDisabled"),Ve.createElement("li",{className:c.join(" "),onClick:function(){a||o(r)}},Ve.createElement("span",{className:"mainNavEntry-icon"},Ve.createElement(lt,{iconName:n})),t)}ut.propTypes={label:Ue().string.isRequired,icon:Ue().string.isRequired,editorMode:Ue().string.isRequired,setEditorMode:Ue().func.isRequired,isActive:Ue().bool.isRequired,isDisabled:Ue().bool.isRequired};const dt=Ve.memo(ut);function pt(){return pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pt.apply(this,arguments)}function mt(e){var t=e.currentMode,n=e.allEntries,r=e.setEditorMode,o=e.selectedId;return Ve.createElement("nav",{className:"mainNav"},Ve.createElement("ul",{className:"mainNav-entries"},n.map((function(e,n){return Ve.createElement(dt,pt({key:n,isActive:!!o&&e.editorMode===t,isDisabled:!o,setEditorMode:r},e))}))))}mt.propTypes={currentMode:Ue().string.isRequired,setEditorMode:Ue().func.isRequired,selectedId:Ue().string,allEntries:Ue().arrayOf(Ue().shape({id:Ue().string.isRequired,label:Ue().string.isRequired,icon:Ue().string.isRequired,editorMode:Ue().string.isRequired}))};const ft=Ve.memo(mt);var gt=function(e){var t=e.children,n=e.isDisabled,r=e.buttonName,o=e.onClick,i=e.type,a=["Button"];return"primary"===i&&a.push("Button-primary"),"secondary"===i&&a.push("Button-secondary"),n&&a.push("Button-isDisabled"),Ve.createElement("button",{className:a.join(" "),disabled:n,type:"button",name:r,onClick:o},t)};gt.propTypes={children:Ue().string.isRequired,isDisabled:Ue().bool,buttonName:Ue().string.isRequired,type:Ue().string.isRequired,onClick:Ue().func.isRequired},gt.defaultProps={isDisabled:!1};const ht=gt;var yt=function(){return Ve.createElement("div",{className:"userGuide"},Ve.createElement("div",{className:"userGuide-isCollapsed"},Ve.createElement(lt,{iconName:"help_outline"})),Ve.createElement("div",{className:"userGuide-isExpanded"},Ve.createElement(ht,{buttonName:"userGuide",type:"primary",onClick:function(){window.open("https://chordmark.netlify.app/docs/chord-charts-studio/overview","_blank").focus()}},"User Guide")))};yt.propTypes={},yt.defaultProps={};const bt=Ve.memo(yt);function vt(){var e={"chord-charts-studio":"v0.11.0","chord-symbol":"v2.1.0","chord-mark":"v0.9.0"};return Ve.createElement("div",{className:"versions"},Ve.createElement("div",{className:"versions-isExpanded"},"Chords Charts Studio ",e["chord-charts-studio"],Ve.createElement("br",null),"ChordMark ",e["chord-mark"]," ",Ve.createElement("br",null),"ChordSymbol ",e["chord-symbol"]))}const Et=Ve.memo(vt);var Ot=n("NiUT"),Ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)throw new TypeError("Cannot import a file without title");var n={id:(0,Ot.Z)(),title:e,content:t};return Be(f,n)},wt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=t.content;if(!e)throw new TypeError("Cannot update a file without an id");var o={id:e,title:n,content:r};return Be(g,o)},Pt=function(e){return e.songImporter.content},Rt=function(e){return e.songImporter.inputFormat},St=function(e){return e.songImporter.title},jt=function(e){return e.songImporter.isImporting},Ft=function(e){return e.songImporter.isFromWeb};function Nt(e){var t=e.children,n=e.closeModal;return(0,Ve.useEffect)((function(){var e=function(e){"Escape"===e.key&&n()};return window.addEventListener("keyup",e),function(){window.removeEventListener("keyup",e)}})),Ve.createElement("section",{className:"mod-ModalContainer"},Ve.createElement("div",{className:"mod-Overlay",onClick:n,"data-testid":"modal-overlay"}),Ve.createElement("div",{className:"mod-ContentContainer"},t))}Nt.propTypes={children:Ue().element.isRequired,closeModal:Ue().func.isRequired};const kt=Nt;var qt=function(e){var t=e.cancelImport,n=e.chordMarkContent,r=e.importFile,o=e.title,i=e.content,a=e.error,c=o?'Import "'+o+'"':"Import song";return Ve.createElement("div",{className:"sim-Header_Container"},Ve.createElement("div",{className:"sim-Header_Title"},c),Ve.createElement("div",{className:"sim-Header_Actions"},Ve.createElement(ht,{onClick:t,buttonName:"cancel",type:"secondary"},"CANCEL"),Ve.createElement(ht,{onClick:function(){r(o||"[untitled]",n)},buttonName:"import",type:"primary",isDisabled:""===i||""!==a},"IMPORT")))};qt.propTypes={cancelImport:Ue().func.isRequired,chordMarkContent:Ue().string,content:Ue().string,error:Ue().string,importFile:Ue().func.isRequired,title:Ue().string};const Tt=qt;n("5s+n"),n("sMBO");var xt=n("zuWl"),It=n.n(xt),At=function(e){return e.name.substr(0,e.name.lastIndexOf("."))},_t=function(e){return e.size>51200},Mt=function(e){return 0===e.type.indexOf("text")||0===e.type.length},Bt=function(e){return"The selected file is too big: "+It()(e,{round:0})+" (maximum allowed file size is "+It()(51200,{round:0})+")."},Dt=function(e){return"Cannot import file of type "+e.type+"."},Lt=function(){return"No file selected."};const zt=function(e){return new Promise((function(t,n){if(e.length){var r=e[0];_t(r)?n(Bt(r.size)):Mt(r)?r.text().then((function(e){t({content:e,title:At(r)})})).catch((function(e){n(e)})):n(Dt(r))}else n(Lt())}))};var Wt=function(e){var t=e.setContent;return Ve.createElement("div",null,Ve.createElement("label",{htmlFor:"importSong-Input",className:"Button Button-primary"},"Select File"),Ve.createElement("input",{id:"importSong-Input",name:"importSong-Input",type:"file",className:"sim-InputFile_Input",onChange:function(e){zt(e.target.files).then((function(e){t(e.content,e.title)})).catch((function(e){t(e)}))},accept:"text/*,.cho,.crd,.chopro,.chord,.pro,.txt,.md"}))};Wt.propTypes={setContent:Ue().func.isRequired};const Ht=Wt;function Gt(e){var t=e.content,n=e.setContent,r=e.isDisabled,o=["sim-Input_Textarea"];return r&&o.push("sim-Input_Textarea-Disabled"),Ve.createElement(Ve.Fragment,null,Ve.createElement("div",{className:"sim-Input_Header"},Ve.createElement(lt,{iconName:"arrow_drop_down"}),"Copy/paste below",Ve.createElement(lt,{iconName:"arrow_drop_down"})),Ve.createElement("textarea",{className:o.join(" "),onChange:function(e){n(e.target.value)},value:t,disabled:r,"data-testid":"sim-input"}))}Gt.propTypes={content:Ue().string.isRequired,isDisabled:Ue().bool.isRequired,setContent:Ue().func.isRequired},Gt.defaultProps={};const Vt=Gt;function $t(e){var t=e.inputFormat,n=e.error;return Ve.createElement("div",{className:"sim-Preview_Error"},Ve.createElement("p",null,"There was an error when trying to parse the song in the specified input format (",t,").",Ve.createElement("br",null),"Please correct the input or try another format.",Ve.createElement("br",null),"The error was:"),Ve.createElement("p",null,'"',n,'"'),Ve.createElement("p",null,'Hint: most of the time, this is related to an unclosed "[" or "{" or an unsupported ChordPro directive'))}$t.propTypes={error:Ue().string,inputFormat:Ue().string.isRequired},$t.defaultProps={};const Kt=$t;function Zt(e){var t=e.setInputFormat,n=e.inputFormat,r=e.id,o=e.label,i=e.isDisabled,a=["sim-InputFormat_Entry"],c=["sim-InputFormat_Label"];return i&&(a.push("sim-InputFormat_Entry-Disabled"),c.push("sim-InputFormat_Label-Disabled")),Ve.createElement(Ve.Fragment,null,Ve.createElement("input",{className:a.join(" "),type:"radio",name:"inputFormat",id:r,value:r,onChange:function(e){i||t(e.target.value)},checked:n===r}),Ve.createElement("label",{className:c.join(" "),htmlFor:r},o))}Zt.propTypes={setInputFormat:Ue().func.isRequired,inputFormat:Ue().string.isRequired,id:Ue().string.isRequired,label:Ue().string.isRequired,isDisabled:Ue().bool.isRequired},Zt.defaultProps={};const Ut=Zt;var Jt=[{id:"basic",label:"Basic"},{id:"chordpro",label:"ChordPro"},{id:"ultimateGuitar",label:"Ultimate Guitar"}];function Yt(e){var t=e.setInputFormat,n=e.inputFormat,r=e.disableAll,o=Jt.map((function(e){return Ve.createElement(Ut,{setInputFormat:t,id:e.id,key:e.id,label:e.label,inputFormat:n,isDisabled:r})}));return Ve.createElement("div",{className:"sim-InputFormat"},"Input format:",o)}Yt.propTypes={disableAll:Ue().bool.isRequired,setInputFormat:Ue().func.isRequired,inputFormat:Ue().string.isRequired},Yt.defaultProps={};const Xt=Yt;n("rB9j"),n("UxlC");var Qt=n("akyv");n("HiXI"),n("SYor"),n("7ueG"),n("pjDv"),n("+2oP");function en(e){return function(e){if(Array.isArray(e))return tn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nn=[];function rn(e){return nn.length=0,on(e),nn.join("\n")}var on=function(e){e.bodyParagraphs.map((function(e){an(e),nn.push("")}))},an=function(e){switch(e.type){case"verse":nn.push("#v");break;case"chorus":nn.push("#c")}e.lines.map((function(e){return cn(e)}))},cn=function(e){var t=[sn(e),ln(e),un(e)].filter((function(e){return null!==e})).map((function(e){return e.trimRight()}));nn.push.apply(nn,en(t))},sn=function(e){return pn(e)?e.items.reduce((function(e,t){return gn(t)&&(e+=t.chords.trim()+" "),e}),""):null},ln=function(e){return mn(e)?e.items.reduce((function(e,t){return hn(t)||(e+=" "),gn(t)&&(e+="_"),yn(t)&&(e+=" "),e+=t.lyrics.trim(),bn(t)&&(e+=" "),e}),""):null},un=function(e){if(!fn(e))return null;var t=e.items[0].value.toLowerCase().replace(/[- 0-9]/g,"");return dn[t]?dn[t]:"#"+t},dn={adlib:"#a",bridge:"#b",chorus:"#c",interlude:"#u",intro:"#i",introduction:"#i",outro:"#o",prechorus:"#p",solo:"#s"},pn=function(e){return e.items.some((function(e){return e instanceof Qt.YN&&e.chords}))},mn=function(e){return e.items.some((function(e){return e instanceof Qt.YN&&e.lyrics}))},fn=function(e){return e.items.some((function(e){return e instanceof Qt.Vp&&e.isRenderable()}))},gn=function(e){return e instanceof Qt.YN&&e.chords.trim().length},hn=function(e){return e.lyrics.length},yn=function(e){return e.lyrics.length-e.lyrics.trimLeft().length>=1},bn=function(e){return e.lyrics.trim().length&&e.lyrics.length-e.lyrics.trimRight().length>=1};function vn(e){var t=e.replace(/\r\n/g,"\n").replace(/\t/g," ").replace(/\[\/?ch]/g,"").replace(/\[\/?tab]/g,"");return rn((new Qt.ZP.UltimateGuitarParser).parse(t))}var En=function(e){if("ultimateGuitar"===e)return vn;var t="chordpro"===e?new Qt.ZP.ChordProParser:new Qt.ZP.ChordSheetParser;return function(e){return rn(t.parse(e))}};const On=function(e,t){return En(t)(e)};function Cn(e){var t=e.cancelImport,n=e.content,r=e.importFile,o=e.isFromWeb,i=e.isImporting,a=e.setContent,c=e.setInputFormat,s=e.inputFormat,l=e.title;if(!i)return null;var u="",d="";try{u=On(n,s)}catch(e){d=e.message}return Ve.createElement(kt,{closeModal:t},Ve.createElement("div",{className:"sim-SongImporterModal_Container","data-testid":"song-importer"},Ve.createElement(Tt,{cancelImport:t,chordMarkContent:u,content:n,error:d,importFile:r,title:l}),Ve.createElement("div",{className:"sim-TwoColumns_Container"},Ve.createElement("div",{className:"sim-Column_Container"},Ve.createElement(Ht,{setContent:a})),Ve.createElement("div",{className:"sim-Column_Container"},Ve.createElement(Xt,{inputFormat:s,setInputFormat:c,disableAll:!0===o}))),Ve.createElement("div",{className:"sim-TwoColumns_Container sim-TwoColumns_Container-autoHeight"},Ve.createElement("div",{className:"sim-Column_Container"},Ve.createElement(Vt,{content:n,setContent:a,isDisabled:o})),Ve.createElement("div",{className:"sim-Column_Container"},Ve.createElement("div",{className:"sim-Input_Header"},Ve.createElement(lt,{iconName:"arrow_drop_down"}),"ChordMark preview",Ve.createElement(lt,{iconName:"arrow_drop_down"})),Ve.createElement("div",{className:"sim-Preview_Container","data-testid":"sim-preview"},d?Ve.createElement(Kt,{inputFormat:s,error:d}):u)))))}Cn.propTypes={cancelImport:Ue().func.isRequired,content:Ue().string.isRequired,importFile:Ue().func.isRequired,isFromWeb:Ue().bool.isRequired,isImporting:Ue().bool.isRequired,setContent:Ue().func.isRequired,setInputFormat:Ue().func.isRequired,inputFormat:Ue().string.isRequired,title:Ue().string},Cn.defaultProps={};const wn=Cn,Pn=(0,Ke.$j)((function(e){return{content:Pt(e),isFromWeb:Ft(e),isImporting:jt(e),inputFormat:Rt(e),title:St(e)}}),{setContent:function(e,t){return Be(be,{content:e,title:t})},setInputFormat:function(e){return Be(ve,{inputFormat:e})},cancelImport:function(){return Be(he)},importFile:Ct})(wn),Rn=[{id:"edit",label:"Edit",icon:"create",editorMode:"edit"},{id:"play",label:"Screen view",icon:"music_note",editorMode:"play"},{id:"print",label:"Print/PDF Preview",icon:"print",editorMode:"print"},{id:"export",label:"Export Preview",icon:"save_alt",editorMode:"export"}];function Sn(e){var t=e.editorMode,n=e.isLeftBarCollapsed,r=e.isRightBarCollapsed,o=e.toggleLeftBar,i=e.toggleRightBar,a=e.setEditorMode,c=e.selectedId,s=e.leftBar,l=e.rightBar,u=["leftBar"];n&&u.push("leftBar-isCollapsed");var d=["rightBar"];return r&&d.push("rightBar-isCollapsed"),Ve.createElement("div",{className:"appLayout-wrapper"},Ve.createElement(Pn,null),Ve.createElement("section",{className:u.join(" ")},Ve.createElement("div",{className:"leftBar-content",onClick:n?o:null},Ve.createElement(ct,null),s),Ve.createElement("div",{className:"leftBar-collapser",onClick:o,"data-testid":"leftBar-collapser"},Ve.createElement("span",{className:"leftBar-collapserIcon"},Ve.createElement(lt,{iconName:"keyboard_arrow_left"})))),Ve.createElement("section",{className:"appLayout-main"},Ve.createElement("section",{className:"appLayout-header"},Ve.createElement(ft,{allEntries:Rn,currentMode:t,setEditorMode:a,selectedId:c})),Ve.createElement("section",{className:"appLayout-content"},e.children)),Ve.createElement("section",{className:d.join(" ")},Ve.createElement("div",{className:"rightBar-collapser",onClick:i,"data-testid":"rightBar-collapser"},Ve.createElement("span",{className:"rightBar-collapserIcon"},Ve.createElement(lt,{iconName:"keyboard_arrow_right"}))),Ve.createElement("div",{className:"rightBar-content",onClick:r?i:null},Ve.createElement(bt,null),l,Ve.createElement(Et,null))))}Sn.propTypes={children:Ue().element,isLeftBarCollapsed:Ue().bool,isRightBarCollapsed:Ue().bool,selectedId:Ue().string,toggleLeftBar:Ue().func.isRequired,toggleRightBar:Ue().func.isRequired,editorMode:Ue().string.isRequired,setEditorMode:Ue().func.isRequired,leftBar:Ue().element.isRequired,rightBar:Ue().element.isRequired},Sn.defaultProps={isLeftBarCollapsed:!1,isRightBarCollapsed:!1};const jn=Sn,Fn=(0,Ke.$j)((function(e){return{editorMode:C(e),isLeftBarCollapsed:E(e),isRightBarCollapsed:O(e),selectedId:w(e)}}),{toggleLeftBar:function(){return Be(b)},toggleRightBar:function(){return Be(v)},setEditorMode:ot})(jn);n("ma9I");var Nn=n("Iab2"),kn=(n("EnZy"),n("Rm1S"),n("XHOe")),qn=n("1C0g"),Tn=n.n(qn);function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function In(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function An(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _n(e,t,n,"html")}function _n(e,t,n,r){if(n&&"chordmarkSrc"===t.chartFormat)return"html"===r?Bn(e):e;if(n&&"chordpro"===t.chartFormat){t.customRenderer=Tn();var o=Mn(e,t);return"html"===r?Bn(o):o}var i=Mn(e,t);return"html"===r?i:i.match(/(<p.*?>.*?<\/p>)/gm).map((function(e){return Ce(e)})).map((function(e){return"&nbsp;"===e?"":e})).join("\n")}function Mn(e,t){try{var n=(0,kn.parseSong)(e);return(0,kn.renderSong)(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(n),!0).forEach((function(t){In(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}catch(e){return e.message}}function Bn(e){return e.split("\n").map((function(e){return""===e?"&nbsp;":e})).map((function(e){return"<p>".concat(e,"</p>")})).join("")}function Dn(){var e=Me().getState(),t=w(e),n=L(e,t),r={chartFormat:te(e,"editorPreferences","chartFormat"),transposeValue:te(e,"songPreferences","transposeValue"),harmonizeAccidentals:te(e,"songPreferences","harmonizeAccidentals"),accidentalsType:te(e,"songPreferences","accidentalsType"),chartType:te(e,"songFormatting","chartType"),alignChordsWithLyrics:te(e,"songFormatting","alignChordsWithLyrics"),alignBars:te(e,"songFormatting","alignBars"),autoRepeatChords:te(e,"songFormatting","autoRepeatChords"),expandSectionCopy:te(e,"songFormatting","expandSectionCopy")},o=function(e){return _n(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]&&arguments[2],"text")}(n.content,r,!0),i="chordpro"===r.chartFormat?"cho":"txt",a="".concat(n.title,".").concat(i),c=new Blob([o],{type:"text/plain;charset=utf-8",endings:"native"});(0,Nn.saveAs)(c,a)}function Ln(e){var t=e.confirmAction,n=e.confirmTitle,r=void 0===n?"OK":n,o=e.cancelAction,i=e.cancelTitle,a=void 0===i?"CANCEL":i,c=e.children;return Ve.createElement(kt,{closeModal:o},Ve.createElement("section",{className:"mod-ModalConfirmContainer"},Ve.createElement("div",{className:"mod-ModalConfirmMessage"},c),Ve.createElement("div",{className:"mod-ModalConfirmButtons"},Ve.createElement(ht,{onClick:o,type:"secondary",buttonName:"cancel"},a),Ve.createElement(ht,{onClick:t,type:"primary",buttonName:"confirm"},r))))}Ln.propTypes={confirmAction:Ue().func.isRequired,confirmTitle:Ue().string,cancelAction:Ue().func.isRequired,cancelTitle:Ue().string,children:Ue().node.isRequired};const zn=Ln;function Wn(e){var t=e.selected,n=e.deleteFile,r=e.isDeleting,o=e.setIsDeleting;if(!r)return null;return Ve.createElement(zn,{confirmAction:function(){o(!1),n(t)},confirmTitle:"DELETE",cancelAction:function(){return o(!1)}},"Are you sure you want to delete this file?",Ve.createElement("br",null),"This action cannot be undone.")}Wn.propTypes={deleteFile:Ue().func.isRequired,isDeleting:Ue().bool.isRequired,selected:Ue().string.isRequired,setIsDeleting:Ue().func.isRequired};const Hn=Wn;function Gn(e){var t=e.icon,n=e.text,r=e.action,o=e.isDisabled,i=["fileManagerAction"];o&&i.push("fileManagerAction-isDisabled");return Ve.createElement("span",{className:i.join(" "),onClick:function(){o||r()}},Ve.createElement("span",{className:"fileManagerAction-icon"},Ve.createElement(lt,{iconName:t})," ",n))}Gn.propTypes={icon:Ue().string.isRequired,text:Ue().string.isRequired,action:Ue().func.isRequired,isDisabled:Ue().bool.isRequired};const Vn=Ve.memo(Gn);function $n(){return $n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$n.apply(this,arguments)}function Kn(e){var t=e.selected,n=e.createFile,r=e.deleteFile,o=e.enableRename,i=e.startImport,a=e.exportAsText,c=[{icon:"upload",text:"Import",action:i,isDisabled:!1},{icon:"add_circle",text:"New",action:n,isDisabled:!1},{icon:"create",text:"Rename",action:o,isDisabled:!t},{icon:"delete",text:"Delete",action:r,isDisabled:!t},{icon:"print",text:"Print",action:e.printFile,isDisabled:!t},{icon:"download",text:"Export",action:a,isDisabled:!t}];return Ve.createElement("div",{className:"fileManager-actionsList"},c.map((function(e,t){return Ve.createElement(Vn,$n({},e,{key:t}))})))}Kn.propTypes={selected:Ue().string,createFile:Ue().func.isRequired,deleteFile:Ue().func.isRequired,enableRename:Ue().func.isRequired,exportAsText:Ue().func.isRequired,printFile:Ue().func.isRequired,startImport:Ue().func.isRequired};const Zn=Ve.memo(Kn);function Un(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yn(e){var t=Un((0,Ve.useState)(e.title),2),n=t[0],r=t[1],o=e.fileId,i=e.isSelected,a=e.isRenamed,c=e.defaultTitle,s=e.selectFile,l=e.enableRename,u=e.updateFile,d=["fileManagerEntry"];i&&d.push("fileManagerEntry-isSelected"),a&&d.push("fileManagerEntry-isRenamed");var p=Ve.createRef();function m(e){u(o,{title:e=e||c}),r(e),p.current.scrollLeft=0}return(0,Ve.useEffect)((function(){a&&p.current.focus()}),[a,p]),Ve.createElement("li",{className:d.join(" "),onClick:function(){i||s(o)},onDoubleClick:function(e){a||(l(o),e.target.select())}},Ve.createElement("input",{className:"fileManagerEntry-input",ref:p,type:"text",value:n,readOnly:a?null:"readOnly",autoFocus:a?"autoFocus":null,onChange:function(e){r(e.target.value)},onBlur:function(e){a&&m(e.target.value)},onFocus:function(e){a&&e.target.select()},onKeyPress:function(e){a&&13===e.which&&(e.preventDefault(),window.getSelection().removeAllRanges(),m(e.target.value))}}))}Yn.propTypes={title:Ue().string.isRequired,fileId:Ue().string.isRequired,isSelected:Ue().bool.isRequired,isRenamed:Ue().bool.isRequired,defaultTitle:Ue().string.isRequired,selectFile:Ue().func.isRequired,enableRename:Ue().func.isRequired,updateFile:Ue().func.isRequired};const Xn=Yn;function Qn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tr(e){var t=Qn((0,Ve.useState)(!1),2),n=t[0],r=t[1],o=e.allTitles,i=e.selected,a=e.renamed,c=e.defaultTitle,s=e.createFile,l=e.deleteFile,u=e.enableRename,d=e.startImport,p=e.selectFile,m=e.updateFile,f=e.setEditorMode;return Ve.createElement("div",{className:"fileManager"},Ve.createElement(Hn,{deleteFile:l,isDeleting:n,selected:i,setIsDeleting:r}),Ve.createElement("div",{className:"fileManager-isCollapsed"},Ve.createElement("span",{className:"fileManager-icon"},Ve.createElement(lt,{iconName:"file_copy"}))),Ve.createElement("div",{className:"fileManager-isExpanded"},Ve.createElement(Zn,{selected:i,createFile:function(){return s(c)},deleteFile:function(){return r(!0)},enableRename:function(){return u(i)},startImport:function(){return d()},exportAsText:function(){f("export"),setTimeout((function(){return Dn()}),0)},printFile:function(){f("print"),setTimeout((function(){return window.print()}),0)}}),Ve.createElement("ul",{className:"fileManager-entriesList"},o.map((function(e){return Ve.createElement(Xn,{title:e.title,defaultTitle:c,fileId:e.id,isSelected:i===e.id,isRenamed:a===e.id,selectFile:p,updateFile:m,enableRename:u,key:e.id})})))))}tr.propTypes={allTitles:Ue().arrayOf(Ue().shape({title:Ue().string.isRequired,id:Ue().string.isRequired})).isRequired,selected:Ue().string.isRequired,renamed:Ue().string.isRequired,defaultTitle:Ue().string.isRequired,selectFile:Ue().func.isRequired,createFile:Ue().func.isRequired,deleteFile:Ue().func.isRequired,enableRename:Ue().func.isRequired,startImport:Ue().func.isRequired,updateFile:Ue().func.isRequired,setEditorMode:Ue().func.isRequired};const nr=tr,rr=(0,Ke.$j)((function(e){return{selected:w(e),renamed:P(e),defaultTitle:R(e),allTitles:D(e)}}),{selectFile:function(e){return Be(Q,{id:e})},createFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)throw new TypeError("Cannot create a file without title");var n={id:(0,Ot.Z)(),title:e,content:t};return Be(p,n)},deleteFile:function(e){return Be(m,{id:e})},updateFile:wt,enableRename:function(e){return Be(ee,{id:e})},setEditorMode:ot,startImport:function(){return Be(ye,{isFromWeb:!1})}})(nr);var or=n("awlu");function ir(e){return Oe().sanitize(e)}function ar(e){var t=e.content,n=e.useChartFormat,r=An(t,u()(e,["chartFormat","transposeValue","harmonizeAccidentals","accidentalsType","chartType","alignChordsWithLyrics","alignBars","autoRepeatChords","expandSectionCopy"]),n);return Ve.createElement("div",{className:"songRenderer"},Ve.createElement("div",{dangerouslySetInnerHTML:{__html:ir(r)}}))}ar.propTypes={useChartFormat:Ue().bool.isRequired,chartFormat:Ue().string.isRequired,content:Ue().string},ar.defaultProps={content:"",useChartFormat:!1};const cr=ar,sr=(0,Ke.$j)((function(e){return{transposeValue:te(e,"songPreferences","transposeValue"),harmonizeAccidentals:te(e,"songPreferences","harmonizeAccidentals"),accidentalsType:te(e,"songPreferences","preferredAccidentals"),chartFormat:te(e,"editorPreferences","chartFormat"),chartType:te(e,"songFormatting","chartType"),alignChordsWithLyrics:te(e,"songFormatting","alignChordsWithLyrics"),alignBars:te(e,"songFormatting","alignBars"),autoRepeatChords:te(e,"songFormatting","autoRepeatChords"),expandSectionCopy:te(e,"songFormatting","expandSectionCopy")}}))(cr);function lr(e){var t=e.selectedFile;return Ve.createElement("div",{className:["editorPreview"].join(" ")},Ve.createElement(sr,{content:t.content}))}lr.propTypes={selectedFile:Ue().object.isRequired};const ur=lr;var dr=n("UxO+"),pr=n("V2qZ"),mr=n("BUsU"),fr=n("SxI5"),gr=n("ABBN"),hr=n("lGMC");const yr=new mr.V_({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}},text:{group:"inline"}}});n("vxnP");function br(e){return e.toJSON().doc.content.map((function(e){return e.content?e.content.reduce((function(e,t){return e+=t.text||"\n"}),""):""})).join("\n")}function vr(e){return Oe().sanitize(e,{ALLOWED_TAGS:["p","#text"],KEEP_CONTENT:!1})}function Er(e){var t,n,r=e.selectedFileId,o=e.editorContent,i=e.updateFile,a=(0,Ve.useRef)(),c=(0,Ve.useRef)(),s=(t=r,n=(0,Ve.useRef)(),(0,Ve.useEffect)((function(){n.current=t})),n.current);function l(){return a.current&&a.current.dom.parentNode}function u(){a.current.dom.parentNode.removeChild(a.current.dom)}return(0,Ve.useEffect)((function(){if(!r||a.current&&s===r)l()&&!r&&u();else{l()&&u();var e=function(e){return dr.yy.create({doc:mr.aw.fromSchema(yr).parse((t=e,n=vr(t).split("\n").map((function(e){return"<p>".concat(e,"</p>")})).join(""),r=document.createElement("div"),r.innerHTML=vr(n),r),{preserveWhitespace:"full"}),plugins:[(0,hr.m8)(),(0,fr.h)({"Mod-z":hr.Yw,"Mod-y":hr.KX}),(0,fr.h)(gr.YR)]});var t,n,r}(o);a.current=function(e,t,n){return new pr.tk(null,{state:e,dispatchTransaction:function(e){var r=this.state.applyTransaction(e),o=r.state,i=r.transactions;this.updateState(o),i.some((function(e){return e.docChanged}))&&t(n,{content:br(o)})}})}(e,i,r),c.current.appendChild(a.current.dom),Er.editorView=a.current}})),Ve.createElement("div",{className:"prosemirrorWrapper",ref:c})}Er.defaultProps={selectedFileId:"",editorContent:""},Er.propTypes={selectedFileId:Ue().string,editorContent:Ue().string,updateFile:Ue().func.isRequired};const Or=Er;function Cr(e){var t=e.selectedFile,n=e.updateFile,r=["songEditor-preview","cmTheme-"+e.theme,"cmTheme-fadeRepeats"];return Ve.createElement(Ve.Fragment,null,Ve.createElement("div",{className:"songEditor-headers"},Ve.createElement("div",{className:"songEditor-sourceHeader"},Ve.createElement(lt,{iconName:"arrow_drop_down"}),"ChordMark source (",Ve.createElement("a",{href:"https://chordmark.netlify.app/docs/getting-started",target:"_blank",rel:"noreferrer",className:"link1"},"tutorial"),")",Ve.createElement(lt,{iconName:"arrow_drop_down"})),Ve.createElement("div",{className:"songEditor-previewHeader"},Ve.createElement(lt,{iconName:"arrow_drop_down"}),"Result preview",Ve.createElement(lt,{iconName:"arrow_drop_down"}))),Ve.createElement(or.E,null,Ve.createElement("div",{className:"songEditor"},Ve.createElement(or.z,{group:"a"},Ve.createElement("div",{className:"songEditor-source"},Ve.createElement(Or,{editorContent:t.content,updateFile:n,selectedFileId:t.id}))),Ve.createElement(or.z,{group:"a"},Ve.createElement("div",{className:r.join(" ")},Ve.createElement(ur,{selectedFile:t}))))))}Cr.propTypes={selectedFile:Ue().object,theme:Ue().string.isRequired,updateFile:Ue().func.isRequired};const wr=Cr,Pr=(0,Ke.$j)((function(e){return{theme:te(e,"editorPreferences","theme")}}))(wr);function Rr(e){var t=e.selectedFile;return Ve.createElement("div",{className:"exportPreview exp-SongRenderer"},Ve.createElement(sr,{content:t.content,useChartFormat:!0}))}Rr.propTypes={selectedFile:Ue().object.isRequired};const Sr=Rr;function jr(e){var t=e.theme,n=e.selectedFile,r=e.fontSize,o=e.columnsCount,i=["playRendererWrapper1"];i.push("cmTheme-"+t),i.push("cmSong--fontSize"+r);var a=["playRenderer"];return a.push("playRenderer--columns-"+o),Ve.createElement("div",{className:i.join(" "),"data-testid":"playRendererWrapper1"},Ve.createElement("div",{className:"playRendererWrapper2"},Ve.createElement("div",{className:a.join(" "),"data-testid":"playRenderer"},Ve.createElement(sr,{content:n.content}))))}jr.propTypes={theme:Ue().string.isRequired,fontSize:Ue().number.isRequired,selectedFile:Ue().object.isRequired,columnsCount:Ue().number.isRequired};const Fr=jr,Nr=(0,Ke.$j)((function(e){return{theme:te(e,"editorPreferences","theme"),fontSize:te(e,"songFormatting","fontSize"),columnsCount:te(e,"songFormatting","columnsCount")}}))(Fr);n("ls82");function kr(e){var t=e.pageHeader,n=e.allColumnsLines,r=e.documentSize,o=e.documentMargins,i=e.fontSize,a=n.map((function(e,t){var n=e.join("");return Ve.createElement("div",{key:t,className:"printPreview-pageColumn","data-testid":"printPreview-pageColumn",dangerouslySetInnerHTML:{__html:ir(n)}})})),c=["printPreview-page"];c.push("printPreview-page--"+r),c.push("cmSong--fontSize"+i),c.push("cmSong");var s=["printPreview-pageContentWrapper"];return s.push("printPreview-pageContentWrapper--padding"+o),Ve.createElement("div",{className:c.join(" "),"data-testid":"printPreview-page"},Ve.createElement("div",{className:s.join(" "),"data-testid":"printPreview-pageContentWrapper"},Ve.createElement("div",{className:"printPreview-pageContent"},t,Ve.createElement("div",{className:"printPreview-pageColumnWrapper"},a))))}kr.defaultProps={allColumnsLines:[]},kr.propTypes={pageHeader:Ue().element,allColumnsLines:Ue().arrayOf(Ue().arrayOf(Ue().string)),documentSize:Ue().string.isRequired,documentMargins:Ue().number.isRequired,fontSize:Ue().number.isRequired};const qr=Ve.memo(kr);function Tr(e){var t=e.title;return Ve.createElement("div",{className:"printPreview-pageHeader"},t)}Tr.defaultProps={allColumnsLines:[]},Tr.propTypes={title:Ue().string.isRequired};const xr=Ve.memo(Tr);var Ir="cmEmptyLine",Ar="cmChordLine",_r="cmLyricLine";function Mr(e,t){var n=t.columnsCount,r=t.firstPageHeight,o=t.normalPageHeight,i=t.columnBreakOnSection,a=t.noEmptyLinesOnColumnStart,c=void 0===a||a,s=t.noOrphanTextLine,l=void 0===s||s,u=function(e){var t=e.firstPageHeight,n=e.normalPageHeight,r=e.columnsCount,o=[],i=0,a=0,c=u(),s=0;function l(e){e.forEach((function(e){d(s+e.height)&&p(),o[i][a].push(e.content),s+=e.height}))}function u(){return 0===i&&t?t:n}function d(e){return e>c}function p(){m()?(i++,o[i]=[],a=0):a++,o[i][a]=[],s=0,c=u()}function m(){return a===r-1}return o[i]=[],o[i][a]=[],{insert:function(e){l(e)},insertOnNextColumn:function(e){p(),l(e)},fitsOnCurrentColumn:function(e){return s+e<=c},fitsOnNextColumn:function(e){return e<=(0===i&&a<r&&t?t:n)},get:function(){return o}}}({columnsCount:n,firstPageHeight:r,normalPageHeight:o,noEmptyLinesOnColumnStart:c}),d=[],p=0;return(r||o)>0&&e.forEach((function(t,n){(function(e,t,n,r){return!(Br(t)&&!e.fitsOnCurrentColumn(t.height)&&0===n.length&&!0===r)})(u,t,d,c)&&(d.push(t),p+=t.height),d.length>0&&function(e,t,n){var r=n.noOrphanTextLine,o=n.columnBreakOnSection;if(Br(e)||!t)return!0;var i=function(e){return Dr(e.content,Ar)}(e)&&function(e){return Dr(e.content,_r)}(t);if(!0===r&&i)return!1;var a=Br(t);if(!0===o&&!a)return!1;return!0}(t,e[n+1],{noOrphanTextLine:l,columnBreakOnSection:i})&&(u.fitsOnCurrentColumn(p)?u.insert(d):u.fitsOnNextColumn(p)?u.insertOnNextColumn(d):u.insert(d),d=[],p=0)})),u.get()}function Br(e){return Dr(e.content,Ir)}function Dr(e,t){return e.indexOf(t)>-1}function Lr(e,t){var n=document.createElement("div");return n.classList.add("measuring-node"),document.body.appendChild(n),new Promise((function(r){$e.render(Ve.createElement("div",null,e),n,(function(){var e=t(n);$e.unmountComponentAtNode(n),n.parentNode.removeChild(n),r(e)}))}))}function zr(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.length||0;n<e;n++)t.push([]);return t}function Wr(e){return e.offsetHeight}function Hr(e){return e.clientHeight}function Gr(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Vr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Gr(i,r,o,a,c,"next",e)}function c(e){Gr(i,r,o,a,c,"throw",e)}a(void 0)}))}}var $r=".cmLine";function Kr(e,t){return Zr.apply(this,arguments)}function Zr(){return Zr=Vr(regeneratorRuntime.mark((function e(t,n){var r,o,i,a,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.columnsCount,o=n.documentSize,i=n.documentMargins,a=n.fontSize,c=Ve.createElement("div",{className:"printPreview cmTheme-print"},Ve.createElement(qr,{allColumnsLines:zr(r,[t]),columnsCount:r,documentSize:o,documentMargins:i,fontSize:a})),s=function(e){var t=[];return e.querySelectorAll($r).forEach((function(e){t.push(Wr(e))})),t},e.next=5,Lr(c,s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),Zr.apply(this,arguments)}function Ur(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Jr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ur(i,r,o,a,c,"next",e)}function c(e){Ur(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Yr(e,t){return Xr.apply(this,arguments)}function Xr(){return(Xr=Jr(regeneratorRuntime.mark((function e(t,n){var r,o,i,a,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.columnsCount,o=n.documentSize,i=n.documentMargins,a=n.fontSize,c=Ve.createElement(qr,{pageHeader:Ve.createElement(xr,{title:t}),allColumnsLines:zr(r),documentSize:o,documentMargins:i,fontSize:a}),s=function(e){var t=e.querySelector(".printPreview-pageContent");return{firstPageHeight:Hr(e.querySelector(".printPreview-pageColumnWrapper")),normalPageHeight:Hr(t)}},e.next=5,Lr(c,s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qr(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return to(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return to(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function to(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function no(e){var t=eo((0,Ve.useState)([]),2),n=t[0],r=t[1],o=e.title,i=e.allLines,a=e.columnsCount,c=e.columnBreakOnSection,s=e.documentSize,l=e.documentMargins,u=e.fontSize;(0,Ve.useLayoutEffect)((function(){var e=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n,d,p,m,f,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={columnsCount:a,documentSize:s,documentMargins:l,fontSize:u},e.next=3,Kr(i,t);case 3:return n=e.sent,e.next=6,Yr(o,t);case 6:d=e.sent,p=d.normalPageHeight,m=d.firstPageHeight,f=i.map((function(e,t){return{content:e,height:n[t]}})),g=Mr(f,{columnsCount:a,columnBreakOnSection:c,normalPageHeight:p,firstPageHeight:m}),r(g);case 12:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Qr(i,r,o,a,c,"next",e)}function c(e){Qr(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}),[i,o,a,c,s,l,u]);var d=n.map((function(e,t){return Ve.createElement(qr,{key:t,pageHeader:0===t?Ve.createElement(xr,{title:o}):null,allColumnsLines:zr(a,e),documentSize:s,documentMargins:l,fontSize:u})}));return Ve.createElement(Ve.Fragment,null,d)}no.propTypes={title:Ue().string.isRequired,allLines:Ue().arrayOf(Ue().string).isRequired,columnsCount:Ue().number.isRequired,columnBreakOnSection:Ue().bool.isRequired,documentSize:Ue().string.isRequired,documentMargins:Ue().number.isRequired,fontSize:Ue().number.isRequired};const ro=no;function oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ao(e){var t=e.selectedFile,n=u()(e,["transposeValue","harmonizeAccidentals","accidentalsType","chartType","alignChordsWithLyrics","alignBars","autoRepeatChords","expandSectionCopy"]),r=An(t.content||"",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(n),!0).forEach((function(t){io(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n)),o=r.match(/(<p.*?>.*?<\/p>)/gm);return Ve.createElement("div",{className:["printPreview","cmTheme-print"].join(" "),"data-testid":"printPreview"},Ve.createElement(ro,{title:t.title||"",allLines:o,columnsCount:e.columnsCount,columnBreakOnSection:e.columnBreakOnSection,documentSize:e.documentSize||"a4",documentMargins:e.documentMargins,fontSize:e.fontSize}))}ao.propTypes={chartType:Ue().string.isRequired,selectedFile:Ue().object.isRequired,columnsCount:Ue().number.isRequired,columnBreakOnSection:Ue().bool.isRequired,documentSize:Ue().string,documentMargins:Ue().number.isRequired,fontSize:Ue().number.isRequired};const co=ao,so=(0,Ke.$j)((function(e){return{harmonizeAccidentals:te(e,"songPreferences","harmonizeAccidentals"),accidentalsType:te(e,"songPreferences","preferredAccidentals"),transposeValue:te(e,"songPreferences","transposeValue"),chartType:te(e,"songFormatting","chartType"),alignChordsWithLyrics:te(e,"songFormatting","alignChordsWithLyrics"),alignBars:te(e,"songFormatting","alignBars"),autoRepeatChords:te(e,"songFormatting","autoRepeatChords"),expandSectionCopy:te(e,"songFormatting","expandSectionCopy"),columnsCount:te(e,"songFormatting","columnsCount"),columnBreakOnSection:te(e,"songFormatting","columnBreakOnSection"),documentMargins:te(e,"songFormatting","documentMargins"),fontSize:te(e,"songFormatting","fontSize")}}))(co);function lo(e){switch(e.editorMode){case"edit":return Ve.createElement(Pr,e);case"play":return Ve.createElement(Nr,e);case"print":return Ve.createElement(so,e);case"export":return Ve.createElement(Sr,e)}}lo.propTypes={editorMode:Ue().string.isRequired};const uo=lo,po=(0,Ke.$j)((function(e){return{selectedFile:L(e,w(e))||{},editorMode:C(e)}}),{updateFile:wt})(uo);n("JTJg");function mo(){return mo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mo.apply(this,arguments)}function fo(e){var t,n,r,o,i,a,c,s=e.id,l=e.allWidgets,u=e.nonInteractableWidgets,d=e.hiddenWidgets,p=e.setOption,m=e.getEntryComponent,f=["optionsPanel","optionsPanel-"+s],g=l.widgetsOrder.filter((function(e){return!d.includes(e)})).map((function(e){return"optionsGroup"===(t=l.allWidgets[e]).type?0===(c=t.groupWidgetsOrder.filter((function(e){return!d.includes(e)})).map((function(r){return n=t.allGroupWidgets[r],a=!u.includes(e)&&!u.includes(r),h(r,n,a)}))).length?null:(o=m(t.type),i=!u.includes(e),Ve.createElement(o,{key:e,isInteractable:i,label:t.label,icon:t.icon},c)):h(e,t,!u.includes(e))}));function h(t,n,o){return r=m(n.type),Ve.createElement(r,mo({key:t,isInteractable:o,optionContext:n.option.context,optionKey:n.option.key,optionValue:e[n.option.key],setOption:p,label:n.label},n.typeOptions))}return Ve.createElement("div",{className:f.join(" ")},g)}fo.propTypes={id:Ue().string.isRequired,allWidgets:Ue().object.isRequired,nonInteractableWidgets:Ue().arrayOf(Ue().string).isRequired,hiddenWidgets:Ue().arrayOf(Ue().string).isRequired,setOption:Ue().func.isRequired,getEntryComponent:Ue().func.isRequired};const go=fo;function ho(e){var t=e.isInteractable,n=e.icon,r=e.label,o=["sb-optionsGroup"];return t&&e.children&&e.children.length>0||o.push("sb-optionsGroup-isNotInteractable"),Ve.createElement("div",{className:o.join(" ")},Ve.createElement("div",{className:"sb-optionsGroup-title"},Ve.createElement("span",{className:"sb-optionsGroup-iconTitle"},Ve.createElement(lt,{iconName:n}))," ",r),Ve.createElement("div",{className:"sb-optionsGroup-content"},e.children))}ho.propTypes={isInteractable:Ue().bool.isRequired,icon:Ue().string.isRequired,label:Ue().string.isRequired,children:Ue().arrayOf(Ue().element)},ho.defaultProps={};const yo=ho;n("fbCW");function bo(e){var t,n=e.isSelected,r=e.isInteractable,o=e.label,i=e.onClick,a=["sb-optionSelectChoice"];return n&&(a.push("sb-optionSelectChoice-isSelected"),t=Ve.createElement("span",{className:"sb-optionSelectChoice-checkIcon"},Ve.createElement(lt,{iconName:"check"}))),r||a.push("sb-optionSelectChoice-isNotInteractable"),Ve.createElement("div",{className:a.join(" "),onClick:function(){r&&i()}},Ve.createElement("div",{className:"sb-optionSelectChoice-check"},n&&t),Ve.createElement("div",{className:"sb-optionSelectChoice-label"},o))}bo.propTypes={isSelected:Ue().bool.isRequired,isInteractable:Ue().bool.isRequired,label:Ue().string.isRequired,onClick:Ue().func.isRequired};const vo=Ve.memo(bo);function Eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Co(e){var t=Eo((0,Ve.useState)(!1),2),n=t[0],r=t[1],o=e.isInteractable,i=e.label,a=e.allChoices,c=e.optionContext,s=e.optionKey,l=e.optionValue,u=e.setOption,d=["sb-optionSelect"];o||d.push("sb-optionSelect-isNotInteractable");var p=n?"keyboard_arrow_down":"keyboard_arrow_right";var m=n?Ve.createElement("div",{className:"sb-optionSelect-choices"},a.map((function(e){return Ve.createElement(vo,{key:e.value,label:e.label,isSelected:l===e.value,isInteractable:o,onClick:function(){u(c,s,e.value)}})}))):null,f=a.find((function(e){return l===e.value})).label,g=n?i:Ve.createElement("span",null,Ve.createElement("span",null,i+": "),Ve.createElement("span",{className:"sb-optionSelectChoice-activeLabel"},f));return Ve.createElement("div",{className:d.join(" ")},Ve.createElement("div",{className:"sb-optionSelect-title",onClick:o?function(){r(!n)}:null},Ve.createElement("div",{className:"sb-optionSelect-desc","data-testid":"selectLabel"},g),Ve.createElement("div",{className:"sb-optionSelect-toggle"},Ve.createElement("span",{className:"sb-optionSelect-icon"},Ve.createElement(lt,{iconName:p})))),m)}Co.propTypes={isInteractable:Ue().bool.isRequired,label:Ue().string.isRequired,allChoices:Ue().array.isRequired,optionContext:Ue().string.isRequired,optionKey:Ue().string.isRequired,optionValue:Ue().string.isRequired,setOption:Ue().func.isRequired};const wo=Co;n("JevA"),n("qePV");function Po(e){var t=e.isInteractable,n=e.label,r=e.min,o=e.max,i=e.showPlusSymbol,a=e.optionContext,c=e.optionKey,s=e.optionValue,l=e.setOption,u=["sb-optionSlider"];t||u.push("sb-optionSlider-isNotInteractable");var d=s>0&&i?"+"+s:s;return Ve.createElement("div",{className:u.join(" ")},Ve.createElement("div",{className:"sb-optionSlider-desc"},n),Ve.createElement("div",{className:"sb-optionSlider-value"},d),Ve.createElement("div",{className:"sb-optionSlider-range"},Ve.createElement("input",{min:r,max:o,value:s,type:"range",onChange:t?function(e){l(a,c,Number.parseInt(e.target.value))}:null,disabled:!t})))}Po.propTypes={isInteractable:Ue().bool.isRequired,label:Ue().string.isRequired,min:Ue().number.isRequired,max:Ue().number.isRequired,showPlusSymbol:Ue().bool,optionContext:Ue().string.isRequired,optionKey:Ue().string.isRequired,optionValue:Ue().number.isRequired,setOption:Ue().func.isRequired},Po.defaultProps={showPlusSymbol:!0};const Ro=Ve.memo(Po);function So(e){var t=e.isInteractable,n=e.label,r=e.optionContext,o=e.optionKey,i=e.optionValue,a=e.setOption,c=["sb-optionToggle"];return c.push(!0===i?"sb-optionToggle-isOn":"sb-optionToggle-isOff"),t||c.push("sb-optionToggle-isNotInteractable"),Ve.createElement("div",{className:c.join(" "),onClick:t?function(){a(r,o,!i)}:null},Ve.createElement("div",{className:"sb-optionToggle-desc"},n),Ve.createElement("div",{className:"sb-optionToggle-icon"},Ve.createElement("span",{className:"sb-optionToggle-icon"},Ve.createElement(lt,{iconName:!0===i?"toggle_on":"toggle_off"}))))}So.propTypes={isInteractable:Ue().bool.isRequired,label:Ue().string.isRequired,optionContext:Ue().string.isRequired,optionKey:Ue().string.isRequired,optionValue:Ue().bool.isRequired,setOption:Ue().func.isRequired};const jo=Ve.memo(So);function Fo(){return Fo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fo.apply(this,arguments)}function No(e){switch(e){case"optionsGroup":return yo;case"select":return wo;case"slider":return Ro;case"toggle":return jo}}function ko(e){return Ve.createElement("div",{className:"sb-optionsPanel"},Ve.createElement(go,Fo({},e,{getEntryComponent:No})))}function qo(){return qo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qo.apply(this,arguments)}var To=function(e,t,n){if(!e)throw new TypeError("Cannot set an option without a context");if(!t)throw new TypeError("Cannot set an option without a key");return Be(h,{context:e,key:t,value:n})};var xo=n("zqxM"),Io=n.n(xo);function Ao(e){return function(e){if(Array.isArray(e))return _o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(n),!0).forEach((function(t){Do(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Do(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Lo=function(e,t,n,r){return(0,Ke.$j)((function(r){var o,i,a={allWidgets:e,nonInteractableWidgets:t(r),hiddenWidgets:n(r)};return e.widgetsOrder.forEach((function(t){(o=e.allWidgets[t]).groupWidgetsOrder.forEach((function(e){i=o.allGroupWidgets[e],a[i.option.key]=te(r,i.option.context,i.option.key)}))})),a}),{setOption:To})(r)}({widgetsOrder:["editorPreferences","key","preferences","layout"],allWidgets:{editorPreferences:{label:"Editor preferences",type:"optionsGroup",icon:"tune",groupWidgetsOrder:["theme","chartFormat"],allGroupWidgets:{theme:{label:"Theme",type:"select",typeOptions:{allChoices:[{id:"themeDark1",label:"Dark 1 (default)",value:"dark1"},{id:"themeDark2",label:"Dark 2",value:"dark2"},{id:"themeDark3",label:"Dark 3",value:"dark3"}]},option:{context:"editorPreferences",key:"theme"}},chartFormat:{label:"Export format",type:"select",typeOptions:{allChoices:[{id:"formatChordMark",label:"ChordMark",value:"chordmark"},{id:"formatChordMarkSrc",label:"ChordMark (Source)",value:"chordmarkSrc"},{id:"formatChordpro",label:"ChordPro",value:"chordpro"}]},option:{context:"editorPreferences",key:"chartFormat"}}}},key:{label:"Key",type:"optionsGroup",icon:"music_note",groupWidgetsOrder:["transposeValue","harmonizeAccidentals","preferredAccidentals"],allGroupWidgets:{transposeValue:{label:"Transpose",type:"slider",typeOptions:{min:-11,max:11,showPlusSymbol:!0},option:{context:"songPreferences",key:"transposeValue"}},harmonizeAccidentals:{label:"Harmonize accidentals",type:"toggle",option:{context:"songPreferences",key:"harmonizeAccidentals"}},preferredAccidentals:{label:"Preferred accidentals",type:"select",typeOptions:{allChoices:[{id:"preferredAccidentalsAuto",label:"Auto",value:"auto"},{id:"preferredAccidentalsSharp",label:"♯",value:"sharp"},{id:"preferredAccidentalsFlat",label:"♭",value:"flat"}]},option:{context:"songPreferences",key:"preferredAccidentals"}}}},preferences:{label:"Chart settings",type:"optionsGroup",icon:"tune",groupWidgetsOrder:["chartType","alignChordsWithLyrics","alignBars","autoRepeatChords","expandSectionCopy"],allGroupWidgets:{chartType:{label:"Type",type:"select",typeOptions:{allChoices:[{id:"typedisplayAll",label:"Show everything",value:"all"},{id:"typedisplayLyrics",label:"Lyrics only",value:"lyrics"},{id:"typedisplayChords",label:"Chords only",value:"chords"},{id:"typedisplayChordsFirstLyricLine",label:"Chords + First lyric line",value:"chordsFirstLyricLine"}]},option:{context:"songFormatting",key:"chartType"}},alignChordsWithLyrics:{label:"Align chords with lyrics",type:"toggle",option:{context:"songFormatting",key:"alignChordsWithLyrics"}},alignBars:{label:"Align bars",type:"toggle",option:{context:"songFormatting",key:"alignBars"}},autoRepeatChords:{label:"Auto repeat chords",type:"toggle",option:{context:"songFormatting",key:"autoRepeatChords"}},expandSectionCopy:{label:"Expand copied sections",type:"toggle",option:{context:"songFormatting",key:"expandSectionCopy"}}}},layout:{type:"optionsGroup",label:"Layout",icon:"view_compact",groupWidgetsOrder:["fontSize","columnsCount","columnBreakOnSection","documentMargins"],allGroupWidgets:{fontSize:{label:"Font size",type:"slider",typeOptions:{min:-5,max:5,showPlusSymbol:!0},option:{context:"songFormatting",key:"fontSize"}},columnsCount:{label:"Columns",type:"slider",typeOptions:{min:1,max:4},option:{context:"songFormatting",key:"columnsCount"}},columnBreakOnSection:{label:"Column Break on section",type:"toggle",option:{context:"songFormatting",key:"columnBreakOnSection"}},documentMargins:{label:"Margins",type:"slider",typeOptions:{min:1,max:5},option:{context:"songFormatting",key:"documentMargins"}}}}}},(function(e){var t=[],n=te(e,"songFormatting","chartType");"lyrics"===n?(t.push("alignChordsWithLyrics"),t.push("alignBars"),t.push("autoRepeatChords")):"chords"===n&&t.push("alignChordsWithLyrics");var r=te(e,"editorPreferences","chartFormat");return"export"===C(e)&&(["chordmarkSrc","chordpro"].includes(r)&&(t.push("chartType"),t.push("alignChordsWithLyrics"),t.push("alignBars"),t.push("autoRepeatChords")),"chordmarkSrc"===r&&t.push("expandSectionCopy")),te(e,"songPreferences","harmonizeAccidentals")||t.push("preferredAccidentals"),t}),(function(e){var t=[],n=Object.keys(Bo(Bo(Bo({},ne(e,"editorPreferences")),ne(e,"songFormatting")),ne(e,"songPreferences")));if(!w(e))return n;var r=C(e),o=Io()(n,H[r]);return t.push.apply(t,Ao(o)),t}),(function(e){return Ve.createElement("div",{className:"renderingOptionsPanel"},Ve.createElement("div",{className:"renderingOptionsPanel-isCollapsed"},Ve.createElement("span",{className:"renderingOptionsPanel-icon"},Ve.createElement(lt,{iconName:"settings"}))),Ve.createElement("div",{className:"renderingOptionsPanel-isExpanded"},Ve.createElement(ko,qo({},e,{id:"rendering"}))))}));function zo(){var e=Ve.createElement(rr,null),t=Ve.createElement(Lo,null);return Ve.createElement(Fn,{leftBar:e,rightBar:t},Ve.createElement(po,null))}var Wo=[{path:"/editor",action:function(){return zo}}],Ho=new Ge.Z(Wo);const Go=function(e){return Ho.resolve(e).then((function(e){return t=e,void $e.render(Ve.createElement(Ke.zt,{store:Me()},Ve.createElement(Ve.StrictMode,null,Ve.createElement(rt,null,Ve.createElement(t,null)))),document.getElementById("app"));var t}))};var Vo=n("jwii"),$o=n("9jg7");window.addEventListener("message",He),_e(),function(){var e=Me(),t=e.getState();0===D(t).length&&(e.dispatch(Ct("Hallelujah - Leonard Cohen",$o)),e.dispatch(Ct("Getting started",Vo)))}(),Go("/editor")},"/ysv":(e,t,n)=>{e.exports=n.p+"79d473963b244164d1a3.png"},jwii:e=>{e.exports="Welcome to Chord Charts Studio!\n\nChord Charts Studio is the official editor of the ChordMark format. \nYou can use it to quickly write accurate transcription of songs made up of chords and lyrics. \n\nA % D7.. E7..\n_Just write _some chords, some _lyrics\n%\n_And see how it _looks: _terrific!\n\nWhere to start? You can either:\n- check the sample song on the left\n- read the user guide, by clicking the big yellow button in the top right corner\n\nHave fun!\n"},"9jg7":e=>{e.exports="#i\nC.. Am.. %\n%\n\n#v\nC.. Am..\nI _heard there was a _secret chord\n%\nThat _David played and it _pleased the lord\nF... G. C.. G..\nBut _you don't really care for _music, _do you?\nC.. F. G.\nWell it _goes like this the _fourth, the _fifth\nAm.. F..\nThe _minor fall and the _major lift\nG.. E7.. Am\nThe _baffled king com_posing halle_lujah\n\n#c\nF\nHalle_lujah\nAm\nHalle_lujah\nF\nHalle_lujah\nC.. G.. C.. Am..\nHalle_lu_u_jah\n\n#v\nWell, your _faith was strong but you _needed proof\nYou _saw her bathing _on the roof\nHer _beauty and the moonlight _over_threw you\nShe _tied you to her _kitchen _chair\nShe _broke your throne and she _cut your hair\nAnd _from your lips she _drew the halle_lujah\n\n#c\n"}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,o,i]=e[u],c=!0,s=0;s<n.length;s++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(c=!1,i<a&&(a=i));if(c){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,c,s]=n,l=0;if(a.some((t=>0!==e[t]))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(s)var u=s(r)}for(t&&t(n);l<a.length;l++)i=a[l],r.o(e,i)&&e[i]&&e[i][0](),e[a[l]]=0;return r.O(u)},n=self.webpackChunk_touffi_chords_charts_studio=self.webpackChunk_touffi_chords_charts_studio||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[216],(()=>r("KyL9")));o=r.O(o)})();
//# sourceMappingURL=main.07295dfda419c9b7ab93.js.map