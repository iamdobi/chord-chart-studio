{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/plugins/fileExplorer/fileExplorer.hbs","webpack:///../ucc/src/renderer/components/tpl/barContent.hbs","webpack:///../ucc/src/renderer/components/tpl/song.hbs","webpack:///../ucc/src/renderer/components/tpl/barSeparator.hbs","webpack:///./src/app.hbs","webpack:///./src/core/dom/htmlToElement.js","webpack:///./src/core/addEventEmitter.js","webpack:///./src/core/plugin.js","webpack:///./src/plugins/content/header/plugin.js","webpack:///./src/plugins/content/footer/plugin.js","webpack:///../ucc/src/core/dom/escapeHTML.js","webpack:///../ucc/src/core/dom/stripTags.js","webpack:///../ucc/src/parser/isChord.js","webpack:///../ucc/src/parser/isChordLine.js","webpack:///../ucc/src/parser/isTimeSignatureString.js","webpack:///../ucc/src/parser/parseTimeSignature.js","webpack:///../ucc/src/parser/parseChord.js","webpack:///../ucc/src/parser/exceptions/IncorrectBeatCountException.js","webpack:///../ucc/src/parser/exceptions/InvalidChordRepetitionException.js","webpack:///../ucc/src/parser/parseChordLine.js","webpack:///../ucc/src/parser/helper/songs.js","webpack:///../ucc/src/parser/parseSong.js","webpack:///../ucc/src/parser/getAllChordsInSong.js","webpack:///../ucc/src/editor/prosemirror/plugins/onStateChange.js","webpack:///../ucc/src/editor/prosemirror/schema.js","webpack:///../ucc/src/editor/prosemirror/converters/stateToText.js","webpack:///../ucc/src/editor/prosemirror/converters/toSafeHtml.js","webpack:///../ucc/src/editor/editorFactory.js","webpack:///../ucc/src/core/addEventEmitter.js","webpack:///../ucc/src/editor/prosemirror/getPlugins.js","webpack:///../ucc/src/editor/prosemirror/converters/textToDom.js","webpack:///../ucc/src/renderer/spacers/chord/simple.js","webpack:///../ucc/src/renderer/spacers/chord/aligned.js","webpack:///../ucc/src/renderer/modifiers/transposeChord.js","webpack:///../ucc/src/renderer/modifiers/transposeSong.js","webpack:///../ucc/src/renderer/helpers/getMainAccidental.js","webpack:///../ucc/src/renderer/components/renderBarContent.js","webpack:///../ucc/src/renderer/components/renderChordSymbol.js","webpack:///../ucc/src/renderer/helpers/getChordSymbol.js","webpack:///../ucc/src/renderer/components/renderSong.js","webpack:///../ucc/src/renderer/spacers/chord/getMaxBeatsWidth.js","webpack:///../ucc/src/renderer/components/renderChordLine.js","webpack:///../ucc/src/renderer/components/renderTextLine.js","webpack:///./src/plugins/editor/plugin.js","webpack:///./src/core/store.js","webpack:///./src/plugins/fileExplorer/fileManager.js","webpack:///./src/plugins/fileExplorer/plugin.js","webpack:///./src/plugins/renderingOptions/plugin.js","webpack:///./src/app.js","webpack:///./src/core/areaBroker.js","webpack:///./src/plugins/registerPlugins.js","webpack:///./src/core/app.js","webpack:///./src/main.js","webpack:///./src/plugins/fileExplorer/entry.hbs","webpack:///../ucc/src/renderer/components/tpl/textLine.hbs","webpack:///../ucc/src/renderer/components/tpl/chordSymbol.hbs","webpack:///./src/plugins/content/footer/footer.hbs","webpack:///./src/plugins/renderingOptions/renderingOptions.hbs","webpack:///./src/plugins/content/header/header.hbs","webpack:///../ucc/src/renderer/components/tpl/chordLine.hbs","webpack:///./src/plugins/editor/editor.hbs"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Handlebars","template","compiler","main","container","depth0","helpers","partials","useData","stack1","lambda","barContent","song","htmlToElement","html","domPurify","sanitize","RETURN_DOM_FRAGMENT","firstChild","addEventEmitter","eventEmitter","_emitter","Emitter","on","eventName","fn","this","once","off","emit","_this$_emitter","_len","arguments","args","Array","_key","concat","assign","pluginFactory","host","pluginDef","undefined","pluginBase","getHost","Error","setHost","newHost","_assign","headerPlugin","render","headerArea","getAreaBroker","getHeader","header","headerTpl","appendChild","footerPlugin","footerArea","getFooter","footer","footerTpl","escapeHTML","unescaped","stripTags","ALLOWED_TAGS","KEEP_CONTENT","chords","Chords","isChordLine","replace","trim","split","map","potentialChord","every","_isString","isChord","allowedTimeSignatures","isTimeSignatureString","string","includes","parseTimeSignature","TypeError","array","count","Number","parseInt","beatCount","IncorrectBeatCountException","_this","_ref","duration","currentBeatCount","_classCallCheck","_isFinite","_possibleConstructorReturn","_getPrototypeOf","InvalidChordRepetitionException","InvalidChordRepetitionException_classCallCheck","InvalidChordRepetitionException_possibleConstructorReturn","InvalidChordRepetitionException_getPrototypeOf","parseChordLine","chordLine","_ref$timeSignature","timeSignature","allLineChords","allBars","bar","allChords","chord","model","chordCount","previousChord","forEach","chordString","parse","parseChord","match","beat","_isEqual","_cloneDeep","message","forEachChordInSong","allLines","newLines","line","type","defaultTimeSignature","parseSong","songLines","_isArray","isTimeSignature","e","_findIndex","occurrences","getAllChordsInSong","onStateChangeFactory","editor","pmPlugin","view","update","editorView","state","editorSchema","Schema","nodes","marks","stateToText","toJSON","doc","content","paragraph","reduce","acc","current","text","join","toSafeHtml","dirty","editorFactory","renderTo","editorPlugins","pmHistory","keymap","Mod-z","undo","Mod-y","redo","baseKeymap","onStateChange","getPlugins","load","textDom","div","document","createElement","innerHTML","textToDom","editorState","EditorState","pmDOMParser","fromSchema","preserveWhitespace","plugins","updateState","EditorView","getContent","allMasks","","2","11","3","12","21","111","4","13","22","31","112","121","211","1111","spacesAfterDefault","emptyBeatSpaces","notes","sharpsToFlats","C#","D#","F#","G#","A#","flatsToSharps","_invert","convertToSharp","note","transposeNote","useFlats","transposedIndex","indexOf","octaves","Math","floor","transposed","transposeSong","_ref$transposeValue","transposeValue","_ref$accidentalsType","accidentalsType","_ref$harmonizeAcciden","harmonizeAccidentals","accidental","rootNote","flatCount","sharpCount","symbol","getMainAccidental","transposedModel","transposedChord","root","bass","bassNote","rootSharp","bassSharp","transposeChord","space","defaultSpacesWithin","defaultSpacesAfter","renderBarContent","spacesWithin","spacesAfter","rendering","chordSymbol","chordSymbolTpl","repeat","barContentTpl","getChordSymbol","chordDef","print","renderSong","parsedSong","_ref$alignBars","alignBars","maxBeatsWidth","filter","barIndex","max","getMaxBeatsWidth","spaced","chordLineInput","beatMaxWidth","alignedChordSpacer","chordPattern","chordSpaces","toString","rendered","chordLineModel","allBarsRendered","barSeparator","barSeparatorTpl","chordLineTpl","renderChordLine","textLine","textLineTpl","songTpl","editorPlugin","app","contentArea","editorDom","editorTpl","renderingOptions","editorContainer","querySelector","previewContainer","previewSong","childNodes","replaceChild","newOptions","file","store","localStorage","getItem","setItem","JSON","stringify","getOneByKey","getAllByKeyPrefix","keyPrefix","allEntries","delete","removeItem","fileExplorerFactory","newFile","nanoid","title","getAll","updateContent","updateTitle","deleteOne","fileExplorerPlugin","activeFileKey","sideBar","getSideBar","fileExplorer","createDocumentFragment","fileExplorerTpl","newFileBtn","deleteFileBtn","fileList","insertFile","newEntry","fileEntryTpl","activeFile","nextSibling","insertBefore","activateFile","querySelectorAll","active","classList","remove","add","fm","allFiles","sortedFiles","_sortBy","makeTitleEditable","entry","contentEditable","focus","range","Range","selectNodeContents","selection","getSelection","removeAllRanges","addRange","addEventListener","editable","isSameNode","target","newFileElement","_defer","toDelete","toActivate","previousSibling","removeChild","dataset","which","preventDefault","stopPropagation","blur","_throttle","keyElement","closest","innerText","detail","parentElement","fileContent","init","fileManagerFactory","renderingOptionsPlugin","renderingOptionsTpl","checked","transposeDown","transposeUp","transpose","step","newTransposeValue","body","appTpl","areas","getterName","areaBroker","pluginRegistry","pluginRun","_x","_pluginRun","regeneratorRuntime","mark","_callee","method","plugin","wrap","_context","prev","next","_isFunction","stop","registerPlugin","appFactory","_forEach","cssSelector","areaId","charAt","toUpperCase","area","item","then","helper","alias1","nullContext","alias2","helperMissing","alias4","escapeExpression","hash"],"mappings":"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","file":"main.017ce2da97f14cc61616.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"Vtdi\",1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"file-explorer\\\">\\n    <div class=\\\"file-explorer-actions\\\">\\n        <button data-action=\\\"new-file\\\">New file</button>\\n        <button data-action=\\\"delete-file\\\">Delete</button>\\n    </div>\\n    <hr />\\n    <ul class=\\\"entry-list\\\"></ul>\\n</div>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../ucc-demo/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<span class=\\\"ucc-bar-content\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? depth0.barContent : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../ucc-demo/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<div class=\\\"ucc-song\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? depth0.song : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</div>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../ucc-demo/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<span class=\\\"ucc-bar-separator\\\">|</span>\";\n},\"useData\":true});","var Handlebars = require(\"../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"app-wrapper\\\">\\n    <header data-area=\\\"app-header\\\"></header>\\n    <main>\\n        <section class=\\\"app-side-bar\\\" data-area=\\\"app-side-bar\\\"></section>\\n        <section class=\\\"app-content\\\" data-area=\\\"app-content\\\"></section>\\n    </main>\\n    <footer data-area=\\\"app-footer\\\"></footer>\\n</div>\\n\";\n},\"useData\":true});","import domPurify from 'dompurify';\n\nexport default function htmlToElement(html) {\n\treturn domPurify.sanitize(html, {\n\t\tRETURN_DOM_FRAGMENT: true\n\t}).firstChild;\n}\n","import Emitter from 'tiny-emitter';\n\nexport default function addEventEmitter(object) {\n\tconst eventEmitter = {\n\t\t_emitter: new Emitter(),\n\n\t\ton(eventName, fn) {\n\t\t\tthis._emitter.on(eventName, fn);\n\t\t},\n\n\t\tonce(eventName, fn) {\n\t\t\tthis._emitter.once(eventName, fn);\n\t\t},\n\n\t\toff(eventName, fn) {\n\t\t\tthis._emitter.off(eventName, fn);\n\t\t},\n\n\t\temit(eventName, ...args) {\n\t\t\tthis._emitter.emit(eventName, ...args);\n\t\t}\n\t};\n\n\treturn Object.assign(object, eventEmitter);\n}\n","import addEventEmitter from './addEventEmitter';\nimport _assign from 'lodash/assign';\n\nexport default function pluginFactory(pluginDef = {}) {\n\tlet host;\n\n\tconst pluginBase = addEventEmitter({\n\t\tgetHost() {\n\t\t\tif (!host) {\n\t\t\t\tthrow new Error('Plugin\\'s host has not been setup, cannot retrieve it');\n\t\t\t}\n\t\t\treturn host;\n\t\t},\n\n\t\tsetHost(newHost) {\n\t\t\tif (host) {\n\t\t\t\tthrow new Error('Cannot override Plugin\\'s host');\n\t\t\t}\n\t\t\thost = newHost;\n\t\t}\n\t});\n\n\t_assign(pluginDef, pluginBase);\n\n\treturn pluginDef;\n}\n","import pluginFactory from '../../../core/plugin';\nimport htmlToElement from '../../../core/dom/htmlToElement';\n\nimport headerTpl from './header.hbs';\n\nconst headerPlugin = pluginFactory({\n\trender() {\n\t\tconst app = this.getHost();\n\t\tconst areaBroker = app.getAreaBroker();\n\t\tconst headerArea = areaBroker.getHeader();\n\n\t\tconst header = htmlToElement(headerTpl());\n\n\t\theaderArea.appendChild(header);\n\t}\n});\n\nexport default headerPlugin;\n","import pluginFactory from '../../../core/plugin';\nimport htmlToElement from '../../../core/dom/htmlToElement';\n\nimport footerTpl from './footer.hbs';\n\nconst footerPlugin = pluginFactory({\n\trender() {\n\t\tconst app = this.getHost();\n\t\tconst areaBroker = app.getAreaBroker();\n\t\tconst footerArea = areaBroker.getFooter();\n\n\t\tconst footer = htmlToElement(footerTpl());\n\n\t\tfooterArea.appendChild(footer);\n\t}\n});\n\nexport default footerPlugin;\n","import domPurify from 'dompurify';\n\nexport default function escapeHTML(unescaped) {\n\treturn domPurify.sanitize(unescaped);\n}\n","import domPurify from 'dompurify';\n\nexport default function stripTags(html) {\n\treturn domPurify.sanitize(html, {\n\t\tALLOWED_TAGS: ['#text'],\n\t\tKEEP_CONTENT: true,\n\t});\n}\n","import _isString from 'lodash/isString';\n\nimport { Chords } from 'momo-chords';\n\nconst chords = new Chords();\n\nexport default function isChord(potentialChord) {\n\treturn _isString(potentialChord) && chords.isChord(potentialChord);\n}\n","import isChord from './isChord';\n\nexport default function isChordLine(line = '') {\n\treturn line\n\t\t.replace(/\\t+/g, ' ')\n\t\t.replace(/  +/g, ' ')\n\t\t.trim()\n\t\t.split(' ')\n\t\t.map(potentialChord => potentialChord.replace(/\\.*$/g, ''))\n\t\t.every(potentialChord => isChord(potentialChord));\n}\n","const allowedTimeSignatures = [\n\t'2/2', '3/2',\n\t'3/4', '4/4', '5/4',\n\t'3/8', '6/8', '9/8', '12/8'\n];\n\nexport default function isTimeSignatureString(string) {\n\treturn allowedTimeSignatures.includes(string);\n}","import isTimeSignatureString from './isTimeSignatureString';\n\n/**\n * @typedef {Object} TimeSignature\n * @type {Object}\n * @property {String} string - original string\n * @property {Number} count - upper part of time signature\n * @property {Number} value - lower part of time signature\n * @property {Number} beatCount - number of beats per bar\n */\n\n/**\n * @param {String} string\n * @returns {TimeSignature}\n */\nexport default function parseTimeSignature(string) {\n\tif (!isTimeSignatureString(string)) {\n\t\tthrow new TypeError('Expected time signature string, received: ' + string);\n\t}\n\n\tconst array = string.split('/');\n\n\tconst count = Number.parseInt(array[0], 10);\n\tconst value = Number.parseInt(array[1], 10);\n\n\tlet beatCount = count;\n\n\tif (value === 2) {\n\t\tbeatCount = count * 2;\n\n\t} else if (value === 8) {\n\t\tbeatCount = count / 3;\n\t}\n\n\treturn {\n\t\tstring,\n\t\tcount,\n\t\tvalue,\n\t\tbeatCount,\n\t};\n}\n\n","import { Chords } from 'momo-chords';\n\nconst chords = new Chords();\n\n/**\n * @see https://github.com/mdanka/momo-chords/blob/master/src/types.ts\n */\n\n/**\n * @typedef {Object} ChordDef\n * @type {Object}\n * @property {ChordSymbol} symbol\n * @property {Object} structure - whether each degree (1, 2, 3... 11) is present (true/false) in the chord\n */\n\n/**\n * @typedef {Object} ChordSymbol\n * @type {Object}\n * @property {String} rootNote\n * @property {String} [bassNote]\n * @property {String} quality\n * @property {Object} addeds\n * @property {Object} suspended\n * @property {String} [alteredFifth]\n * @property {String} [seventh]\n * @property {String} [ninth]\n * @property {String} [eleventh]\n * @property {String} [thirteenth]\n */\n\n/**\n * @param chordString\n * @returns {ChordDef}\n */\nexport default function parseChord(chordString) {\n\treturn chords.parse(chordString);\n}\n","import _isString from 'lodash/isString';\nimport _isFinite from 'lodash/isFinite';\n\nexport default class IncorrectBeatCountException extends Error {\n\tconstructor(\n\t\t{\n\t\t\tstring,\n\t\t\tduration,\n\t\t\tcurrentBeatCount,\n\t\t\tbeatCount\n\t\t} = {}\n\t) {\n\t\tif (!string || !_isString(string)) {\n\t\t\tthrow new TypeError('IncorrectBeatCountException cannot be created without chord string, received: ' + string);\n\t\t}\n\t\tif (!duration || !_isFinite(duration)) {\n\t\t\tthrow new TypeError('IncorrectBeatCountException cannot be created without chord duration, received: ' + duration);\n\t\t}\n\t\tif (!currentBeatCount || !_isFinite(currentBeatCount)) {\n\t\t\tthrow new TypeError('IncorrectBeatCountException cannot be created without currentBeatCount, received: ' + currentBeatCount);\n\t\t}\n\t\tif (!beatCount || !_isFinite(beatCount)) {\n\t\t\tthrow new TypeError('IncorrectBeatCountException cannot be created without beatCount, received: ' + beatCount);\n\t\t}\n\n\t\tsuper();\n\n\t\tthis.name = 'IncorrectBeatCountException';\n\t\tthis.string = string;\n\t\tthis.duration = duration;\n\t\tthis.currentBeatCount = currentBeatCount;\n\t\tthis.beatCount = beatCount;\n\t}\n}\n\n","import _isString from 'lodash/isString';\n\nexport default class InvalidChordRepetitionException extends Error {\n\tconstructor(\n\t\t{\n\t\t\tstring,\n\t\t} = {}\n\t) {\n\t\tif (!string || !_isString(string)) {\n\t\t\tthrow new TypeError('InvalidChordRepetitionException cannot be created without chord string, received: ' + string);\n\t\t}\n\n\t\tsuper();\n\n\t\tthis.name = 'InvalidChordRepetitionException';\n\t\tthis.string = string;\n\t}\n}\n\n","import _isEqual from 'lodash/isEqual';\nimport _cloneDeep from 'lodash/cloneDeep';\n\nimport parseChord from './parseChord';\nimport parseTimeSignature from './parseTimeSignature';\n\nimport IncorrectBeatCountException from './exceptions/IncorrectBeatCountException';\nimport InvalidChordRepetitionException from './exceptions/InvalidChordRepetitionException';\n\n/**\n * @typedef {Object} ChordLine\n * @type {Object}\n * @property {Number} chordCount - number of chords in the line\n * @property {Bar[]} allBars\n */\n\n/**\n * @typedef {Object} Bar\n * @type {Object}\n * @property {TimeSignature} timeSignature\n * @property {ChordLineChord[]} allChords\n */\n\n/**\n * @typedef {Object} ChordLineChord\n * @type {Object}\n * @property {String} string - original chord string\n * @property {ChordDef} model\n * @property {Number} duration - number of beats the chord lasts\n * @property {Number} beat - beat on which the chord starts\n */\n\n/**\n * @param {String} chordLine\n * @param {TimeSignature} timeSignature\n * @returns {ChordLine}\n */\nexport default function parseChordLine(\n\tchordLine,\n\t{\n\t\ttimeSignature = parseTimeSignature('4/4')\n\t} = {}\n) {\n\tconst { beatCount } = timeSignature;\n\n\tconst allLineChords = chordLine\n\t\t.replace(/  +/g, ' ')\n\t\t.trim()\n\t\t.split(' ');\n\tconst allBars = [];\n\n\tlet bar = { allChords: []};\n\tlet chord = {};\n\tlet model = {};\n\tlet currentBeatCount = 0;\n\tlet chordCount = 0;\n\tlet previousChord = {};\n\n\tallLineChords.forEach(chordString => {\n\t\tmodel = parseChord(chordString.replace(/\\./g, ''));\n\t\tchord = {\n\t\t\tstring: chordString,\n\t\t\tduration: ((chordString.match(/\\./g) || []).length) || beatCount,\n\t\t\tmodel,\n\t\t};\n\t\tchord.beat = currentBeatCount + 1;\n\t\tcurrentBeatCount += chord.duration;\n\n\t\tif (bar.allChords.length > 0) {\n\t\t\tpreviousChord = bar.allChords[bar.allChords.length - 1];\n\t\t\tif (_isEqual(previousChord.model, chord.model)) {\n\t\t\t\tthrow new InvalidChordRepetitionException({\n\t\t\t\t\tstring: chord.string,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tbar.allChords.push(chord);\n\t\tchordCount++;\n\n\t\tif (currentBeatCount === beatCount) {\n\t\t\tbar.timeSignature = timeSignature;\n\n\t\t\tallBars.push(_cloneDeep(bar));\n\n\t\t\tbar = { allChords: []};\n\t\t\tcurrentBeatCount = 0;\n\t\t\tpreviousChord = {};\n\n\t\t} else if (currentBeatCount > beatCount) {\n\t\t\tthrow new IncorrectBeatCountException({\n\t\t\t\tmessage: '',\n\t\t\t\tstring: chord.string,\n\t\t\t\tduration: chord.duration,\n\t\t\t\tcurrentBeatCount,\n\t\t\t\tbeatCount,\n\t\t\t});\n\t\t}\n\t});\n\n\tif (currentBeatCount > 0 && (currentBeatCount < beatCount)) {\n\t\tthrow new IncorrectBeatCountException({\n\t\t\tmessage: '',\n\t\t\tstring: chord.string,\n\t\t\tduration: chord.duration,\n\t\t\tcurrentBeatCount,\n\t\t\tbeatCount,\n\t\t});\n\t}\n\n\treturn {\n\t\tchordCount,\n\t\tallBars\n\t};\n}\n","import _cloneDeep from 'lodash/cloneDeep';\n\n/**\n * @param {SongLine[]} allLines\n * @param {Function} fn - to execute on each chord\n * @returns {SongLine[]}\n */\nexport function forEachChordInSong(allLines, fn) {\n\tconst newLines = _cloneDeep(allLines);\n\n\tnewLines.forEach(line => {\n\t\tif (line.type === 'chord') {\n\t\t\tline.model.allBars.forEach(bar => {\n\t\t\t\tbar.allChords.forEach(chord => {\n\t\t\t\t\tfn(chord);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n\treturn newLines;\n}\n\n/**\n * @param {ChordLine[]} chordLine\n * @param {Function} fn - to execute on each chord\n * @returns {ChordLine[]}\n */\nexport function forEachChordInChordLine(chordLine, fn) {\n\tconst newChordLine = _cloneDeep(chordLine);\n\n\tnewChordLine.allBars.forEach(bar => {\n\t\tbar.allChords.forEach(chord => {\n\t\t\tfn(chord);\n\t\t});\n\t});\n\n\treturn newChordLine;\n}\n","import _isArray from 'lodash/isArray';\n\nimport escapeHTML from '../core/dom/escapeHTML';\nimport stripTags from '../core/dom/stripTags';\n\nimport isChordLine from './isChordLine';\nimport isTimeSignature from './isTimeSignatureString';\n\nimport parseTimeSignature from './parseTimeSignature';\nimport parseChordLine from './parseChordLine';\n\nimport getAllChordsInSong from './getAllChordsInSong';\n\n/**\n * @typedef {Object} SongLine\n * @type {Object}\n * @property {String} string - original line in source file\n * @property {String} type - chord|text|time-signature|...\n * @property {ChordLine|TimeSignature} model\n */\n\n/**\n * @typedef {Object} Song\n * @type {Object}\n * @property {SongLine[]} allLines\n * @property {SongChord[]} allChords\n */\n\n/**\n * @typedef {Object} SongChord\n * @type {Object}\n * @property {ChordDef} model\n * @property {number} occurrences - number of times the chord appears in the song\n */\n\n/**\n * @type {string}\n */\nconst defaultTimeSignature = '4/4';\n\n/**\n * @param {string|array} song\n * @returns {Song}\n */\nexport default function parseSong(song) {\n\tconst songLines = (!_isArray(song)) ? song.split('\\n') : song;\n\n\tlet timeSignature = parseTimeSignature(defaultTimeSignature);\n\n\tconst allLines = songLines\n\t\t.map(escapeHTML)\n\t\t.map(stripTags)\n\t\t.map(string => ({ string }))\n\t\t.map(line => {\n\t\t\tif (isTimeSignature(line.string)) {\n\t\t\t\ttimeSignature = parseTimeSignature(line.string);\n\n\t\t\t\tline.type = 'time-signature';\n\t\t\t\tline.model = timeSignature;\n\n\t\t\t} else if (isChordLine(line.string)) {\n\t\t\t\ttry {\n\t\t\t\t\tline.type = 'chord';\n\t\t\t\t\tline.model = parseChordLine(line.string, { timeSignature });\n\n\t\t\t\t} catch (e) {\n\t\t\t\t\tline.type = 'text';\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tline.type = 'text';\n\t\t\t}\n\t\t\treturn line;\n\t\t});\n\n\n\tconst allChords = getAllChordsInSong(allLines);\n\n\treturn {\n\t\tallLines,\n\t\tallChords\n\t};\n}\n","import _findIndex from 'lodash/findIndex';\nimport _isEqual from 'lodash/isEqual';\nimport _cloneDeep from 'lodash/cloneDeep';\n\nimport { forEachChordInSong } from './helper/songs';\n\n/**\n * @param {SongLine[]} allLines\n * @returns {SongChord[]}\n */\nexport default function getAllChordsInSong(allLines) {\n\tconst allChords = [];\n\tlet i;\n\n\tforEachChordInSong(allLines, chord => {\n\t\ti = _findIndex(allChords, o => _isEqual(o.model, chord.model));\n\n\t\tif (i === -1) {\n\t\t\tallChords.push({\n\t\t\t\tmodel: _cloneDeep(chord.model),\n\t\t\t\toccurrences: 1\n\t\t\t});\n\t\t} else {\n\t\t\tallChords[i].occurrences++;\n\t\t}\n\t});\n\n\treturn allChords;\n}\n","import { Plugin as pmPlugin } from 'prosemirror-state';\n\nexport default function onStateChangeFactory(editor) {\n\treturn new pmPlugin({\n\t\tkey: 'onStateChange',\n\t\tview: () => {\n\t\t\treturn {\n\t\t\t\tupdate(editorView) {\n\t\t\t\t\teditor.emit('statechange', editorView.state);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t});\n}\n","import { Schema } from 'prosemirror-model';\nimport { nodes, marks } from 'prosemirror-schema-basic';\n\nconst editorSchema = new Schema({\n\tnodes: nodes,\n\tmarks: marks\n});\n\nexport default editorSchema;","/**\n * Convert a proseMirror state to plain text\n */\nexport default function stateToText(state) {\n\tconst json = state.toJSON();\n\n\treturn json.doc.content\n\t\t.map(paragraph => {\n\t\t\tif (!paragraph.content) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn paragraph.content.reduce((acc, current) => {\n\t\t\t\tacc += current.text;\n\t\t\t\treturn acc;\n\t\t\t}, '');\n\t\t})\n\t\t.join('\\n');\n}\n","import domPurify from 'dompurify';\n\n/**\n * Minimal wrapper around DOMPurify library.\n * Pretty drastic also: anything that is HTML is just simply ignored, including text content of tags.\n *\n * @param {String} dirty\n * @returns {String} clean HTML\n */\nexport default function toSafeHtml(dirty) {\n\tconst config = {\n\t\tALLOWED_TAGS: ['p', '#text'],\n\t\tKEEP_CONTENT: false,\n\t};\n\n\treturn domPurify.sanitize(dirty, config);\n}\n","import { EditorState } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { DOMParser as pmDOMParser } from 'prosemirror-model';\n\nimport addEventEmitter from '../core/addEventEmitter';\n\nimport getPlugins from './prosemirror/getPlugins';\nimport editorSchema from './prosemirror/schema';\n\nimport stateToText from './prosemirror/converters/stateToText';\nimport textToDom from './prosemirror/converters/textToDom';\n\n\n/**\n * @param {Node} renderTo - Where to insert the editor\n */\nexport default function editorFactory(renderTo) {\n\n\tconst editor = addEventEmitter({});\n\tconst editorPlugins = getPlugins(editor);\n\n\tlet editorView;\n\n\teditor.on('statechange', state => {\n\t\teditor.emit('change', stateToText(state));\n\t});\n\n\treturn Object.assign(editor, {\n\n\t\t/**\n\t\t * @param {String} text - UCC song to load in the editor\n\t\t */\n\t\tload(text) {\n\t\t\tconst textDom = textToDom(text);\n\n\t\t\tconst editorState = EditorState.create({\n\t\t\t\tdoc: pmDOMParser.fromSchema(editorSchema).parse(textDom, { preserveWhitespace: 'full' }),\n\t\t\t\tplugins: editorPlugins\n\t\t\t});\n\n\t\t\tif (!editorView) {\n\t\t\t\teditorView = new EditorView(renderTo, { state: editorState });\n\n\t\t\t} else {\n\t\t\t\teditorView.updateState(editorState);\n\t\t\t}\n\t\t\teditor.emit('statechange', editorState);\n\t\t},\n\n\t\tgetContent() {\n\t\t\treturn stateToText(editorView.state);\n\t\t}\n\t});\n}\n","import Emitter from 'tiny-emitter';\n\nexport default function addEventEmitter(object) {\n\tconst eventEmitter = {\n\t\t_emitter: new Emitter(),\n\n\t\ton(eventName, fn) {\n\t\t\tthis._emitter.on(eventName, fn);\n\t\t},\n\n\t\tonce(eventName, fn) {\n\t\t\tthis._emitter.once(eventName, fn);\n\t\t},\n\n\t\toff(eventName, fn) {\n\t\t\tthis._emitter.off(eventName, fn);\n\t\t},\n\n\t\temit(eventName, ...args) {\n\t\t\tthis._emitter.emit(eventName, ...args);\n\t\t}\n\t};\n\n\treturn Object.assign(object, eventEmitter);\n}\n","import { keymap } from 'prosemirror-keymap';\nimport { baseKeymap } from 'prosemirror-commands';\nimport { undo, redo, history as pmHistory } from 'prosemirror-history';\nimport onStateChange from './plugins/onStateChange';\n\nexport default function getPlugins(editor) {\n\treturn [\n\t\tpmHistory(),\n\t\tkeymap({ 'Mod-z': undo, 'Mod-y': redo }),\n\t\tkeymap(baseKeymap),\n\t\tonStateChange(editor)\n\t];\n}\n","import escapeHTML from './toSafeHtml';\n\n/**\n * @param {String} text\n * @returns {HTMLElement}\n */\nexport default function textToDom(text) {\n\tconst html = escapeHTML(text)\n\t\t.split('\\n')\n\t\t.map(line => `<p>${line}</p>`)\n\t\t.join('');\n\n\tconst div = document.createElement('div');\n\tdiv.innerHTML = escapeHTML(html);\n\n\treturn div;\n}\n","import _cloneDeep from 'lodash/cloneDeep';\n\nconst allMasks = {\n\t0: {\n\t\t'': []\n\t},\n\n\t2: {\n\t\t'2': \t[3], \t\t// 'A   '\n\t\t'11':  \t[3, 2], \t// 'A   B  ',\n\t},\n\n\t3: {\n\t\t'3': \t[3], \t\t// 'A   '\n\t\t'12':  \t[2, 4], \t// 'A  B    '\n\t\t'21': \t[6, 0], \t// 'A      C'\n\t\t'111': \t[2, 2, 0], \t// 'A  B  C'\n\t},\n\n\t4: {\n\t\t'4': \t[3], \t\t// 'A   ',\n\t\t'13': \t[1, 4], \t// 'A B    ',\n\t\t'22': \t[3, 2], \t// 'A   B  ',\n\t\t'31':   [5, 0], \t// 'A     B',\n\t\t'112':  [1, 1, 3], \t// 'A B C   ',\n\t\t'121':  [1, 4, 0], \t// 'A B    C',\n\t\t'211': \t[4, 1, 0], \t// 'A    B C',\n\t\t'1111': [2, 2, 2], \t// 'A  B  C  D',\n\t},\n};\n\nexport default function space(chordLineInput) {\n\tconst chordLine = _cloneDeep(chordLineInput);\n\n\tlet beatCount = 0;\n\tlet chordPattern = '';\n\tlet chordSpaces = [];\n\n\tchordLine.allBars.forEach(bar => {\n\t\tbeatCount = 0;\n\t\tchordPattern = '';\n\n\t\tbar.allChords.forEach(chord => {\n\t\t\tchordPattern += chord.duration.toString();\n\t\t\tbeatCount += chord.duration;\n\t\t});\n\n\t\tchordSpaces = allMasks[beatCount][chordPattern];\n\n\t\tfor (let i = 0; i < chordPattern.length; i++) {\n\t\t\tbar.allChords[i].spacesAfter = chordSpaces[i];\n\t\t}\n\t});\n\n\treturn chordLine;\n}\n","import _cloneDeep from 'lodash/cloneDeep';\n\nconst spacesAfterDefault = 2;\nconst emptyBeatSpaces = 1;\n\nexport default function space(chordLineInput, maxBeatsWidth) {\n\tconst chordLine = _cloneDeep(chordLineInput);\n\n\tlet beatMaxWidth;\n\n\tchordLine.allBars.forEach((bar, barIndex) => {\n\t\tbar.allChords.forEach(chord => {\n\t\t\tchord.spacesWithin = maxBeatsWidth[barIndex][chord.beat] - chord.symbol.length;\n\t\t\tchord.spacesAfter = 0;\n\n\t\t\tif (chord.beat !== bar.timeSignature.beatCount) {\n\t\t\t\tchord.spacesAfter = spacesAfterDefault;\n\n\t\t\t\tfor (let i = (chord.beat + 1); i < (chord.beat + chord.duration); i++) {\n\t\t\t\t\tbeatMaxWidth = maxBeatsWidth[barIndex][i];\n\n\t\t\t\t\tchord.spacesAfter += (beatMaxWidth)\n\t\t\t\t\t\t? beatMaxWidth\n\t\t\t\t\t\t: emptyBeatSpaces;\n\n\t\t\t\t\tif (i !== bar.timeSignature.beatCount && beatMaxWidth) {\n\t\t\t\t\t\tchord.spacesAfter += spacesAfterDefault;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\treturn chordLine;\n}\n","import _cloneDeep from 'lodash/cloneDeep';\nimport _invert from 'lodash/invert';\n\nconst notes = [\n\t'C',\n\t'C#',\n\t'D',\n\t'D#',\n\t'E',\n\t'F',\n\t'F#',\n\t'G',\n\t'G#',\n\t'A',\n\t'A#',\n\t'B',\n];\n\nconst sharpsToFlats = {\n\t'C#': 'Db',\n\t'D#': 'Eb',\n\t'F#': 'Gb',\n\t'G#': 'Ab',\n\t'A#': 'Bb',\n};\n\nconst flatsToSharps = _invert(sharpsToFlats);\n\nfunction convertToSharp(note) {\n\treturn flatsToSharps[note] || note;\n}\n\nfunction transposeNote(note, value, useFlats) {\n\tconst noteIndex = notes.indexOf(note);\n\tconst transposedIndex = noteIndex + value;\n\n\tconst octaves = Math.floor(transposedIndex / 12);\n\tconst correctedTransposedIndex = transposedIndex - (octaves * 12);\n\n\tconst transposed = notes[correctedTransposedIndex];\n\n\treturn (useFlats)\n\t\t? sharpsToFlats[transposed] || transposed\n\t\t: transposed;\n}\n\nexport default function transposeChord(chord, value, useFlats) {\n\tconst transposedChord = _cloneDeep(chord); // check immutability\n\n\tconst root = transposedChord.symbol.rootNote;\n\tconst bass = transposedChord.symbol.bassNote;\n\n\tconst rootSharp = convertToSharp(root);\n\ttransposedChord.symbol.rootNote = transposeNote(rootSharp, value, useFlats);\n\n\tif (bass) {\n\t\tconst bassSharp = convertToSharp(bass);\n\t\ttransposedChord.symbol.bassNote = transposeNote(bassSharp, value, useFlats);\n\t}\n\n\treturn transposedChord;\n}\n","import _cloneDeep from 'lodash/cloneDeep';\nimport transposeChord from './transposeChord';\nimport getMainAccidental from '../helpers/getMainAccidental';\n\nimport { forEachChordInSong } from '../../parser/helper/songs';\n\n/**\n * @param {SongLine[]} allLines\n * @param {SongChord[]} allChords\n * @param transposeValue\n * @param accidentalsType\n * @param harmonizeAccidentals\n * @returns {SongLine[]} - with added transposedModel property on each chord if needed\n */\nexport default function transposeSong(allLines, allChords, {\n\ttransposeValue = 0,\n\taccidentalsType = 'auto',\n\tharmonizeAccidentals = true\n} = {}) {\n\tlet transposed = _cloneDeep(allLines);\n\n\tlet accidental = (accidentalsType === 'auto')\n\t\t? getMainAccidental(allChords)\n\t\t: accidentalsType;\n\n\tif (harmonizeAccidentals || transposeValue !== 0) {\n\t\ttransposed = forEachChordInSong(transposed, (chord) => {\n\t\t\tchord.transposedModel = transposeChord(\n\t\t\t\tchord.model,\n\t\t\t\ttransposeValue,\n\t\t\t\taccidental === 'flat'\n\t\t\t);\n\t\t});\n\t}\n\n\treturn transposed;\n}\n","/**\n * Returns the most used accidental of a song.\n *\n * @param {SongChord[]} allChords\n * @returns {('flat'|'sharp')}\n */\nexport default function getMainAccidental(allChords) {\n\tlet rootNote = '';\n\tlet flatCount = 0;\n\tlet sharpCount = 0;\n\n\tallChords.forEach(chord => {\n\t\trootNote = chord.model.symbol.rootNote;\n\n\t\tif (rootNote.length === 2) {\n\t\t\tlet accidental = rootNote[1];\n\n\t\t\tif (accidental === 'b') {\n\t\t\t\tflatCount += chord.occurrences;\n\t\t\t} else {\n\t\t\t\tsharpCount += chord.occurrences;\n\t\t\t}\n\t\t}\n\t});\n\n\treturn (flatCount > sharpCount) ? 'flat' : 'sharp';\n}\n","import _isFinite from 'lodash/isFinite';\n\nimport renderChord from './renderChordSymbol';\nimport barContentTpl from './tpl/barContent.hbs';\n\nconst space = ' ';\n\nconst defaultSpacesWithin = 0;\nconst defaultSpacesAfter = 2;\n\n/**\n * @param {Bar} bar\n * @returns {String} rendered html\n */\nexport default function renderBarContent(bar) {\n\tlet spacesWithin = 0;\n\tlet spacesAfter = 0;\n\n\tconst barContent = bar.allChords.reduce((rendering, chord) => {\n\t\tspacesWithin = _isFinite(chord.spacesWithin) ? chord.spacesWithin : defaultSpacesWithin;\n\t\tspacesAfter = _isFinite(chord.spacesAfter) ? chord.spacesAfter : defaultSpacesAfter;\n\n\t\trendering +=\n\t\t\trenderChord(chord.symbol) +\n\t\t\tspace.repeat(spacesWithin) +\n\t\t\tspace.repeat(spacesAfter);\n\n\t\treturn rendering;\n\t}, '');\n\n\treturn barContentTpl({ barContent });\n}\n","import chordSymbolTpl from './tpl/chordSymbol.hbs';\n\n/**\n * @param {String} chordSymbol\n * @returns {String} rendered html\n */\nexport default function renderChordSymbol (chordSymbol) {\n\treturn chordSymbolTpl({ chordSymbol });\n}\n","import { Chords } from 'momo-chords';\n\nconst chords = new Chords();\n\n/**\n * @param {ChordDef} chordDef\n * @returns {string}\n */\nexport default function(chordDef) {\n\treturn chords.print(chordDef.symbol);\n}","import getMaxBeatsWidth from '../spacers/chord/getMaxBeatsWidth';\n\nimport simpleChordSpacer from '../spacers/chord/simple';\nimport alignedChordSpacer from '../spacers/chord/aligned';\n\nimport transposeSong from '../modifiers/transposeSong';\nimport { forEachChordInSong } from '../../parser/helper/songs';\n\nimport renderChordLine from './renderChordLine';\nimport renderTextLine from './renderTextLine';\n\nimport songTpl from './tpl/song.hbs';\nimport getChordSymbol from '../helpers/getChordSymbol';\n\n/**\n * @param {Song} parsedSong\n * @param {Boolean} alignBars\n * @param {Number} transposeValue\n * @param {('auto'|'flat'|'sharp')} accidentalsType\n * @param {Boolean} harmonizeAccidentals\n */\nexport default function renderSong(parsedSong, {\n\talignBars = false,\n\ttransposeValue = 0,\n\taccidentalsType = 'auto',\n\tharmonizeAccidentals = true\n}) {\n\tlet { allLines, allChords } = parsedSong;\n\n\tallLines = transposeSong(allLines, allChords,  {\n\t\ttransposeValue,\n\t\taccidentalsType,\n\t\tharmonizeAccidentals\n\t});\n\tallLines = forEachChordInSong(allLines, (chord) => {\n\t\tchord.symbol = (chord.transposedModel)\n\t\t\t? getChordSymbol(chord.transposedModel)\n\t\t\t: getChordSymbol(chord.model);\n\t});\n\n\tconst maxBeatsWidth = getMaxBeatsWidth(allLines);\n\n\tconst song = allLines\n\t\t.map(line => {\n\t\t\tif (line.type === 'chord') {\n\t\t\t\tconst spaced = (alignBars)\n\t\t\t\t\t? alignedChordSpacer(line.model, maxBeatsWidth)\n\t\t\t\t\t: simpleChordSpacer(line.model);\n\n\t\t\t\tline.rendered = renderChordLine(spaced);\n\n\t\t\t} else if (line.type === 'text') {\n\t\t\t\tline.rendered = renderTextLine(line.string);\n\t\t\t}\n\t\t\treturn line;\n\t\t})\n\t\t.filter(line => line.rendered)\n\t\t.map(line => line.rendered)\n\t\t.join('\\n');\n\n\treturn songTpl({ song });\n}\n\n\n","/**\n * @param {SongLine[]} allLines\n * @returns {Array}\n */\nexport default function getMaxBeatsWidth(allLines) {\n\tconst maxBeatsWidth = [];\n\n\tallLines\n\t\t.filter(line => line.type === 'chord')\n\t\t.forEach(line => {\n\t\t\tline.model.allBars.forEach((bar, barIndex) => {\n\t\t\t\tif (!maxBeatsWidth[barIndex]) {\n\t\t\t\t\tmaxBeatsWidth[barIndex] = {};\n\n\t\t\t\t\tfor (let i = 1; i <= bar.timeSignature.beatCount; i++) {\n\t\t\t\t\t\tmaxBeatsWidth[barIndex][i] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbar.allChords.forEach(chord => {\n\t\t\t\t\tmaxBeatsWidth[barIndex][chord.beat] = Math.max(\n\t\t\t\t\t\tmaxBeatsWidth[barIndex][chord.beat],\n\t\t\t\t\t\tchord.symbol.length\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\treturn maxBeatsWidth;\n}\n","import chordLineTpl from './tpl/chordLine.hbs';\n\nimport renderBarContent from './renderBarContent';\nimport barSeparatorTpl from './tpl/barSeparator.hbs';\n\n/**\n * @param {ChordLine} chordLineModel\n * @returns {String} rendered html\n */\nexport default function renderChordLine(chordLineModel) {\n\tconst allBarsRendered = chordLineModel.allBars\n\t\t.map(bar => renderBarContent(bar));\n\n\tconst barSeparator = barSeparatorTpl();\n\n\tconst chordLine = barSeparator +\n\t\tallBarsRendered.join(barSeparator) +\n\t\tbarSeparator;\n\n\treturn chordLineTpl({ chordLine });\n}\n","import textLineTpl from './tpl/textLine.hbs';\n\n/**\n * @param {String} textLine\n * @returns {String} rendered html\n */\nexport default function render(textLine) {\n\treturn textLineTpl({ textLine });\n}\n","import _assign from 'lodash/assign';\n\nimport pluginFactory from '../../core/plugin';\nimport htmlToElement from '../../core/dom/htmlToElement';\n\nimport { editorFactory, parseSong, renderSong } from '@touffi/ucc/src/ucc-editor';\n\nimport editorTpl from './editor.hbs';\n\n\nconst editorPlugin = pluginFactory({\n\n\trender() {\n\t\tconst app = this.getHost();\n\t\tconst areaBroker = app.getAreaBroker();\n\t\tconst contentArea = areaBroker.getContent();\n\n\t\tconst editorDom = htmlToElement(editorTpl());\n\n\t\tcontentArea.appendChild(editorDom);\n\n\n\t\tconst renderingOptions = {\n\t\t\talignBars: true,\n\t\t\ttransposeValue: 0\n\t\t};\n\n\n\t\tconst editorContainer = document.querySelector('#source');\n\t\tconst previewContainer = document.querySelector('#preview');\n\n\t\tconst editor = editorFactory(editorContainer);\n\n\t\teditor.on('change', (song) => {\n\t\t\tpreviewSong(song, renderingOptions);\n\t\t\tapp.emit('editorchange', song);\n\t\t});\n\n\t\tapp.on('optionchange', newOptions => {\n\t\t\t_assign(renderingOptions, newOptions);\n\t\t\trefreshPreview();\n\t\t});\n\n\t\tapp.on('activatefile', file => editor.load(file.content));\n\n\n\t\tfunction previewSong(song) {\n\t\t\tconst parsedSong = parseSong(song);\n\t\t\tconst renderedSong = renderSong(parsedSong, renderingOptions);\n\t\t\tconst rendered = htmlToElement(renderedSong);\n\n\t\t\tif (previewContainer.childNodes.length) {\n\t\t\t\tpreviewContainer.replaceChild(rendered, previewContainer.firstChild);\n\t\t\t} else {\n\t\t\t\tpreviewContainer.appendChild(rendered);\n\t\t\t}\n\t\t}\n\n\t\tfunction refreshPreview() {\n\t\t\tconst song = editor.getContent();\n\t\t\tpreviewSong(song);\n\t\t}\n\n\t}\n});\n\nexport default editorPlugin;\n","/**\n * Local storage wrapper\n * For now, the only accepted values are objects that are automatically serialized\n */\nconst store = {\n\tcreate(key, value) {\n\t\tif (localStorage.getItem(key)) {\n\t\t\tthrow new Error('Already exists key: ' + key);\n\t\t}\n\t\tif (!key) {\n\t\t\tthrow new Error('Cannot create localstorage entry with empty key');\n\t\t}\n\t\tlocalStorage.setItem(key, JSON.stringify(value));\n\t},\n\n\tgetOneByKey(key) {\n\t\tconst value = localStorage.getItem(key);\n\t\treturn (value) ? JSON.parse(value) : value;\n\t},\n\n\tgetAllByKeyPrefix(keyPrefix) {\n\t\tconst allEntries = {};\n\n\t\tlet key;\n\n\t\tfor (let i = 0; i < localStorage.length; i++) {\n\t\t\tkey = localStorage.key(i);\n\t\t\tif (key.indexOf(keyPrefix) === 0) {\n\t\t\t\tallEntries[key] = this.getOneByKey(key);\n\t\t\t}\n\t\t}\n\n\t\treturn allEntries;\n\t},\n\n\tupdate(key, value) {\n\t\tif (!localStorage.getItem(key)) {\n\t\t\tthrow new Error('Cannot find and update key: ' + key);\n\t\t}\n\t\tlocalStorage.setItem(key, JSON.stringify(value));\n\t},\n\n\tdelete(key) {\n\t\tlocalStorage.removeItem(key);\n\t}\n};\n\nexport default store;","import nanoid from 'nanoid';\nimport addEventEmitter from '../../core/addEventEmitter';\n\nimport store from '../../core/store';\n\nconst keyPrefix = 'song:';\n\nfunction fileFactory() {\n\treturn {\n\t\tkey: keyPrefix + nanoid(20),\n\t\ttitle: 'untitled', //todo: translate!\n\t\tcontent: ''\n\t};\n}\n\nexport default function fileExplorerFactory() {\n\treturn addEventEmitter({\n\t\tcreate() {\n\t\t\tconst newFile = fileFactory();\n\n\t\t\tstore.create(newFile.key, newFile);\n\n\t\t\treturn newFile;\n\t\t},\n\n\t\tgetAll() {\n\t\t\treturn store.getAllByKeyPrefix(keyPrefix);\n\t\t},\n\n\t\tgetOneByKey(key) {\n\t\t\treturn store.getOneByKey(key);\n\t\t},\n\n\t\tupdateContent(key, content) {\n\t\t\tconst file = store.getOneByKey(key);\n\t\t\tfile.content = content;\n\n\t\t\tstore.update(key, file);\n\t\t},\n\n\t\tupdateTitle(key, title) {\n\t\t\tconst file = store.getOneByKey(key);\n\t\t\tfile.title = title;\n\n\t\t\tstore.update(key, file);\n\t\t},\n\n\t\tdeleteOne(key) {\n\t\t\tstore.delete(key);\n\t\t}\n\t});\n}\n","import _sortBy from 'lodash/sortBy';\nimport _defer from 'lodash/defer';\nimport _throttle from 'lodash/throttle';\n\nimport pluginFactory from '../../core/plugin';\nimport htmlToElement from '../../core/dom/htmlToElement';\n\nimport fileManagerFactory from './fileManager';\n\nimport fileExplorerTpl from './fileExplorer.hbs';\nimport fileEntryTpl from './entry.hbs';\n\n\nconst autosaveIntervalMs = 1000;\n\nconst fileExplorerPlugin = pluginFactory({\n\trender() {\n\t\tconst app = this.getHost();\n\t\tconst areaBroker = app.getAreaBroker();\n\t\tconst sideBar = areaBroker.getSideBar();\n\n\t\tconst fileExplorer = document.createDocumentFragment();\n\t\tfileExplorer.appendChild(htmlToElement(fileExplorerTpl()));\n\n\n\t\tlet activeFileKey;\n\n\t\t// DOM elements\n\t\tconst newFileBtn = fileExplorer.querySelector('[data-action=\"new-file\"]');\n\t\tconst deleteFileBtn = fileExplorer.querySelector('[data-action=\"delete-file\"]');\n\t\tconst fileList = fileExplorer.querySelector('.entry-list');\n\n\n\t\tfunction insertFile(file) {\n\t\t\tconst newEntry = htmlToElement(fileEntryTpl(file));\n\n\t\t\tconst activeFile = fileList.querySelector(`[data-key=\"${activeFileKey}\"`);\n\n\t\t\tif (activeFile && activeFile.nextSibling) {\n\t\t\t\tfileList.insertBefore(newEntry, activeFile.nextSibling);\n\n\t\t\t} else {\n\t\t\t\tfileList.appendChild(newEntry);\n\t\t\t}\n\t\t\treturn newEntry;\n\t\t}\n\n\t\tconst activateFile = (key) => {\n\t\t\tactiveFileKey = key;\n\n\t\t\tfileList.querySelectorAll('.active').forEach(active => active.classList.remove('active'));\n\t\t\tconst activeFile = fileList.querySelector(`[data-key=\"${key}\"`);\n\t\t\tif (activeFile) {\n\t\t\t\tactiveFile.classList.add('active');\n\t\t\t}\n\n\t\t\tconst file = this.fm.getOneByKey(activeFileKey);\n\t\t\tapp.emit('activatefile', file);\n\t\t};\n\n\t\t// load existing files\n\t\tconst allFiles = this.fm.getAll();\n\t\tconst sortedFiles = _sortBy(allFiles, o => o.title);\n\n\t\tif (sortedFiles.length) {\n\t\t\tsortedFiles.forEach( file => {\n\t\t\t\tinsertFile(file);\n\t\t\t});\n\t\t\tactivateFile(sortedFiles[0].key);\n\t\t}\n\n\n\n\t\t// Add behaviour events\n\t\tconst createNewFile = () => {\n\t\t\tconst newFile = this.fm.create();\n\n\t\t\tconst newFileElement = insertFile(newFile);\n\t\t\tactivateFile(newFile.key);\n\n\t\t\t_defer(() => makeTitleEditable(newFileElement));\n\t\t};\n\n\t\tconst deleteFile = () => {\n\t\t\tthis.fm.deleteOne(activeFileKey);\n\n\t\t\tconst toDelete = fileList.querySelector(`[data-key=\"${activeFileKey}\"]`);\n\n\t\t\tif (toDelete) {\n\t\t\t\tconst toActivate = (toDelete.previousSibling)\n\t\t\t\t\t? toDelete.previousSibling\n\t\t\t\t\t: toDelete.nextSibling;\n\n\t\t\t\tfileList.removeChild(toDelete);\n\n\t\t\t\tif (toActivate) {\n\t\t\t\t\tactivateFile(toActivate.dataset.key);\n\n\t\t\t\t} else {\n\t\t\t\t\tactiveFileKey = null;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// todo: don't pass around event object\n\t\tconst preventEnterKey = e => {\n\t\t\tif (e.which === 13) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t};\n\n\t\tconst blurOnEnter = e => {\n\t\t\tif (e.which === 13 && e.target.contentEditable) {\n\t\t\t\te.target.blur();\n\t\t\t\te.target.contentEditable = false;\n\t\t\t}\n\t\t};\n\n\t\tconst activateEntry = e => {\n\t\t\tif (e.detail === 1) {\n\t\t\t\tconst keyElement = e.target.closest('[data-key]');\n\t\t\t\tactivateFile(keyElement.dataset.key);\n\t\t\t}\n\t\t};\n\n\t\tconst makeTitleEditable = entry => {\n\t\t\tconst title = entry.querySelector('.entry-title');\n\t\t\ttitle.contentEditable = true;\n\t\t\ttitle.focus();\n\n\t\t\tconst range = new Range();\n\t\t\trange.selectNodeContents(title);\n\t\t\tconst selection = window.getSelection();\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange(range);\n\t\t};\n\n\t\tconst autosaveTitle = e => {\n\t\t\tconst keyElement = e.target.closest('[data-key]');\n\t\t\tthis.fm.updateTitle(keyElement.dataset.key, e.target.innerText); //todo sanitize\n\t\t\t//todo prevent empty\n\t\t};\n\n\t\tconst autoBlurContentEditableElements = e => {\n\t\t\tconst allEditable = fileList.querySelectorAll('[contenteditable=\"true\"]');\n\t\t\tallEditable.forEach(editable => {\n\t\t\t\tif (!editable.isSameNode(e.target)) {\n\t\t\t\t\teditable.contentEditable = false;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\twindow.addEventListener('click', autoBlurContentEditableElements);\n\n\t\tnewFileBtn.addEventListener('click', createNewFile);\n\t\tdeleteFileBtn.addEventListener('click', deleteFile);\n\n\t\tfileList.addEventListener('keypress', preventEnterKey);\n\t\tfileList.addEventListener('keypress', blurOnEnter);\n\t\tfileList.addEventListener('input', _throttle(autosaveTitle, autosaveIntervalMs));\n\t\tfileList.addEventListener('click', activateEntry);\n\t\tfileList.addEventListener('dblclick', e => makeTitleEditable(e.target.parentElement)); //todo fix bug when click outside of title div\n\n\t\tapp.on('editorchange', fileContent => {\n\t\t\tthis.fm.updateContent(activeFileKey, fileContent);\n\t\t});\n\n\t\t// attach to document\n\t\tsideBar.appendChild(fileExplorer);\n\t},\n\n\tinit() {\n\t\tthis.fm = fileManagerFactory();\n\t}\n});\n\nexport default fileExplorerPlugin;\n\n\n\n/**\n // Drag & drop\n const body = document.body;\n body.ondragover = () => {\n\tbody.classList.add('hover');\n\treturn false;\n};\n body.ondragleave = () => {\n\tbody.classList.remove('hover');\n\treturn false;\n};\n\n body.ondrop = e => {\n\tbody.classList.remove('hover');\n\te.preventDefault();\n\n\tconst file = e.dataTransfer.files[0];\n\tconst reader = new FileReader();\n\n\treader.onload = function(event) {\n\t\teditor.load(toNode(event.target.result));\n\t};\n\treader.readAsText(file);\n\n\treturn false;\n};\n **/\n","import pluginFactory from '../../core/plugin';\nimport htmlToElement from '../../core/dom/htmlToElement';\n\nimport renderingOptionsTpl from './renderingOptions.hbs';\n\nconst renderingOptionsPlugin = pluginFactory({\n\trender() {\n\t\tconst app = this.getHost();\n\t\tconst areaBroker = app.getAreaBroker();\n\t\tconst header = areaBroker.getHeader();\n\n\t\tconst renderingOptions = document.createDocumentFragment();\n\t\trenderingOptions.appendChild(htmlToElement(renderingOptionsTpl()));\n\n\n\t\t// align bars\n\t\tconst alignBars = renderingOptions.querySelector('[data-option=\"align-bars\"]');\n\t\talignBars.addEventListener('change', e => {\n\t\t\tapp.emit('optionchange', {\n\t\t\t\talignBars: e.target.checked\n\t\t\t});\n\t\t});\n\n\n\t\t// transpose\n\t\tconst transposeDown = renderingOptions.querySelector('[data-option=\"transpose-down\"]');\n\t\tconst transposeUp = renderingOptions.querySelector('[data-option=\"transpose-up\"]');\n\t\tconst transposeValue = renderingOptions.querySelector('[data-option=\"transpose-value\"]');\n\n\t\ttransposeDown.addEventListener('click', () => transpose(-1));\n\t\ttransposeUp.addEventListener('click', () => transpose(1));\n\n\t\tfunction transpose(step) {\n\t\t\tconst currentTransposeValue = Number.parseInt(transposeValue.innerText);\n\t\t\tconst newTransposeValue = currentTransposeValue + step;\n\t\t\tapp.emit('optionchange', {\n\t\t\t\ttransposeValue: newTransposeValue\n\t\t\t});\n\t\t\ttransposeValue.innerText = (newTransposeValue) > 0 ?'+' + newTransposeValue : newTransposeValue;\n\t\t}\n\n\n\t\t// Harmonize accidentals\n\t\tconst harmonizeAccidentals = renderingOptions.querySelector('[data-option=\"harmonize-accidentals\"]');\n\t\tharmonizeAccidentals.addEventListener('change', () => {\n\t\t\tconst checked = harmonizeAccidentals.querySelector('input[name=\"ha\"]:checked');\n\t\t\tapp.emit('optionchange', {\n\t\t\t\tharmonizeAccidentals: (checked.value === 'true')\n\t\t\t});\n\t\t});\n\n\t\t// accidentals type\n\t\tconst accidentalsType = renderingOptions.querySelector('[data-option=\"accidentals-type\"]');\n\t\taccidentalsType.addEventListener('change', () => {\n\t\t\tconst checked = accidentalsType.querySelector('input[name=\"ht\"]:checked');\n\t\t\tapp.emit('optionchange', {\n\t\t\t\taccidentalsType: checked.value\n\t\t\t});\n\t\t});\n\n\n\t\t// app.on('optionchange', console.log);\n\n\t\t// attach to document\n\t\theader.appendChild(renderingOptions);\n\t}\n});\n\nexport default renderingOptionsPlugin;\n\n","import htmlToElement from './core/dom/htmlToElement';\n\nimport areaBrokerFactory from './core/areaBroker';\nimport appFactory from './core/app';\nimport registerPlugins from './plugins/registerPlugins';\n\nimport appTpl from './app.hbs';\n\n\ndocument.body.appendChild(\n\thtmlToElement(appTpl())\n);\n\nconst areas = {\n\theader: '[data-area=\"app-header\"]',\n\tfooter: '[data-area=\"app-footer\"]',\n\tsideBar: '[data-area=\"app-side-bar\"]',\n\tcontent: '[data-area=\"app-content\"]',\n};\n\nconst areaBroker = areaBrokerFactory(areas);\nconst app = appFactory(areaBroker);\n\nregisterPlugins(app);\n\nexport default app;\n","import _forEach from 'lodash/forEach';\n\n/**\n * @param areas - key/value pairs where key = areaId and value = cssSelector\n */\nexport default function areaBrokerFactory(areas) {\n\n\tconst areaBroker = {};\n\n\tlet getterName;\n\n\t_forEach(areas,  (cssSelector, areaId) => {\n\t\tgetterName = 'get' + areaId.charAt(0).toUpperCase() + areaId.slice(1);\n\n\t\tareaBroker[getterName] = () => {\n\t\t\tconst area = document.querySelectorAll(cssSelector);\n\n\t\t\tif (area.length === 0) {\n\t\t\t\tthrow new Error('Cannot find area: ' + areaId + ' with selector: ' + cssSelector);\n\n\t\t\t} else if (area.length > 1) {\n\t\t\t\tthrow new Error('Multiple areas: ' + areaId + ' found with selector: ' + cssSelector);\n\t\t\t}\n\t\t\treturn area.item(0);\n\t\t};\n\t});\n\n\treturn areaBroker;\n}\n","import header from './content/header/plugin';\nimport footer from './content/footer/plugin';\nimport editor from './editor/plugin';\nimport fileExplorer from './fileExplorer/plugin';\nimport renderingOptions from './renderingOptions/plugin';\n\nexport default function registerPlugins(app) {\n\tapp.registerPlugin(header);\n\tapp.registerPlugin(footer);\n\tapp.registerPlugin(editor);\n\tapp.registerPlugin(fileExplorer);\n\tapp.registerPlugin(renderingOptions);\n}\n","import _isFunction from 'lodash/isFunction';\nimport addEventEmitter from './addEventEmitter';\n\nexport default function appFactory(areaBroker) {\n\tconst pluginRegistry = [];\n\n\tasync function pluginRun(method) {\n\t\tlet plugin;\n\n\t\tfor (let i = 0; i < pluginRegistry.length; i++) {\n\t\t\tplugin = pluginRegistry[i];\n\n\t\t\tif (_isFunction(plugin[method])) {\n\t\t\t\tawait plugin[method]();\n\t\t\t}\n\t\t}\n\t\tthis.emit(method);\n\t}\n\n\treturn addEventEmitter({\n\t\tgetAreaBroker() {\n\t\t\treturn areaBroker;\n\t\t},\n\n\t\tregisterPlugin(plugin) {\n\t\t\tplugin.setHost(this);\n\t\t\tpluginRegistry.push(plugin);\n\t\t},\n\n\t\tinit() {\n\t\t\treturn pluginRun.call(this, 'init');\n\t\t},\n\n\t\trender() {\n\t\t\treturn pluginRun.call(this, 'render');\n\t\t}\n\t});\n}\n","\nimport '../scss/styles.scss';\nimport app from './app';\n\napp.init()\n\t.then(() => {\n\t\treturn app.render();\n\t});\n\n\n","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"entry\\\" data-key=\\\"\"\n    + alias4(((helper = (helper = helpers.key || (depth0 != null ? depth0.key : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"key\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n    <div class=\\\"entry-title\\\">\"\n    + alias4(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n</li>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../ucc-demo/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<p class=\\\"ucc-text-line\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? depth0.textLine : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</p>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../ucc-demo/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<span class=\\\"ucc-chord-symbol\\\">\"\n    + container.escapeExpression(container.lambda((depth0 != null ? depth0.chordSymbol : depth0), depth0))\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"app-footer\\\">\\n    Universal Chord Charts: lib v0.1.0 - demo site v0.4.0\\n</div>\\n\";\n},\"useData\":true});","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"rendering-options\\\">\\n    <div class=\\\"panel\\\">\\n        <input type=\\\"checkbox\\\" id=\\\"align-bars\\\" data-option=\\\"align-bars\\\" checked><label for=\\\"align-bars\\\">Align bars</label><br />\\n    </div>\\n    <div class=\\\"panel\\\">\\n        Transpose: <button data-option=\\\"transpose-down\\\">-1</button> <span data-option=\\\"transpose-value\\\">0</span> <button data-option=\\\"transpose-up\\\">+1</button><br />\\n        <div data-option=\\\"harmonize-accidentals\\\">\\n            Unify flats / sharps\\n            <input type=\\\"radio\\\" id=\\\"harmonize-accidentals-false\\\" name=\\\"ha\\\" value=\\\"false\\\"><label for=\\\"harmonize-accidentals-false\\\">No</label>\\n            <input type=\\\"radio\\\" id=\\\"harmonize-accidentals-true\\\" name=\\\"ha\\\" value=\\\"true\\\" checked><label for=\\\"harmonize-accidentals-true\\\">Yes</label><br/>\\n        </div>\\n        <div data-option=\\\"accidentals-type\\\">\\n            Accidentals\\n            <input type=\\\"radio\\\" id=\\\"accidentals-type-auto\\\" name=\\\"ht\\\" value=\\\"auto\\\" checked><label for=\\\"accidentals-type-auto\\\">Auto</label>\\n            <input type=\\\"radio\\\" id=\\\"accidentals-type-flat\\\" name=\\\"ht\\\" value=\\\"flat\\\"><label for=\\\"accidentals-type-flat\\\">Flat</label>\\n            <input type=\\\"radio\\\" id=\\\"accidentals-type-sharp\\\" name=\\\"ht\\\" value=\\\"sharp\\\"><label for=\\\"accidentals-type-sharp\\\">Sharp</label>\\n        </div>\\n    </div>\\n</div>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"app-header\\\">\\n    <div class=\\\"h2-like\\\">Universal Chords Charts</div>\\n    <div>Chords Charts on steroïds.</div>\\n</div>\\n\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../ucc-demo/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<p class=\\\"ucc-chord-line\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? depth0.chordLine : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</p>\";\n},\"useData\":true});","var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"editor-area\\\">\\n    <section class=\\\"left\\\">\\n        <div id=\\\"source\\\"></div>\\n    </section>\\n\\n    <section class=\\\"right\\\">\\n        <div id=\\\"preview\\\"><div></div></div>\\n    </section>\\n</div>\";\n},\"useData\":true});"],"sourceRoot":""}