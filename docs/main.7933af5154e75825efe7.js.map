{"version":3,"file":"main.7933af5154e75825efe7.js","mappings":"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","sources":["webpack://@touffi/chords-charts-studio/webpack/runtime/chunk loaded","webpack://@touffi/chords-charts-studio/./src/core/clock.js","webpack://@touffi/chords-charts-studio/./src/db/files/actionsTypes.js","webpack://@touffi/chords-charts-studio/./src/db/options/actionsTypes.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_state/actionsTypes.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_state/selectors.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_state/selectors.js","webpack://@touffi/chords-charts-studio/./src/db/files/selectors.js","webpack://@touffi/chords-charts-studio/./src/db/options/editorModeOptions.js","webpack://@touffi/chords-charts-studio/./src/db/files/reducers.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_state/actionsTypes.js","webpack://@touffi/chords-charts-studio/./src/db/options/selectors.js","webpack://@touffi/chords-charts-studio/./src/db/options/reducers.js","webpack://@touffi/chords-charts-studio/./src/db/reducers.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_state/reducers.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_state/reducers.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/reducers.js","webpack://@touffi/chords-charts-studio/./src/ui/reducers.js","webpack://@touffi/chords-charts-studio/./src/state/reducers.js","webpack://@touffi/chords-charts-studio/./src/state/seed.js","webpack://@touffi/chords-charts-studio/./src/db/seed.js","webpack://@touffi/chords-charts-studio/./src/db/options/seed.js","webpack://@touffi/chords-charts-studio/./src/state/store.js","webpack://@touffi/chords-charts-studio/./src/state/localStorage.js","webpack://@touffi/chords-charts-studio/./src/core/createAction.js","webpack://@touffi/chords-charts-studio/./src/db/files/actions.js","webpack://@touffi/chords-charts-studio/./src/core/converters/chordSheetJs2ChordMark.js","webpack://@touffi/chords-charts-studio/./src/songImporters/importers/ultimateGuitar.js","webpack://@touffi/chords-charts-studio/./src/songImporters/getMessageHandlers.js","webpack://@touffi/chords-charts-studio/./src/registerHandlers.js","webpack://@touffi/chords-charts-studio/./src/ui/_components/ErrorBoundary.js","webpack://@touffi/chords-charts-studio/./src/ui/_components/Icon.js","webpack://@touffi/chords-charts-studio/./src/ui/sideBar/_components/Logo.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_components/NavEntry.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_components/Nav.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_components/Footer.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/getVersions.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/allNavEntries.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_components/App.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_containers/App.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_state/actions.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_components/FileActionEntry.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_components/FileActions.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_components/FileEntry.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_components/FileManager.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_containers/FileManager.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_state/actions.js","webpack://@touffi/chords-charts-studio/./src/core/escapeHTML.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/core/dom/escapeHTML.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/core/dom/stripTags.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/lineTypes.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/matchers/isTimeSignatureString.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/syntax.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/matchers/isSectionLabel.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/helper/clearSpaces.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/matchers/isChord.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/matchers/isChordLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/matchers/isEmptyLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/parseTimeSignature.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/parseChord.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/exceptions/IncorrectBeatCountException.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/exceptions/InvalidChordRepetitionException.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/parseChordLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/parseLyricLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/helper/songs.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/songLinesFactory.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/parseSectionLabel.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/matchers/isChordLineRepeater.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/parseSong.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/getAllChordsInSong.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/symbols.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/spacers/chord/getMaxBeatsWidth.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/spacers/chord/simple.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/spacers/chord/aligned.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/spacers/chord/chordLyrics.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderBarContent.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderChordSymbol.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderChordLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderEmptyLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderSectionLabel.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderLyricLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderTimeSignature.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/helpers/getChordSymbol.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/helpers/getSectionsStats.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/helpers/getMainAccidental.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/replaceRepeatedBars.js","webpack://@touffi/chords-charts-studio/./src/core/renderSong.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderSong.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/_components/SongRenderer.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/_containers/SongRenderer.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/editorPreview/_components/EditorPreview.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/editorPreview/_containers/EditorPreview.js","webpack://@touffi/chords-charts-studio/./src/editor/songEditor/prosemirror/schema.js","webpack://@touffi/chords-charts-studio/./src/editor/songEditor/prosemirror/converters/stateToText.js","webpack://@touffi/chords-charts-studio/./src/editor/songEditor/prosemirror/converters/toSafeHtml.js","webpack://@touffi/chords-charts-studio/./src/editor/songEditor/prosemirror/ProsemirrorEditorView.js","webpack://@touffi/chords-charts-studio/./src/editor/songEditor/prosemirror/converters/textToDom.js","webpack://@touffi/chords-charts-studio/./src/editor/songEditor/prosemirror/getPlugins.js","webpack://@touffi/chords-charts-studio/./src/editor/songEditor/_components/EditorLayout.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/exportPreview/_components/ExportPreview.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/playRenderer/_components/PlayRenderer.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/playRenderer/_containers/PlayRenderer.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/_components/Page.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/_components/PageHeader.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/helpers/mapLinesToColumns.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/helpers/getDimensionsFromDom.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/helpers/padColumns.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/helpers/element.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/helpers/getAllLinesHeight.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/helpers/getPagesHeight.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/_components/AllPages.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/_components/PrintPreview.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/_containers/PrintPreview.js","webpack://@touffi/chords-charts-studio/./src/editor/_components/Editor.js","webpack://@touffi/chords-charts-studio/./src/editor/_containers/Editor.js","webpack://@touffi/chords-charts-studio/./src/optionsPanels/_components/OptionsPanel.js","webpack://@touffi/chords-charts-studio/./src/ui/sideBar/options/_components/OptionsGroup.js","webpack://@touffi/chords-charts-studio/./src/ui/sideBar/options/_components/SelectChoice.js","webpack://@touffi/chords-charts-studio/./src/ui/sideBar/options/_components/Select.js","webpack://@touffi/chords-charts-studio/./src/ui/sideBar/options/_components/Slider.js","webpack://@touffi/chords-charts-studio/./src/ui/sideBar/options/_components/Toggle.js","webpack://@touffi/chords-charts-studio/./src/ui/sideBar/options/_components/SidebarOptionsPanel.js","webpack://@touffi/chords-charts-studio/./src/db/options/actions.js","webpack://@touffi/chords-charts-studio/./src/optionsPanels/rendering/_containers/Rendering.js","webpack://@touffi/chords-charts-studio/./src/optionsPanels/_containers/OptionsPanelFactory.js","webpack://@touffi/chords-charts-studio/./src/optionsPanels/rendering/allWidgets.js","webpack://@touffi/chords-charts-studio/./src/optionsPanels/rendering/_state/selectors.js","webpack://@touffi/chords-charts-studio/./src/optionsPanels/rendering/_components/Rendering.js","webpack://@touffi/chords-charts-studio/./src/controllers/Editor.js","webpack://@touffi/chords-charts-studio/./src/router.js","webpack://@touffi/chords-charts-studio/./src/renderController.js","webpack://@touffi/chords-charts-studio/./src/app.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/barContent.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/barSeparator.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/chordLine.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/chordSymbol.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/emptyLine.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/line.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/lyricLine.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/sectionLabel.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/song.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/timeSignature.hbs","webpack://@touffi/chords-charts-studio/webpack/bootstrap","webpack://@touffi/chords-charts-studio/webpack/runtime/compat get default export","webpack://@touffi/chords-charts-studio/webpack/runtime/define property getters","webpack://@touffi/chords-charts-studio/webpack/runtime/global","webpack://@touffi/chords-charts-studio/webpack/runtime/hasOwnProperty shorthand","webpack://@touffi/chords-charts-studio/webpack/runtime/node module decorator","webpack://@touffi/chords-charts-studio/webpack/runtime/jsonp chunk loading","webpack://@touffi/chords-charts-studio/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","export default function clock() {\n\treturn Date.now();\n}\n","export const DB_FILES_CREATE = 'db/files/Create';\nexport const DB_FILES_DELETE = 'db/files/Delete';\nexport const DB_FILES_IMPORT = 'db/files/Import';\nexport const DB_FILES_UPDATE = 'db/files/Update';\n","export const DB_OPTION_SET_OPTION_VALUE = 'db/options/setOptionValue';\n","export const UI_LAYOUT_APP_TOGGLE_LEFT_BAR = 'ui/layout/app/toggleLeftBar';\nexport const UI_LAYOUT_APP_TOGGLE_RIGHT_BAR = 'ui/layout/app/toggleRightBar';\nexport const UI_LAYOUT_APP_SET_EDITOR_MODE = 'ui/layout/app/setEditorMode';\n","export const isLeftBarCollapsed = (state) =>\n\tstate.ui.layout.app.isLeftBarCollapsed;\n\nexport const isRightBarCollapsed = (state) =>\n\tstate.ui.layout.app.isRightBarCollapsed;\n\nexport const getEditorMode = (state) => state.ui.layout.app.editorMode;\n","export const getSelectedId = (state) => state.fileManager.selected;\n\nexport const getRenamedId = (state) => state.fileManager.renamed;\n\nexport const getDefaultTitle = (state) => state.fileManager.defaultTitle;\n","import _map from 'lodash/map';\nimport _cloneDeep from 'lodash/cloneDeep';\nimport _isEqual from 'lodash/isEqual';\nimport _sortBy from 'lodash/sortBy';\n\nimport { createSelectorCreator, defaultMemoize } from 'reselect';\n\n// create a \"selector creator\" that uses lodash.isEqual instead of ===\nconst createDeepEqualSelector = createSelectorCreator(defaultMemoize, _isEqual);\n\n// return value should not change when file content changes\nexport const getAllTitles = createDeepEqualSelector(\n\t(state) =>\n\t\t_map(state.db.files.allFiles, ({ title, id }) => ({ title, id })),\n\t(allFiles) => _sortBy(allFiles, (o) => o.title.toLowerCase())\n);\n\nexport const getOne = (state, id) => {\n\treturn state.db.files.allFiles[id];\n};\n\nexport const getCategoryOptions = (state, id, category) => {\n\tconst file = state.db.files.allFiles[id];\n\n\tif (!file) return;\n\n\tif ((file.options || {})[category]) {\n\t\t// handle edge cases where we might have an empty object...\n\t\t// of course this _should_ never happen!\n\t\tif (Object.keys(file.options[category]).length === 0) return;\n\n\t\treturn _cloneDeep(file.options[category]);\n\t}\n};\n\nexport const getLatestModeOptions = (state, id) => {\n\tconst file = state.db.files.allFiles[id];\n\n\tif (!file) return;\n\n\tconst fileOptions = file.options || {};\n\n\tconst allOptionsPerMode = [];\n\tif (fileOptions.edit) allOptionsPerMode.push({ ...fileOptions.edit });\n\tif (fileOptions.play) allOptionsPerMode.push({ ...fileOptions.play });\n\tif (fileOptions.print) allOptionsPerMode.push({ ...fileOptions.print });\n\tif (fileOptions.export) allOptionsPerMode.push({ ...fileOptions.export });\n\n\tif (!allOptionsPerMode.length) return;\n\n\tallOptionsPerMode.sort((a, b) => a.updatedAt - b.updatedAt);\n\n\treturn allOptionsPerMode.reduce(\n\t\t(acc, modeOptions) => Object.assign(acc, modeOptions),\n\t\t{}\n\t);\n};\n","const editorModeOptions = {\n\tedit: [],\n\tplay: [\n\t\t'chordsAndLyricsDisplay',\n\t\t'alignChordsWithLyrics',\n\t\t'harmonizeAccidentals',\n\t\t'preferredAccidentals',\n\t\t'useShortNamings',\n\t\t'simplifyChords',\n\t\t'transposeValue',\n\n\t\t'alignBars',\n\t\t'autoRepeatChords',\n\t\t'expandSectionRepeats',\n\t\t'columnsCount',\n\t\t'fontSize',\n\t\t'fontStyle',\n\t\t'chordsColor',\n\t\t'highlightChords',\n\t],\n\tprint: [\n\t\t'chordsAndLyricsDisplay',\n\t\t'alignChordsWithLyrics',\n\t\t'harmonizeAccidentals',\n\t\t'preferredAccidentals',\n\t\t'useShortNamings',\n\t\t'simplifyChords',\n\t\t'transposeValue',\n\n\t\t'alignBars',\n\t\t'autoRepeatChords',\n\t\t'expandSectionRepeats',\n\t\t'documentSize',\n\t\t'documentMargins',\n\t\t'columnsCount',\n\t\t'columnBreakOnParagraph',\n\t\t'printFontSize',\n\t\t'fontStyle',\n\t\t'chordsColor',\n\t\t'highlightChords',\n\t],\n\texport: [\n\t\t'chordsAndLyricsDisplay',\n\t\t'alignChordsWithLyrics',\n\t\t'harmonizeAccidentals',\n\t\t'preferredAccidentals',\n\t\t'useShortNamings',\n\t\t'simplifyChords',\n\t\t'transposeValue',\n\n\t\t'style',\n\t\t'alignBars',\n\t\t'autoRepeatChords',\n\t\t'expandSectionRepeats',\n\t],\n};\n\nexport default editorModeOptions;\n","import _pick from 'lodash/pick';\nimport clock from '../../core/clock';\n\nimport * as actionTypes from './actionsTypes';\n\nimport { DB_OPTION_SET_OPTION_VALUE } from '../options/actionsTypes';\nimport { UI_LAYOUT_APP_SET_EDITOR_MODE } from '../../ui/layout/app/_state/actionsTypes';\nimport { getEditorMode } from '../../ui/layout/app/_state/selectors';\nimport { getSelectedId } from '../../fileManager/_state/selectors';\nimport { getLatestModeOptions, getCategoryOptions } from './selectors';\nimport editorModeOptions from '../options/editorModeOptions';\n\nconst initialState = {\n\tallFiles: {},\n};\n\nfunction createFile(state, action) {\n\tconst { id, title, content } = action.payload;\n\n\tconst allFiles = { ...state.allFiles };\n\tallFiles[id] = {\n\t\tid,\n\t\ttitle,\n\t\tcontent,\n\t};\n\n\treturn {\n\t\t...state,\n\t\tallFiles,\n\t};\n}\n\nfunction updateFile(state, action) {\n\tconst { id, title, content } = action.payload;\n\n\tif ((!title && !content) || !state.allFiles[id]) {\n\t\treturn state;\n\t}\n\n\tconst allFiles = { ...state.allFiles };\n\n\tallFiles[id] = { ...allFiles[id] };\n\n\tif (title) {\n\t\tallFiles[id].title = title;\n\t}\n\tif (content) {\n\t\tallFiles[id].content = content;\n\t}\n\treturn {\n\t\t...state,\n\t\tallFiles,\n\t};\n}\n\nfunction deleteFile(state, action) {\n\tconst { id } = action.payload;\n\n\tif (!id || !state.allFiles[id]) {\n\t\treturn state;\n\t}\n\n\tconst allFiles = { ...state.allFiles };\n\tdelete allFiles[id];\n\n\treturn {\n\t\t...state,\n\t\tallFiles,\n\t};\n}\n\n/**\n * Whenever the user set an option, we save it in the song entity, either:\n * - for the current editing mode if it is a formatting option\n * - in the preferences otherwise\n */\nfunction updateFileOption(state, action, fullState) {\n\tconst { context, key, value } = action.payload;\n\tconst id = getSelectedId(fullState);\n\tconst allFiles = { ...state.allFiles };\n\n\tif (\n\t\t['songFormatting', 'songPreferences'].includes(context) &&\n\t\tallFiles[id]\n\t) {\n\t\tconst editorMode = getEditorMode(fullState);\n\t\tconst optionCategory =\n\t\t\tcontext === 'songPreferences' ? 'preferences' : editorMode;\n\n\t\tallFiles[id] = addOption(allFiles[id], optionCategory, key, value);\n\t\treturn {\n\t\t\t...state,\n\t\t\tallFiles,\n\t\t};\n\t}\n\treturn state;\n}\n\nfunction addOption(fileState, category, key, value) {\n\treturn {\n\t\t...fileState,\n\t\toptions: {\n\t\t\t...fileState.options,\n\t\t\t[category]: {\n\t\t\t\t...(fileState.options || {})[category],\n\t\t\t\tupdatedAt: clock(),\n\t\t\t\t[key]: value,\n\t\t\t},\n\t\t},\n\t};\n}\n\n/**\n * When a user switch mode and the target mode does not have any saved settings yet,\n * we apply the latest saved settings (all modes merged) for a better user flow\n */\nfunction setEditorMode(state, action, fullState) {\n\tconst fileId = getSelectedId(fullState);\n\tconst nextMode = action.payload.mode;\n\n\tconst hasOptionsForNextMode = !!getCategoryOptions(\n\t\tfullState,\n\t\tfileId,\n\t\tnextMode\n\t);\n\n\tif (!hasOptionsForNextMode) {\n\t\tconst previousModeOptions = _pick(\n\t\t\tgetLatestModeOptions(fullState, fileId) || {},\n\t\t\teditorModeOptions[nextMode]\n\t\t);\n\n\t\tif (Object.keys(previousModeOptions).length) {\n\t\t\tpreviousModeOptions.updatedAt = clock();\n\t\t\tconst allFiles = { ...state.allFiles };\n\n\t\t\tallFiles[fileId] = {\n\t\t\t\t...allFiles[fileId],\n\t\t\t\toptions: {\n\t\t\t\t\t...allFiles[fileId].options,\n\t\t\t\t\t[nextMode]: previousModeOptions,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tallFiles,\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n}\n\nexport default (state = initialState, action = {}, fullState = {}) => {\n\tswitch (action.type) {\n\t\tcase actionTypes.DB_FILES_CREATE:\n\t\tcase actionTypes.DB_FILES_IMPORT:\n\t\t\treturn createFile(state, action);\n\t\tcase actionTypes.DB_FILES_UPDATE:\n\t\t\treturn updateFile(state, action);\n\t\tcase actionTypes.DB_FILES_DELETE:\n\t\t\treturn deleteFile(state, action);\n\t\tcase DB_OPTION_SET_OPTION_VALUE:\n\t\t\treturn updateFileOption(state, action, fullState);\n\t\tcase UI_LAYOUT_APP_SET_EDITOR_MODE:\n\t\t\treturn setEditorMode(state, action, fullState);\n\t}\n\treturn state;\n};\n","export const FILE_MANAGER_SELECT_FILE = 'fileManager/select';\nexport const FILE_MANAGER_ENABLE_RENAME = 'fileManager/enableRename';\n","import _cloneDeep from 'lodash/cloneDeep';\n\nexport const getOptionValue = (state, context, key) => {\n\tif (\n\t\t!state.db.options[context] ||\n\t\t!state.db.options[context].values ||\n\t\ttypeof state.db.options[context].values[key] === 'undefined'\n\t) {\n\t\treturn;\n\t}\n\treturn state.db.options[context].values[key];\n};\n\nexport const getAllOptionValues = (state, context) => {\n\tif (!state.db.options[context] || !state.db.options[context].values) {\n\t\treturn;\n\t}\n\treturn _cloneDeep(state.db.options[context].values);\n};\n\nexport const getOptionsDefaults = (state, context) => {\n\tif (!state.db.options[context] || !state.db.options[context].defaults) {\n\t\treturn;\n\t}\n\treturn _cloneDeep(state.db.options[context].defaults);\n};\n","import * as actionTypes from './actionsTypes';\nimport { getCategoryOptions, getLatestModeOptions } from '../files/selectors';\n\nimport { UI_LAYOUT_APP_SET_EDITOR_MODE } from '../../ui/layout/app/_state/actionsTypes';\nimport { FILE_MANAGER_SELECT_FILE } from '../../fileManager/_state/actionsTypes';\nimport { getSelectedId } from '../../fileManager/_state/selectors';\nimport { getEditorMode } from '../../ui/layout/app/_state/selectors';\nimport { getOptionsDefaults } from './selectors';\n\nconst initialState = {};\n\nfunction setOptionValue(state, action) {\n\tconst { context, key, value } = action.payload;\n\n\tif (\n\t\t!state[context] ||\n\t\t!state[context].values ||\n\t\ttypeof state[context].values[key] === 'undefined'\n\t) {\n\t\treturn state;\n\t}\n\n\tconst newState = {\n\t\t...state,\n\t\t[context]: {\n\t\t\t...state[context],\n\t\t\tvalues: { ...state[context].values },\n\t\t},\n\t};\n\tnewState[context].values[key] = value;\n\n\treturn newState;\n}\n\nfunction setEditorMode(state, action, fullState) {\n\tconst fileId = getSelectedId(fullState);\n\tconst nextMode = action.payload.mode;\n\n\tconst newOptions = getModeOptions(fullState, fileId, nextMode);\n\n\treturn {\n\t\t...state,\n\t\tsongFormatting: {\n\t\t\t...state.songFormatting,\n\t\t\tvalues: {\n\t\t\t\t...newOptions,\n\t\t\t},\n\t\t},\n\t};\n}\n\nfunction getModeOptions(fullState, fileId, mode) {\n\tconst defaultOptions = getOptionsDefaults(fullState, 'songFormatting');\n\tlet editorModeOptions = getCategoryOptions(fullState, fileId, mode);\n\n\tif (!editorModeOptions) {\n\t\teditorModeOptions = getLatestModeOptions(fullState, fileId) || {};\n\t}\n\tdelete editorModeOptions.updatedAt;\n\n\treturn Object.assign(defaultOptions, editorModeOptions);\n}\n\nfunction selectFile(state, action, fullState) {\n\tconst { id } = action.payload;\n\tconst editorMode = getEditorMode(fullState);\n\n\tconst newOptions = getModeOptions(fullState, id, editorMode);\n\n\tconst songPreferences =\n\t\tgetCategoryOptions(fullState, id, 'preferences') || {};\n\tdelete songPreferences.updatedAt;\n\n\tconst defaultPreferences = getOptionsDefaults(fullState, 'songPreferences');\n\n\tconst newPreferences = Object.assign(defaultPreferences, songPreferences);\n\n\treturn {\n\t\t...state,\n\t\tsongPreferences: {\n\t\t\t...state.songPreferences,\n\t\t\tvalues: {\n\t\t\t\t...newPreferences,\n\t\t\t},\n\t\t},\n\t\tsongFormatting: {\n\t\t\t...state.songFormatting,\n\t\t\tvalues: {\n\t\t\t\t...newOptions,\n\t\t\t},\n\t\t},\n\t};\n}\n\nexport default (state = initialState, action = {}, fullState = {}) => {\n\tswitch (action.type) {\n\t\tcase actionTypes.DB_OPTION_SET_OPTION_VALUE: {\n\t\t\treturn setOptionValue(state, action);\n\t\t}\n\t\tcase UI_LAYOUT_APP_SET_EDITOR_MODE: {\n\t\t\treturn setEditorMode(state, action, fullState);\n\t\t}\n\t\tcase FILE_MANAGER_SELECT_FILE: {\n\t\t\treturn selectFile(state, action, fullState);\n\t\t}\n\t}\n\treturn state;\n};\n","import combineSectionReducers from 'combine-section-reducers';\nimport files from './files/reducers';\nimport options from './options/reducers';\n\nexport default combineSectionReducers({\n\tfiles,\n\toptions,\n});\n","import {\n\tFILE_MANAGER_SELECT_FILE,\n\tFILE_MANAGER_ENABLE_RENAME,\n} from './actionsTypes';\n\nimport {\n\tDB_FILES_CREATE,\n\tDB_FILES_DELETE,\n\tDB_FILES_IMPORT,\n\tDB_FILES_UPDATE,\n} from '../../db/files/actionsTypes';\n\nconst initialState = {\n\tselected: '',\n\trenamed: '',\n\tdefaultTitle: '[untitled]',\n};\n\nexport default function reducers(state = initialState, action = {}) {\n\tswitch (action.type) {\n\t\tcase DB_FILES_CREATE: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: id,\n\t\t\t\trenamed: id,\n\t\t\t};\n\t\t}\n\n\t\tcase DB_FILES_IMPORT: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: id,\n\t\t\t\trenamed: '',\n\t\t\t};\n\t\t}\n\n\t\tcase DB_FILES_UPDATE: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trenamed: '',\n\t\t\t};\n\t\t}\n\n\t\tcase DB_FILES_DELETE: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: '',\n\t\t\t\trenamed: '',\n\t\t\t};\n\t\t}\n\n\t\tcase FILE_MANAGER_SELECT_FILE: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: id,\n\t\t\t\trenamed: id === state.renamed ? id : '',\n\t\t\t};\n\t\t}\n\n\t\tcase FILE_MANAGER_ENABLE_RENAME: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trenamed: id,\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n}\n","import {\n\tUI_LAYOUT_APP_TOGGLE_RIGHT_BAR,\n\tUI_LAYOUT_APP_TOGGLE_LEFT_BAR,\n\tUI_LAYOUT_APP_SET_EDITOR_MODE,\n} from './actionsTypes';\n\nimport {\n\tDB_FILES_CREATE,\n\tDB_FILES_IMPORT,\n\tDB_FILES_DELETE,\n} from '../../../../db/files/actionsTypes';\n\nconst initialState = {\n\tisLeftBarCollapsed: false,\n\tisRightBarCollapsed: false,\n\teditorMode: 'edit',\n};\n\nexport default function reducers(state = initialState, action = {}) {\n\tswitch (action.type) {\n\t\tcase UI_LAYOUT_APP_TOGGLE_LEFT_BAR: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLeftBarCollapsed: !state.isLeftBarCollapsed,\n\t\t\t};\n\t\t}\n\t\tcase UI_LAYOUT_APP_TOGGLE_RIGHT_BAR: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisRightBarCollapsed: !state.isRightBarCollapsed,\n\t\t\t};\n\t\t}\n\t\tcase UI_LAYOUT_APP_SET_EDITOR_MODE: {\n\t\t\tconst { mode } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditorMode: mode,\n\t\t\t};\n\t\t}\n\t\tcase DB_FILES_DELETE:\n\t\tcase DB_FILES_CREATE:\n\t\tcase DB_FILES_IMPORT: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditorMode: 'edit',\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n}\n","import combineSectionReducers from 'combine-section-reducers';\nimport app from './app/_state/reducers';\n\nexport default combineSectionReducers({\n\tapp,\n});\n","import combineSectionReducers from 'combine-section-reducers';\nimport layout from './layout/reducers';\n\nexport default combineSectionReducers({\n\tlayout,\n});\n","import combineSectionReducers from 'combine-section-reducers';\n\nimport db from '../db/reducers';\nimport fileManager from '../fileManager/_state/reducers';\nimport ui from '../ui/reducers';\n\nexport default combineSectionReducers({\n\tdb,\n\tfileManager,\n\tui,\n});\n","import db from '../db/seed';\n\nexport default {\n\tdb,\n};\n","import options from './options/seed';\n\nexport default {\n\toptions,\n};\n","export default {\n\tsongPreferences: {\n\t\tvalues: {\n\t\t\tchordsAndLyricsDisplay: 'all',\n\t\t\talignChordsWithLyrics: true,\n\t\t\tharmonizeAccidentals: true,\n\t\t\tpreferredAccidentals: 'auto',\n\t\t\tuseShortNamings: true,\n\t\t\tsimplifyChords: 'none',\n\t\t\ttransposeValue: 0,\n\t\t},\n\t\tdefaults: {\n\t\t\tchordsAndLyricsDisplay: 'all',\n\t\t\talignChordsWithLyrics: true,\n\t\t\tharmonizeAccidentals: true,\n\t\t\tpreferredAccidentals: 'auto',\n\t\t\tuseShortNamings: true,\n\t\t\tsimplifyChords: 'none',\n\t\t\ttransposeValue: 0,\n\t\t},\n\t\t//userDefaults: {},\n\t},\n\tsongFormatting: {\n\t\tvalues: {\n\t\t\tstyle: 'chordmark',\n\t\t\talignBars: true,\n\t\t\tautoRepeatChords: true,\n\t\t\texpandSectionRepeats: true,\n\t\t\tdocumentSize: 'a4',\n\t\t\tdocumentMargins: 3,\n\t\t\tcolumnsCount: 1,\n\t\t\tcolumnBreakOnParagraph: true,\n\t\t\tfontSize: 0,\n\t\t\tprintFontSize: 0,\n\t\t\tfontStyle: 'roboto',\n\t\t\tchordsColor: 'yellow',\n\t\t\thighlightChords: true,\n\t\t},\n\t\tdefaults: {\n\t\t\tstyle: 'chordmark',\n\t\t\talignBars: true,\n\t\t\tautoRepeatChords: true,\n\t\t\texpandSectionRepeats: true,\n\t\t\tdocumentSize: 'a4',\n\t\t\tdocumentMargins: 3,\n\t\t\tcolumnsCount: 1,\n\t\t\tcolumnBreakOnParagraph: true,\n\t\t\tfontSize: 0,\n\t\t\tprintFontSize: 0,\n\t\t\tfontStyle: 'roboto',\n\t\t\tchordsColor: 'yellow',\n\t\t\thighlightChords: true,\n\t\t},\n\t\t//userDefaults: {},\n\t},\n};\n","import _defaultsDeep from 'lodash/defaultsDeep';\n\nimport { createStore as createReduxStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunkMiddleware from 'redux-thunk';\n\nimport { loadState, saveState } from './localStorage';\nimport allReducers from './reducers';\nimport seed from './seed';\n\nlet store;\n\nexport function createStore() {\n\tconst storeEnhancers = composeWithDevTools(\n\t\tapplyMiddleware(thunkMiddleware)\n\t);\n\n\tconst persistedState = loadState();\n\n\t/* Reset options in store * /\n\tObject.keys(persistedState.db.files.allFiles).forEach((fileId) => {\n\t\tdelete persistedState.db.files.allFiles[fileId].options;\n\t});\n\tdelete persistedState.db.options;\n\t/**/\n\n\tconst initialState = _defaultsDeep(persistedState, seed);\n\n\tstore = createReduxStore(allReducers, initialState, storeEnhancers);\n\n\tstore.subscribe(() => {\n\t\tsaveState(store.getState());\n\t});\n}\n\nexport function getStore() {\n\treturn store;\n}\n","// @see https://egghead.io/lessons/javascript-redux-persisting-the-state-to-the-local-storage\n\nexport const loadState = () => {\n\ttry {\n\t\tconst serializedState = localStorage.getItem('state');\n\t\tif (!serializedState) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn JSON.parse(serializedState);\n\t} catch (err) {\n\t\treturn undefined;\n\t}\n};\n\nexport const saveState = (state) => {\n\ttry {\n\t\tconst serializedState = JSON.stringify(state);\n\t\tlocalStorage.setItem('state', serializedState);\n\t} catch (err) {\n\t\t// ignore write errors\n\t}\n};\n","export default function createAction(type, payload) {\n\tif (!type) {\n\t\tthrow new TypeError('Cannot create an action without an action type');\n\t}\n\treturn {\n\t\ttype,\n\t\tpayload,\n\t};\n}\n","import { v4 as uuidv4 } from 'uuid';\n\nimport createAction from '../../core/createAction';\nimport * as actionTypes from './actionsTypes';\n\nexport const createFile = (title, content = '') => {\n\tif (!title) {\n\t\tthrow new TypeError('Cannot create a file without title');\n\t}\n\tconst payload = {\n\t\tid: uuidv4(),\n\t\ttitle,\n\t\tcontent,\n\t};\n\treturn createAction(actionTypes.DB_FILES_CREATE, payload);\n};\n\nexport const importFile = (title, content = '') => {\n\tif (!title) {\n\t\tthrow new TypeError('Cannot import a file without title');\n\t}\n\tconst payload = {\n\t\tid: uuidv4(),\n\t\ttitle,\n\t\tcontent,\n\t};\n\treturn createAction(actionTypes.DB_FILES_IMPORT, payload);\n};\n\nexport const updateFile = (id, { title, content } = {}) => {\n\tif (!id) {\n\t\tthrow new TypeError('Cannot update a file without an id');\n\t}\n\tconst payload = {\n\t\tid,\n\t\ttitle,\n\t\tcontent,\n\t};\n\treturn createAction(actionTypes.DB_FILES_UPDATE, payload);\n};\n\nexport const deleteFile = (id) => {\n\treturn createAction(actionTypes.DB_FILES_DELETE, { id });\n};\n","import { ChordLyricsPair, Tag } from 'chordsheetjs';\n\nconst allLines = [];\n\nexport default function chordSheetJs2ChordMark(song) {\n\tallLines.length = 0;\n\tformatAllParagraphs(song);\n\treturn allLines.join('\\n');\n}\n\nconst formatAllParagraphs = (song) => {\n\tconst { bodyParagraphs } = song;\n\tbodyParagraphs.map((paragraph) => {\n\t\tformatParagraph(paragraph);\n\t\tallLines.push('');\n\t});\n};\n\nconst formatParagraph = (paragraph) => {\n\tswitch (paragraph.type) {\n\t\tcase 'verse':\n\t\t\tallLines.push('#v');\n\t\t\tbreak;\n\t\tcase 'chorus':\n\t\t\tallLines.push('#c');\n\t\t\tbreak;\n\t}\n\tparagraph.lines.map((line) => formatLine(line));\n};\n\nconst formatLine = (line) => {\n\tconst parts = [\n\t\tformatChordLine(line),\n\t\tformatLyricLine(line),\n\t\tformatTagLine(line),\n\t]\n\t\t.filter((i) => i !== null)\n\t\t.map((part) => part.trimRight());\n\n\tallLines.push(...parts);\n};\n\nconst formatChordLine = (line) => {\n\tif (!lineHasChords(line)) {\n\t\treturn null;\n\t}\n\n\treturn line.items.reduce((chordLine, item) => {\n\t\tif (itemHasChord(item)) {\n\t\t\tchordLine += item.chords.trim() + ' ';\n\t\t}\n\t\treturn chordLine;\n\t}, '');\n};\n\nconst formatLyricLine = (line) => {\n\tif (!lineHasLyrics(line)) {\n\t\treturn null;\n\t}\n\treturn line.items.reduce((lyricsLine, item) => {\n\t\tif (!itemHasLyric(item)) lyricsLine += ' ';\n\t\tif (itemHasChord(item)) lyricsLine += '_';\n\t\tif (itemHasLeftPadding(item)) lyricsLine += ' ';\n\n\t\tlyricsLine += item.lyrics.trim();\n\n\t\tif (itemHasRightPadding(item)) lyricsLine += ' ';\n\n\t\treturn lyricsLine;\n\t}, '');\n};\n\nconst formatTagLine = (line) => {\n\tif (!lineHasTag(line)) {\n\t\treturn null;\n\t}\n\tconst tagValue = line.items[0].value.toLowerCase().replace(/[- 0-9]/g, '');\n\n\treturn sectionLabelsMapping[tagValue]\n\t\t? sectionLabelsMapping[tagValue]\n\t\t: '#' + tagValue;\n};\n\nconst sectionLabelsMapping = {\n\tadlib: '#a',\n\tbridge: '#b',\n\tchorus: '#c',\n\tinterlude: '#u',\n\tintro: '#i',\n\tintroduction: '#i',\n\toutro: '#o',\n\tprechorus: '#p',\n\tsolo: '#s',\n};\n\nconst lineHasChords = (line) =>\n\tline.items.some((item) => item instanceof ChordLyricsPair && item.chords);\n\nconst lineHasLyrics = (line) =>\n\tline.items.some((item) => item instanceof ChordLyricsPair && item.lyrics);\n\nconst lineHasTag = (line) =>\n\tline.items.some((item) => item instanceof Tag && item.isRenderable());\n\nconst itemHasChord = (item) => {\n\treturn item instanceof ChordLyricsPair && item.chords.trim().length;\n};\n\nconst itemHasLyric = (item) => {\n\treturn item.lyrics.length;\n};\n\nconst itemHasLeftPadding = (item) => {\n\treturn item.lyrics.length - item.lyrics.trimLeft().length >= 1;\n};\n\nconst itemHasRightPadding = (item) => {\n\treturn (\n\t\titem.lyrics.trim().length &&\n\t\titem.lyrics.length - item.lyrics.trimRight().length >= 1\n\t);\n};\n","import ChordSheetJS from 'chordsheetjs';\nimport chordSheetJs2ChordMark from '../../core/converters/chordSheetJs2ChordMark';\n\nexport default function getFromUltimateGuitar(ugChordChartRaw) {\n\tconst ugChordChart = ugChordChartRaw\n\t\t.replace(/\\r\\n/g, '\\n')\n\t\t.replace(/\\t/g, ' ')\n\t\t.replace(/\\[\\/?ch]/g, '')\n\t\t.replace(/\\[\\/?tab]/g, '');\n\n\tconst parser = new ChordSheetJS.UltimateGuitarParser();\n\tconst parsed = parser.parse(ugChordChart);\n\n\treturn chordSheetJs2ChordMark(parsed);\n}\n","import { importFile } from '../db/files/actions';\nimport { getStore } from '../state/store';\n\nimport getFromUltimateGuitar from './importers/ultimateGuitar';\n\n/**\n * @typedef {Object} WebsiteImportMessage\n * @type {Object}\n * @property {('ultimateGuitar')} source - website from which the tab comes from\n * @property {String} chordChart - content of the chord chart\n * @property {String} title - song title\n * @property {String} artist - song artist\n */\n\nconst songImporterHandlers = {\n\t/**\n\t *\n\t * @param {WebsiteImportMessage} message\n\t */\n\t'@CCS/IMPORT_TAB': (message) => {\n\t\tconst store = getStore();\n\n\t\tlet chordChart;\n\n\t\ttry {\n\t\t\tswitch (message.source) {\n\t\t\t\tcase 'ultimateGuitar':\n\t\t\t\t\tchordChart = getFromUltimateGuitar(message.chordChart);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// todo\n\t\t\tconsole.log('error in import');\n\t\t}\n\n\t\tif (chordChart) {\n\t\t\tconst title = buildTitle(message.title, message.artist);\n\t\t\tstore.dispatch(importFile(title, chordChart));\n\t\t}\n\t},\n};\n\nconst buildTitle = (songTitle, artist) => {\n\tlet title = songTitle;\n\tif (artist) {\n\t\ttitle += ' - ' + artist;\n\t}\n\treturn title;\n};\n\nexport default function getSongImporterHandlers() {\n\treturn songImporterHandlers;\n}\n","import getSongImporterHandlers from './songImporters/getMessageHandlers';\n\nexport default function registerHandlers() {\n\twindow.addEventListener('message', _handleMessage);\n}\n\n// unit test backdoor, not for public usage!\nexport const _handleMessage = (e) => {\n\tconst allHandlers = {\n\t\t...getSongImporterHandlers(),\n\t};\n\n\tif (e.source !== window || e.origin !== window.location.origin) {\n\t\treturn false;\n\t}\n\tconst message = e.data;\n\n\tif (typeof allHandlers[message.type] === 'function') {\n\t\tallHandlers[message.type](message.payload);\n\t}\n\treturn true;\n};\n","import './ErrorBoundary.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n// source: https://codepen.io/gaearon/pen/wqvxGa?editors=0010\nclass ErrorBoundary extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { error: null, errorInfo: null };\n\t}\n\n\tcomponentDidCatch(error, errorInfo) {\n\t\tthis.setState({\n\t\t\terror: error,\n\t\t\terrorInfo: errorInfo,\n\t\t});\n\t}\n\n\trender() {\n\t\tif (this.state.errorInfo) {\n\t\t\treturn (\n\t\t\t\t<div className={'ErrorBoundary'}>\n\t\t\t\t\t<h2>Something went wrong</h2>\n\t\t\t\t\t<details style={{ whiteSpace: 'pre-wrap' }} open={true}>\n\t\t\t\t\t\t{this.state.error && this.state.error.toString()}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{this.state.errorInfo.componentStack}\n\t\t\t\t\t</details>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn this.props.children;\n\t}\n}\n\nErrorBoundary.propTypes = {\n\tchildren: PropTypes.any,\n};\n\nexport default ErrorBoundary;\n","import './Icon.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Icon(props) {\n\tconst { iconName } = props;\n\n\tconst classList = ['icon', 'material-icons'];\n\n\treturn <i className={classList.join(' ')}>{iconName}</i>;\n}\n\nIcon.propTypes = {\n\ticonName: PropTypes.string.isRequired,\n};\n\nexport default React.memo(Icon);\n","import './Logo.scss';\n\nimport React from 'react';\n\nimport Icon from '../../_components/Icon.js';\n\nfunction Logo() {\n\treturn (\n\t\t<div className={'logo'}>\n\t\t\t<div className={'logo-isCollapsed'}>\n\t\t\t\t<Icon iconName={'queue_music'} />\n\t\t\t</div>\n\n\t\t\t<div className={'logo-isExpanded'}>\n\t\t\t\t<span className={'logo-icon'}>\n\t\t\t\t\t<Icon iconName={'queue_music'} />\n\t\t\t\t</span>\n\t\t\t\tChords Charts Studio\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default React.memo(Logo);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon.js';\n\nfunction NavEntry(props) {\n\tconst { label, icon, editorMode, setEditorMode, isActive, isDisabled } =\n\t\tprops;\n\n\tconst classNames = ['mainNavEntry'];\n\n\tif (isActive) {\n\t\tclassNames.push('mainNavEntry-isActive');\n\t}\n\tif (isDisabled) {\n\t\tclassNames.push('mainNavEntry-isDisabled');\n\t}\n\n\tfunction handleClick() {\n\t\tif (!isDisabled) setEditorMode(editorMode);\n\t}\n\n\treturn (\n\t\t<li className={classNames.join(' ')} onClick={handleClick}>\n\t\t\t<span className={'mainNavEntry-icon'}>\n\t\t\t\t<Icon iconName={icon} />\n\t\t\t</span>\n\t\t\t{label}\n\t\t</li>\n\t);\n}\n\nNavEntry.propTypes = {\n\tlabel: PropTypes.string.isRequired,\n\ticon: PropTypes.string.isRequired,\n\teditorMode: PropTypes.string.isRequired,\n\tsetEditorMode: PropTypes.func.isRequired,\n\tisActive: PropTypes.bool.isRequired,\n\tisDisabled: PropTypes.bool.isRequired,\n};\n\nexport default React.memo(NavEntry);\n","import './Nav.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport NavEntry from './NavEntry.js';\n\nfunction Nav(props) {\n\tconst { currentMode, allEntries, setEditorMode, selectedId } = props;\n\n\treturn (\n\t\t<nav className={'mainNav'}>\n\t\t\t<ul className={'mainNav-entries'}>\n\t\t\t\t{allEntries.map((entry, key) => (\n\t\t\t\t\t<NavEntry\n\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\tisActive={\n\t\t\t\t\t\t\t!!selectedId && entry.editorMode === currentMode\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisDisabled={!selectedId}\n\t\t\t\t\t\tsetEditorMode={setEditorMode}\n\t\t\t\t\t\t{...entry}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</nav>\n\t);\n}\n\nNav.propTypes = {\n\tcurrentMode: PropTypes.string.isRequired,\n\tsetEditorMode: PropTypes.func.isRequired,\n\tselectedId: PropTypes.string,\n\tallEntries: PropTypes.arrayOf(\n\t\tPropTypes.shape({\n\t\t\tid: PropTypes.string.isRequired,\n\t\t\tlabel: PropTypes.string.isRequired,\n\t\t\ticon: PropTypes.string.isRequired,\n\t\t\teditorMode: PropTypes.string.isRequired,\n\t\t})\n\t),\n};\n\nexport default React.memo(Nav);\n","import getVersions from '../getVersions';\nimport './Footer.scss';\n\nimport React from 'react';\n\nfunction Footer() {\n\tconst versions = getVersions();\n\treturn (\n\t\t<div className={'appFooter'}>\n\t\t\tChords Charts Studio {versions['chord-charts-studio']}- ChordMark{' '}\n\t\t\t{versions['chord-mark']}- ChordSymbol {versions['chord-symbol']}\n\t\t</div>\n\t);\n}\n\nexport default React.memo(Footer);\n","export default () => ({'chord-charts-studio':'v0.8.3','chord-symbol':'v2.0.0','chord-mark':'v0.5.5'});","export default [\n\t{\n\t\tid: 'edit',\n\t\tlabel: 'Edit',\n\t\ticon: 'create',\n\t\teditorMode: 'edit',\n\t},\n\t{\n\t\tid: 'play',\n\t\tlabel: 'Play',\n\t\ticon: 'music_note',\n\t\teditorMode: 'play',\n\t},\n\t{\n\t\tid: 'print',\n\t\tlabel: 'Print / PDF',\n\t\ticon: 'print',\n\t\teditorMode: 'print',\n\t},\n\t{\n\t\tid: 'export',\n\t\tlabel: 'Export',\n\t\ticon: 'save_alt',\n\t\teditorMode: 'export',\n\t},\n];\n","import './App.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Logo from '../../../sideBar/_components/Logo';\nimport Nav from './Nav';\nimport Footer from './Footer';\nimport Icon from '../../../_components/Icon';\n\nimport allNavEntries from '../allNavEntries';\n\nfunction App(props) {\n\tconst {\n\t\tisLeftBarCollapsed,\n\t\tisRightBarCollapsed,\n\t\teditorMode,\n\t\ttoggleLeftBar,\n\t\ttoggleRightBar,\n\t\tsetEditorMode,\n\t\tselectedId,\n\n\t\tleftBar,\n\t\trightBar,\n\t} = props;\n\n\tconst leftBarClassNames = ['leftBar'];\n\tif (isLeftBarCollapsed) {\n\t\tleftBarClassNames.push('leftBar-isCollapsed');\n\t}\n\n\tconst rightBarClassNames = ['rightBar'];\n\tif (isRightBarCollapsed) {\n\t\trightBarClassNames.push('rightBar-isCollapsed');\n\t}\n\n\treturn (\n\t\t<div className={'appLayout-wrapper'}>\n\t\t\t<section className={leftBarClassNames.join(' ')}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'leftBar-content'}\n\t\t\t\t\tonClick={isLeftBarCollapsed ? toggleLeftBar : null}\n\t\t\t\t>\n\t\t\t\t\t<Logo />\n\t\t\t\t\t{leftBar}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'leftBar-collapser'}\n\t\t\t\t\tonClick={toggleLeftBar}\n\t\t\t\t\tdata-testid={'leftBar-collapser'}\n\t\t\t\t>\n\t\t\t\t\t<span className={'leftBar-collapserIcon'}>\n\t\t\t\t\t\t<Icon iconName={'keyboard_arrow_left'} />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t<section className={'appLayout-main'}>\n\t\t\t\t<section className={'appLayout-header'}>\n\t\t\t\t\t<Nav\n\t\t\t\t\t\tallEntries={allNavEntries}\n\t\t\t\t\t\tcurrentMode={editorMode}\n\t\t\t\t\t\tsetEditorMode={setEditorMode}\n\t\t\t\t\t\tselectedId={selectedId}\n\t\t\t\t\t/>\n\t\t\t\t</section>\n\t\t\t\t<section className={'appLayout-content'}>\n\t\t\t\t\t{props.children}\n\t\t\t\t</section>\n\t\t\t\t<section className={'appLayout-footer'}>\n\t\t\t\t\t<Footer />\n\t\t\t\t</section>\n\t\t\t</section>\n\t\t\t<section className={rightBarClassNames.join(' ')}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'rightBar-collapser'}\n\t\t\t\t\tonClick={toggleRightBar}\n\t\t\t\t\tdata-testid={'rightBar-collapser'}\n\t\t\t\t>\n\t\t\t\t\t<span className={'rightBar-collapserIcon'}>\n\t\t\t\t\t\t<Icon iconName={'keyboard_arrow_right'} />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'rightBar-content'}\n\t\t\t\t\tonClick={isRightBarCollapsed ? toggleRightBar : null}\n\t\t\t\t>\n\t\t\t\t\t{rightBar}\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t</div>\n\t);\n}\n\nApp.propTypes = {\n\tchildren: PropTypes.element,\n\n\tisLeftBarCollapsed: PropTypes.bool,\n\tisRightBarCollapsed: PropTypes.bool,\n\tselectedId: PropTypes.string,\n\ttoggleLeftBar: PropTypes.func.isRequired,\n\ttoggleRightBar: PropTypes.func.isRequired,\n\n\teditorMode: PropTypes.string.isRequired,\n\tsetEditorMode: PropTypes.func.isRequired,\n\n\tleftBar: PropTypes.element.isRequired,\n\trightBar: PropTypes.element.isRequired,\n};\n\nApp.defaultProps = {\n\tisLeftBarCollapsed: false,\n\tisRightBarCollapsed: false,\n};\n\nexport default App;\n","import { connect } from 'react-redux';\n\nimport {\n\ttoggleLeftBar,\n\ttoggleRightBar,\n\tsetEditorMode,\n} from '../_state/actions';\nimport {\n\tisLeftBarCollapsed,\n\tisRightBarCollapsed,\n\tgetEditorMode,\n} from '../_state/selectors';\nimport { getSelectedId } from '../../../../fileManager/_state/selectors';\n\nimport App from '../_components/App';\n\nexport default connect(\n\t(state) => ({\n\t\tisLeftBarCollapsed: isLeftBarCollapsed(state),\n\t\tisRightBarCollapsed: isRightBarCollapsed(state),\n\t\teditorMode: getEditorMode(state),\n\t\tselectedId: getSelectedId(state),\n\t}),\n\n\t{\n\t\ttoggleLeftBar,\n\t\ttoggleRightBar,\n\t\tsetEditorMode,\n\t}\n)(App);\n","import {\n\tUI_LAYOUT_APP_TOGGLE_LEFT_BAR,\n\tUI_LAYOUT_APP_TOGGLE_RIGHT_BAR,\n\tUI_LAYOUT_APP_SET_EDITOR_MODE,\n} from './actionsTypes';\n\nimport createAction from '../../../../core/createAction';\n\nexport const toggleLeftBar = () => createAction(UI_LAYOUT_APP_TOGGLE_LEFT_BAR);\n\nexport const toggleRightBar = () =>\n\tcreateAction(UI_LAYOUT_APP_TOGGLE_RIGHT_BAR);\n\nexport const setEditorMode = (mode) =>\n\tcreateAction(UI_LAYOUT_APP_SET_EDITOR_MODE, { mode });\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../ui/_components/Icon';\n\nfunction FileActionEntry(props) {\n\tconst { icon, text, action } = props;\n\n\treturn (\n\t\t<span className={'fileManagerAction'} onClick={action}>\n\t\t\t<span className={'fileManagerAction-icon'}>\n\t\t\t\t<Icon iconName={icon} /> {text}\n\t\t\t</span>\n\t\t</span>\n\t);\n}\n\nFileActionEntry.propTypes = {\n\ticon: PropTypes.string.isRequired,\n\ttext: PropTypes.string.isRequired,\n\taction: PropTypes.func.isRequired,\n};\n\nexport default React.memo(FileActionEntry);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport FileActionEntry from './FileActionEntry';\n\nfunction FileActions(props) {\n\tconst { createFile, deleteFile, enableRename } = props;\n\n\tconst allActions = [\n\t\t{\n\t\t\ticon: 'add_circle',\n\t\t\ttext: 'New',\n\t\t\taction: createFile,\n\t\t},\n\t\t{\n\t\t\ticon: 'create',\n\t\t\ttext: 'Rename',\n\t\t\taction: enableRename,\n\t\t},\n\t\t{\n\t\t\ticon: 'delete',\n\t\t\ttext: 'Delete',\n\t\t\taction: deleteFile,\n\t\t},\n\t];\n\n\treturn (\n\t\t<div className={'fileManager-actionsList'}>\n\t\t\t{allActions.map((action, key) => (\n\t\t\t\t<FileActionEntry {...action} key={key} />\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nFileActions.propTypes = {\n\tcreateFile: PropTypes.func.isRequired,\n\tdeleteFile: PropTypes.func.isRequired,\n\tenableRename: PropTypes.func.isRequired,\n};\n\nexport default React.memo(FileActions);\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nfunction FileEntry(props) {\n\tconst [title, setTitle] = useState(props.title);\n\n\tconst {\n\t\tfileId,\n\t\tisSelected,\n\t\tisRenamed,\n\t\tdefaultTitle,\n\t\tselectFile,\n\t\tenableRename,\n\t\tupdateFile,\n\t} = props;\n\n\tconst classList = ['fileManagerEntry'];\n\tif (isSelected) {\n\t\tclassList.push('fileManagerEntry-isSelected');\n\t}\n\tif (isRenamed) {\n\t\tclassList.push('fileManagerEntry-isRenamed');\n\t}\n\n\tconst inputRef = React.createRef();\n\n\tuseEffect(() => {\n\t\tif (isRenamed) {\n\t\t\tinputRef.current.focus();\n\t\t}\n\t}, [isRenamed, inputRef]);\n\n\tfunction handleClick() {\n\t\tif (!isSelected) {\n\t\t\tselectFile(fileId);\n\t\t}\n\t}\n\n\tfunction handleDoubleClick(e) {\n\t\tif (!isRenamed) {\n\t\t\tenableRename(fileId);\n\t\t\te.target.select();\n\t\t}\n\t}\n\n\tfunction handleKeyPress(e) {\n\t\tif (isRenamed && e.which === 13) {\n\t\t\te.preventDefault();\n\t\t\twindow.getSelection().removeAllRanges();\n\n\t\t\tconst newTitle = e.target.value;\n\t\t\tsaveTitle(newTitle);\n\t\t}\n\t}\n\n\tfunction handleChange(e) {\n\t\tsetTitle(e.target.value);\n\t}\n\n\tfunction handleFocus(e) {\n\t\tif (isRenamed) {\n\t\t\te.target.select();\n\t\t}\n\t}\n\n\tfunction handleBlur(e) {\n\t\tif (isRenamed) {\n\t\t\tconst newTitle = e.target.value;\n\t\t\tsaveTitle(newTitle);\n\t\t}\n\t}\n\n\tfunction saveTitle(newTitle) {\n\t\tnewTitle = newTitle || defaultTitle;\n\n\t\tupdateFile(fileId, {\n\t\t\ttitle: newTitle,\n\t\t});\n\t\tsetTitle(newTitle);\n\n\t\tinputRef.current.scrollLeft = 0;\n\t}\n\n\treturn (\n\t\t<li\n\t\t\tclassName={classList.join(' ')}\n\t\t\tonClick={handleClick}\n\t\t\tonDoubleClick={handleDoubleClick}\n\t\t>\n\t\t\t<input\n\t\t\t\tclassName={'fileManagerEntry-input'}\n\t\t\t\tref={inputRef}\n\t\t\t\ttype={'text'}\n\t\t\t\tvalue={title}\n\t\t\t\treadOnly={isRenamed ? null : 'readOnly'}\n\t\t\t\tautoFocus={isRenamed ? 'autoFocus' : null}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tonBlur={handleBlur}\n\t\t\t\tonFocus={handleFocus}\n\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t/>\n\t\t</li>\n\t);\n}\n\nFileEntry.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n\tfileId: PropTypes.string.isRequired,\n\tisSelected: PropTypes.bool.isRequired,\n\tisRenamed: PropTypes.bool.isRequired,\n\tdefaultTitle: PropTypes.string.isRequired,\n\tselectFile: PropTypes.func.isRequired,\n\tenableRename: PropTypes.func.isRequired,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default FileEntry;\n","import './FileManager.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../ui/_components/Icon';\nimport FileActions from './FileActions';\nimport FileEntry from './FileEntry';\n\nfunction FileManager(props) {\n\tconst {\n\t\tallTitles,\n\t\tselected,\n\t\trenamed,\n\t\tdefaultTitle,\n\n\t\tselectFile,\n\t\tcreateFile,\n\t\tdeleteFile,\n\t\tenableRename,\n\t\tupdateFile,\n\t} = props;\n\n\treturn (\n\t\t<div className={'fileManager'}>\n\t\t\t<div className={'fileManager-isCollapsed'}>\n\t\t\t\t<span className={'fileManager-icon'}>\n\t\t\t\t\t<Icon iconName={'file_copy'} />\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div className={'fileManager-isExpanded'}>\n\t\t\t\t<FileActions\n\t\t\t\t\tcreateFile={() => createFile(defaultTitle)}\n\t\t\t\t\tdeleteFile={() => deleteFile(selected)}\n\t\t\t\t\tenableRename={() => enableRename(selected)}\n\t\t\t\t/>\n\t\t\t\t<ul className={'fileManager-entriesList'}>\n\t\t\t\t\t{allTitles.map((file) => (\n\t\t\t\t\t\t<FileEntry\n\t\t\t\t\t\t\ttitle={file.title}\n\t\t\t\t\t\t\tdefaultTitle={defaultTitle}\n\t\t\t\t\t\t\tfileId={file.id}\n\t\t\t\t\t\t\tisSelected={selected === file.id}\n\t\t\t\t\t\t\tisRenamed={renamed === file.id}\n\t\t\t\t\t\t\tselectFile={selectFile}\n\t\t\t\t\t\t\tupdateFile={updateFile}\n\t\t\t\t\t\t\tenableRename={enableRename}\n\t\t\t\t\t\t\tkey={file.id}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nFileManager.propTypes = {\n\tallTitles: PropTypes.arrayOf(\n\t\tPropTypes.shape({\n\t\t\ttitle: PropTypes.string.isRequired,\n\t\t\tid: PropTypes.string.isRequired,\n\t\t})\n\t).isRequired,\n\tselected: PropTypes.string.isRequired,\n\trenamed: PropTypes.string.isRequired,\n\tdefaultTitle: PropTypes.string.isRequired,\n\n\tselectFile: PropTypes.func.isRequired,\n\tcreateFile: PropTypes.func.isRequired,\n\tdeleteFile: PropTypes.func.isRequired,\n\tenableRename: PropTypes.func.isRequired,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default FileManager;\n","import { connect } from 'react-redux';\n\nimport { selectFile, enableRename } from '../_state/actions';\nimport {\n\tgetDefaultTitle,\n\tgetSelectedId,\n\tgetRenamedId,\n} from '../_state/selectors';\n\nimport { createFile, updateFile, deleteFile } from '../../db/files/actions';\nimport { getAllTitles } from '../../db/files/selectors';\n\nimport FileManager from '../_components/FileManager';\n\nexport default connect(\n\t(state) => ({\n\t\tselected: getSelectedId(state),\n\t\trenamed: getRenamedId(state),\n\t\tdefaultTitle: getDefaultTitle(state),\n\t\tallTitles: getAllTitles(state),\n\t}),\n\n\t{\n\t\tselectFile,\n\t\tcreateFile,\n\t\tdeleteFile,\n\t\tupdateFile,\n\t\tenableRename,\n\t}\n)(FileManager);\n","import createAction from '../../core/createAction';\n\nimport * as actionsTypes from './actionsTypes';\n\nexport const selectFile = (id) =>\n\tcreateAction(actionsTypes.FILE_MANAGER_SELECT_FILE, { id });\n\nexport const enableRename = (id) =>\n\tcreateAction(actionsTypes.FILE_MANAGER_ENABLE_RENAME, { id });\n","import domPurify from 'dompurify';\n\nexport default function escapeHTML(unescaped) {\n\treturn domPurify.sanitize(unescaped);\n}\n","import domPurify from 'dompurify';\n\nexport default function escapeHTML(unescaped) {\n\treturn domPurify.sanitize(unescaped);\n}\n","import domPurify from 'dompurify';\n\nexport default function stripTags(html) {\n\treturn domPurify.sanitize(html, {\n\t\tALLOWED_TAGS: ['#text'],\n\t\tKEEP_CONTENT: true,\n\t});\n}\n","/**\n * @enum {String}\n * @readonly\n */\nexport default {\n\tCHORD: 'chord',\n\tCHORD_LINE_REPEATER: 'chordLineRepeater',\n\tEMPTY_LINE: 'emptyLine',\n\tLYRIC: 'lyric',\n\tSECTION_LABEL: 'sectionLabel',\n\tTIME_SIGNATURE: 'timeSignature',\n};\n","const allowedTimeSignatures = [\n\t'2/2',\n\t'3/2',\n\t'2/4',\n\t'3/4',\n\t'4/4',\n\t'5/4',\n\t'3/8',\n\t'6/8',\n\t'9/8',\n\t'12/8',\n];\n\nexport default function isTimeSignatureString(string) {\n\treturn allowedTimeSignatures.includes(string);\n}\n","export default {\n\tbarRepeat: '%',\n\tchordBeatCount: '\\\\.',\n\tchordLineRepeat: '%',\n\tnoChord: 'NC',\n\tnoLyrics: 'NL',\n\tsectionLabel: '#',\n\tchordPositionMarker: '_',\n};\n","import syntax from '../syntax';\n\nexport const sectionLabelRegexp = new RegExp(\n\t'^' + syntax.sectionLabel + '([a-zA-Z]+)([1-9])?( x[2-9])?$'\n);\n\nexport default function isSectionLabel(string) {\n\tconst found = string.trim().match(sectionLabelRegexp);\n\treturn found !== null;\n}\n","export default function clearSpaces(string) {\n\treturn string.replace(/\\t+/g, ' ').replace(/  +/g, ' ').trim();\n}\n","import { chordParserFactory } from 'chord-symbol';\n\nexport default function isChord(potentialChord) {\n\tconst parseChord = chordParserFactory();\n\tconst parsed = parseChord(potentialChord);\n\treturn !parsed.error;\n}\n","import clearSpaces from '../helper/clearSpaces';\n\nimport syntax from '../syntax';\nimport isChord from './isChord';\n\nconst chordBeatCountSymbols = new RegExp(syntax.chordBeatCount + '*$', 'g');\nconst barRepeatSymbols = new RegExp('^' + syntax.barRepeat + '+$');\n\nexport default function isChordLine(line = '') {\n\treturn clearSpaces(line)\n\t\t.split(' ')\n\t\t.every((potentialChordToken, index) => {\n\t\t\tconst withoutBeatCount = potentialChordToken.replace(\n\t\t\t\tchordBeatCountSymbols,\n\t\t\t\t''\n\t\t\t);\n\t\t\treturn (\n\t\t\t\tisChord(withoutBeatCount) ||\n\t\t\t\t(potentialChordToken.match(barRepeatSymbols) && index > 0) ||\n\t\t\t\twithoutBeatCount === syntax.noChord\n\t\t\t);\n\t\t});\n}\n","import clearSpaces from '../helper/clearSpaces';\n\nexport default function isEmptyLine(string) {\n\treturn clearSpaces(string) === '';\n}\n","import isTimeSignatureString from './matchers/isTimeSignatureString';\n\n/**\n * @typedef {Object} TimeSignature\n * @type {Object}\n * @property {String} string - original string\n * @property {Number} count - upper part of time signature\n * @property {Number} value - lower part of time signature\n * @property {Number} beatCount - number of beats per bar\n */\n\n/**\n * @param {String} string\n * @returns {TimeSignature}\n */\nexport default function parseTimeSignature(string) {\n\tif (!isTimeSignatureString(string)) {\n\t\tthrow new TypeError(\n\t\t\t'Expected time signature string, received: ' + string\n\t\t);\n\t}\n\n\tconst array = string.split('/');\n\n\tconst count = Number.parseInt(array[0], 10);\n\tconst value = Number.parseInt(array[1], 10);\n\n\tlet beatCount = count;\n\n\tif (value === 2) {\n\t\tbeatCount = count * 2;\n\t} else if (value === 8) {\n\t\tbeatCount = count / 3;\n\t}\n\n\treturn {\n\t\tstring,\n\t\tcount,\n\t\tvalue,\n\t\tbeatCount,\n\t};\n}\n","import { chordParserFactory } from 'chord-symbol';\n\n/**\n * @param chordString\n * @returns {Chord}\n */\nexport default function parseChordWrapper(chordString) {\n\tconst parseChord = chordParserFactory();\n\treturn parseChord(chordString);\n}\n","import _isString from 'lodash/isString';\nimport _isFinite from 'lodash/isFinite';\n\nexport default class IncorrectBeatCountException extends Error {\n\tconstructor({ string, duration, currentBeatCount, beatCount } = {}) {\n\t\tif (!string || !_isString(string)) {\n\t\t\tthrow new TypeError(\n\t\t\t\t'IncorrectBeatCountException cannot be created without chord string, received: ' +\n\t\t\t\t\tstring\n\t\t\t);\n\t\t}\n\t\tif (!duration || !_isFinite(duration)) {\n\t\t\tthrow new TypeError(\n\t\t\t\t'IncorrectBeatCountException cannot be created without chord duration, received: ' +\n\t\t\t\t\tduration\n\t\t\t);\n\t\t}\n\t\tif (!currentBeatCount || !_isFinite(currentBeatCount)) {\n\t\t\tthrow new TypeError(\n\t\t\t\t'IncorrectBeatCountException cannot be created without currentBeatCount, received: ' +\n\t\t\t\t\tcurrentBeatCount\n\t\t\t);\n\t\t}\n\t\tif (!beatCount || !_isFinite(beatCount)) {\n\t\t\tthrow new TypeError(\n\t\t\t\t'IncorrectBeatCountException cannot be created without beatCount, received: ' +\n\t\t\t\t\tbeatCount\n\t\t\t);\n\t\t}\n\n\t\tsuper();\n\n\t\tthis.name = 'IncorrectBeatCountException';\n\t\tthis.string = string;\n\t\tthis.duration = duration;\n\t\tthis.currentBeatCount = currentBeatCount;\n\t\tthis.beatCount = beatCount;\n\t}\n}\n","import _isString from 'lodash/isString';\n\nexport default class InvalidChordRepetitionException extends Error {\n\tconstructor({ string } = {}) {\n\t\tif (!string || !_isString(string)) {\n\t\t\tthrow new TypeError(\n\t\t\t\t'InvalidChordRepetitionException cannot be created without chord string, received: ' +\n\t\t\t\t\tstring\n\t\t\t);\n\t\t}\n\n\t\tsuper();\n\n\t\tthis.name = 'InvalidChordRepetitionException';\n\t\tthis.string = string;\n\t}\n}\n","import _isEqual from 'lodash/isEqual';\nimport _cloneDeep from 'lodash/cloneDeep';\n\nimport syntax from './syntax';\nimport clearSpaces from './helper/clearSpaces';\n\nimport parseChord from './parseChord';\nimport parseTimeSignature from './parseTimeSignature';\n\nimport IncorrectBeatCountException from './exceptions/IncorrectBeatCountException';\nimport InvalidChordRepetitionException from './exceptions/InvalidChordRepetitionException';\n\nconst chordBeatCountSymbols = new RegExp(syntax.chordBeatCount, 'g');\nconst barRepeatSymbols = new RegExp('^' + syntax.barRepeat + '+$');\nconst defaultTimeSignature = parseTimeSignature('4/4');\n\n/**\n * @typedef {Object} ChordLine\n * @type {Object}\n * @property {Number} chordCount - number of chords in the line\n * @property {Bar[]} allBars\n */\n\n/**\n * @typedef {Object} Bar\n * @type {Object}\n * @property {TimeSignature} timeSignature\n * @property {ChordLineChord[]} allChords\n * @property {Boolean} isRepeated\n * @property {Boolean} hasPositionedChords\n * @property {Boolean} hasUnevenChordsDurations\n */\n\n/**\n * @typedef {Object} ChordLineChord\n * @type {Object}\n * @property {String} string - original chord string\n * @property {ChordDef|String} model - parsed chord or \"NC\" if \"no chord\" symbol\n * @property {Number} duration - number of beats the chord lasts\n * @property {Number} beat - beat on which the chord starts\n * @property {Boolean} isPositioned - whether this chord has been positioned over a specific lyric or not\n */\n\n/**\n * @param {String} chordLine\n * @param {TimeSignature} timeSignature\n * @returns {ChordLine}\n */\nexport default function parseChordLine(\n\tchordLine,\n\t{ timeSignature = defaultTimeSignature } = {}\n) {\n\tconst { beatCount } = timeSignature;\n\n\tconst allBars = [];\n\tconst emptyBar = { allChords: [] };\n\n\tlet bar = _cloneDeep(emptyBar);\n\tlet chord = {};\n\tlet tokenWithoutBeatCount;\n\tlet currentBeatCount = 0;\n\tlet chordCount = 0;\n\tlet previousBar;\n\n\tconst allTokens = clearSpaces(chordLine).split(' ');\n\tallTokens.forEach((token, tokenIndex) => {\n\t\tif (token.match(barRepeatSymbols)) {\n\t\t\tif (previousBar) {\n\t\t\t\tconst repeatedBar = _cloneDeep(previousBar);\n\t\t\t\trepeatedBar.isRepeated = true;\n\n\t\t\t\tfor (let i = 0; i < token.length; i++) {\n\t\t\t\t\tallBars.push(_cloneDeep(repeatedBar));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t'A chord line cannot start with the barRepeat symbol'\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\ttokenWithoutBeatCount = token.replace(chordBeatCountSymbols, '');\n\t\t\tchord = {\n\t\t\t\tstring: token,\n\t\t\t\tduration: getChordDuration(token, beatCount),\n\t\t\t\tmodel: isNoChordSymbol(tokenWithoutBeatCount)\n\t\t\t\t\t? syntax.noChord\n\t\t\t\t\t: parseChord(tokenWithoutBeatCount),\n\t\t\t\tbeat: currentBeatCount + 1,\n\t\t\t};\n\t\t\tcurrentBeatCount += chord.duration;\n\n\t\t\tcheckInvalidChordRepetition(bar, chord);\n\n\t\t\tbar.allChords.push(chord);\n\t\t\tchordCount++;\n\n\t\t\tif (shouldChangeBar(currentBeatCount, beatCount)) {\n\t\t\t\tbar.timeSignature = timeSignature;\n\t\t\t\tbar.hasUnevenChordsDurations = hasUnevenChordsDurations(bar);\n\t\t\t\tconst barClone = _cloneDeep(bar);\n\n\t\t\t\tbar.isRepeated = _isEqual(bar, previousBar);\n\n\t\t\t\tallBars.push(_cloneDeep(bar));\n\n\t\t\t\tpreviousBar = barClone;\n\n\t\t\t\tbar = _cloneDeep(emptyBar);\n\t\t\t\tcurrentBeatCount = 0;\n\t\t\t} else {\n\t\t\t\tcheckInvalidBeatCount(\n\t\t\t\t\tchord,\n\t\t\t\t\tcurrentBeatCount,\n\t\t\t\t\tbeatCount,\n\t\t\t\t\tallTokens.length === tokenIndex + 1\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn {\n\t\tchordCount,\n\t\tallBars,\n\t};\n}\n\nfunction isNoChordSymbol(token) {\n\treturn token === syntax.noChord;\n}\n\nfunction getChordDuration(token, beatCount) {\n\treturn (token.match(chordBeatCountSymbols) || []).length || beatCount;\n}\n\nfunction checkInvalidChordRepetition(bar, currentChord) {\n\tif (bar.allChords.length > 0) {\n\t\tconst previousChord = bar.allChords[bar.allChords.length - 1];\n\t\tif (_isEqual(previousChord.model, currentChord.model)) {\n\t\t\tthrow new InvalidChordRepetitionException({\n\t\t\t\tstring: currentChord.string,\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction shouldChangeBar(currentBeatCount, beatCount) {\n\treturn currentBeatCount === beatCount;\n}\n\nfunction checkInvalidBeatCount(chord, currentBeatCount, beatCount, isLast) {\n\tif (hasInvalidBeatCount(currentBeatCount, beatCount, isLast)) {\n\t\tthrow new IncorrectBeatCountException({\n\t\t\tmessage: '',\n\t\t\tstring: chord.string,\n\t\t\tduration: chord.duration,\n\t\t\tcurrentBeatCount,\n\t\t\tbeatCount,\n\t\t});\n\t}\n}\nfunction hasInvalidBeatCount(currentBeatCount, barBeatCount, isLast) {\n\treturn (\n\t\thasTooManyBeats(currentBeatCount, barBeatCount) ||\n\t\thasTooFewBeats(currentBeatCount, barBeatCount, isLast)\n\t);\n}\nfunction hasTooManyBeats(currentBeatCount, barBeatCount) {\n\treturn currentBeatCount > barBeatCount;\n}\nfunction hasTooFewBeats(currentBeatCount, barBeatCount, isLast) {\n\treturn isLast && currentBeatCount < barBeatCount;\n}\n\nfunction hasUnevenChordsDurations(bar) {\n\tlet firstChordDuration = bar.allChords[0].duration;\n\treturn bar.allChords.some((chord) => chord.duration !== firstChordDuration);\n}\n","import syntax from './syntax';\n\n/**\n * @typedef {Object} LyricLine\n * @type {Object}\n * @property {String} lyrics\n * @property {Number[]} chordPositions\n */\n\n/**\n * @param {String} string\n * @returns {LyricLine}\n */\nexport default function parseLyricLine(string) {\n\tconst regexp = new RegExp(syntax.chordPositionMarker, 'g');\n\tconst stringWithoutPositionMarkers = string.replace(regexp, '');\n\n\tconst chordPositions = [];\n\tlet tmpString = string;\n\tlet position;\n\n\twhile ((position = tmpString.indexOf(syntax.chordPositionMarker)) !== -1) {\n\t\tif (!chordPositions.includes(position)) {\n\t\t\tchordPositions.push(position);\n\t\t}\n\t\ttmpString = tmpString.replace(syntax.chordPositionMarker, '');\n\t}\n\treturn {\n\t\tlyrics: stringWithoutPositionMarkers,\n\t\tchordPositions,\n\t};\n}\n","import _cloneDeep from 'lodash/cloneDeep';\n\nimport lineTypes from '../lineTypes';\n\n/**\n * @param {SongLine[]} allLines\n * @param {Function} fn - to execute on each bar\n * @returns {SongLine[]}\n */\nexport function forEachBarInSong(allLines, fn) {\n\tconst newLines = _cloneDeep(allLines);\n\n\tnewLines.forEach((line) => {\n\t\tif (line.type === lineTypes.CHORD) {\n\t\t\tline.model.allBars.forEach((bar) => {\n\t\t\t\tfn(bar);\n\t\t\t});\n\t\t}\n\t});\n\treturn newLines;\n}\n\n/**\n * @param {SongLine[]} allLines\n * @param {Function} fn - to execute on each chord\n * @returns {SongLine[]}\n */\nexport function forEachChordInSong(allLines, fn) {\n\tconst newLines = _cloneDeep(allLines);\n\n\tnewLines.forEach((line) => {\n\t\tif (line.type === lineTypes.CHORD) {\n\t\t\tline.model.allBars.forEach((bar) => {\n\t\t\t\tbar.allChords.forEach((chord) => {\n\t\t\t\t\tfn(chord);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n\treturn newLines;\n}\n\n/**\n * @param {ChordLine} chordLine\n * @param {Function} fn - to execute on each chord\n * @returns {ChordLine}\n */\nexport function forEachChordInChordLine(chordLine, fn) {\n\tconst newChordLine = _cloneDeep(chordLine);\n\n\tnewChordLine.allBars.forEach((bar, barIndex) => {\n\t\tbar.allChords.forEach((chord, chordIndex) => {\n\t\t\tfn(chord, chordIndex, barIndex);\n\t\t});\n\t});\n\n\treturn newChordLine;\n}\n\n/**\n * @param {SongLine[]} allLines\n * @param {String} label - the label to select\n * @param {Number} n - the index of the section to select\n * @returns {SongLine[]} all lines of the requested section\n */\nexport function getNthOfLabel(allLines, label, n) {\n\tconst selected = [];\n\tconst typesCount = {};\n\n\tlet enableSelect = false;\n\tlet currentLabel = '';\n\n\tallLines.forEach((line) => {\n\t\tif (line.type === lineTypes.SECTION_LABEL) {\n\t\t\tcurrentLabel = line.model.label;\n\n\t\t\tif (!typesCount[currentLabel]) {\n\t\t\t\ttypesCount[currentLabel] = 1;\n\t\t\t} else {\n\t\t\t\ttypesCount[currentLabel]++;\n\t\t\t}\n\n\t\t\tenableSelect = line.id === label + n;\n\t\t} else if (enableSelect) {\n\t\t\tselected.push(line);\n\t\t}\n\t});\n\treturn selected;\n}\n","/*eslint-disable max-lines-per-function */\nimport _cloneDeep from 'lodash/cloneDeep';\nimport lineTypes from './lineTypes';\n\nimport isTimeSignature from './matchers/isTimeSignatureString';\nimport isSectionLabel from './matchers/isSectionLabel';\nimport isChordLine from './matchers/isChordLine';\nimport isChordLineRepeater from './matchers/isChordLineRepeater';\nimport isEmptyLine from './matchers/isEmptyLine';\n\nimport parseTimeSignature from './parseTimeSignature';\nimport parseChordLine from './parseChordLine';\nimport parseSectionLabel from './parseSectionLabel';\nimport parseLyricLine from './parseLyricLine';\n\nimport clearSpaces from './helper/clearSpaces';\n\nimport { forEachChordInChordLine, getNthOfLabel } from './helper/songs';\n\nconst defaultTimeSignature = '4/4';\n\n/**\n * @typedef {Object} SongLine\n * @type {Object}\n * @property {String} string - original line in source file\n * @property {String} type - chord|lyric|timeSignature|sectionLabel...\n * @property {Boolean} [isFromSectionRepeat] - line created by a section repeat directive (x3...)\n * @property {Boolean} [isFromSectionCopy] - line created by a section copy (eg empty # section)\n * @property {Boolean} [isFromAutoRepeatChords] - line created by auto repeats of chords from a section to another\n */\n\n/**\n * @typedef {SongLine} SongChordLine\n * @type {Object}\n * @property {ChordLine} model\n * @property {Boolean} [isFromChordLineRepeater] - line created by the chordLine repeat symbol\n */\n\n/**\n * @typedef {SongLine} SongTimeSignatureLine\n * @type {Object}\n * @property {TimeSignature} model\n */\n\n/**\n * @typedef {SongLine} SongLyricLine\n * @type {Object}\n * @property {LyricLine} model\n */\n\n/**\n * @typedef {SongLine} SongSectionLabelLine\n * @type {Object}\n * @property {SectionLabel} model\n * @property {Number} index - index of the section for a given label (#v, #v x2, #v => 1, 2, 3, 4)\n * @property {Number} indexWithoutRepeats - idem, but not taking repeats into account (#v, #v x2, #v => 1, 2, 3)\n * @property {String} id\n */\n\nexport default function songLinesFactory() {\n\tconst allLines = [];\n\tconst sectionsStats = {};\n\n\tlet currentTimeSignature = parseTimeSignature(defaultTimeSignature);\n\tlet currentSection;\n\tlet currentSectionStats;\n\n\tconst MAX_PREVIOUS_CHORD_LINES = 2;\n\tlet previousChordLines = [];\n\tlet previousSectionLabelLine;\n\n\tlet blueprint = [];\n\tlet blueprintIndex = 0;\n\tlet blueprintLine = '';\n\n\tlet isRepeatingChords = false;\n\tlet shouldRepeatSection = false;\n\tlet shouldCopySection = false;\n\n\t/**\n\t * @returns {SongTimeSignatureLine}\n\t */\n\tfunction getTimeSignatureLine(string) {\n\t\tcurrentTimeSignature = parseTimeSignature(string);\n\n\t\treturn {\n\t\t\tstring,\n\t\t\ttype: lineTypes.TIME_SIGNATURE,\n\t\t\tmodel: currentTimeSignature,\n\t\t};\n\t}\n\n\t/**\n\t * @returns {SongSectionLabelLine}\n\t */\n\tfunction getSectionLabelLine(string, lineIndex, allSrcLines) {\n\t\tcurrentSection = parseSectionLabel(string);\n\n\t\tincreaseSectionStats(currentSection.label);\n\t\tcurrentSectionStats = getSectionCount(currentSection.label);\n\n\t\tconst line = {\n\t\t\tstring,\n\t\t\ttype: lineTypes.SECTION_LABEL,\n\t\t\tmodel: currentSection,\n\t\t\tindex: currentSectionStats.count,\n\t\t\tindexWithoutRepeats: currentSectionStats.withoutRepeats,\n\t\t\tid: currentSection.label + currentSectionStats.count,\n\t\t};\n\n\t\tshouldCopySection =\n\t\t\tisCurrentSectionEmpty(lineIndex, allSrcLines) &&\n\t\t\tcurrentSectionStats.count > 1;\n\t\tif (shouldCopySection) {\n\t\t\tline.isFromSectionCopy = true;\n\t\t}\n\n\t\tshouldRepeatSection = currentSection.repeatTimes > 0;\n\t\tpreviousSectionLabelLine = _cloneDeep(line);\n\n\t\tif (!isFirstOfLabel(currentSection, allLines)) {\n\t\t\tblueprint = getNthOfLabel(allLines, currentSection.label, 1);\n\t\t\tblueprintIndex = 0;\n\t\t\tisRepeatingChords = true;\n\t\t} else {\n\t\t\tisRepeatingChords = false;\n\t\t}\n\t\treturn line;\n\t}\n\n\t/**\n\t * @returns {SongLyricLine}\n\t */\n\tfunction getEmptyLine(string) {\n\t\treturn {\n\t\t\tstring,\n\t\t\ttype: lineTypes.EMPTY_LINE,\n\t\t};\n\t}\n\n\t/**\n\t * @returns {SongChordLine|SongLyricLine}\n\t */\n\tfunction getChordLine(string) {\n\t\tlet line;\n\t\ttry {\n\t\t\tconst model = parseChordLine(string, {\n\t\t\t\ttimeSignature: currentTimeSignature,\n\t\t\t});\n\t\t\tline = {\n\t\t\t\tstring,\n\t\t\t\ttype: lineTypes.CHORD,\n\t\t\t\tmodel,\n\t\t\t};\n\t\t\taddPreviousChordLine(line);\n\t\t} catch (e) {\n\t\t\tline = getLyricLine(string);\n\t\t}\n\t\treturn line;\n\t}\n\n\tfunction addPreviousChordLine(line) {\n\t\tif (previousChordLines.length >= MAX_PREVIOUS_CHORD_LINES) {\n\t\t\tpreviousChordLines.shift();\n\t\t}\n\t\tpreviousChordLines.push(line);\n\t}\n\n\t/**\n\t * @returns {SongChordLine|SongLyricLine}\n\t */\n\tfunction getRepeatedChordLine(string) {\n\t\tconst repeatString = clearSpaces(string);\n\t\tconst sliceStart = -repeatString.length;\n\t\tconst sliceEnd = sliceStart < -1 ? sliceStart + 1 : undefined;\n\n\t\tif (previousChordLines.length >= repeatString.length) {\n\t\t\treturn {\n\t\t\t\t..._cloneDeep(\n\t\t\t\t\t...previousChordLines.slice(sliceStart, sliceEnd)\n\t\t\t\t),\n\t\t\t\tisFromChordLineRepeater: true,\n\t\t\t};\n\t\t}\n\t\treturn getLyricLine(string);\n\t}\n\n\t/**\n\t * @returns {SongLyricLine}\n\t */\n\tfunction getLyricLine(string) {\n\t\treturn {\n\t\t\tstring,\n\t\t\ttype: lineTypes.LYRIC,\n\t\t\tmodel: parseLyricLine(string),\n\t\t};\n\t}\n\n\tfunction increaseSectionStats(label, isRepeated = false) {\n\t\tif (!sectionsStats[label]) {\n\t\t\tsectionsStats[label] = {\n\t\t\t\tcount: 1,\n\t\t\t\twithoutRepeats: 1,\n\t\t\t};\n\t\t} else {\n\t\t\tsectionsStats[label].count++;\n\t\t\tif (!isRepeated) {\n\t\t\t\tsectionsStats[label].withoutRepeats++;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getSectionCount(label) {\n\t\treturn sectionsStats[label];\n\t}\n\n\tfunction repeatLinesFromBlueprint(line) {\n\t\tif (isRepeatingChords && line.type !== lineTypes.SECTION_LABEL) {\n\t\t\tblueprintLine = blueprint[blueprintIndex];\n\t\t\tlet repeatedLine;\n\n\t\t\twhile (shouldRepeatLineFromBlueprint(blueprintLine, line)) {\n\t\t\t\tif (blueprintLine.type === lineTypes.CHORD) {\n\t\t\t\t\taddPreviousChordLine(_cloneDeep(blueprintLine));\n\t\t\t\t}\n\t\t\t\trepeatedLine = {\n\t\t\t\t\t..._cloneDeep(blueprintLine),\n\t\t\t\t\tisFromAutoRepeatChords: true,\n\t\t\t\t};\n\t\t\t\tallLines.push(repeatedLine);\n\t\t\t\tblueprintIndex++;\n\t\t\t\tblueprintLine = blueprint[blueprintIndex];\n\t\t\t}\n\t\t\tblueprintIndex++;\n\t\t}\n\t}\n\n\tfunction copySection() {\n\t\tif (shouldCopySection) {\n\t\t\tconst toCopy = getNthOfLabel(\n\t\t\t\tallLines,\n\t\t\t\tcurrentSection.label,\n\t\t\t\tcurrentSection.copyIndex\n\t\t\t).map((line) => ({\n\t\t\t\t..._cloneDeep(line),\n\t\t\t\tisFromSectionCopy: true,\n\t\t\t}));\n\n\t\t\tif (!toCopy.length) return;\n\n\t\t\tif (endsWithEmptyLine(toCopy)) {\n\t\t\t\ttoCopy.pop();\n\t\t\t}\n\n\t\t\tallLines.push(..._cloneDeep(toCopy));\n\n\t\t\tshouldCopySection = false;\n\t\t}\n\t}\n\n\tfunction isCurrentSectionEmpty(lineIndex, allSrcLines) {\n\t\tconst remainingLines = allSrcLines.slice(lineIndex + 1);\n\n\t\tlet nextSectionIndex = remainingLines.findIndex((line) =>\n\t\t\tisSectionLabel(line)\n\t\t);\n\n\t\tif (nextSectionIndex === 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst currentSectionContent = remainingLines\n\t\t\t.slice(0, nextSectionIndex !== -1 ? nextSectionIndex : undefined)\n\t\t\t.filter((line) => !(isTimeSignature(line) || isEmptyLine(line)));\n\n\t\treturn currentSectionContent.length === 0;\n\t}\n\n\tfunction repeatSection(lineIndex, allSrcLines) {\n\t\tif (\n\t\t\tshouldRepeatSection &&\n\t\t\tisLastLineOfSection(lineIndex, allSrcLines)\n\t\t) {\n\t\t\tconst toRepeat = getNthOfLabel(\n\t\t\t\tallLines,\n\t\t\t\tcurrentSection.label,\n\t\t\t\tcurrentSectionStats.count\n\t\t\t).map((line) => ({\n\t\t\t\t..._cloneDeep(line),\n\t\t\t\tisFromSectionRepeat: true,\n\t\t\t}));\n\t\t\tlet sectionLabelLine;\n\n\t\t\tfor (let i = 1; i < currentSection.repeatTimes; i++) {\n\t\t\t\tincreaseSectionStats(currentSection.label, true);\n\t\t\t\tcurrentSectionStats = getSectionCount(currentSection.label);\n\n\t\t\t\tsectionLabelLine = {\n\t\t\t\t\t..._cloneDeep(previousSectionLabelLine),\n\t\t\t\t\tindex: currentSectionStats.count,\n\t\t\t\t\tindexWithoutRepeats: currentSectionStats.withoutRepeats,\n\t\t\t\t\tid: currentSection.label + currentSectionStats.count,\n\t\t\t\t\tisFromSectionRepeat: true,\n\t\t\t\t};\n\t\t\t\tallLines.push(sectionLabelLine);\n\t\t\t\tallLines.push(..._cloneDeep(toRepeat));\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {\n\t\taddLine(lineSrc, lineIndex, allSrcLines) {\n\t\t\tlet line;\n\t\t\tif (isTimeSignature(lineSrc)) {\n\t\t\t\tline = getTimeSignatureLine(lineSrc);\n\t\t\t} else if (isSectionLabel(lineSrc)) {\n\t\t\t\tline = getSectionLabelLine(lineSrc, lineIndex, allSrcLines);\n\t\t\t} else if (isChordLine(lineSrc)) {\n\t\t\t\tline = getChordLine(lineSrc);\n\t\t\t} else if (isChordLineRepeater(lineSrc)) {\n\t\t\t\tline = getRepeatedChordLine(lineSrc);\n\t\t\t} else if (isEmptyLine(lineSrc)) {\n\t\t\t\tline = getEmptyLine(lineSrc);\n\t\t\t} else {\n\t\t\t\tline = getLyricLine(lineSrc);\n\t\t\t}\n\n\t\t\trepeatLinesFromBlueprint(line);\n\n\t\t\tallLines.push(line);\n\n\t\t\tcopySection();\n\t\t\trepeatSection(lineIndex, allSrcLines);\n\t\t},\n\n\t\t/**\n\t\t * returns {SongLine[]}\n\t\t */\n\t\tasArray() {\n\t\t\treturn _cloneDeep(allLines);\n\t\t},\n\n\t\tflagPositionedChords() {\n\t\t\tlet nextLine;\n\t\t\tlet lineChordCount;\n\n\t\t\tallLines.forEach((line, lineIndex) => {\n\t\t\t\tnextLine = allLines[lineIndex + 1];\n\n\t\t\t\tif (shouldPositionChords(line, nextLine)) {\n\t\t\t\t\tlineChordCount = 0;\n\t\t\t\t\tline.model.hasPositionedChords = true;\n\t\t\t\t\tline.model = forEachChordInChordLine(\n\t\t\t\t\t\tline.model,\n\t\t\t\t\t\t(chord) => {\n\t\t\t\t\t\t\tchord.isPositioned =\n\t\t\t\t\t\t\t\tlineChordCount <\n\t\t\t\t\t\t\t\tnextLine.model.chordPositions.length;\n\t\t\t\t\t\t\tlineChordCount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} else if (line.type === lineTypes.CHORD) {\n\t\t\t\t\tline.model.hasPositionedChords = false;\n\t\t\t\t\tline.model = forEachChordInChordLine(\n\t\t\t\t\t\tline.model,\n\t\t\t\t\t\t(chord) => {\n\t\t\t\t\t\t\tchord.isPositioned = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t};\n}\n\nfunction isFirstOfLabel(currentLabel, allLines) {\n\treturn allLines.every(\n\t\t(line) =>\n\t\t\tline.type === lineTypes.SECTION_LABEL &&\n\t\t\tline.model.label !== currentLabel.label\n\t);\n}\n\nfunction shouldRepeatLineFromBlueprint(blueprintLine, currentLine) {\n\treturn (\n\t\tblueprintLine &&\n\t\tblueprintLine.type !== lineTypes.LYRIC &&\n\t\tblueprintLine.type !== lineTypes.EMPTY_LINE &&\n\t\tblueprintLine.type !== currentLine.type &&\n\t\tcurrentLine.type !== lineTypes.EMPTY_LINE\n\t);\n}\n\nfunction isLastLineOfSection(lineIndex, allSrcLines) {\n\tconst nextLine = allSrcLines[lineIndex + 1];\n\treturn typeof nextLine === 'undefined' || isSectionLabel(nextLine);\n}\n\nfunction shouldPositionChords(line, nextLine) {\n\treturn (\n\t\tline.type === lineTypes.CHORD &&\n\t\tnextLine &&\n\t\tnextLine.type === lineTypes.LYRIC &&\n\t\tnextLine.model.chordPositions.length > 0\n\t);\n}\n\nfunction endsWithEmptyLine(allLines) {\n\tconst lastLine = allLines[allLines.length - 1];\n\treturn lastLine.type === lineTypes.EMPTY_LINE;\n}\n","import isSectionLabel, { sectionLabelRegexp } from './matchers/isSectionLabel';\n\n/**\n * @typedef {Object} SectionLabel\n * @type {Object}\n * @property {String} string - original string\n * @property {String} label - label of the section\n * @property {Number} repeatTimes - number of times the section should be repeated\n * @property {Number} copyIndex - index of the section that should be copied\n */\n\n/**\n * @param {String} string\n * @returns {SectionLabel}\n */\nexport default function parseSectionLabel(string) {\n\tif (!isSectionLabel(string)) {\n\t\tthrow new TypeError(\n\t\t\t'Expected section identifier string, received: ' + string\n\t\t);\n\t}\n\n\tconst found = string.trim().match(sectionLabelRegexp);\n\n\treturn {\n\t\tstring,\n\t\tlabel: found[1],\n\t\tcopyIndex: found[2] ? Number.parseInt(found[2]) : 1,\n\t\trepeatTimes: found[3] ? Number.parseInt(found[3].replace(' x', '')) : 0,\n\t};\n}\n","import syntax from '../syntax';\nimport clearSpaces from '../helper/clearSpaces';\n\nexport default function isChordLineRepeater(string) {\n\tconst candidate = clearSpaces(string);\n\treturn (\n\t\tcandidate === syntax.chordLineRepeat ||\n\t\tcandidate === syntax.chordLineRepeat.repeat(2)\n\t);\n}\n","import _isArray from 'lodash/isArray';\n\nimport escapeHTML from '../core/dom/escapeHTML';\nimport stripTags from '../core/dom/stripTags';\n\nimport songLinesFactory from './songLinesFactory';\n\nimport getAllChordsInSong from './getAllChordsInSong';\n\n/**\n * @typedef {Object} Song\n * @type {Object}\n * @property {SongLine[]} allLines\n * @property {SongChord[]} allChords\n */\n\n/**\n * @typedef {Object} SongChord\n * @type {Object}\n * @property {ChordDef} model\n * @property {number} occurrences - number of times the chord appears in the song\n */\n\n/**\n * @param {string|array} songSrc\n * @returns {Song}\n */\nexport default function parseSong(songSrc) {\n\tconst songArray = !_isArray(songSrc) ? songSrc.split('\\n') : songSrc;\n\n\tconst songLines = songLinesFactory();\n\n\t/**\n\t * @type {SongLine[]}\n\t */\n\tsongArray.map(escapeHTML).map(stripTags).forEach(songLines.addLine);\n\n\tsongLines.flagPositionedChords();\n\n\tconst allLines = songLines.asArray();\n\tconst allChords = getAllChordsInSong(allLines);\n\n\treturn {\n\t\tallLines,\n\t\tallChords,\n\t};\n}\n","import _findIndex from 'lodash/findIndex';\nimport _isEqual from 'lodash/isEqual';\nimport _cloneDeep from 'lodash/cloneDeep';\n\nimport { forEachChordInSong } from './helper/songs';\n\n/**\n * @param {SongLine[]} allLines\n * @returns {SongChord[]}\n */\nexport default function getAllChordsInSong(allLines) {\n\tconst allChords = [];\n\tlet i;\n\n\tforEachChordInSong(allLines, (chord) => {\n\t\ti = _findIndex(allChords, (o) => _isEqual(o.model, chord.model));\n\n\t\tif (i === -1) {\n\t\t\tallChords.push({\n\t\t\t\tmodel: _cloneDeep(chord.model),\n\t\t\t\toccurrences: 1,\n\t\t\t});\n\t\t} else {\n\t\t\tallChords[i].occurrences++;\n\t\t}\n\t});\n\n\treturn allChords;\n}\n","export default {\n\tbarRepeat: '%',\n\tbarSeparator: '|',\n\tchordBeat: '.',\n\tchordLineOffsetSpacer: ' ',\n\temptyBeatSpaces: 1,\n\tlyricsSpacer: ' ',\n\tnoChordSymbol: 'NC',\n\tspacesAfterDefault: 2,\n};\n","import lineTypes from '../../../parser/lineTypes';\nimport symbols from '../../symbols';\n\n/**\n * @param {SongLine[]} allLines\n * @returns {Array}\n */\nexport default function getMaxBeatsWidth(allLines) {\n\tconst maxBeatsWidth = [];\n\n\tallLines\n\t\t.filter((line) => line.type === lineTypes.CHORD)\n\t\t.forEach((line) => {\n\t\t\tline.model.allBars.forEach((bar, barIndex) => {\n\t\t\t\tif (!maxBeatsWidth[barIndex]) {\n\t\t\t\t\tmaxBeatsWidth[barIndex] = {};\n\n\t\t\t\t\tfor (let i = 1; i <= bar.timeSignature.beatCount; i++) {\n\t\t\t\t\t\tmaxBeatsWidth[barIndex][i] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbar.allChords.forEach((chord) => {\n\t\t\t\t\tlet symbolLength = chord.symbol.length;\n\t\t\t\t\tif (bar.shouldPrintChordsDuration) {\n\t\t\t\t\t\tsymbolLength += symbols.chordBeat.repeat(\n\t\t\t\t\t\t\tchord.duration\n\t\t\t\t\t\t).length;\n\t\t\t\t\t}\n\t\t\t\t\tmaxBeatsWidth[barIndex][chord.beat] = Math.max(\n\t\t\t\t\t\tmaxBeatsWidth[barIndex][chord.beat],\n\t\t\t\t\t\tsymbolLength\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\treturn maxBeatsWidth;\n}\n","import _cloneDeep from 'lodash/cloneDeep';\nimport symbols from '../../symbols';\n\nconst allMasks = {\n\t0: {\n\t\t'': [],\n\t},\n\n\t2: {\n\t\t2: [3], // 'A   '\n\t\t11: [3, 2], // 'A   B  ',\n\t},\n\n\t3: {\n\t\t3: [3], // 'A   '\n\t\t12: [2, 4], // 'A  B    '\n\t\t21: [6, 0], // 'A      C'\n\t\t111: [2, 2, 0], // 'A  B  C'\n\t},\n\n\t4: {\n\t\t4: [3], // 'A   ',\n\t\t13: [1, 4], // 'A B    ',\n\t\t22: [3, 2], // 'A   B  ',\n\t\t31: [5, 0], // 'A     B',\n\t\t112: [1, 1, 3], // 'A B C   ',\n\t\t121: [1, 4, 0], // 'A B    C',\n\t\t211: [4, 1, 0], // 'A    B C',\n\t\t1111: [2, 2, 2, 0], // 'A  B  C  D',\n\t},\n};\n\n/**\n * @param {ChordLine} chordLineInput\n */\nexport default function space(chordLineInput) {\n\tconst chordLine = _cloneDeep(chordLineInput);\n\n\tlet beatCount = 0;\n\tlet chordCount = 0;\n\tlet chordPattern = '';\n\tlet chordSpaces = [];\n\n\tchordLine.allBars.forEach((bar) => {\n\t\tbeatCount = 0;\n\t\tchordPattern = '';\n\t\tchordSpaces = [];\n\t\tchordCount = bar.allChords.length;\n\n\t\tbar.allChords.forEach((chord) => {\n\t\t\tchordPattern += chord.duration.toString();\n\t\t\tbeatCount += chord.duration;\n\t\t});\n\n\t\tif (allMasks[beatCount] && allMasks[beatCount][chordPattern]) {\n\t\t\tchordSpaces = allMasks[beatCount][chordPattern];\n\t\t}\n\n\t\tfor (let i = 0; i < chordCount; i++) {\n\t\t\tbar.allChords[i].spacesAfter =\n\t\t\t\ttypeof chordSpaces[i] !== 'undefined'\n\t\t\t\t\t? chordSpaces[i]\n\t\t\t\t\t: symbols.spacesAfterDefault;\n\t\t}\n\t});\n\n\treturn chordLine;\n}\n","import _cloneDeep from 'lodash/cloneDeep';\nimport symbols from '../../symbols';\n\nexport default function space(chordLineInput, maxBeatsWidth) {\n\tconst chordLine = _cloneDeep(chordLineInput);\n\n\tlet beatMaxWidth;\n\n\tchordLine.allBars.forEach((bar, barIndex) => {\n\t\tbar.allChords.forEach((chord) => {\n\t\t\tlet symbolLength = chord.symbol.length;\n\t\t\tif (bar.shouldPrintChordsDuration) {\n\t\t\t\tsymbolLength += symbols.chordBeat.repeat(chord.duration).length;\n\t\t\t}\n\n\t\t\tchord.spacesWithin =\n\t\t\t\tmaxBeatsWidth[barIndex][chord.beat] - symbolLength;\n\t\t\tchord.spacesAfter = 0;\n\n\t\t\tif (chord.beat !== bar.timeSignature.beatCount) {\n\t\t\t\tchord.spacesAfter = symbols.spacesAfterDefault;\n\n\t\t\t\tfor (\n\t\t\t\t\tlet i = chord.beat + 1;\n\t\t\t\t\ti < chord.beat + chord.duration;\n\t\t\t\t\ti++\n\t\t\t\t) {\n\t\t\t\t\tbeatMaxWidth = maxBeatsWidth[barIndex][i];\n\n\t\t\t\t\tchord.spacesAfter += beatMaxWidth\n\t\t\t\t\t\t? beatMaxWidth\n\t\t\t\t\t\t: symbols.emptyBeatSpaces;\n\n\t\t\t\t\tif (i !== bar.timeSignature.beatCount && beatMaxWidth) {\n\t\t\t\t\t\tchord.spacesAfter += symbols.spacesAfterDefault;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\treturn chordLine;\n}\n","import _cloneDeep from 'lodash/cloneDeep';\n\nimport symbols from '../../symbols';\n\nconst chordSpaceAfterDefault = 1;\n\n/**\n * @param {ChordLine} chordLineInput\n * @param {LyricLine} lyricsLineInput\n * @returns {Object}\n */\nexport default function space(chordLineInput, lyricsLineInput) {\n\tconst chordLine = _cloneDeep(chordLineInput);\n\tconst lyricsLine = _cloneDeep(lyricsLineInput);\n\n\tif (hasNoPositionMarkers(lyricsLine)) {\n\t\treturn {\n\t\t\tchordLine,\n\t\t\tlyricsLine,\n\t\t};\n\t}\n\n\tconst tokenizedLyrics = lyricsLine.chordPositions.map(\n\t\t(position, i, allPositions) => {\n\t\t\treturn lyricsLine.lyrics.substring(position, allPositions[i + 1]);\n\t\t}\n\t);\n\tlet spacedLyricsLine = '';\n\n\tlet chordToken;\n\tlet lyricToken;\n\tlet currentBarIndex = 0;\n\n\tchordLine.allBars.forEach((bar, barIndex) => {\n\t\tbar.allChords.forEach((chord, chordIndex) => {\n\t\t\tlyricToken = tokenizedLyrics.shift();\n\n\t\t\tif (lyricToken) {\n\t\t\t\tchordToken = chord.symbol;\n\n\t\t\t\tif (bar.shouldPrintChordsDuration) {\n\t\t\t\t\tchordToken += symbols.chordBeat.repeat(chord.duration);\n\t\t\t\t}\n\n\t\t\t\tif (isFirstChord(barIndex, chordIndex)) {\n\t\t\t\t\tchordToken = symbols.barSeparator + chordToken;\n\t\t\t\t} else if (isNewBar(currentBarIndex, barIndex)) {\n\t\t\t\t\tchordToken = symbols.barSeparator + chordToken;\n\t\t\t\t\tcurrentBarIndex = barIndex;\n\t\t\t\t}\n\n\t\t\t\tif (startsWithSpace(lyricToken)) {\n\t\t\t\t\tlyricToken =\n\t\t\t\t\t\tsymbols.lyricsSpacer.repeat(chordToken.length) +\n\t\t\t\t\t\tlyricToken;\n\t\t\t\t}\n\n\t\t\t\tif (lyricToken.length - chordToken.length > 0) {\n\t\t\t\t\tchord.spacesAfter = lyricToken.length - chordToken.length;\n\t\t\t\t} else {\n\t\t\t\t\tchord.spacesAfter = chordSpaceAfterDefault;\n\t\t\t\t\tconst lyricsSpaceAfter =\n\t\t\t\t\t\tchordToken.length -\n\t\t\t\t\t\tlyricToken.length +\n\t\t\t\t\t\tchordSpaceAfterDefault;\n\t\t\t\t\tlyricToken += symbols.lyricsSpacer.repeat(lyricsSpaceAfter);\n\t\t\t\t}\n\t\t\t\tspacedLyricsLine += lyricToken;\n\t\t\t} else {\n\t\t\t\tchord.spacesAfter = chordSpaceAfterDefault;\n\t\t\t}\n\t\t\tchord.spacesWithin = 0;\n\t\t});\n\t});\n\n\tif (shouldOffsetChordLine(lyricsLine)) {\n\t\tconst chordLineOffset = lyricsLine.chordPositions[0];\n\t\tchordLine.offset = chordLineOffset;\n\t\tspacedLyricsLine =\n\t\t\tlyricsLine.lyrics.substring(0, chordLineOffset) + spacedLyricsLine;\n\t}\n\n\tif (tokenizedLyrics.length) {\n\t\tspacedLyricsLine += tokenizedLyrics.join('');\n\t}\n\tlyricsLine.lyrics = trimEnd(spacedLyricsLine);\n\n\treturn {\n\t\tchordLine,\n\t\tlyricsLine,\n\t};\n}\n\nconst hasNoPositionMarkers = (lyricsLine) =>\n\tlyricsLine.chordPositions.length === 0;\n\nconst shouldOffsetChordLine = (lyricsLine) => lyricsLine.chordPositions[0] > 0;\n\nconst isFirstChord = (barIndex, chordIndex) =>\n\tbarIndex === 0 && chordIndex === 0;\n\nconst isNewBar = (currentBarIndex, barIndex) => currentBarIndex !== barIndex;\n\n// source: https://github.com/es-shims/String.prototype.trimEnd/blob/main/implementation.js\nconst trimEnd = (str) => {\n\tconst endWhitespace =\n\t\t// eslint-disable-next-line max-len,no-control-regex\n\t\t/[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]*$/;\n\treturn str.replace(endWhitespace, '');\n};\n\nconst startsWithSpace = (str) => str.indexOf(' ') === 0;\n","import _isFinite from 'lodash/isFinite';\n\nimport renderChordSymbol from './renderChordSymbol';\nimport barContentTpl from './tpl/barContent.hbs';\n\nconst space = ' ';\n\nconst defaultSpacesWithin = 0;\nconst defaultSpacesAfter = 2;\n\n/**\n * @param {Bar} bar\n * @returns {String} rendered html\n */\nexport default function renderBarContent(bar) {\n\tlet spacesWithin = 0;\n\tlet spacesAfter = 0;\n\n\tconst barContent = bar.allChords.reduce((rendering, chord) => {\n\t\tspacesWithin = _isFinite(chord.spacesWithin)\n\t\t\t? chord.spacesWithin\n\t\t\t: defaultSpacesWithin;\n\t\tspacesAfter = _isFinite(chord.spacesAfter)\n\t\t\t? chord.spacesAfter\n\t\t\t: defaultSpacesAfter;\n\n\t\trendering +=\n\t\t\trenderChordSymbol(chord, bar.shouldPrintChordsDuration) +\n\t\t\tspace.repeat(spacesWithin) +\n\t\t\tspace.repeat(spacesAfter);\n\n\t\treturn rendering;\n\t}, '');\n\n\treturn barContentTpl({ barContent });\n}\n","import chordSymbolTpl from './tpl/chordSymbol.hbs';\nimport symbols from '../symbols';\n\n/**\n * @param {ChordLineChord} chord\n * @param {Boolean} shouldPrintChordsDuration\n * @returns {String} rendered html\n */\nexport default function renderChordSymbol(\n\tchord,\n\tshouldPrintChordsDuration = false\n) {\n\treturn chordSymbolTpl({\n\t\tchordSymbol: chord.symbol,\n\t\tchordDuration: shouldPrintChordsDuration\n\t\t\t? symbols.chordBeat.repeat(chord.duration)\n\t\t\t: false,\n\t});\n}\n","import chordLineTpl from './tpl/chordLine.hbs';\n\nimport renderBarContent from './renderBarContent';\nimport barSeparatorTpl from './tpl/barSeparator.hbs';\nimport symbols from '../symbols';\n\n/**\n * @param {ChordLine} chordLineModel\n * @returns {String} rendered html\n */\nexport default function renderChordLine(chordLineModel) {\n\tconst allBarsRendered = chordLineModel.allBars.map((bar) =>\n\t\trenderBarContent(bar)\n\t);\n\n\tconst barSeparator = barSeparatorTpl({\n\t\tbarSeparator: symbols.barSeparator,\n\t});\n\n\tconst chordLine =\n\t\tbarSeparator + allBarsRendered.join(barSeparator) + barSeparator;\n\n\tconst chordLineOffset = symbols.chordLineOffsetSpacer.repeat(\n\t\tchordLineModel.offset || 0\n\t);\n\n\treturn chordLineTpl({ chordLineOffset, chordLine });\n}\n","import emptyLineTpl from './tpl/emptyLine.hbs';\n\n/**\n * @returns {String} rendered html\n */\nexport default function render() {\n\treturn emptyLineTpl();\n}\n","import lineTpl from './tpl/line.hbs';\n\n/**\n * @param {string} line\n * @param {Boolean} isFromSectionRepeat\n * @param {Boolean} isFromAutoRepeatChords\n * @param {Boolean} isFromChordLineRepeater\n * @param {Boolean} isFromSectionCopy\n * @returns {String} rendered html\n */\nexport default function render(\n\tline,\n\t{\n\t\tisFromSectionRepeat = false,\n\t\tisFromAutoRepeatChords = false,\n\t\tisFromChordLineRepeater = false,\n\t\tisFromSectionCopy = false,\n\t} = {}\n) {\n\tconst lineClasses = ['cmLine'];\n\tif (isFromSectionRepeat) {\n\t\tlineClasses.push('cmLine--isFromSectionRepeat');\n\t}\n\tif (isFromAutoRepeatChords) {\n\t\tlineClasses.push('cmLine--isFromAutoRepeatChords');\n\t}\n\tif (isFromChordLineRepeater) {\n\t\tlineClasses.push('cmLine--isFromChordLineRepeater');\n\t}\n\tif (isFromSectionCopy) {\n\t\tlineClasses.push('cmLine--isFromSectionCopy');\n\t}\n\n\treturn lineTpl({\n\t\tline,\n\t\tlineClasses: lineClasses.join(' '),\n\t});\n}\n","import sectionLabelTpl from './tpl/sectionLabel.hbs';\n\nconst labelsMapping = {\n\ta: 'adlib',\n\tb: 'bridge',\n\tc: 'chorus',\n\ti: 'intro',\n\to: 'outro',\n\tp: 'pre-chorus',\n\ts: 'solo',\n\tu: 'interlude',\n\tv: 'verse',\n};\n\n/**\n * @param {SongSectionLabelLine} sectionLabelLine\n * @param {Boolean} expandSectionRepeats\n * @param {Object} sectionsStats - key = section label, value = section count in song\n * @returns {String} rendered html\n */\nexport default function renderSectionLabel(\n\tsectionLabelLine,\n\t{ expandSectionRepeats = true, sectionsStats = {} } = {}\n) {\n\tconst { model, index, indexWithoutRepeats } = sectionLabelLine;\n\tconst labelRaw = labelsMapping[model.label]\n\t\t? labelsMapping[model.label]\n\t\t: model.label;\n\n\tlet rendered = labelRaw[0].toUpperCase() + labelRaw.substring(1);\n\n\tif (sectionsStats[model.label] > 1) {\n\t\trendered += ' ';\n\t\trendered += expandSectionRepeats ? index : indexWithoutRepeats;\n\t}\n\n\tif (!expandSectionRepeats && model.repeatTimes) {\n\t\trendered += ' x' + model.repeatTimes;\n\t}\n\n\treturn sectionLabelTpl({ sectionLabel: rendered });\n}\n","import lyricLineTpl from './tpl/lyricLine.hbs';\n\n/**\n * @param {SongLyricLine} lyricLine\n * @param {Boolean} alignChordsWithLyrics\n * @param {('all'|'lyrics'|'chords'|'chordsFirstLyricLine')} chordsAndLyricsDisplay\n * @returns {String} rendered html\n */\nexport default function render(\n\tlyricLine,\n\t{ alignChordsWithLyrics = false, chordsAndLyricsDisplay = 'all' } = {}\n) {\n\tconst trimmedLyricLine = shouldTrimLine(\n\t\talignChordsWithLyrics,\n\t\tchordsAndLyricsDisplay\n\t)\n\t\t? lyricLine.model.lyrics.trim()\n\t\t: lyricLine.model.lyrics;\n\treturn lyricLineTpl({ lyricLine: trimmedLyricLine });\n}\n\nconst shouldTrimLine = (alignChordsWithLyrics, chordsAndLyricsDisplay) =>\n\t!alignChordsWithLyrics || chordsAndLyricsDisplay === 'lyrics';\n","import timeSignatureTpl from './tpl/timeSignature.hbs';\n\n/**\n * @param {SongTimeSignatureLine} timeSignatureLine\n * @returns {String} rendered html\n */\nexport default function render(timeSignatureLine) {\n\treturn timeSignatureTpl({ timeSignature: timeSignatureLine.string });\n}\n","import syntax from '../../parser/syntax';\nimport symbols from '../symbols';\nimport { chordRendererFactory } from 'chord-symbol';\n\nconst defaultRenderChord = chordRendererFactory();\n\n/**\n * @param {Chord|String} model\n * @param {Function} renderChord\n * @returns {string}\n */\nexport default function (model, renderChord = defaultRenderChord) {\n\tswitch (model) {\n\t\tcase syntax.noChord:\n\t\t\treturn symbols.noChordSymbol;\n\t\tcase symbols.barRepeat:\n\t\t\treturn symbols.barRepeat;\n\t\tdefault:\n\t\t\treturn renderChord(model);\n\t}\n}\n","import lineTypes from '../../parser/lineTypes';\n\n/**\n * Returns the number of usage of each section label\n *\n * @param {SongSectionLabelLine[]} allLines\n * @returns {Object} key = label, value = number of usage\n */\nexport default function getSectionsStats(allLines) {\n\tconst stats = {};\n\n\tallLines\n\t\t.filter((line) => line.type === lineTypes.SECTION_LABEL)\n\t\t.forEach((line) => {\n\t\t\tif (!stats[line.model.label]) {\n\t\t\t\tstats[line.model.label] = 1;\n\t\t\t} else {\n\t\t\t\tstats[line.model.label]++;\n\t\t\t}\n\t\t});\n\n\treturn stats;\n}\n","import syntax from '../../parser/syntax';\n\n/**\n * Returns the most used accidental of a song.\n *\n * @param {SongChord[]} allChords\n * @returns {('flat'|'sharp')}\n */\nexport default function getMainAccidental(allChords) {\n\tlet rootNote = '';\n\tlet flatCount = 0;\n\tlet sharpCount = 0;\n\n\tallChords\n\t\t.filter((chord) => chord.model !== syntax.noChord)\n\t\t.forEach((chord) => {\n\t\t\trootNote = chord.model.formatted.rootNote;\n\n\t\t\tif (rootNote.length === 2) {\n\t\t\t\tlet accidental = rootNote[1];\n\n\t\t\t\tif (accidental === 'b') {\n\t\t\t\t\tflatCount += chord.occurrences;\n\t\t\t\t} else {\n\t\t\t\t\tsharpCount += chord.occurrences;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\treturn flatCount > sharpCount ? 'flat' : 'sharp';\n}\n","import lineTypes from '../parser/lineTypes';\nimport symbols from './symbols';\n\nconst replaceRepeatedBars = (line, { alignChordsWithLyrics }) => {\n\tif (line.type === lineTypes.CHORD) {\n\t\tline.model.allBars.forEach((bar) => {\n\t\t\tif (shouldReplaceWithBarRepeat(line, bar, alignChordsWithLyrics)) {\n\t\t\t\tbar.allChords = [\n\t\t\t\t\t{\n\t\t\t\t\t\tstring: symbols.barRepeat,\n\t\t\t\t\t\tmodel: symbols.barRepeat,\n\t\t\t\t\t\tsymbol: symbols.barRepeat,\n\t\t\t\t\t\tduration: bar.timeSignature.beatCount,\n\t\t\t\t\t\tbeat: 1,\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}\n\t\t});\n\t}\n\n\treturn line;\n};\n\nconst shouldReplaceWithBarRepeat = (line, bar, alignChordsWithLyrics) => {\n\treturn (\n\t\tbar.isRepeated &&\n\t\t!barHasMultiplePositionedChords(line, bar, alignChordsWithLyrics)\n\t);\n};\n\nconst barHasMultiplePositionedChords = (line, bar, alignChordsWithLyrics) => {\n\treturn (\n\t\talignChordsWithLyrics &&\n\t\tline.model.hasPositionedChords &&\n\t\tbar.allChords.length > 1 &&\n\t\tbar.allChords.some((chord) => chord.isPositioned)\n\t);\n};\n\nexport default replaceRepeatedBars;\n","import {\n\trenderSong as renderSongCm,\n\tparseSong,\n} from '../../../chord-mark/src/chordMark';\n\nexport default function renderSong(songTxt, renderOptions) {\n\tconst parsed = parseSong(songTxt);\n\treturn renderSongCm(parsed, {\n\t\t...renderOptions,\n\t\tprintChordsDuration: 'uneven',\n\t});\n}\n","import getMaxBeatsWidth from '../spacers/chord/getMaxBeatsWidth';\n\nimport simpleChordSpacer from '../spacers/chord/simple';\nimport alignedChordSpacer from '../spacers/chord/aligned';\nimport chordLyricsSpacer from '../spacers/chord/chordLyrics';\n\nimport { forEachChordInSong } from '../../parser/helper/songs';\n\nimport renderChordLineModel from './renderChordLine';\nimport renderEmptyLine from './renderEmptyLine';\nimport renderLine from './renderLine';\nimport renderSectionLabel from './renderSectionLabel';\nimport renderLyricLine from './renderLyricLine';\nimport renderTimeSignature from './renderTimeSignature';\n\nimport songTpl from './tpl/song.hbs';\nimport getChordSymbol from '../helpers/getChordSymbol';\nimport getSectionsStats from '../helpers/getSectionsStats';\nimport getMainAccidental from '../helpers/getMainAccidental';\n\nimport { chordRendererFactory } from 'chord-symbol';\n\nimport lineTypes from '../../parser/lineTypes';\nimport replaceRepeatedBars from '../replaceRepeatedBars';\n\n/**\n * @param {Song} parsedSong\n * @param {Boolean} alignBars\n * @param {Boolean} alignChordsWithLyrics\n * @param {('all'|'lyrics'|'chords'|'chordsFirstLyricLine')} chordsAndLyricsDisplay\n * @param {Number} transposeValue\n * @param {('auto'|'flat'|'sharp')} accidentalsType\n * @param {Boolean} harmonizeAccidentals\n * @param {Boolean} expandSectionRepeats\n * @param {Boolean} autoRepeatChords\n * @param {Boolean|('none'|'max'|'core')} simplifyChords\n * @param {Boolean} useShortNamings\n * @param {('never'|'uneven'|'always')} printChordsDuration\n * @returns {String} rendered HTML\n */\n// eslint-disable-next-line max-lines-per-function\nexport default function renderSong(\n\tparsedSong,\n\t{\n\t\talignBars = false,\n\t\talignChordsWithLyrics = false,\n\t\tchordsAndLyricsDisplay = 'all',\n\t\ttransposeValue = 0,\n\t\taccidentalsType = 'auto',\n\t\tharmonizeAccidentals = true,\n\t\texpandSectionRepeats = true,\n\t\tautoRepeatChords = true,\n\t\tsimplifyChords = 'none',\n\t\tuseShortNamings = true,\n\t\tprintChordsDuration = 'never',\n\t} = {}\n) {\n\tlet { allLines, allChords } = parsedSong;\n\n\tlet shouldSkipRepeatedSectionLine = false;\n\tlet isFirstLyricLineOfSection = false;\n\n\tallLines = renderChords()\n\t\t.map(addPrintChordsDurationsFlag)\n\t\t.filter(shouldRenderLine)\n\t\t.map((line) => {\n\t\t\treturn replaceRepeatedBars(line, { alignChordsWithLyrics });\n\t\t});\n\n\tconst sectionsStats = getSectionsStats(allLines);\n\tconst maxBeatsWidth = getMaxBeatsWidth(allLines);\n\n\tconst song = renderAllLines().join('\\n');\n\n\treturn songTpl({ song });\n\n\tfunction renderChords() {\n\t\tconst accidental =\n\t\t\taccidentalsType === 'auto'\n\t\t\t\t? getMainAccidental(allChords)\n\t\t\t\t: accidentalsType;\n\n\t\tconst renderChord = chordRendererFactory({\n\t\t\tsimplify: simplifyChords,\n\t\t\tuseShortNamings,\n\t\t\ttransposeValue,\n\t\t\tharmonizeAccidentals,\n\t\t\tuseFlats: accidental === 'flat',\n\t\t});\n\n\t\treturn forEachChordInSong(allLines, (chord) => {\n\t\t\tchord.symbol = getChordSymbol(chord.model, renderChord);\n\t\t});\n\t}\n\n\tfunction addPrintChordsDurationsFlag(line) {\n\t\tif (line.type === lineTypes.CHORD) {\n\t\t\tline.model.allBars.forEach((bar) => {\n\t\t\t\tbar.shouldPrintChordsDuration = shouldPrintChordsDuration(bar);\n\t\t\t});\n\t\t}\n\t\treturn line;\n\t}\n\n\tfunction shouldPrintChordsDuration(bar) {\n\t\treturn (\n\t\t\tbar.allChords.length > 1 &&\n\t\t\t((printChordsDuration === 'uneven' &&\n\t\t\t\tbar.hasUnevenChordsDurations) ||\n\t\t\t\tprintChordsDuration === 'always')\n\t\t);\n\t}\n\n\tfunction shouldRenderLine(line) {\n\t\treturn shouldRepeatLines(line) && !isFiltered(line);\n\t}\n\n\tfunction shouldRepeatLines(line) {\n\t\tif (line.type === lineTypes.SECTION_LABEL) {\n\t\t\tshouldSkipRepeatedSectionLine =\n\t\t\t\tline.isFromSectionRepeat === true && !expandSectionRepeats;\n\t\t}\n\t\tconst shouldSkipAutoRepeatChordLine =\n\t\t\tline.isFromAutoRepeatChords && !autoRepeatChords;\n\n\t\treturn !shouldSkipRepeatedSectionLine && !shouldSkipAutoRepeatChordLine;\n\t}\n\n\tfunction isFiltered(line) {\n\t\tif (chordsAndLyricsDisplay === 'chordsFirstLyricLine') {\n\t\t\tif (line.type === lineTypes.SECTION_LABEL) {\n\t\t\t\tisFirstLyricLineOfSection = true;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (isFirstLyricLineOfSection && line.type === lineTypes.LYRIC) {\n\t\t\t\tisFirstLyricLineOfSection = false;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t(['chords', 'chordsFirstLyricLine'].includes(\n\t\t\t\tchordsAndLyricsDisplay\n\t\t\t) &&\n\t\t\t\tline.type === lineTypes.LYRIC) ||\n\t\t\t(chordsAndLyricsDisplay === 'lyrics' &&\n\t\t\t\tline.type === lineTypes.CHORD)\n\t\t);\n\t}\n\n\tfunction renderAllLines() {\n\t\treturn allLines\n\t\t\t.map((line, lineIndex, allFilteredLines) => {\n\t\t\t\tlet rendered;\n\n\t\t\t\tif (line.type === lineTypes.CHORD) {\n\t\t\t\t\tlet spaced = alignBars\n\t\t\t\t\t\t? alignedChordSpacer(line.model, maxBeatsWidth)\n\t\t\t\t\t\t: simpleChordSpacer(line.model);\n\n\t\t\t\t\tconst nextLine = allFilteredLines[lineIndex + 1];\n\t\t\t\t\tif (shouldAlignChords(line)) {\n\t\t\t\t\t\tconst { chordLine, lyricsLine } = chordLyricsSpacer(\n\t\t\t\t\t\t\tspaced,\n\t\t\t\t\t\t\tnextLine.model\n\t\t\t\t\t\t);\n\t\t\t\t\t\tallFilteredLines[lineIndex + 1].model = lyricsLine;\n\t\t\t\t\t\tspaced = chordLine;\n\t\t\t\t\t}\n\n\t\t\t\t\trendered = renderChordLineModel(spaced);\n\t\t\t\t} else if (line.type === lineTypes.EMPTY_LINE) {\n\t\t\t\t\trendered = renderEmptyLine();\n\t\t\t\t} else if (line.type === lineTypes.SECTION_LABEL) {\n\t\t\t\t\trendered = renderSectionLabel(line, {\n\t\t\t\t\t\tsectionsStats,\n\t\t\t\t\t\texpandSectionRepeats,\n\t\t\t\t\t});\n\t\t\t\t} else if (line.type === lineTypes.TIME_SIGNATURE) {\n\t\t\t\t\trendered = renderTimeSignature(line);\n\t\t\t\t} else {\n\t\t\t\t\trendered = renderLyricLine(line, {\n\t\t\t\t\t\talignChordsWithLyrics,\n\t\t\t\t\t\tchordsAndLyricsDisplay,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn renderLine(rendered, {\n\t\t\t\t\tisFromSectionRepeat: line.isFromSectionRepeat,\n\t\t\t\t\tisFromAutoRepeatChords: line.isFromAutoRepeatChords,\n\t\t\t\t\tisFromChordLineRepeater: line.isFromChordLineRepeater,\n\t\t\t\t\tisFromSectionCopy: line.isFromSectionCopy,\n\t\t\t\t});\n\t\t\t})\n\t\t\t.filter(Boolean);\n\t}\n\n\tfunction shouldAlignChords(line) {\n\t\treturn (\n\t\t\tchordsAndLyricsDisplay === 'all' &&\n\t\t\talignChordsWithLyrics &&\n\t\t\tline.model.hasPositionedChords\n\t\t);\n\t}\n}\n","import './SongRenderer.scss';\n\nimport _pick from 'lodash/pick';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport escapeHTML from '../../core/escapeHTML';\n\nimport renderSong from '../../core/renderSong';\n\nfunction SongRenderer(props) {\n\tconst { content } = props;\n\n\tconst renderOptions = _pick(props, [\n\t\t'alignBars',\n\t\t'chordsAndLyricsDisplay',\n\t\t'alignChordsWithLyrics',\n\t\t'harmonizeAccidentals',\n\t\t'accidentalsType',\n\t\t'transposeValue',\n\t\t'autoRepeatChords',\n\t\t'expandSectionRepeats',\n\t\t'useShortNamings',\n\t\t'simplifyChords',\n\t]);\n\n\treturn (\n\t\t<div className={'songRenderer'}>\n\t\t\t<div\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: escapeHTML(renderSong(content, renderOptions)),\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nSongRenderer.propTypes = {\n\tcontent: PropTypes.string,\n};\n\nSongRenderer.defaultProps = {\n\tcontent: '',\n};\n\nexport default SongRenderer;\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../db/options/selectors';\n\nimport SongRenderer from '../_components/SongRenderer';\n\nexport default connect((state) => ({\n\t// songPreferences\n\tchordsAndLyricsDisplay: getOptionValue(\n\t\tstate,\n\t\t'songPreferences',\n\t\t'chordsAndLyricsDisplay'\n\t),\n\talignChordsWithLyrics: getOptionValue(\n\t\tstate,\n\t\t'songPreferences',\n\t\t'alignChordsWithLyrics'\n\t),\n\tharmonizeAccidentals: getOptionValue(\n\t\tstate,\n\t\t'songPreferences',\n\t\t'harmonizeAccidentals'\n\t),\n\taccidentalsType: getOptionValue(\n\t\tstate,\n\t\t'songPreferences',\n\t\t'preferredAccidentals'\n\t),\n\ttransposeValue: getOptionValue(state, 'songPreferences', 'transposeValue'),\n\tuseShortNamings: getOptionValue(\n\t\tstate,\n\t\t'songPreferences',\n\t\t'useShortNamings'\n\t),\n\tsimplifyChords: getOptionValue(state, 'songPreferences', 'simplifyChords'),\n\n\t// songFormatting\n\talignBars: getOptionValue(state, 'songFormatting', 'alignBars'),\n\tautoRepeatChords: getOptionValue(\n\t\tstate,\n\t\t'songFormatting',\n\t\t'autoRepeatChords'\n\t),\n\texpandSectionRepeats: getOptionValue(\n\t\tstate,\n\t\t'songFormatting',\n\t\t'expandSectionRepeats'\n\t),\n}))(SongRenderer);\n","import './EditorPreview.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport SongRenderer from '../../_containers/SongRenderer';\n\nfunction EditorPreview(props) {\n\tconst { selectedFile } = props;\n\n\tconst classNames = ['editorPreview'];\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<SongRenderer content={selectedFile.content} />\n\t\t</div>\n\t);\n}\n\nEditorPreview.propTypes = {\n\tselectedFile: PropTypes.object.isRequired,\n};\n\nexport default EditorPreview;\n","import { connect } from 'react-redux';\n\n//import { getOptionValue } from '../../../db/options/selectors';\n\nimport EditorPreview from '../_components/EditorPreview';\n\nexport default connect(() => ({}))(EditorPreview);\n","import { Schema } from 'prosemirror-model';\nimport { nodes, marks } from 'prosemirror-schema-basic';\n\nconst editorSchema = new Schema({\n\tnodes: nodes,\n\tmarks: marks,\n});\n\nexport default editorSchema;\n","/**\n * Convert a proseMirror state to plain text\n */\nexport default function stateToText(state) {\n\tconst json = state.toJSON();\n\n\treturn json.doc.content\n\t\t.map((paragraph) => {\n\t\t\tif (!paragraph.content) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn paragraph.content.reduce((acc, current) => {\n\t\t\t\tacc += current.text;\n\t\t\t\treturn acc;\n\t\t\t}, '');\n\t\t})\n\t\t.join('\\n');\n}\n","import domPurify from 'dompurify';\n\n/**\n * Minimal wrapper around DOMPurify library.\n * Pretty drastic also: anything that is HTML is just simply ignored, including text content of tags.\n *\n * @param {String} dirty\n * @returns {String} clean HTML\n */\nexport default function toSafeHtml(dirty) {\n\tconst config = {\n\t\tALLOWED_TAGS: ['p', '#text'],\n\t\tKEEP_CONTENT: false,\n\t};\n\n\treturn domPurify.sanitize(dirty, config);\n}\n","import './ProsemirrorEditorView.scss';\n\nimport React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { EditorState } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { DOMParser as pmDOMParser } from 'prosemirror-model';\n\nimport getPlugins from './getPlugins';\nimport editorSchema from './schema';\n\nimport stateToText from './converters/stateToText';\nimport textToDom from './converters/textToDom';\n\nimport 'prosemirror-view/style/prosemirror.css';\n\nfunction createEditorState(editorContent) {\n\treturn EditorState.create({\n\t\tdoc: pmDOMParser\n\t\t\t.fromSchema(editorSchema)\n\t\t\t.parse(textToDom(editorContent), { preserveWhitespace: 'full' }),\n\t\tplugins: getPlugins(),\n\t});\n}\n\nfunction createEditorView(editorState, updateFile, fileId) {\n\treturn new EditorView(null, {\n\t\tstate: editorState,\n\t\tdispatchTransaction: function dispatchTransaction(transaction) {\n\t\t\tconst { state, transactions } =\n\t\t\t\tthis.state.applyTransaction(transaction);\n\n\t\t\tthis.updateState(state);\n\n\t\t\tif (transactions.some((tr) => tr.docChanged)) {\n\t\t\t\tupdateFile(fileId, { content: stateToText(state) });\n\t\t\t}\n\t\t},\n\t});\n}\n\nfunction ProseMirrorEditorView(props) {\n\tconst { selectedFileId, editorContent, updateFile } = props;\n\n\tconst editorView = useRef();\n\tconst editorDom = useRef();\n\tconst previousFileId = usePrevious(selectedFileId);\n\n\t/**\n\t * Editor is recreated on component mount and on file change.\n\t * The later is needed as we need to to re-bind the change handler with the new file id.\n\t */\n\tfunction shouldCreateEditor() {\n\t\treturn (\n\t\t\tselectedFileId &&\n\t\t\t(!editorView.current || previousFileId !== selectedFileId)\n\t\t);\n\t}\n\n\t// Editor has been previously created, but now no file is selected anymore\n\tfunction isEditorOrphan() {\n\t\treturn editorExists() && !selectedFileId;\n\t}\n\n\tfunction editorExists() {\n\t\treturn editorView.current && editorView.current.dom.parentNode;\n\t}\n\n\tfunction destroyEditor() {\n\t\teditorView.current.dom.parentNode.removeChild(editorView.current.dom);\n\t}\n\n\tuseEffect(() => {\n\t\tif (shouldCreateEditor()) {\n\t\t\tif (editorExists()) {\n\t\t\t\tdestroyEditor();\n\t\t\t}\n\n\t\t\tconst editorState = createEditorState(editorContent);\n\t\t\teditorView.current = createEditorView(\n\t\t\t\teditorState,\n\t\t\t\tupdateFile,\n\t\t\t\tselectedFileId\n\t\t\t);\n\t\t\teditorDom.current.appendChild(editorView.current.dom);\n\n\t\t\t// expose editor instance as a component property for unit tests\n\t\t\tProseMirrorEditorView.editorView = editorView.current;\n\t\t} else if (isEditorOrphan()) {\n\t\t\tdestroyEditor();\n\t\t}\n\t});\n\n\treturn <div className={'prosemirrorWrapper'} ref={editorDom} />;\n}\n\nProseMirrorEditorView.defaultProps = {\n\tselectedFileId: '',\n\teditorContent: '',\n};\n\nProseMirrorEditorView.propTypes = {\n\tselectedFileId: PropTypes.string,\n\teditorContent: PropTypes.string,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default ProseMirrorEditorView;\n\n// @see https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\nfunction usePrevious(value) {\n\tconst ref = useRef();\n\tuseEffect(() => {\n\t\tref.current = value;\n\t});\n\treturn ref.current;\n}\n","import escapeHTML from './toSafeHtml';\n\n/**\n * @param {String} text\n * @returns {HTMLElement}\n */\nexport default function textToDom(text) {\n\tconst html = escapeHTML(text)\n\t\t.split('\\n')\n\t\t.map((line) => `<p>${line}</p>`)\n\t\t.join('');\n\n\tconst div = document.createElement('div');\n\tdiv.innerHTML = escapeHTML(html);\n\n\treturn div;\n}\n","import { keymap } from 'prosemirror-keymap';\nimport { baseKeymap } from 'prosemirror-commands';\nimport { undo, redo, history as pmHistory } from 'prosemirror-history';\n\nexport default function getPlugins() {\n\treturn [\n\t\tpmHistory(),\n\t\tkeymap({ 'Mod-z': undo, 'Mod-y': redo }),\n\t\tkeymap(baseKeymap),\n\t];\n}\n","import './EditorLayout.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport EditorPreview from '../../../songRenderers/editorPreview/_containers/EditorPreview';\nimport ProseMirrorEditorView from '../prosemirror/ProsemirrorEditorView';\n\nfunction EditorLayout(props) {\n\tconst { selectedFile, updateFile } = props;\n\n\treturn (\n\t\t<div className={'songEditor'}>\n\t\t\t<div className={'songEditor-source'}>\n\t\t\t\t<ProseMirrorEditorView\n\t\t\t\t\teditorContent={selectedFile.content}\n\t\t\t\t\tupdateFile={updateFile}\n\t\t\t\t\tselectedFileId={selectedFile.id}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={'songEditor-preview'}>\n\t\t\t\t<EditorPreview selectedFile={selectedFile} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nEditorLayout.propTypes = {\n\tselectedFile: PropTypes.object,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default EditorLayout;\n","import './ExportPreview.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport SongRenderer from '../../_containers/SongRenderer';\n\nfunction ExportPreview(props) {\n\tconst { selectedFile } = props;\n\n\treturn (\n\t\t<div className={'exportPreview exp-SongRenderer'}>\n\t\t\t<SongRenderer content={selectedFile.content} />\n\t\t</div>\n\t);\n}\n\nExportPreview.propTypes = {\n\tselectedFile: PropTypes.object.isRequired,\n};\n\nexport default ExportPreview;\n","import './PlayRenderer.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport SongRenderer from '../../_containers/SongRenderer';\n\nfunction PlayRenderer(props) {\n\tconst {\n\t\tselectedFile,\n\t\tfontSize,\n\t\tchordsColor,\n\t\thighlightChords,\n\t\tcolumnsCount,\n\t} = props;\n\n\tconst classNames = ['playRenderer'];\n\tclassNames.push('playRenderer--columns-' + columnsCount);\n\tclassNames.push('cmLine--fontSize' + fontSize);\n\tclassNames.push('cmChordSymbol--chordsColor-' + chordsColor);\n\tif (highlightChords) {\n\t\tclassNames.push('cmChordLine--highlightChords');\n\t}\n\n\treturn (\n\t\t<div className={'playRendererWrapper1'}>\n\t\t\t<div className={'playRendererWrapper2'}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames.join(' ')}\n\t\t\t\t\tdata-testid={'playRenderer'}\n\t\t\t\t>\n\t\t\t\t\t<SongRenderer content={selectedFile.content} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nPlayRenderer.propTypes = {\n\tselectedFile: PropTypes.object.isRequired,\n\tcolumnsCount: PropTypes.number.isRequired,\n\tfontSize: PropTypes.number.isRequired,\n\tchordsColor: PropTypes.string.isRequired,\n\thighlightChords: PropTypes.bool.isRequired,\n};\n\nexport default PlayRenderer;\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../../db/options/selectors';\n\nimport PlayRenderer from '../_components/PlayRenderer';\n\nexport default connect((state) => ({\n\tchordsColor: getOptionValue(state, 'songFormatting', 'chordsColor'),\n\thighlightChords: getOptionValue(state, 'songFormatting', 'highlightChords'),\n\tfontSize: getOptionValue(state, 'songFormatting', 'fontSize'),\n\tcolumnsCount: getOptionValue(state, 'songFormatting', 'columnsCount'),\n}))(PlayRenderer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport escapeHTML from '../../../core/escapeHTML';\n\nfunction Page(props) {\n\tconst {\n\t\tpageHeader,\n\t\tallColumnsLines,\n\t\tdocumentSize,\n\t\tdocumentMargins,\n\t\tprintFontSize,\n\t} = props;\n\n\tconst allSectionsRendered = allColumnsLines.map((columnLines, index) => {\n\t\tconst columnLinesTxt = columnLines.join('\\n');\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tkey={index}\n\t\t\t\tclassName={'printPreview-pageColumn'}\n\t\t\t\tdata-testid={'printPreview-pageColumn'}\n\t\t\t\tdangerouslySetInnerHTML={{ __html: escapeHTML(columnLinesTxt) }}\n\t\t\t/>\n\t\t);\n\t});\n\n\tconst pageClasses = ['printPreview-page'];\n\tpageClasses.push('printPreview-page--' + documentSize);\n\tpageClasses.push('printPreview-page--font' + printFontSize);\n\n\tconst pageContentWrapperClasses = ['printPreview-pageContentWrapper'];\n\tpageContentWrapperClasses.push(\n\t\t'printPreview-pageContentWrapper--padding' + documentMargins\n\t);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={pageClasses.join(' ')}\n\t\t\tdata-testid={'printPreview-page'}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={pageContentWrapperClasses.join(' ')}\n\t\t\t\tdata-testid={'printPreview-pageContentWrapper'}\n\t\t\t>\n\t\t\t\t<div className={'printPreview-pageContent'}>\n\t\t\t\t\t{pageHeader}\n\t\t\t\t\t<div className={'printPreview-pageColumnWrapper'}>\n\t\t\t\t\t\t{allSectionsRendered}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\nPage.defaultProps = {\n\tallColumnsLines: [],\n};\nPage.propTypes = {\n\tpageHeader: PropTypes.element,\n\tallColumnsLines: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)),\n\tdocumentSize: PropTypes.string.isRequired,\n\tdocumentMargins: PropTypes.number.isRequired,\n\tprintFontSize: PropTypes.number.isRequired,\n};\n\nexport default React.memo(Page);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction PageHeader(props) {\n\tconst { title } = props;\n\n\treturn <div className={'printPreview-pageHeader'}>{title}</div>;\n}\nPageHeader.defaultProps = {\n\tallColumnsLines: [],\n};\nPageHeader.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n};\n\nexport default React.memo(PageHeader);\n","const cssClasses = {\n\temptyLine: 'cmEmptyLine',\n\tchordLine: 'cmChordLine',\n\ttextLine: 'cmTextLine',\n};\n\n/**\n * @param {Object[]} allLinesWithHeight\n * @param {String} allLinesWithHeight.content\n * @param {Number} allLinesWithHeight.height\n * @param {Number} columnsCount\n * @param {Number} firstPageHeight\n * @param {Number} normalPageHeight\n * @param {Boolean} columnBreakOnParagraph\n * @param {Boolean} noEmptyLinesOnColumnStart\n * @param {Boolean} noOrphanTextLine\n * @returns {Array} array of pages, as array of columns\n */\nexport default function mapLinesToColumns(\n\tallLinesWithHeight,\n\t{\n\t\tcolumnsCount,\n\t\tfirstPageHeight,\n\t\tnormalPageHeight,\n\t\tcolumnBreakOnParagraph,\n\t\tnoEmptyLinesOnColumnStart = true,\n\t\tnoOrphanTextLine = true,\n\t}\n) {\n\tconst layout = layoutFactory({\n\t\tcolumnsCount,\n\t\tfirstPageHeight,\n\t\tnormalPageHeight,\n\t\tnoEmptyLinesOnColumnStart,\n\t});\n\n\tlet buffer = [];\n\tlet bufferHeight = 0;\n\n\tconst pageHeight = firstPageHeight || normalPageHeight;\n\n\tif (pageHeight > 0) {\n\t\tallLinesWithHeight.forEach((line, lineIndex) => {\n\t\t\tif (\n\t\t\t\tshouldRenderLine(\n\t\t\t\t\tlayout,\n\t\t\t\t\tline,\n\t\t\t\t\tbuffer,\n\t\t\t\t\tnoEmptyLinesOnColumnStart\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tbuffer.push(line);\n\t\t\t\tbufferHeight += line.height;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tbuffer.length > 0 &&\n\t\t\t\tisBreakable(line, allLinesWithHeight[lineIndex + 1], {\n\t\t\t\t\tnoOrphanTextLine,\n\t\t\t\t\tcolumnBreakOnParagraph,\n\t\t\t\t})\n\t\t\t) {\n\t\t\t\tif (layout.fitsOnCurrentColumn(bufferHeight)) {\n\t\t\t\t\tlayout.insert(buffer);\n\t\t\t\t} else if (layout.fitsOnNextColumn(bufferHeight)) {\n\t\t\t\t\tlayout.insertOnNextColumn(buffer);\n\t\t\t\t} else {\n\t\t\t\t\tlayout.insert(buffer);\n\t\t\t\t}\n\t\t\t\tbuffer = [];\n\t\t\t\tbufferHeight = 0;\n\t\t\t}\n\t\t});\n\t}\n\treturn layout.get();\n}\n\n/**\n * Try to spot the case where the line is empty and would be rendered as the first line\n * of the next column, which we may want to avoid\n */\nfunction shouldRenderLine(layout, line, buffer, noEmptyLinesOnColumnStart) {\n\treturn !(\n\t\tisEmptyLine(line) &&\n\t\t!layout.fitsOnCurrentColumn(line.height) &&\n\t\tbuffer.length === 0 &&\n\t\tnoEmptyLinesOnColumnStart === true\n\t);\n}\n\nfunction isBreakable(\n\tcurrentLine,\n\tnextLine,\n\t{ noOrphanTextLine, columnBreakOnParagraph }\n) {\n\tif (isEmptyLine(currentLine) || !nextLine) {\n\t\treturn true;\n\t}\n\n\tconst wouldProduceOrphanTextLine =\n\t\tisChordLine(currentLine) && isTextLine(nextLine);\n\tif (noOrphanTextLine === true && wouldProduceOrphanTextLine) {\n\t\treturn false;\n\t}\n\n\tconst isEndOfParagraph = isEmptyLine(nextLine);\n\tif (columnBreakOnParagraph === true && !isEndOfParagraph) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction isEmptyLine(line) {\n\treturn hasClass(line.content, cssClasses.emptyLine);\n}\n\nfunction isChordLine(line) {\n\treturn hasClass(line.content, cssClasses.chordLine);\n}\n\nfunction isTextLine(line) {\n\treturn hasClass(line.content, cssClasses.textLine);\n}\n\nfunction hasClass(line, className) {\n\treturn line.indexOf(className) > -1;\n}\n\nfunction layoutFactory({ firstPageHeight, normalPageHeight, columnsCount }) {\n\tconst allPagesColumns = [];\n\n\tlet pageIndex = 0;\n\tlet columnIndex = 0;\n\tlet maxColumnHeight = getMaxColumnHeight();\n\tlet currentColumnHeight = 0;\n\n\tallPagesColumns[pageIndex] = [];\n\tallPagesColumns[pageIndex][columnIndex] = [];\n\n\tfunction flushBuffer(buffer) {\n\t\tbuffer.forEach((line) => {\n\t\t\tif (shouldChangeColumn(currentColumnHeight + line.height)) {\n\t\t\t\tchangeColumn();\n\t\t\t}\n\t\t\tallPagesColumns[pageIndex][columnIndex].push(line.content);\n\t\t\tcurrentColumnHeight += line.height;\n\t\t});\n\t}\n\n\tfunction getMaxColumnHeight() {\n\t\treturn pageIndex === 0 && firstPageHeight\n\t\t\t? firstPageHeight\n\t\t\t: normalPageHeight;\n\t}\n\n\tfunction shouldChangeColumn(nextHeight) {\n\t\treturn nextHeight > maxColumnHeight;\n\t}\n\n\tfunction changeColumn() {\n\t\tif (shouldChangePage()) {\n\t\t\tpageIndex++;\n\t\t\tallPagesColumns[pageIndex] = [];\n\t\t\tcolumnIndex = 0;\n\t\t} else {\n\t\t\tcolumnIndex++;\n\t\t}\n\t\tallPagesColumns[pageIndex][columnIndex] = [];\n\t\tcurrentColumnHeight = 0;\n\t\tmaxColumnHeight = getMaxColumnHeight();\n\t}\n\n\tfunction shouldChangePage() {\n\t\treturn columnIndex === columnsCount - 1;\n\t}\n\n\treturn {\n\t\tinsert(buffer) {\n\t\t\tflushBuffer(buffer);\n\t\t},\n\n\t\tinsertOnNextColumn(buffer) {\n\t\t\tchangeColumn();\n\t\t\tflushBuffer(buffer);\n\t\t},\n\n\t\tfitsOnCurrentColumn(bufferHeight) {\n\t\t\treturn currentColumnHeight + bufferHeight <= maxColumnHeight;\n\t\t},\n\n\t\tfitsOnNextColumn(bufferHeight) {\n\t\t\tconst nextColumnHeight =\n\t\t\t\tpageIndex === 0 && columnIndex < columnsCount && firstPageHeight\n\t\t\t\t\t? firstPageHeight\n\t\t\t\t\t: normalPageHeight;\n\t\t\treturn bufferHeight <= nextColumnHeight;\n\t\t},\n\n\t\tget() {\n\t\t\treturn allPagesColumns;\n\t\t},\n\t};\n}\n","import './getDimensionsFromDom.scss';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nexport default function getDimensionsFromDom(component, measuringFn) {\n\tconst container = document.createElement('div');\n\tcontainer.classList.add('measuring-node');\n\tdocument.body.appendChild(container);\n\n\treturn new Promise((resolve) => {\n\t\tReactDOM.render(<div>{component}</div>, container, () => {\n\t\t\tconst measure = measuringFn(container);\n\n\t\t\tReactDOM.unmountComponentAtNode(container);\n\t\t\tcontainer.parentNode.removeChild(container);\n\n\t\t\tresolve(measure);\n\t\t});\n\t});\n}\n","export default function padColumns(columnCount, allColumns = []) {\n\tfor (let i = allColumns.length || 0; i < columnCount; i++) {\n\t\tallColumns.push([]);\n\t}\n\treturn allColumns;\n}\n","export function getOffsetHeight(element) {\n\treturn element.offsetHeight;\n}\n\nexport function getClientHeight(element) {\n\treturn element.clientHeight;\n}\n","import React from 'react';\n\nimport getDimensionsFromDom from './getDimensionsFromDom';\nimport padColumns from './padColumns';\nimport { getOffsetHeight } from './element';\n\nimport Page from '../_components/Page';\n\nconst cssSelectors = {\n\tline: '.cmLine',\n};\n\nexport default async function getAllLinesHeight(\n\tallLines,\n\t{ columnsCount, documentSize, documentMargins, printFontSize }\n) {\n\tconst component = (\n\t\t<div className={'printPreview'}>\n\t\t\t<Page\n\t\t\t\tallColumnsLines={padColumns(columnsCount, [allLines])}\n\t\t\t\tcolumnsCount={columnsCount}\n\t\t\t\tdocumentSize={documentSize}\n\t\t\t\tdocumentMargins={documentMargins}\n\t\t\t\tprintFontSize={printFontSize}\n\t\t\t/>\n\t\t</div>\n\t);\n\n\tconst measuringFn = (container) => {\n\t\tconst allLinesHeight = [];\n\t\tcontainer.querySelectorAll(cssSelectors.line).forEach((line) => {\n\t\t\tallLinesHeight.push(getOffsetHeight(line));\n\t\t});\n\t\treturn allLinesHeight;\n\t};\n\n\treturn await getDimensionsFromDom(component, measuringFn);\n}\n","import React from 'react';\n\nimport getDimensionsFromDom from './getDimensionsFromDom';\nimport padColumns from './padColumns';\nimport { getClientHeight } from './element';\n\nimport Page from '../_components/Page';\nimport PageHeader from '../_components/PageHeader';\n\nexport default async function getAllLinesHeight(\n\ttitle,\n\t{ columnsCount, documentSize, documentMargins, printFontSize }\n) {\n\tconst component = (\n\t\t<Page\n\t\t\tpageHeader={<PageHeader title={title} />}\n\t\t\tallColumnsLines={padColumns(columnsCount)}\n\t\t\tdocumentSize={documentSize}\n\t\t\tdocumentMargins={documentMargins}\n\t\t\tprintFontSize={printFontSize}\n\t\t/>\n\t);\n\n\tconst measuringFn = (container) => {\n\t\tconst pageContent = container.querySelector(\n\t\t\t'.printPreview-pageContent'\n\t\t);\n\t\tconst pageColumnWrapper = container.querySelector(\n\t\t\t'.printPreview-pageColumnWrapper'\n\t\t);\n\t\treturn {\n\t\t\tfirstPageHeight: getClientHeight(pageColumnWrapper),\n\t\t\tnormalPageHeight: getClientHeight(pageContent),\n\t\t};\n\t};\n\n\treturn await getDimensionsFromDom(component, measuringFn);\n}\n","import React, { useState, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Page from './Page';\nimport PageHeader from './PageHeader';\n\nimport mapLinesToColumns from '../helpers/mapLinesToColumns';\nimport getAllLinesHeight from '../helpers/getAllLinesHeight';\nimport getPagesHeight from '../helpers/getPagesHeight';\nimport padColumns from '../helpers/padColumns';\n\nfunction AllPages(props) {\n\tconst [allPagesColumns, setAllPagesColumns] = useState([]);\n\n\tconst {\n\t\ttitle,\n\t\tallLines,\n\t\tcolumnsCount,\n\t\tcolumnBreakOnParagraph,\n\t\tdocumentSize,\n\t\tdocumentMargins,\n\t\tprintFontSize,\n\t} = props;\n\n\tuseLayoutEffect(() => {\n\t\tconst getDimensions = async () => {\n\t\t\tconst pageOptions = {\n\t\t\t\tcolumnsCount,\n\t\t\t\tdocumentSize,\n\t\t\t\tdocumentMargins,\n\t\t\t\tprintFontSize,\n\t\t\t};\n\n\t\t\tconst allLinesHeight = await getAllLinesHeight(\n\t\t\t\tallLines,\n\t\t\t\tpageOptions\n\t\t\t);\n\n\t\t\tconst { normalPageHeight, firstPageHeight } = await getPagesHeight(\n\t\t\t\ttitle,\n\t\t\t\tpageOptions\n\t\t\t);\n\n\t\t\tconst allLinesWithHeight = allLines.map((line, index) => ({\n\t\t\t\tcontent: line,\n\t\t\t\theight: allLinesHeight[index],\n\t\t\t}));\n\n\t\t\tconst mapped = mapLinesToColumns(allLinesWithHeight, {\n\t\t\t\tcolumnsCount,\n\t\t\t\tcolumnBreakOnParagraph,\n\t\t\t\tnormalPageHeight,\n\t\t\t\tfirstPageHeight,\n\t\t\t});\n\n\t\t\tsetAllPagesColumns(mapped);\n\t\t};\n\t\tgetDimensions();\n\t}, [\n\t\tallLines,\n\t\ttitle,\n\t\tcolumnsCount,\n\t\tcolumnBreakOnParagraph,\n\t\tdocumentSize,\n\t\tdocumentMargins,\n\t\tprintFontSize,\n\t]);\n\n\tconst allPagesRendered = allPagesColumns.map((pageColumns, index) => {\n\t\treturn (\n\t\t\t<Page\n\t\t\t\tkey={index}\n\t\t\t\tpageHeader={index === 0 ? <PageHeader title={title} /> : null}\n\t\t\t\tallColumnsLines={padColumns(columnsCount, pageColumns)}\n\t\t\t\tdocumentSize={documentSize}\n\t\t\t\tdocumentMargins={documentMargins}\n\t\t\t\tprintFontSize={printFontSize}\n\t\t\t/>\n\t\t);\n\t});\n\n\treturn <React.Fragment>{allPagesRendered}</React.Fragment>;\n}\n\nAllPages.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n\tallLines: PropTypes.arrayOf(PropTypes.string).isRequired,\n\tcolumnsCount: PropTypes.number.isRequired,\n\tcolumnBreakOnParagraph: PropTypes.bool.isRequired,\n\tdocumentSize: PropTypes.string.isRequired,\n\tdocumentMargins: PropTypes.number.isRequired,\n\tprintFontSize: PropTypes.number.isRequired,\n};\n\nexport default AllPages;\n","import './PrintPreview.scss';\n\nimport _pick from 'lodash/pick';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport renderSong from '../../../core/renderSong';\nimport AllPages from './AllPages';\n\nfunction PrintPreview(props) {\n\tconst { selectedFile, highlightChords } = props;\n\n\tconst renderOptions = _pick(props, [\n\t\t'chordsAndLyricsDisplay',\n\t\t'alignChordsWithLyrics',\n\t\t'alignBars',\n\t\t'harmonizeAccidentals',\n\t\t'accidentalsType',\n\t\t'transposeValue',\n\t\t'autoRepeatChords',\n\t\t'expandSectionRepeats',\n\t\t'useShortNamings',\n\t\t'simplifyChords',\n\t]);\n\n\tconst allLines = renderSong(\n\t\tselectedFile.content || '',\n\t\trenderOptions\n\t).split('\\n');\n\n\tconst classNames = ['printPreview'];\n\tif (highlightChords) {\n\t\tclassNames.push('cmChordLine--highlightChords');\n\t}\n\n\treturn (\n\t\t<div className={classNames.join(' ')} data-testid={'printPreview'}>\n\t\t\t<AllPages\n\t\t\t\ttitle={selectedFile.title || ''}\n\t\t\t\tallLines={allLines}\n\t\t\t\tcolumnsCount={props.columnsCount}\n\t\t\t\tcolumnBreakOnParagraph={props.columnBreakOnParagraph}\n\t\t\t\tdocumentSize={props.documentSize}\n\t\t\t\tdocumentMargins={props.documentMargins}\n\t\t\t\tprintFontSize={props.printFontSize}\n\t\t\t/>\n\t\t</div>\n\t);\n}\nPrintPreview.propTypes = {\n\tselectedFile: PropTypes.object.isRequired,\n\tcolumnsCount: PropTypes.number.isRequired,\n\tcolumnBreakOnParagraph: PropTypes.bool.isRequired,\n\tdocumentSize: PropTypes.string.isRequired,\n\tdocumentMargins: PropTypes.number.isRequired,\n\tprintFontSize: PropTypes.number.isRequired,\n\thighlightChords: PropTypes.bool.isRequired,\n};\n\nexport default PrintPreview;\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../../db/options/selectors';\n\nimport PrintPreview from '../_components/PrintPreview';\n\nexport default connect((state) => ({\n\t// songPreferences\n\tchordsAndLyricsDisplay: getOptionValue(\n\t\tstate,\n\t\t'songPreferences',\n\t\t'chordsAndLyricsDisplay'\n\t),\n\talignChordsWithLyrics: getOptionValue(\n\t\tstate,\n\t\t'songPreferences',\n\t\t'alignChordsWithLyrics'\n\t),\n\tharmonizeAccidentals: getOptionValue(\n\t\tstate,\n\t\t'songPreferences',\n\t\t'harmonizeAccidentals'\n\t),\n\taccidentalsType: getOptionValue(\n\t\tstate,\n\t\t'songPreferences',\n\t\t'preferredAccidentals'\n\t),\n\tuseShortNamings: getOptionValue(\n\t\tstate,\n\t\t'songPreferences',\n\t\t'useShortNamings'\n\t),\n\tsimplifyChords: getOptionValue(state, 'songPreferences', 'simplifyChords'),\n\ttransposeValue: getOptionValue(state, 'songPreferences', 'transposeValue'),\n\n\t// songFormatting\n\tcolumnsCount: getOptionValue(state, 'songFormatting', 'columnsCount'),\n\tcolumnBreakOnParagraph: getOptionValue(\n\t\tstate,\n\t\t'songFormatting',\n\t\t'columnBreakOnParagraph'\n\t),\n\tdocumentSize: getOptionValue(state, 'songFormatting', 'documentSize'),\n\tdocumentMargins: getOptionValue(state, 'songFormatting', 'documentMargins'),\n\talignBars: getOptionValue(state, 'songFormatting', 'alignBars'),\n\tprintFontSize: getOptionValue(state, 'songFormatting', 'printFontSize'),\n\thighlightChords: getOptionValue(state, 'songFormatting', 'highlightChords'),\n\tautoRepeatChords: getOptionValue(\n\t\tstate,\n\t\t'songFormatting',\n\t\t'autoRepeatChords'\n\t),\n\texpandSectionRepeats: getOptionValue(\n\t\tstate,\n\t\t'songFormatting',\n\t\t'expandSectionRepeats'\n\t),\n}))(PrintPreview);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport EditorLayout from '../songEditor/_components/EditorLayout';\nimport ExportPreview from '../../songRenderers/exportPreview/_components/ExportPreview';\nimport PlayRenderer from '../../songRenderers/playRenderer/_containers/PlayRenderer';\nimport PrintPreview from '../../songRenderers/printPreview/_containers/PrintPreview';\n\nfunction Editor(props) {\n\tconst { editorMode } = props;\n\n\tswitch (editorMode) {\n\t\tcase 'edit':\n\t\t\treturn <EditorLayout {...props} />;\n\t\tcase 'play':\n\t\t\treturn <PlayRenderer {...props} />;\n\t\tcase 'print':\n\t\t\treturn <PrintPreview {...props} />;\n\t\tcase 'export':\n\t\t\treturn <ExportPreview {...props} />;\n\t}\n}\n\nEditor.propTypes = {\n\teditorMode: PropTypes.string.isRequired,\n};\n\nexport default Editor;\n","import { connect } from 'react-redux';\n\nimport { getSelectedId } from '../../fileManager/_state/selectors';\nimport { getEditorMode } from '../../ui/layout/app/_state/selectors';\n\nimport { getOne } from '../../db/files/selectors';\nimport { updateFile } from '../../db/files/actions';\n\nimport Editor from '../_components/Editor';\n\nexport default connect(\n\t(state) => ({\n\t\tselectedFile: getOne(state, getSelectedId(state)) || {},\n\t\teditorMode: getEditorMode(state),\n\t}),\n\n\t{\n\t\tupdateFile,\n\t}\n)(Editor);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction OptionsPanel(props) {\n\tconst {\n\t\tid,\n\t\tallWidgets,\n\t\tnonInteractableWidgets,\n\t\thiddenWidgets,\n\t\tsetOption,\n\t\tgetEntryComponent,\n\t} = props;\n\n\tconst classNames = ['optionsPanel', 'optionsPanel-' + id];\n\n\tlet widget, groupWidget;\n\n\tlet WidgetComponent, GroupComponent;\n\tlet isGroupInteractable, isGroupWidgetInteractable;\n\n\tlet renderedGroupWidgets;\n\n\tconst renderedWidgets = allWidgets.widgetsOrder\n\t\t.filter((widgetId) => {\n\t\t\treturn !hiddenWidgets.includes(widgetId);\n\t\t})\n\t\t.map((widgetId) => {\n\t\t\twidget = allWidgets.allWidgets[widgetId];\n\n\t\t\tif (widget.type === 'optionsGroup') {\n\t\t\t\trenderedGroupWidgets = widget.groupWidgetsOrder\n\t\t\t\t\t.filter((groupWidgetId) => {\n\t\t\t\t\t\treturn !hiddenWidgets.includes(groupWidgetId);\n\t\t\t\t\t})\n\t\t\t\t\t.map((groupWidgetId) => {\n\t\t\t\t\t\tgroupWidget = widget.allGroupWidgets[groupWidgetId];\n\n\t\t\t\t\t\tisGroupWidgetInteractable =\n\t\t\t\t\t\t\t!nonInteractableWidgets.includes(widgetId) &&\n\t\t\t\t\t\t\t!nonInteractableWidgets.includes(groupWidgetId);\n\n\t\t\t\t\t\treturn renderWidget(\n\t\t\t\t\t\t\tgroupWidgetId,\n\t\t\t\t\t\t\tgroupWidget,\n\t\t\t\t\t\t\tisGroupWidgetInteractable\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\tGroupComponent = getEntryComponent(widget.type);\n\t\t\t\tisGroupInteractable =\n\t\t\t\t\t!nonInteractableWidgets.includes(widgetId);\n\n\t\t\t\treturn (\n\t\t\t\t\t<GroupComponent\n\t\t\t\t\t\tkey={widgetId}\n\t\t\t\t\t\tisInteractable={isGroupInteractable}\n\t\t\t\t\t\tlabel={widget.label}\n\t\t\t\t\t\ticon={widget.icon}\n\t\t\t\t\t>\n\t\t\t\t\t\t{renderedGroupWidgets}\n\t\t\t\t\t</GroupComponent>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn renderWidget(\n\t\t\t\t\twidgetId,\n\t\t\t\t\twidget,\n\t\t\t\t\t!nonInteractableWidgets.includes(widgetId)\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\tfunction renderWidget(widgetId, localWidget, isInteractable) {\n\t\tWidgetComponent = getEntryComponent(localWidget.type);\n\n\t\treturn (\n\t\t\t<WidgetComponent\n\t\t\t\tkey={widgetId}\n\t\t\t\tisInteractable={isInteractable}\n\t\t\t\toptionContext={localWidget.option.context}\n\t\t\t\toptionKey={localWidget.option.key}\n\t\t\t\toptionValue={props[localWidget.option.key]}\n\t\t\t\tsetOption={setOption}\n\t\t\t\tlabel={localWidget.label}\n\t\t\t\t{...localWidget.typeOptions}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn <div className={classNames.join(' ')}>{renderedWidgets}</div>;\n}\n\nOptionsPanel.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tallWidgets: PropTypes.object.isRequired,\n\tnonInteractableWidgets: PropTypes.arrayOf(PropTypes.string).isRequired,\n\thiddenWidgets: PropTypes.arrayOf(PropTypes.string).isRequired,\n\tsetOption: PropTypes.func.isRequired,\n\tgetEntryComponent: PropTypes.func.isRequired,\n};\n\nexport default OptionsPanel;\n","import './OptionsGroup.scss';\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon';\n\nfunction OptionsGroup(props) {\n\tconst [isOpened, setIsOpened] = useState(props.isOpened);\n\n\tconst { isInteractable, icon, label } = props;\n\n\tconst classNames = ['sb-optionsGroup'];\n\tif (!shouldBeInteractable()) {\n\t\tclassNames.push('sb-optionsGroup-isNotInteractable');\n\t}\n\n\tif (shouldBeClosed()) {\n\t\tsetIsOpened(false);\n\t}\n\n\tfunction shouldBeInteractable() {\n\t\treturn isInteractable && props.children && props.children.length > 0;\n\t}\n\n\tfunction shouldBeClosed() {\n\t\treturn isOpened && (!props.children || props.children.length === 0);\n\t}\n\n\tfunction handleClick() {\n\t\tsetIsOpened(!isOpened);\n\t}\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<div\n\t\t\t\tclassName={'sb-optionsGroup-title'}\n\t\t\t\tonClick={shouldBeInteractable() ? handleClick : null}\n\t\t\t>\n\t\t\t\t<div className={'sb-optionsGroup-label'}>\n\t\t\t\t\t<span className={'sb-optionsGroup-iconTitle'}>\n\t\t\t\t\t\t<Icon iconName={icon} />\n\t\t\t\t\t</span>{' '}\n\t\t\t\t\t{label}\n\t\t\t\t</div>\n\t\t\t\t<div className={'sb-optionsGroup-toggle'}>\n\t\t\t\t\t<span className={'sb-optionsGroup-iconToggle'}>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ticonName={isOpened ? 'unfold_less' : 'unfold_more'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className={'sb-optionsGroup-content'}>\n\t\t\t\t{isOpened && props.children}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nOptionsGroup.propTypes = {\n\tisOpened: PropTypes.bool,\n\tisInteractable: PropTypes.bool.isRequired,\n\ticon: PropTypes.string.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tchildren: PropTypes.arrayOf(PropTypes.element),\n};\n\nOptionsGroup.defaultProps = {\n\tisOpened: true,\n};\n\nexport default OptionsGroup;\n","import './Select.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon';\n\nfunction SelectChoice(props) {\n\tconst { isSelected, label, onClick } = props;\n\n\tlet checkIcon;\n\tconst classNames = ['sb-optionSelectChoice'];\n\n\tif (isSelected) {\n\t\tclassNames.push('sb-optionSelectChoice-isSelected');\n\t\tcheckIcon = (\n\t\t\t<span className={'sb-optionSelectChoice-checkIcon'}>\n\t\t\t\t<Icon iconName={'check'} />\n\t\t\t</span>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className={classNames.join(' ')} onClick={onClick}>\n\t\t\t<div className={'sb-optionSelectChoice-check'}>\n\t\t\t\t{isSelected && checkIcon}\n\t\t\t</div>\n\t\t\t<div className={'sb-optionSelectChoice-label'}>{label}</div>\n\t\t</div>\n\t);\n}\n\nSelectChoice.propTypes = {\n\tisSelected: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tonClick: PropTypes.func.isRequired,\n};\n\nexport default React.memo(SelectChoice);\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport SelectChoice from './SelectChoice';\n\nimport Icon from '../../../_components/Icon';\n\nfunction Select(props) {\n\tconst [isOpen, setIsOpen] = useState(false);\n\n\tconst {\n\t\tisInteractable,\n\t\tlabel,\n\t\tallChoices,\n\t\toptionContext,\n\t\toptionKey,\n\t\toptionValue,\n\t\tsetOption,\n\t} = props;\n\n\tconst classNames = ['sb-optionSelect'];\n\tif (!isInteractable) {\n\t\tclassNames.push('sb-optionSelect-isNotInteractable');\n\t}\n\n\tconst iconName = isOpen ? 'keyboard_arrow_down' : 'keyboard_arrow_right';\n\n\tfunction toggleChoices() {\n\t\tsetIsOpen(!isOpen);\n\t}\n\n\tconst renderedChoices = !isOpen ? null : (\n\t\t<div className={'sb-optionSelect-choices'}>\n\t\t\t{allChoices.map((choice) => (\n\t\t\t\t<SelectChoice\n\t\t\t\t\tkey={choice.value}\n\t\t\t\t\tlabel={choice.label}\n\t\t\t\t\tisSelected={optionValue === choice.value}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\tsetOption(optionContext, optionKey, choice.value)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<div\n\t\t\t\tclassName={'sb-optionSelect-title'}\n\t\t\t\tonClick={isInteractable ? toggleChoices : null}\n\t\t\t>\n\t\t\t\t<div className={'sb-optionSelect-desc'}>{label}</div>\n\t\t\t\t<div className={'sb-optionSelect-toggle'}>\n\t\t\t\t\t<span className={'sb-optionSelect-icon'}>\n\t\t\t\t\t\t<Icon iconName={iconName} />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{renderedChoices}\n\t\t</div>\n\t);\n}\n\nSelect.propTypes = {\n\tisInteractable: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tallChoices: PropTypes.array.isRequired,\n\toptionContext: PropTypes.string.isRequired,\n\toptionKey: PropTypes.string.isRequired,\n\toptionValue: PropTypes.string.isRequired,\n\tsetOption: PropTypes.func.isRequired,\n};\n\nexport default Select;\n","import './Slider.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Slider(props) {\n\tconst {\n\t\tisInteractable,\n\t\tlabel,\n\t\tmin,\n\t\tmax,\n\t\tshowPlusSymbol,\n\t\toptionContext,\n\t\toptionKey,\n\t\toptionValue,\n\t\tsetOption,\n\t} = props;\n\n\tconst classNames = ['sb-optionSlider'];\n\tif (!isInteractable) {\n\t\tclassNames.push('sb-optionSlider-isNotInteractable');\n\t}\n\n\tfunction handleChange(e) {\n\t\tsetOption(optionContext, optionKey, Number.parseInt(e.target.value));\n\t}\n\n\tconst valueDisplay =\n\t\toptionValue > 0 && showPlusSymbol ? '+' + optionValue : optionValue;\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<div className={'sb-optionSlider-desc'}>{label}</div>\n\t\t\t<div className={'sb-optionSlider-value'}>{valueDisplay}</div>\n\t\t\t<div className={'sb-optionSlider-range'}>\n\t\t\t\t<input\n\t\t\t\t\tmin={min}\n\t\t\t\t\tmax={max}\n\t\t\t\t\tvalue={optionValue}\n\t\t\t\t\ttype={'range'}\n\t\t\t\t\tonChange={isInteractable ? handleChange : null}\n\t\t\t\t\tdisabled={!isInteractable}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nSlider.propTypes = {\n\tisInteractable: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tmin: PropTypes.number.isRequired,\n\tmax: PropTypes.number.isRequired,\n\tshowPlusSymbol: PropTypes.bool,\n\toptionContext: PropTypes.string.isRequired,\n\toptionKey: PropTypes.string.isRequired,\n\toptionValue: PropTypes.number.isRequired,\n\tsetOption: PropTypes.func.isRequired,\n};\n\nSlider.defaultProps = {\n\tshowPlusSymbol: true,\n};\n\nexport default React.memo(Slider);\n","import './Toggle.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon';\n\nfunction Toggle(props) {\n\tconst {\n\t\tisInteractable,\n\t\tlabel,\n\t\toptionContext,\n\t\toptionKey,\n\t\toptionValue,\n\t\tsetOption,\n\t} = props;\n\n\tconst classNames = ['sb-optionToggle'];\n\tclassNames.push(\n\t\toptionValue === true ? 'sb-optionToggle-isOn' : 'sb-optionToggle-isOff'\n\t);\n\tif (!isInteractable) {\n\t\tclassNames.push('sb-optionToggle-isNotInteractable');\n\t}\n\n\tfunction handleClick() {\n\t\tsetOption(optionContext, optionKey, !optionValue);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames.join(' ')}\n\t\t\tonClick={isInteractable ? handleClick : null}\n\t\t>\n\t\t\t<div className={'sb-optionToggle-desc'}>{label}</div>\n\t\t\t<div className={'sb-optionToggle-icon'}>\n\t\t\t\t<span className={'sb-optionToggle-icon'}>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticonName={\n\t\t\t\t\t\t\toptionValue === true ? 'toggle_on' : 'toggle_off'\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nToggle.propTypes = {\n\tisInteractable: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\toptionContext: PropTypes.string.isRequired,\n\toptionKey: PropTypes.string.isRequired,\n\toptionValue: PropTypes.bool.isRequired,\n\tsetOption: PropTypes.func.isRequired,\n};\n\nexport default React.memo(Toggle);\n","import './SidebarOptionsPanel.scss';\n\nimport React from 'react';\n\nimport OptionPanel from '../../../../optionsPanels/_components/OptionsPanel';\n\nimport OptionsGroup from './OptionsGroup';\nimport Select from './Select';\nimport Slider from './Slider';\nimport Toggle from './Toggle';\n\nfunction getEntryComponent(type) {\n\tswitch (type) {\n\t\tcase 'optionsGroup':\n\t\t\treturn OptionsGroup;\n\t\tcase 'select':\n\t\t\treturn Select;\n\t\tcase 'slider':\n\t\t\treturn Slider;\n\t\tcase 'toggle':\n\t\t\treturn Toggle;\n\t}\n}\n\nexport default function SidebarOptionPanel(props) {\n\treturn (\n\t\t<div className={'sb-optionsPanel'}>\n\t\t\t<OptionPanel {...props} getEntryComponent={getEntryComponent} />\n\t\t</div>\n\t);\n}\n","import createAction from '../../core/createAction';\nimport * as actionTypes from './actionsTypes';\n\nexport const setOptionValue = (context, key, value) => {\n\tif (!context) {\n\t\tthrow new TypeError('Cannot set an option without a context');\n\t}\n\tif (!key) {\n\t\tthrow new TypeError('Cannot set an option without a key');\n\t}\n\tconst payload = {\n\t\tcontext,\n\t\tkey,\n\t\tvalue,\n\t};\n\treturn createAction(actionTypes.DB_OPTION_SET_OPTION_VALUE, payload);\n};\n","import Rendering from '../_components/Rendering';\nimport OptionsPanelFactory from '../../_containers/OptionsPanelFactory';\n\nimport allWidgets from '../allWidgets';\nimport {\n\tgetNonInteractableWidgets,\n\tgetHiddenWidgets,\n} from '../_state/selectors';\n\nexport default OptionsPanelFactory(\n\tallWidgets,\n\tgetNonInteractableWidgets,\n\tgetHiddenWidgets,\n\tRendering\n);\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../db/options/selectors';\nimport { setOptionValue } from '../../db/options/actions';\n\nexport default function OptionsPanelFactory(\n\tallWidgets,\n\tgetNonInteractableWidgets,\n\tgetHiddenWidgets,\n\tcomponent\n) {\n\treturn connect(\n\t\t(state) => {\n\t\t\tconst stateToProps = {\n\t\t\t\tallWidgets,\n\t\t\t\tnonInteractableWidgets: getNonInteractableWidgets(state),\n\t\t\t\thiddenWidgets: getHiddenWidgets(state),\n\t\t\t};\n\n\t\t\tlet widget;\n\t\t\tlet groupWidget;\n\n\t\t\tallWidgets.widgetsOrder.forEach((widgetId) => {\n\t\t\t\twidget = allWidgets.allWidgets[widgetId];\n\n\t\t\t\tif (widget.type === 'optionsGroup') {\n\t\t\t\t\twidget.groupWidgetsOrder.forEach((groupWidgetId) => {\n\t\t\t\t\t\tgroupWidget = widget.allGroupWidgets[groupWidgetId];\n\n\t\t\t\t\t\tstateToProps[groupWidget.option.key] = getOptionValue(\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tgroupWidget.option.context,\n\t\t\t\t\t\t\tgroupWidget.option.key\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tstateToProps[widget.option.key] = getOptionValue(\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\twidget.option.context,\n\t\t\t\t\t\twidget.option.key\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn stateToProps;\n\t\t},\n\n\t\t{\n\t\t\tsetOption: setOptionValue,\n\t\t}\n\t)(component);\n}\n","/* eslint-disable max-lines */\nexport default {\n\twidgetsOrder: [\n\t\t'style',\n\t\t'chordsAndLyricsDisplay',\n\t\t'alignChordsWithLyrics',\n\t\t'alignBars',\n\t\t'autoRepeatChords',\n\t\t'expandSectionRepeats',\n\n\t\t'layout',\n\t\t'chords',\n\t\t'format',\n\t],\n\n\tallWidgets: {\n\t\tstyle: {\n\t\t\tlabel: 'Rendering style',\n\t\t\ttype: 'select',\n\t\t\ttypeOptions: {\n\t\t\t\tallChoices: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'styleChordMark',\n\t\t\t\t\t\tlabel: 'ChordMark',\n\t\t\t\t\t\tvalue: 'chordmark',\n\t\t\t\t\t},\n\t\t\t\t\t// {\n\t\t\t\t\t// \tid: 'styleChordpro',\n\t\t\t\t\t// \tlabel: 'ChordPro',\n\t\t\t\t\t// \tvalue: 'chordpro'\n\t\t\t\t\t// },\n\t\t\t\t],\n\t\t\t},\n\t\t\toption: {\n\t\t\t\tcontext: 'songFormatting',\n\t\t\t\tkey: 'style',\n\t\t\t},\n\t\t},\n\t\tchordsAndLyricsDisplay: {\n\t\t\tlabel: 'Chords and lyrics',\n\t\t\ttype: 'select',\n\t\t\ttypeOptions: {\n\t\t\t\tallChoices: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'cldisplayAll',\n\t\t\t\t\t\tlabel: 'Display both',\n\t\t\t\t\t\tvalue: 'all',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'cldisplayLyrics',\n\t\t\t\t\t\tlabel: 'Lyrics only',\n\t\t\t\t\t\tvalue: 'lyrics',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'cldisplayChords',\n\t\t\t\t\t\tlabel: 'Chords only',\n\t\t\t\t\t\tvalue: 'chords',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'cldisplayChordsFirstLyricLine',\n\t\t\t\t\t\tlabel: 'Chords + First lyric line',\n\t\t\t\t\t\tvalue: 'chordsFirstLyricLine',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\toption: {\n\t\t\t\tcontext: 'songPreferences',\n\t\t\t\tkey: 'chordsAndLyricsDisplay',\n\t\t\t},\n\t\t},\n\t\talignChordsWithLyrics: {\n\t\t\tlabel: 'Align chords with lyrics',\n\t\t\ttype: 'toggle',\n\t\t\toption: {\n\t\t\t\tcontext: 'songPreferences',\n\t\t\t\tkey: 'alignChordsWithLyrics',\n\t\t\t},\n\t\t},\n\t\talignBars: {\n\t\t\tlabel: 'Align bars',\n\t\t\ttype: 'toggle',\n\t\t\toption: {\n\t\t\t\tcontext: 'songFormatting',\n\t\t\t\tkey: 'alignBars',\n\t\t\t},\n\t\t},\n\t\tautoRepeatChords: {\n\t\t\tlabel: 'Auto repeat chords',\n\t\t\ttype: 'toggle',\n\t\t\toption: {\n\t\t\t\tcontext: 'songFormatting',\n\t\t\t\tkey: 'autoRepeatChords',\n\t\t\t},\n\t\t},\n\t\texpandSectionRepeats: {\n\t\t\tlabel: 'Expand section repeats',\n\t\t\ttype: 'toggle',\n\t\t\toption: {\n\t\t\t\tcontext: 'songFormatting',\n\t\t\t\tkey: 'expandSectionRepeats',\n\t\t\t},\n\t\t},\n\n\t\tlayout: {\n\t\t\ttype: 'optionsGroup',\n\t\t\tlabel: 'Layout',\n\t\t\ticon: 'view_compact',\n\n\t\t\tgroupWidgetsOrder: [\n\t\t\t\t'documentSize',\n\t\t\t\t'documentMargins',\n\t\t\t\t'columnsCount',\n\t\t\t\t'columnBreakOnParagraph',\n\t\t\t],\n\t\t\tallGroupWidgets: {\n\t\t\t\tdocumentSize: {\n\t\t\t\t\tlabel: 'Document size',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'documentSizeA4',\n\t\t\t\t\t\t\t\tlabel: 'A4',\n\t\t\t\t\t\t\t\tvalue: 'a4',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'documentSizeBooxMax2Pro',\n\t\t\t\t\t\t\t\tlabel: 'Boox Max 2 Pro',\n\t\t\t\t\t\t\t\tvalue: 'booxmax2pro',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'documentSize',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tdocumentMargins: {\n\t\t\t\t\tlabel: 'Margins',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\tmax: 5,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'documentMargins',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tcolumnsCount: {\n\t\t\t\t\tlabel: 'Columns',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\tmax: 4,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'columnsCount',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tcolumnBreakOnParagraph: {\n\t\t\t\t\tlabel: 'Break on paragraph',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'columnBreakOnParagraph',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\tchords: {\n\t\t\ttype: 'optionsGroup',\n\t\t\tlabel: 'Chords',\n\t\t\ticon: 'music_note',\n\n\t\t\tgroupWidgetsOrder: [\n\t\t\t\t'transposeValue',\n\t\t\t\t'simplifyChords',\n\t\t\t\t'harmonizeAccidentals',\n\t\t\t\t'preferredAccidentals',\n\t\t\t\t'useShortNamings',\n\t\t\t],\n\n\t\t\tallGroupWidgets: {\n\t\t\t\ttransposeValue: {\n\t\t\t\t\tlabel: 'Transpose',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: -11,\n\t\t\t\t\t\tmax: 11,\n\t\t\t\t\t\tshowPlusSymbol: true,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songPreferences',\n\t\t\t\t\t\tkey: 'transposeValue',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tsimplifyChords: {\n\t\t\t\t\tlabel: 'Simplify chords',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'simplifyChordsNone',\n\t\t\t\t\t\t\t\tlabel: 'None',\n\t\t\t\t\t\t\t\tvalue: 'none',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'simplifyChordsMax',\n\t\t\t\t\t\t\t\tlabel: 'Max',\n\t\t\t\t\t\t\t\tvalue: 'max',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'simplifyChordsCore',\n\t\t\t\t\t\t\t\tlabel: 'Core',\n\t\t\t\t\t\t\t\tvalue: 'core',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songPreferences',\n\t\t\t\t\t\tkey: 'simplifyChords',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tharmonizeAccidentals: {\n\t\t\t\t\tlabel: 'Harmonize accidentals',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songPreferences',\n\t\t\t\t\t\tkey: 'harmonizeAccidentals',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tpreferredAccidentals: {\n\t\t\t\t\tlabel: 'Preferred accidentals',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'preferredAccidentalsAuto',\n\t\t\t\t\t\t\t\tlabel: 'Auto',\n\t\t\t\t\t\t\t\tvalue: 'auto',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'preferredAccidentalsSharp',\n\t\t\t\t\t\t\t\tlabel: 'Sharp (#)',\n\t\t\t\t\t\t\t\tvalue: 'sharp',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'preferredAccidentalsFlat',\n\t\t\t\t\t\t\t\tlabel: 'Flats (b)',\n\t\t\t\t\t\t\t\tvalue: 'flat',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songPreferences',\n\t\t\t\t\t\tkey: 'preferredAccidentals',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tuseShortNamings: {\n\t\t\t\t\tlabel: 'Use short names',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songPreferences',\n\t\t\t\t\t\tkey: 'useShortNamings',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\tformat: {\n\t\t\ttype: 'optionsGroup',\n\t\t\tlabel: 'Format',\n\t\t\ticon: 'format_size',\n\n\t\t\tgroupWidgetsOrder: [\n\t\t\t\t'fontSize',\n\t\t\t\t'printFontSize',\n\t\t\t\t'fontStyle',\n\t\t\t\t'chordsColor',\n\t\t\t\t'highlightChords',\n\t\t\t],\n\n\t\t\tallGroupWidgets: {\n\t\t\t\tfontSize: {\n\t\t\t\t\tlabel: 'Font size',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: -5,\n\t\t\t\t\t\tmax: +5,\n\t\t\t\t\t\tshowPlusSymbol: true,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'fontSize',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tprintFontSize: {\n\t\t\t\t\tlabel: 'Font size (print)',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: -5,\n\t\t\t\t\t\tmax: +5,\n\t\t\t\t\t\tshowPlusSymbol: true,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'printFontSize',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tfontStyle: {\n\t\t\t\t\tlabel: 'Font style',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'fontStyleRoboto',\n\t\t\t\t\t\t\t\tlabel: 'Roboto',\n\t\t\t\t\t\t\t\tvalue: 'roboto',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'fontStyle',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tchordsColor: {\n\t\t\t\t\tlabel: 'Chords color',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'chordsColor',\n\t\t\t\t\t\t\t\tlabel: 'Base',\n\t\t\t\t\t\t\t\tvalue: 'base',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'chordsColorRed',\n\t\t\t\t\t\t\t\tlabel: 'Red',\n\t\t\t\t\t\t\t\tvalue: 'red',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'chordsColorYellow',\n\t\t\t\t\t\t\t\tlabel: 'Yellow',\n\t\t\t\t\t\t\t\tvalue: 'yellow',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'chordsColorGreen',\n\t\t\t\t\t\t\t\tlabel: 'Green',\n\t\t\t\t\t\t\t\tvalue: 'green',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'chordsColor',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\thighlightChords: {\n\t\t\t\t\tlabel: 'Highlight Chords',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'songFormatting',\n\t\t\t\t\t\tkey: 'highlightChords',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n};\n","import _difference from 'lodash/difference';\n\nimport editorModeOptions from '../../../db/options/editorModeOptions'; // duh!\nimport { getEditorMode } from '../../../ui/layout/app/_state/selectors';\nimport { getSelectedId } from '../../../fileManager/_state/selectors';\nimport {\n\tgetOptionsDefaults,\n\tgetOptionValue,\n} from '../../../db/options/selectors';\n\nexport const getNonInteractableWidgets = (state) => {\n\tconst nonInteractableWidgets = [];\n\n\tconst allOptions = Object.keys({\n\t\t...getOptionsDefaults(state, 'songFormatting'),\n\t\t...getOptionsDefaults(state, 'songPreferences'),\n\t});\n\n\tconst selectedId = getSelectedId(state);\n\tif (!selectedId) {\n\t\treturn allOptions;\n\t}\n\n\tconst editorMode = getEditorMode(state);\n\n\tconst nonInteractableOptions = _difference(\n\t\tallOptions,\n\t\teditorModeOptions[editorMode]\n\t);\n\n\tnonInteractableWidgets.push(...nonInteractableOptions);\n\n\treturn nonInteractableWidgets;\n};\n\nexport const getHiddenWidgets = (state) => {\n\tconst hiddenWidgets = [];\n\n\tconst editorMode = getEditorMode(state);\n\n\tconst harmonizeAccidentals = getOptionValue(\n\t\tstate,\n\t\t'songPreferences',\n\t\t'harmonizeAccidentals'\n\t);\n\t/*\n\tconst chordsAndLyricsDisplay = getOptionValue(\n\t\tstate,\n\t\t'rendering',\n\t\t'chordsAndLyricsDisplay'\n\t);\n\n\tif (chordsAndLyricsDisplay !== 'all') {\n\t\thiddenWidgets.push('alignChordsWithLyrics');\n\t}\n\t\n\t */\n\tif (!harmonizeAccidentals) {\n\t\thiddenWidgets.push('preferredAccidentals');\n\t}\n\n\tif (editorMode === 'print') {\n\t\thiddenWidgets.push('fontSize');\n\t} else {\n\t\thiddenWidgets.push('printFontSize');\n\t}\n\n\t//hiddenWidgets.push('simplifyChords');\n\n\treturn hiddenWidgets;\n};\n","import './Rendering.scss';\n\nimport React from 'react';\n\nimport Icon from '../../../ui/_components/Icon';\n\nimport SidebarOptionPanel from '../../../ui/sideBar/options/_components/SidebarOptionsPanel';\n\nexport default function Rendering(props) {\n\treturn (\n\t\t<div className={'renderingOptionsPanel'}>\n\t\t\t<div className={'renderingOptionsPanel-isCollapsed'}>\n\t\t\t\t<span className={'renderingOptionsPanel-icon'}>\n\t\t\t\t\t<Icon iconName={'settings'} />\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div className={'renderingOptionsPanel-isExpanded'}>\n\t\t\t\t<SidebarOptionPanel {...props} id={'rendering'} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nimport AppLayout from '../ui/layout/app/_containers/App';\nimport FileManager from '../fileManager/_containers/FileManager';\nimport Editor from '../editor/_containers/Editor';\nimport RightBarPanel from '../optionsPanels/rendering/_containers/Rendering';\n\nexport default function Edit() {\n\tconst fm = <FileManager />;\n\tconst rightBarPanel = <RightBarPanel />;\n\n\treturn (\n\t\t<AppLayout leftBar={fm} rightBar={rightBarPanel}>\n\t\t\t<Editor />\n\t\t</AppLayout>\n\t);\n}\n","import UniversalRouter from 'universal-router';\nimport renderController from './renderController';\n\nimport Editor from './controllers/Editor';\n\nconst routes = [\n\t{\n\t\tpath: '/editor',\n\t\taction: () => Editor,\n\t},\n];\n\nconst universalRouter = new UniversalRouter(routes);\n\nexport default {\n\tnavigateTo(path) {\n\t\treturn universalRouter.resolve(path).then((controller) => {\n\t\t\treturn renderController(controller);\n\t\t});\n\t},\n};\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport { getStore } from './state/store';\n\nimport ErrorBoundary from './ui/_components/ErrorBoundary';\n\nexport default function renderController(Controller) {\n\tReactDom.render(\n\t\t<Provider store={getStore()}>\n\t\t\t<React.StrictMode>\n\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t<Controller />\n\t\t\t\t</ErrorBoundary>\n\t\t\t</React.StrictMode>\n\t\t</Provider>,\n\t\tdocument.getElementById('app')\n\t);\n}\n","import '../scss/styles.scss';\n\nimport { createStore } from './state/store';\nimport registerHandlers from './registerHandlers';\nimport router from './router';\n\nregisterHandlers();\n\nexport default function run() {\n\tcreateStore();\n\n\treturn router.navigateTo('/editor');\n}\n","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmBarContent\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"barContent\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmBarSeparator\\\">\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"barSeparator\") || (depth0 != null ? lookupProperty(depth0,\"barSeparator\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"barSeparator\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":29},\"end\":{\"line\":1,\"column\":47}}}) : helper)))\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmChordLineOffset\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"chordLineOffset\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmChordLine\\\">\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"chordLineOffset\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":26},\"end\":{\"line\":1,\"column\":128}}})) != null ? stack1 : \"\")\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"chordLine\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmChordDuration\\\">\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"chordDuration\") : depth0), depth0))\n    + \"</span>\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmChordSymbol\\\">\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"chordSymbol\") : depth0), depth0))\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"chordDuration\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":50},\"end\":{\"line\":1,\"column\":144}}})) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<span class=\\\"cmEmptyLine\\\">&nbsp;</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<p class=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"lineClasses\") || (depth0 != null ? lookupProperty(depth0,\"lineClasses\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"lineClasses\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":10},\"end\":{\"line\":1,\"column\":27}}}) : helper)))\n    + \"\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"line\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</p>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmLyricLine\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"lyricLine\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmSectionLabel\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"sectionLabel\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"song\") : depth0), depth0)) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmTimeSignature\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"timeSignature\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_touffi_chords_charts_studio\"] = self[\"webpackChunk_touffi_chords_charts_studio\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216], () => (__webpack_require__(\"KFoJ\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","clock","Date","now","DB_FILES_CREATE","DB_FILES_DELETE","DB_FILES_IMPORT","DB_FILES_UPDATE","DB_OPTION_SET_OPTION_VALUE","UI_LAYOUT_APP_TOGGLE_LEFT_BAR","UI_LAYOUT_APP_TOGGLE_RIGHT_BAR","UI_LAYOUT_APP_SET_EDITOR_MODE","isLeftBarCollapsed","state","ui","layout","app","isRightBarCollapsed","getEditorMode","editorMode","getSelectedId","fileManager","selected","getRenamedId","renamed","getDefaultTitle","defaultTitle","getAllTitles","createSelectorCreator","defaultMemoize","_isEqual","createDeepEqualSelector","_map","db","files","allFiles","title","id","_sortBy","o","toLowerCase","getOne","getCategoryOptions","category","file","options","Object","keys","length","_cloneDeep","getLatestModeOptions","fileOptions","allOptionsPerMode","edit","push","play","print","export","sort","a","b","updatedAt","reduce","acc","modeOptions","assign","initialState","createFile","action","payload","content","updateFile","deleteFile","updateFileOption","fullState","context","key","value","includes","optionCategory","fileState","addOption","setEditorMode","fileId","nextMode","mode","previousModeOptions","_pick","editorModeOptions","FILE_MANAGER_SELECT_FILE","FILE_MANAGER_ENABLE_RENAME","getOptionValue","values","getOptionsDefaults","defaults","setOptionValue","newState","newOptions","getModeOptions","songFormatting","defaultOptions","selectFile","songPreferences","defaultPreferences","newPreferences","combineSectionReducers","type","actionTypes","chordsAndLyricsDisplay","alignChordsWithLyrics","harmonizeAccidentals","preferredAccidentals","useShortNamings","simplifyChords","transposeValue","style","alignBars","autoRepeatChords","expandSectionRepeats","documentSize","documentMargins","columnsCount","columnBreakOnParagraph","fontSize","printFontSize","fontStyle","chordsColor","highlightChords","store","createStore","storeEnhancers","composeWithDevTools","applyMiddleware","thunkMiddleware","persistedState","serializedState","localStorage","getItem","JSON","parse","err","loadState","_defaultsDeep","seed","createReduxStore","allReducers","subscribe","stringify","setItem","saveState","getState","getStore","createAction","TypeError","allLines","formatAllParagraphs","song","bodyParagraphs","map","paragraph","formatParagraph","lines","line","formatLine","parts","formatChordLine","formatLyricLine","formatTagLine","filter","i","part","trimRight","lineHasChords","items","chordLine","item","itemHasChord","chords","trim","lineHasLyrics","lyricsLine","itemHasLyric","itemHasLeftPadding","lyrics","itemHasRightPadding","lineHasTag","tagValue","replace","sectionLabelsMapping","adlib","bridge","chorus","interlude","intro","introduction","outro","prechorus","solo","some","ChordLyricsPair","Tag","isRenderable","trimLeft","getFromUltimateGuitar","ugChordChartRaw","ugChordChart","parsed","ChordSheetJS","join","songImporterHandlers","message","chordChart","source","e","console","log","buildTitle","artist","dispatch","uuidv4","importFile","songTitle","_handleMessage","allHandlers","window","origin","location","data","ErrorBoundary","props","error","errorInfo","this","setState","className","whiteSpace","open","toString","componentStack","children","React","propTypes","PropTypes","Icon","iconName","Logo","NavEntry","label","icon","isActive","isDisabled","classNames","onClick","Nav","currentMode","allEntries","selectedId","entry","Footer","versions","App","toggleLeftBar","toggleRightBar","leftBar","rightBar","leftBarClassNames","rightBarClassNames","allNavEntries","defaultProps","connect","FileActionEntry","text","FileActions","allActions","enableRename","FileEntry","useState","setTitle","isSelected","isRenamed","classList","inputRef","saveTitle","newTitle","current","scrollLeft","useEffect","focus","onDoubleClick","target","select","ref","readOnly","autoFocus","onChange","onBlur","onFocus","onKeyPress","which","preventDefault","getSelection","removeAllRanges","FileManager","allTitles","isRequired","actionsTypes","escapeHTML","unescaped","domPurify","stripTags","html","ALLOWED_TAGS","KEEP_CONTENT","allowedTimeSignatures","isTimeSignatureString","string","barRepeat","chordBeatCount","chordLineRepeat","noChord","noLyrics","sectionLabel","chordPositionMarker","sectionLabelRegexp","RegExp","syntax","isSectionLabel","match","clearSpaces","isChord","potentialChord","chordParserFactory","parseChord","chordBeatCountSymbols","barRepeatSymbols","isEmptyLine","parseTimeSignature","array","split","count","Number","parseInt","beatCount","parseChordWrapper","chordString","IncorrectBeatCountException","duration","currentBeatCount","_isString","_isFinite","name","Error","InvalidChordRepetitionException","defaultTimeSignature","isNoChordSymbol","token","getChordDuration","checkInvalidChordRepetition","bar","currentChord","allChords","previousChord","model","shouldChangeBar","checkInvalidBeatCount","chord","isLast","barBeatCount","hasTooManyBeats","hasTooFewBeats","hasInvalidBeatCount","hasUnevenChordsDurations","firstChordDuration","parseLyricLine","position","regexp","stringWithoutPositionMarkers","chordPositions","tmpString","indexOf","forEachChordInSong","fn","newLines","forEach","lineTypes","allBars","forEachChordInChordLine","newChordLine","barIndex","chordIndex","getNthOfLabel","n","typesCount","enableSelect","currentLabel","songLinesFactory","currentSection","currentSectionStats","previousSectionLabelLine","sectionsStats","currentTimeSignature","previousChordLines","blueprint","blueprintIndex","blueprintLine","isRepeatingChords","shouldRepeatSection","shouldCopySection","getSectionLabelLine","lineIndex","allSrcLines","found","copyIndex","repeatTimes","parseSectionLabel","increaseSectionStats","getSectionCount","index","indexWithoutRepeats","withoutRepeats","remainingLines","slice","nextSectionIndex","findIndex","currentSectionContent","undefined","isTimeSignature","isCurrentSectionEmpty","isFromSectionCopy","every","isFirstOfLabel","getChordLine","tokenWithoutBeatCount","previousBar","timeSignature","emptyBar","chordCount","allTokens","tokenIndex","repeatedBar","isRepeated","beat","barClone","parseChordLine","addPreviousChordLine","getLyricLine","shift","copySection","toCopy","endsWithEmptyLine","pop","repeatSection","nextLine","isLastLineOfSection","sectionLabelLine","toRepeat","isFromSectionRepeat","addLine","lineSrc","potentialChordToken","withoutBeatCount","isChordLine","candidate","repeat","isChordLineRepeater","repeatString","sliceStart","sliceEnd","isFromChordLineRepeater","getRepeatedChordLine","getEmptyLine","repeatedLine","shouldRepeatLineFromBlueprint","isFromAutoRepeatChords","repeatLinesFromBlueprint","asArray","flagPositionedChords","lineChordCount","shouldPositionChords","hasPositionedChords","isPositioned","currentLine","parseSong","songSrc","songArray","_isArray","songLines","_findIndex","occurrences","getAllChordsInSong","barSeparator","chordBeat","chordLineOffsetSpacer","emptyBeatSpaces","lyricsSpacer","noChordSymbol","spacesAfterDefault","getMaxBeatsWidth","maxBeatsWidth","symbolLength","symbol","shouldPrintChordsDuration","symbols","Math","max","allMasks","space","chordLineInput","chordPattern","chordSpaces","spacesAfter","beatMaxWidth","spacesWithin","lyricsLineInput","hasNoPositionMarkers","chordToken","lyricToken","tokenizedLyrics","allPositions","substring","spacedLyricsLine","currentBarIndex","isFirstChord","isNewBar","startsWithSpace","lyricsSpaceAfter","shouldOffsetChordLine","chordLineOffset","offset","trimEnd","str","renderBarContent","barContent","rendering","chordSymbolTpl","chordSymbol","chordDuration","renderChordSymbol","barContentTpl","renderChordLine","chordLineModel","allBarsRendered","barSeparatorTpl","chordLineTpl","render","emptyLineTpl","lineClasses","lineTpl","labelsMapping","c","p","s","u","v","renderSectionLabel","labelRaw","rendered","toUpperCase","sectionLabelTpl","lyricLine","trimmedLyricLine","shouldTrimLine","lyricLineTpl","timeSignatureLine","timeSignatureTpl","defaultRenderChord","chordRendererFactory","renderChord","getSectionsStats","stats","getMainAccidental","rootNote","flatCount","sharpCount","formatted","shouldReplaceWithBarRepeat","barHasMultiplePositionedChords","renderSong","songTxt","renderOptions","parsedSong","accidentalsType","printChordsDuration","shouldSkipRepeatedSectionLine","isFirstLyricLineOfSection","renderChords","addPrintChordsDurationsFlag","shouldRenderLine","replaceRepeatedBars","renderAllLines","songTpl","accidental","simplify","useFlats","getChordSymbol","shouldRepeatLines","isFiltered","shouldSkipAutoRepeatChordLine","allFilteredLines","spaced","alignedChordSpacer","simpleChordSpacer","shouldAlignChords","chordLyricsSpacer","renderChordLineModel","renderEmptyLine","renderTimeSignature","renderLyricLine","renderLine","Boolean","renderSongCm","SongRenderer","dangerouslySetInnerHTML","__html","EditorPreview","selectedFile","Schema","nodes","marks","stateToText","toJSON","doc","toSafeHtml","dirty","ProseMirrorEditorView","selectedFileId","editorContent","editorView","useRef","editorDom","previousFileId","editorExists","dom","parentNode","destroyEditor","removeChild","editorState","EditorState","pmDOMParser","editorSchema","div","document","createElement","innerHTML","preserveWhitespace","plugins","pmHistory","keymap","undo","redo","baseKeymap","createEditorState","EditorView","dispatchTransaction","transaction","applyTransaction","transactions","updateState","tr","docChanged","createEditorView","appendChild","EditorLayout","ExportPreview","PlayRenderer","Page","pageHeader","allColumnsLines","allSectionsRendered","columnLines","columnLinesTxt","pageClasses","pageContentWrapperClasses","PageHeader","cssClasses","mapLinesToColumns","allLinesWithHeight","firstPageHeight","normalPageHeight","noEmptyLinesOnColumnStart","noOrphanTextLine","allPagesColumns","pageIndex","columnIndex","maxColumnHeight","getMaxColumnHeight","currentColumnHeight","flushBuffer","buffer","shouldChangeColumn","height","changeColumn","nextHeight","shouldChangePage","insert","insertOnNextColumn","fitsOnCurrentColumn","bufferHeight","fitsOnNextColumn","get","layoutFactory","wouldProduceOrphanTextLine","hasClass","isTextLine","isEndOfParagraph","isBreakable","getDimensionsFromDom","component","measuringFn","container","add","body","Promise","resolve","ReactDOM","measure","padColumns","columnCount","allColumns","getOffsetHeight","element","offsetHeight","getClientHeight","clientHeight","cssSelectors","getAllLinesHeight","allLinesHeight","querySelectorAll","pageContent","querySelector","AllPages","setAllPagesColumns","useLayoutEffect","getDimensions","pageOptions","getPagesHeight","mapped","allPagesRendered","pageColumns","PrintPreview","Editor","OptionsPanel","widget","groupWidget","WidgetComponent","GroupComponent","isGroupInteractable","isGroupWidgetInteractable","renderedGroupWidgets","allWidgets","nonInteractableWidgets","hiddenWidgets","setOption","getEntryComponent","renderedWidgets","widgetsOrder","widgetId","groupWidgetsOrder","groupWidgetId","allGroupWidgets","renderWidget","isInteractable","localWidget","optionContext","option","optionKey","optionValue","typeOptions","OptionsGroup","isOpened","setIsOpened","shouldBeInteractable","SelectChoice","checkIcon","Select","isOpen","setIsOpen","allChoices","renderedChoices","choice","Slider","min","showPlusSymbol","valueDisplay","disabled","Toggle","SidebarOptionPanel","getNonInteractableWidgets","getHiddenWidgets","stateToProps","format","allOptions","nonInteractableOptions","_difference","Edit","fm","rightBarPanel","routes","path","universalRouter","UniversalRouter","then","controller","Controller","ReactDom","getElementById","addEventListener","router","Handlebars","module","exports","template","depth0","helpers","partials","stack1","lookupProperty","parent","propertyName","prototype","hasOwnProperty","call","lambda","helper","escapeExpression","hooks","helperMissing","nullContext","program","noop","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","m","O","result","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","splice","r","getter","__esModule","d","definition","defineProperty","enumerable","g","globalThis","Function","obj","prop","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}