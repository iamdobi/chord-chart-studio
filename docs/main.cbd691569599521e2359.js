!function(e){function n(n){for(var r,i,s=n[0],l=n[1],u=n[2],c=0,b=[];c<s.length;c++)i=s[c],o[i]&&b.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(d&&d(n);b.length;)b.shift()();return a.push.apply(a,u||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,s=1;s<t.length;s++){var l=t[s];0!==o[l]&&(r=!1)}r&&(a.splice(n--,1),e=i(i.s=t[0]))}return e}var r={},o={0:0},a=[];function i(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=r,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)i.d(t,r,function(n){return e[n]}.bind(null,r));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=n,s=s.slice();for(var u=0;u<s.length;u++)n(s[u]);var d=l;a.push(["Vtdi",1]),t()}({"0max":function(e,n,t){var r=t("3O+N");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,n,t,r,o){return'<span class="cp2-bar-separator">|</span>'},useData:!0})},"7FWp":function(e,n,t){var r=t("3O+N");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,n,t,r,o){return'<span class="cp2-chord-symbol">'+e.escapeExpression(e.lambda(null!=n?n.chordSymbol:n,n))+"</span>"},useData:!0})},B4kk:function(e,n,t){var r=t("3O+N");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,n,t,r,o){var a;return'<p class="cp2-chord-line">'+(null!=(a=e.lambda(null!=n?n.chordLine:n,n))?a:"")+"</p>"},useData:!0})},JsK9:function(e,n,t){var r=t("3O+N");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,n,t,r,o){var a;return'<span class="cp2-bar-content">'+(null!=(a=e.lambda(null!=n?n.barContent:n,n))?a:"")+"</span>"},useData:!0})},"U5+Y":function(e,n,t){var r=t("3O+N");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,n,t,r,o){var a;return'<div class="cp2-song">'+(null!=(a=e.lambda(null!=n?n.song:n,n))?a:"")+"</div>"},useData:!0})},Vtdi:function(e,n,t){"use strict";t.r(n);t("u0UJ");var r=t("b/sn"),o=t("cD+i"),a=t("byeC"),i=t("VuzU"),s=t("++pP"),l=t("Mhoe");function u(e){return new r.Plugin({key:"onStateChange",view:()=>({update(n){e.emit("statechange",n.state)}})})}var d=t("n5wB");var c=new a.Schema({nodes:d.schema.spec.nodes,marks:d.schema.spec.marks});var b=t("cjKa");t("Qe33");var h=t("LvDl"),m=t.n(h),p=t("PIqb");const y=new p.Chords;function f(e=""){return e.replace(/\t+/g," ").replace(/  +/g," ").trim().split(" ").map(e=>e.replace(/\.*$/g,"")).every(e=>(function(e){return m.a.isString(e)&&y.isChord(e)})(e))}const g=new p.Chords;var w=function(e){return g.print(g.parse(e).symbol)};class v extends Error{constructor({string:e,symbol:n,duration:t,beatCount:r,beatsPerBar:o}={}){if(!e||!m.a.isString(e))throw new TypeError("InvalidChordRepetitionException cannot be created without chord string, received: "+e);if(!n||!m.a.isString(n))throw new TypeError("InvalidChordRepetitionException cannot be created without chord symbol, received: "+n);if(!t||!m.a.isFinite(t))throw new TypeError("InvalidChordRepetitionException cannot be created without chord duration, received: "+t);if(!r||!m.a.isFinite(r))throw new TypeError("InvalidChordRepetitionException cannot be created without beatCount, received: "+r);if(!o||!m.a.isFinite(o))throw new TypeError("InvalidChordRepetitionException cannot be created without beatsPerBar, received: "+o);super(),this.name="IncorrectBeatCountException",this.string=e,this.symbol=n,this.duration=t,this.beatCount=r,this.beatsPerBar=o}}class E extends Error{constructor({string:e,symbol:n}={}){if(!e||!m.a.isString(e))throw new TypeError("InvalidChordRepetitionException cannot be created without chord string, received: "+e);if(!n||!m.a.isString(n))throw new TypeError("InvalidChordRepetitionException cannot be created without chord symbol, received: "+n);super(),this.name="InvalidChordRepetitionException",this.string=e,this.symbol=n}}function C(e,{beatsPerBar:n=4}={}){const t=e.replace(/  +/g," ").trim().split(" "),r=[];let o={allChords:[]},a={},i=0,s=0,l={};if(t.forEach(e=>{if((a={string:e,duration:(e.match(/\./g)||[]).length||n,symbol:w(e.replace(/\./g,""))}).beat=i+1,i+=a.duration,o.allChords.length>0&&(l=o.allChords[o.allChords.length-1]).symbol===a.symbol)throw new E({string:a.string,symbol:a.symbol});if(o.allChords.push(a),s++,i===n)o.beatCount=i,r.push(m.a.cloneDeep(o)),o={allChords:[]},i=0,l={};else if(i>n)throw new v({message:"",string:a.string,symbol:a.symbol,duration:a.duration,beatCount:i,beatsPerBar:n})}),i>0&&i<n)throw new v({message:"",string:a.string,symbol:a.symbol,duration:a.duration,beatCount:i,beatsPerBar:n});return{chordCount:s,allBars:r}}const A={0:{"":[]},3:{3:[3],12:[2,4],21:[6,0],111:[2,2,0]},4:{4:[3],13:[1,4],22:[3,2],31:[5,0],112:[1,1,3],121:[1,4,0],211:[4,1,0],1111:[2,2,2]}};const D=2,B=1;function _(e){return m.a.isObject(e)&&m.a.isFunction(e.render)}var M=t("JsK9"),I=t.n(M);var x={render(e,{chordRenderer:n}={}){let t=0,r=0;if(!_(n))throw new TypeError("chordRenderer is not a valid renderer");const o=e.allChords.reduce((e,o)=>(t=m.a.isFinite(o.spacesWithin)?o.spacesWithin:0,r=m.a.isFinite(o.spacesAfter)?o.spacesAfter:2,e+=n.render(o.symbol)+" ".repeat(t)+" ".repeat(r)),"");return I()({barContent:o})}},k=t("B4kk"),j=t.n(k),F=t("0max"),S=t.n(F),O={render(e,{barContentRenderer:n,chordRenderer:t}={}){if(!_(n))throw new TypeError("barContentRenderer is not a valid renderer");const r=e.allBars.map(e=>n.render(e,{chordRenderer:t})),o=S()(),a=o+r.join(o)+o;return j()({chordLine:a})}},P=t("7FWp"),T=t.n(P),R={render(e){const n=w(e);return T()({chordSymbol:n})}},Y=t("YPa8"),L=t.n(Y),W={render:e=>L()({textLine:e})},G=t("U5+Y"),N=t.n(G),J={render(e,{alignChords:n=!1}){let t=function(e,{parseChordLine:n}={}){if(!m.a.isFunction(n))throw new TypeError("parseChordLine should be a function, received : "+n);return(m.a.isArray(e)?e:e.split("\n")).map(e=>({string:e})).map(e=>{if(f(e.string))try{e.parsed=n(e.string),e.type="chord"}catch(n){e.parsed=e.string,e.type="text"}else e.parsed=e.string,e.type="text";return e})}(e,{parseChordLine:C});const r=function(e){const n=[];return e.filter(e=>"chord"===e.type).forEach(e=>{e.parsed.allBars.forEach((e,t)=>{if(!n[t]){n[t]={};for(let r=1;r<=e.beatCount;r++)n[t][r]=0}e.allChords.forEach(e=>{n[t][e.beat]=Math.max(n[t][e.beat],e.symbol.length)})})}),n}(t),o=t.map(e=>{if("chord"===e.type){const t=n?function(e,n){const t=m.a.cloneDeep(e);let r;return t.allBars.forEach((e,t)=>{e.allChords.forEach(o=>{if(o.spacesWithin=n[t][o.beat]-o.symbol.length,o.spacesAfter=0,o.beat!==e.beatCount){o.spacesAfter=D;for(let a=o.beat+1;a<o.beat+o.duration;a++)r=n[t][a],o.spacesAfter+=r||B,a!==e.beatCount&&r&&(o.spacesAfter+=D)}})}),t}(e.parsed,r):function(e){const n=m.a.cloneDeep(e);let t=0,r="",o=[];return n.allBars.forEach(e=>{t=0,r="",e.allChords.forEach(e=>{r+=e.duration.toString(),t+=e.duration}),o=A[t][r];for(let n=0;n<r.length;n++)e.allChords[n].spacesAfter=o[n]}),n}(e.parsed);e.rendered=O.render(t,{barContentRenderer:x,chordRenderer:R})}else e.rendered=W.render(e.string);return e}).map(e=>e.rendered).join("\n");return N()({song:o})}};var U="A A\nYou don't have to be beautiful\nA A\nTo turn me on\nA A\nI just need your body, baby\nA A\nFrom dusk till dawn\n\nD D\nYou don't need experience\nD D\nTo turn me out\nA A\nYou just leave it all up to me\nA A\nI'm gonna show you what it's all about\n\nE E\nYou don't have to be rich to be my girl\nD D\nYou don't have to be cool to rule my world\nE E\nAin't no particular sign I'm more compatible with\nD D\nI just want your extra time and your...Kiss\n\nA A\nYou got to not talk dirty, baby\nA A\nIf you wanna impress me\nA A\nYou can't be too flirty, Mama\nA A\nI know how to undress me, yeah\n\nD D\nI want to be your fantasy\nD D\nMaybe you could be mine?\n\nA A\nYou just leave it all up to me\nA A\nWe could have a good time\n\nChorus\n\nI think I wanna dance\n\nA A\nWomen, not girls, rule my world\nA A\nI said they rule my world\nA A\nAct your age, Mama! Not your shoe size(Not your shoe size)\nA A\nMaybe we could do the twirl\n\nD D\nYou don't have to watch Dynasty\nD D \nTo have an attitude (Uh)\nA A\nYou just leave it all up to me\nA A\nMy love... will be your food\n\nChorus",q=t("XH0y");q.setDefaultLevel("info"),{getLogger:e=>q.getLogger(e)}.getLogger("main").info("info test");const K=document.querySelector("#editor"),z=function(e){const n=new b.EventEmitter2,t=function(e){return[Object(l.history)(),Object(i.keymap)({"Mod-z":l.undo,"Mod-y":l.redo}),Object(i.keymap)(s.baseKeymap),u(e)]}(n);let d;return n.on("statechange",e=>{n.emit("change",function(e){return e.toJSON().doc.content.map(e=>e.content?e.content.reduce((e,n)=>e+=n.text,""):"")}(e))}),Object.assign(n,{load(i){const s=r.EditorState.create({doc:a.DOMParser.fromSchema(c).parse(i),plugins:t});d?d.updateState(s):d=new o.EditorView(e,{state:s}),n.emit("statechange",s)}})}(K),V=document.querySelector("#rendered-song"),H=document.querySelector("#aligned-rendering");function $(e,{alignChords:n=!0}){const t=function(e){const n=document.createElement("template");return e=e.trim(),n.innerHTML=e,n.content.firstChild}(J.render(e,{alignChords:n}));V.childNodes.length?V.replaceChild(t,V.firstChild):V.appendChild(t)}function Q(e){const n=document.createElement("div");return n.innerHTML=e.split("\n").map(e=>`<p>${e}</p>`).join(""),n}z.on("change",e=>{$(e,{alignChords:H.checked})}),z.load(Q(U)),document.querySelector(".song-selector").addEventListener("change",e=>{switch(e.target.value){case"kiss":z.load(Q(U));break;case"world":z.load(Q("# Intro\nAb.. Cm.. Bb\n\nAb.. Cm..\n_ If I ruled _ the world,\nBb\n_ Every day would be the first day of\nAb.. Cm..\nspring _\nBb\n_ Every heart would have a\nEb/G.. Ab..\nnew song _ to sing,\nCm74 EbM7/Bb Bb9\n_ And we'd sing of the _joy every morning would bring _\n\nAb.. Cm..\n_ If I ruled _ the world,\nBb\n_ Every man would be as free as a\nAb.. Cm..\nbird.\nBb\n_ Every voice would be a\nEb/G.. Ab..\nvoice to be _heard,\nCm EbM7/Bb Eb6/Bb.. Bb9. F/G.\n_ Take my word we would _treasure each day that oc_curred _ _\n\n\nCM.. Dm7/C.. FM9/C.. CM9. Dm7/C.\nMy world _ would be a _beautiful place _ _\nCM.. CM9.. Fm7.. Fm7/Bb..\nWhere we would _weave _ such wonderful _dreams _\n\nEbM.. Fm9/Eb.. EbM.. Fm9/Eb..\nMy _ world _ would wear a _smile on its _face,\nCm7.. Cm6.. Am7b5. D7. Fm7. AbM9/Bb.\nLike the _man and the _moon has, _when _the moon _ _ beams _\n\nAb.. Cm.. Bb\n\nAb.. Cm.. Bb\nIf I ruled the world,\nAb.. Cm.. Bb\nEvery man would see the world was his friend. Yeah\nEb/G.. Ab.. Cm9\nThere'd be happiness that no man could end,\nBbm/G C7#9b13\nNo my friend, not if I ruled the world.\nFm7.. F#m7. Gm7. Abm9.. D7b9b5.. \nEvery hand would be held up high,\nEbM7.. D7b9.. C7b9b13.. C7#9b13..\nThere'd be sunshine in everyone's sky.\nFm11 AbM9/Bb.. Bb13..\nIf the day ever dawned,\nWill I rule the world.\n\nAb.. Cm.. Bb\nEvery hand would be held up high,\nAb.. Cm.. Bb\nEvery star would shine in everyone's sky.\nAb.. Cm.. Bb\nIf the day ever dawned,\nAb.. Cm.. Bb\nWill I rule the world."));break;case"worry":z.load(Q("Stevie Wonder – Don’t you worry ‘bout a thing\n\nIntro\nEbm.. EbmM7.. Ebm7.. Ebm6..\n\nCouplet\nEbm.. EbmM7.. Ebm7.. Ab7..\nEverybody's got a thing\nDbm7.. Gb7.. BM7.. Bb+..\nBut some don't know how to handle it\nEbm.. EbmM7.. Ebm7.. Ab7..\nAlways reachin' out in vain\nDbm7.. Gb7.. BM7.. E9..\nAccepting the things not worth having but\n\nPont\nF# F#7\nDon't you worry 'bout a thing\nBb7 BM7\nDon't you worry 'bout a thing, mama\nAb7 Db11\nCause I'll be standing on the side\nGb7 Bb+\nWhen you check it out\n\nCouplet\nThey say your style of life's a drag\nAnd that you must go other places\nBut just don't you feel too bad\nWhen you get fooled by smiling faces but\n\nPont 2\nDon't you worry 'bout a thing\nDon't you worry 'bout a thing, mama\nCause I'll be standing on the side\nGb.. F.. E.. Eb.. D.. Db.. Gb7\nWhen you check it out...Yeah\nGb.. F.. E.. Eb.. D.. Db.. Gb7.. Bb+7..\nWhen you get it off...your trip\n\nRefrain\n\nEbm.. EbmM7.. Ebm7.. Ebm6.. EM7 EM7\nDon't you worry 'bout a thing...Yeah\nEbm.. EbmM7.. Ebm7.. Ebm6.. EM7 EM7\nDon't you worry 'bout a thing...Yeah\n\nCouplet\n\nPont 2\n\nCouplet\n\nEverybody needs a change\nA chance to check out the new\nBut you're the only one to see\nThe changes you take yourself through\n\nPont 1\n\nRefrain"))}}),H.addEventListener("change",()=>{z.load(K)})},YPa8:function(e,n,t){var r=t("3O+N");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,n,t,r,o){var a;return'<p class="cp2-text-line">'+(null!=(a=e.lambda(null!=n?n.textLine:n,n))?a:"")+"</p>"},useData:!0})},u0UJ:function(e,n,t){}});
//# sourceMappingURL=main.cbd691569599521e2359.js.map