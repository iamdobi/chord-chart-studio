!function(e){function t(t){for(var r,i,l=t[0],c=t[1],u=t[2],p=0,d=[];p<l.length;p++)i=l[p],a[i]&&d.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(s&&s(t);d.length;)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,l=1;l<n.length;l++){var c=n[l];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var s=c;o.push(["Vtdi",1]),n()}({"/BFp":function(e,t,n){var r=n("3O+N");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,a){return'<p class="cmLine cmEmptyLine">&nbsp;</p>'},useData:!0})},"2ywC":function(e,t,n){},"3Z8G":function(e,t,n){},"6/UV":function(e,t,n){},"6EPN":function(e,t,n){},"6joI":function(e,t,n){var r=n("3O+N");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,a){var o;return'<span class="ucc-bar-content">'+(null!=(o=e.lambda(null!=t?t.barContent:t,t))?o:"")+"</span>"},useData:!0})},"8PSE":function(e,t,n){},"9hQf":function(e,t,n){var r=n("3O+N");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,a){var o;return null!=(o=e.lambda(null!=t?t.song:t,t))?o:""},useData:!0})},BC9S:function(e,t,n){},Ewt9:function(e,t,n){var r=n("3O+N");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,a){return'<span class="ucc-bar-separator">|</span>'},useData:!0})},IA7u:function(e,t,n){},JeH2:function(e,t,n){},PuEf:function(e,t,n){},Sdr1:function(e,t,n){},UUiC:function(e,t,n){},Vtdi:function(e,t,n){"use strict";n.r(t);n("u0UJ");var r=n("P4Tr"),a=n.n(r),o=n("ANjH"),i=function(){try{var e=localStorage.getItem("state");if(!e)return;return JSON.parse(e)}catch(e){return}},l=function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(e){}},c=(n("pNMO"),n("ma9I"),n("TeQF"),n("QWBl"),n("eoL8"),n("5DmW"),n("tkto"),n("FZtP"),"db/files/Create"),u="db/files/Update",s="db/files/Delete";function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){d(e,t,n[t])})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={allFiles:{}};function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){g(e,t,n[t])})}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={},y=Object(o.b)({files:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case c:return function(e,t){var n=t.payload,r=n.id,a=n.title,o=n.content,i=p({},e.allFiles);return i[r]={id:r,title:a,content:o},p({},e,{allFiles:i})}(e,t);case u:return function(e,t){var n=t.payload,r=n.id,a=n.title,o=n.content;if(!a&&!o||!e.allFiles[r])return e;var i=p({},e.allFiles);return i[r]=p({},i[r]),a&&(i[r].title=a),o&&(i[r].content=o),p({},e,{allFiles:i})}(e,t);case s:return function(e,t){var n=t.payload.id;if(!n||!e.allFiles[n])return e;var r=p({},e.allFiles);return delete r[n],p({},e,{allFiles:r})}(e,t)}return e},options:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"db/options/setOptionValue":var n=t.payload,r=n.context,a=n.key,o=n.value;if(!e[r]||!e[r][a])return e;var i=m({},e[r]);i[a]=m({},i[a],{value:o});var l=m({},e);return l[r]=i,l}return e}}),v="fileManager/select",b="fileManager/enableRename";function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){C(e,t,n[t])})}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={selected:"",renamed:"",defaultTitle:"[untitled]"};var S="ui/layout/app/toggleLeftBar",w="ui/layout/app/toggleRightBar",R="ui/layout/app/setEditorMode";function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){P(e,t,n[t])})}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x={isLeftBarCollapsed:!1,isRightBarCollapsed:!1,editorMode:"edit"};var j,k=Object(o.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case S:return N({},e,{isLeftBarCollapsed:!e.isLeftBarCollapsed});case w:return N({},e,{isRightBarCollapsed:!e.isRightBarCollapsed});case R:return N({},e,{editorMode:t.payload.mode})}return e}}),q=Object(o.b)({layout:k}),T=Object(o.b)({db:y,fileManager:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case c:var n=t.payload.id;return E({},e,{selected:n,renamed:n});case u:return E({},e,{renamed:""});case s:return E({},e,{selected:"",renamed:""});case v:var r=t.payload.id;return E({},e,{selected:r,renamed:r===e.renamed?r:""});case b:return E({},e,{renamed:t.payload.id})}return e},ui:q}),B={db:{options:{rendering:{documentSize:{value:"a4",default:"a4",resetOnSongChange:!1},documentMargins:{value:3,default:3,resetOnSongChange:!1},columnsCount:{value:1,default:1,resetOnSongChange:!1},columnBreakOnParagraph:{value:!0,default:!0,resetOnSongChange:!1},style:{value:"ucc",default:"ucc",resetOnSongChange:!1},alignBars:{value:!0,default:!0,resetOnSongChange:!1},showChords:{value:!0,default:!0,resetOnSongChange:!1},instrument:{value:"guitar",default:"guitar",resetOnSongChange:!1},showStrummingPattern:{value:!0,default:!0,resetOnSongChange:!1},transposeValue:{value:0,default:0,resetOnSongChange:!0},simplifyChords:{value:!1,default:!1,resetOnSongChange:!0},capoPosition:{value:0,default:0,resetOnSongChange:!0},harmonizeAccidentals:{value:!0,default:!0,resetOnSongChange:!0},preferredAccidentals:{value:"auto",default:"auto",resetOnSongChange:!0},fontSize:{value:0,default:0,resetOnSongChange:!1},printFontSize:{value:0,default:0,resetOnSongChange:!1},fontStyle:{value:"roboto",default:"roboto",resetOnSongChange:!1},chordsColor:{value:"black",default:"black",resetOnSongChange:!1},highlightChords:{value:!0,default:!0,resetOnSongChange:!1}}}}},F=[];var M=n("d/CZ"),z=n("q1tI"),_=n.n(z),L=n("i8i4"),A=n.n(L),I=n("/MKj"),D=(n("4Brf"),n("0oug"),n("4mDm"),n("DQNa"),n("uL8W"),n("NBAS"),n("ExoC"),n("07d7"),n("JfAA"),n("PKPk"),n("3bBZ"),n("WoyN"),n("17x9")),W=n.n(D);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=H(this,J(t).call(this,e))).state={error:null,errorInfo:null},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,_.a.Component),n=t,(r=[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?_.a.createElement("div",{className:"ErrorBoundary"},_.a.createElement("h2",null,"Something went wrong"),_.a.createElement("details",{style:{whiteSpace:"pre-wrap"},open:!0},this.state.error&&this.state.error.toString(),_.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}])&&G(n.prototype,r),a&&G(n,a),t}();U.propTypes={children:W.a.any};var X=U;function Z(e,t){if(!e)throw new TypeError("Cannot create an action without an action type");return{type:e,payload:t}}var Q=function(e){return e.ui.layout.app.isLeftBarCollapsed},Y=function(e){return e.ui.layout.app.isRightBarCollapsed},$=function(e){return e.ui.layout.app.editorMode};n("oVuX"),n("JeH2"),n("6/UV"),n("PuEf");function ee(e){var t=e.iconName;return _.a.createElement("i",{className:["icon","material-icons"].join(" ")},t)}ee.propTypes={iconName:W.a.string.isRequired};var te=_.a.memo(ee);var ne=_.a.memo(function(){return _.a.createElement("div",{className:"logo"},_.a.createElement("div",{className:"logo-isCollapsed"},_.a.createElement(te,{iconName:"queue_music"})),_.a.createElement("div",{className:"logo-isExpanded"},_.a.createElement("span",{className:"logo-icon"},_.a.createElement(te,{iconName:"queue_music"})),"Chords Charts Studio"))});n("2B1R"),n("zKZe"),n("g3KT");function re(e){var t=e.label,n=e.icon,r=e.editorMode,a=e.setEditorMode,o=["mainNavEntry"];return e.isActive&&o.push("mainNavEntry-isActive"),_.a.createElement("li",{className:o.join(" "),onClick:function(){a(r)}},_.a.createElement("span",{className:"mainNavEntry-icon"},_.a.createElement(te,{iconName:n})),t)}re.propTypes={label:W.a.string.isRequired,icon:W.a.string.isRequired,editorMode:W.a.string.isRequired,setEditorMode:W.a.func.isRequired,isActive:W.a.bool.isRequired};var ae=_.a.memo(re);function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ie(e){var t=e.currentMode,n=e.allEntries,r=e.setEditorMode;return _.a.createElement("nav",{className:"mainNav"},_.a.createElement("ul",{className:"mainNav-entries"},n.map(function(e,n){return _.a.createElement(ae,oe({key:n,isActive:e.editorMode===t,setEditorMode:r},e))})))}ie.propTypes={currentMode:W.a.string.isRequired,setEditorMode:W.a.func.isRequired,allEntries:W.a.arrayOf(W.a.shape({id:W.a.string.isRequired,label:W.a.string.isRequired,icon:W.a.string.isRequired,editorMode:W.a.string.isRequired}))};var le=_.a.memo(ie);n("Sdr1");var ce=_.a.memo(function(){return _.a.createElement("div",{className:"appFooter"},"Chords Charts Studio v0.6.0 - ChordMark v0.2.0")}),ue=[{id:"edit",label:"Edit",icon:"create",editorMode:"edit"},{id:"play",label:"Play",icon:"music_note",editorMode:"play"},{id:"print",label:"Print / PDF",icon:"print",editorMode:"print"},{id:"export",label:"Export",icon:"save_alt",editorMode:"export"}];function se(e){var t=e.isLeftBarCollapsed,n=e.isRightBarCollapsed,r=e.editorMode,a=e.toggleLeftBar,o=e.toggleRightBar,i=e.setEditorMode,l=e.leftBar,c=e.rightBar,u=["leftBar"];t&&u.push("leftBar-isCollapsed");var s=["rightBar"];return n&&s.push("rightBar-isCollapsed"),_.a.createElement("div",{className:"appLayout-wrapper"},_.a.createElement("section",{className:u.join(" ")},_.a.createElement("div",{className:"leftBar-content",onClick:t?a:null},_.a.createElement(ne,null),l),_.a.createElement("div",{className:"leftBar-collapser",onClick:a,"data-testid":"leftBar-collapser"},_.a.createElement("span",{className:"leftBar-collapserIcon"},_.a.createElement(te,{iconName:"keyboard_arrow_left"})))),_.a.createElement("section",{className:"appLayout-main"},_.a.createElement("section",{className:"appLayout-header"},_.a.createElement(le,{allEntries:ue,currentMode:r,setEditorMode:i})),_.a.createElement("section",{className:"appLayout-content"},e.children),_.a.createElement("section",{className:"appLayout-footer"},_.a.createElement(ce,null))),_.a.createElement("section",{className:s.join(" ")},_.a.createElement("div",{className:"rightBar-collapser",onClick:o,"data-testid":"rightBar-collapser"},_.a.createElement("span",{className:"rightBar-collapserIcon"},_.a.createElement(te,{iconName:"keyboard_arrow_right"}))),_.a.createElement("div",{className:"rightBar-content",onClick:n?o:null},c)))}se.propTypes={children:W.a.element,isLeftBarCollapsed:W.a.bool,isRightBarCollapsed:W.a.bool,toggleLeftBar:W.a.func.isRequired,toggleRightBar:W.a.func.isRequired,editorMode:W.a.string.isRequired,setEditorMode:W.a.func.isRequired,leftBar:W.a.element.isRequired,rightBar:W.a.element.isRequired},se.defaultProps={isLeftBarCollapsed:!1,isRightBarCollapsed:!1};var pe=se,de=Object(I.b)(function(e){return{isLeftBarCollapsed:Q(e),isRightBarCollapsed:Y(e),editorMode:$(e)}},{toggleLeftBar:function(){return Z(S)},toggleRightBar:function(){return Z(w)},setEditorMode:function(e){return Z(R,{mode:e})}})(pe),fe=function(e){return e.fileManager.selected},me=function(e){return e.fileManager.renamed},ge=function(e){return e.fileManager.defaultTitle},he=n("EcEN"),ye=n.n(he),ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=t.content;if(!e)throw new TypeError("Cannot update a file without an id");return Z(u,{id:e,title:n,content:r})},be=n("3WF5"),Ee=n.n(be),Ce=n("Y+p1"),Oe=n.n(Ce),Se=n("xweI"),we=n.n(Se),Re=n("G4qV"),Ne=Object(Re.a)(Re.b,Oe.a)(function(e){return Ee()(e.db.files.allFiles,function(e){return{title:e.title,id:e.id}})},function(e){return we()(e,function(e){return e.title.toLowerCase()})}),Pe=function(e,t){return e.db.files.allFiles[t]};n("kGR0");function xe(e){var t=e.icon,n=e.text,r=e.action;return _.a.createElement("span",{className:"fileManagerAction",onClick:r},_.a.createElement("span",{className:"fileManagerAction-icon"},_.a.createElement(te,{iconName:t})," ",n))}xe.propTypes={icon:W.a.string.isRequired,text:W.a.string.isRequired,action:W.a.func.isRequired};var je=_.a.memo(xe);function ke(){return(ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qe(e){var t=e.createFile,n=e.deleteFile,r=[{icon:"add_circle",text:"New",action:t},{icon:"create",text:"Rename",action:e.enableRename},{icon:"delete",text:"Delete",action:n}];return _.a.createElement("div",{className:"fileManager-actionsList"},r.map(function(e,t){return _.a.createElement(je,ke({},e,{key:t}))}))}qe.propTypes={createFile:W.a.func.isRequired,deleteFile:W.a.func.isRequired,enableRename:W.a.func.isRequired};var Te=_.a.memo(qe);n("J30X");function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Fe(e){var t=Be(Object(z.useState)(e.title),2),n=t[0],r=t[1],a=e.fileId,o=e.isSelected,i=e.isRenamed,l=e.defaultTitle,c=e.selectFile,u=e.enableRename,s=e.updateFile,p=["fileManagerEntry"];o&&p.push("fileManagerEntry-isSelected"),i&&p.push("fileManagerEntry-isRenamed");var d=_.a.createRef();function f(e){s(a,{title:e=e||l}),r(e),d.current.scrollLeft=0}return Object(z.useEffect)(function(){i&&d.current.focus()},[i,d]),_.a.createElement("li",{className:p.join(" "),onClick:function(){o||c(a)},onDoubleClick:function(e){i||(u(a),e.target.select())}},_.a.createElement("input",{className:"fileManagerEntry-input",ref:d,type:"text",value:n,readOnly:i?null:"readOnly",autoFocus:i?"autoFocus":null,onChange:function(e){r(e.target.value)},onBlur:function(e){i&&f(e.target.value)},onFocus:function(e){i&&e.target.select()},onKeyPress:function(e){i&&13===e.which&&(e.preventDefault(),window.getSelection().removeAllRanges(),f(e.target.value))}}))}Fe.propTypes={title:W.a.string.isRequired,fileId:W.a.string.isRequired,isSelected:W.a.bool.isRequired,isRenamed:W.a.bool.isRequired,defaultTitle:W.a.string.isRequired,selectFile:W.a.func.isRequired,enableRename:W.a.func.isRequired,updateFile:W.a.func.isRequired};var Me=Fe;function ze(e){var t=e.allTitles,n=e.selected,r=e.renamed,a=e.defaultTitle,o=e.selectFile,i=e.createFile,l=e.deleteFile,c=e.enableRename,u=e.updateFile;return _.a.createElement("div",{className:"fileManager"},_.a.createElement("div",{className:"fileManager-isCollapsed"},_.a.createElement("span",{className:"fileManager-icon"},_.a.createElement(te,{iconName:"file_copy"}))),_.a.createElement("div",{className:"fileManager-isExpanded"},_.a.createElement(Te,{createFile:function(){return i(a)},deleteFile:function(){return l(n)},enableRename:function(){return c(n)}}),_.a.createElement("ul",{className:"fileManager-entriesList"},t.map(function(e){return _.a.createElement(Me,{title:e.title,defaultTitle:a,fileId:e.id,isSelected:n===e.id,isRenamed:r===e.id,selectFile:o,updateFile:u,enableRename:c,key:e.id})}))))}ze.propTypes={allTitles:W.a.arrayOf(W.a.shape({title:W.a.string.isRequired,id:W.a.string.isRequired})).isRequired,selected:W.a.string.isRequired,renamed:W.a.string.isRequired,defaultTitle:W.a.string.isRequired,selectFile:W.a.func.isRequired,createFile:W.a.func.isRequired,deleteFile:W.a.func.isRequired,enableRename:W.a.func.isRequired,updateFile:W.a.func.isRequired};var _e=ze,Le=Object(I.b)(function(e){return{selected:fe(e),renamed:me(e),defaultTitle:ge(e),allTitles:Ne(e)}},{selectFile:function(e){return Z(v,{id:e})},createFile:function(e){if(!e)throw new TypeError("Cannot create a file without title");var t={id:ye.a.v4(),title:e,content:""};return Z(c,t)},deleteFile:function(e){return Z(s,{id:e})},updateFile:ve,enableRename:function(e){return Z(b,{id:e})}})(_e),Ae=(n("d1+z"),n("8PSE"),n("noZS"),function(e,t,n){if(e.db.options[t]&&e.db.options[t][n])return e.db.options[t][n].value}),Ie=(n("zIDs"),n("JZM8")),De=n.n(Ie),We=n("wMS7"),Ve=n.n(We);function Ge(e){return Ve.a.sanitize(e)}n("Ldrd"),n("83U7"),n("R/66");var He=n("dNuR"),Je=n.n(He),Ke=n("8Hwm"),Ue=n.n(Ke);function Xe(e){return Ue.a.sanitize(e)}function Ze(e){return Ue.a.sanitize(e,{ALLOWED_TAGS:["#text"],KEEP_CONTENT:!0})}n("iOpb"),n("1wfR"),n("1zki");var Qe=n("kL1a"),Ye=n.n(Qe),$e=n("u3z5"),et=new $e.Chords;function tt(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\t+/g," ").replace(/  +/g," ").trim().split(" ").map(function(e){return e.replace(/\.*$/g,"")}).every(function(e){return function(e){return Ye()(e)&&et.isChord(e)}(e)})}n("Ecbk");var nt=["2/2","3/2","2/4","3/4","4/4","5/4","3/8","6/8","9/8","12/8"];function rt(e){return nt.includes(e)}n("0T4K"),n("Dzwt");function at(e){if(!rt(e))throw new TypeError("Expected time signature string, received: "+e);var t=e.split("/"),n=Number.parseInt(t[0],10),r=Number.parseInt(t[1],10),a=n;return 2===r?a=2*n:8===r&&(a=n/3),{string:e,count:n,value:r,beatCount:a}}n("ZFc4"),n("rmJO"),n("5ktT");var ot=n("wfLL"),it=n.n(ot),lt=n("XhyR"),ct=n.n(lt),ut=new $e.Chords;n("IHQ4"),n("cvC6"),n("jDvd"),n("wt4b"),n("GZld"),n("uae+"),n("okNV"),n("7kcN"),n("6tnn"),n("SFce"),n("nXTL"),n("ruy4"),n("rt9K"),n("8iCz"),n("jpAq"),n("aLnL"),n("O0Hx");var st=n("okNX"),pt=n.n(st);function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(e,t){return!t||"object"!==dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mt(e){var t="function"==typeof Map?new Map:void 0;return(mt=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return gt(e,arguments,yt(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ht(r,e)})(e)}function gt(e,t,n){return(gt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&ht(a,n.prototype),a}).apply(null,arguments)}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vt=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.string,a=n.duration,o=n.currentBeatCount,i=n.beatCount;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!r||!Ye()(r))throw new TypeError("IncorrectBeatCountException cannot be created without chord string, received: "+r);if(!a||!pt()(a))throw new TypeError("IncorrectBeatCountException cannot be created without chord duration, received: "+a);if(!o||!pt()(o))throw new TypeError("IncorrectBeatCountException cannot be created without currentBeatCount, received: "+o);if(!i||!pt()(i))throw new TypeError("IncorrectBeatCountException cannot be created without beatCount, received: "+i);return(e=ft(this,yt(t).call(this))).name="IncorrectBeatCountException",e.string=r,e.duration=a,e.currentBeatCount=o,e.beatCount=i,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(t,mt(Error)),t}();function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){return!t||"object"!==bt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ct(e){var t="function"==typeof Map?new Map:void 0;return(Ct=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Ot(e,arguments,wt(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),St(r,e)})(e)}function Ot(e,t,n){return(Ot=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&St(a,n.prototype),a}).apply(null,arguments)}function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rt=function(e){function t(){var e,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).string;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!n||!Ye()(n))throw new TypeError("InvalidChordRepetitionException cannot be created without chord string, received: "+n);return(e=Et(this,wt(t).call(this))).name="InvalidChordRepetitionException",e.string=n,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}(t,Ct(Error)),t}();function Nt(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).timeSignature,n=void 0===t?at("4/4"):t,r=n.beatCount,a=e.replace(/  +/g," ").trim().split(" "),o=[],i={allChords:[]},l={},c={},u=0,s=0,p={};if(a.forEach(function(e){if(c=function(e){return ut.parse(e)}(e.replace(/\./g,"")),(l={string:e,duration:(e.match(/\./g)||[]).length||r,model:c}).beat=u+1,u+=l.duration,i.allChords.length>0&&(p=i.allChords[i.allChords.length-1],it()(p.model,l.model)))throw new Rt({string:l.string});if(i.allChords.push(l),s++,u===r)i.timeSignature=n,o.push(ct()(i)),i={allChords:[]},u=0,p={};else if(u>r)throw new vt({message:"",string:l.string,duration:l.duration,currentBeatCount:u,beatCount:r})}),u>0&&u<r)throw new vt({message:"",string:l.string,duration:l.duration,currentBeatCount:u,beatCount:r});return{chordCount:s,allBars:o}}var Pt=n("voDb"),xt=n.n(Pt);function jt(e,t){var n=ct()(e);return n.forEach(function(e){"chord"===e.type&&e.model.allBars.forEach(function(e){e.allChords.forEach(function(e){t(e)})})}),n}var kt="4/4";function qt(e){var t=Je()(e)?e:e.split("\n"),n=at(kt),r=t.map(Xe).map(Ze).map(function(e){return{string:e}}).map(function(e){if(rt(e.string))n=at(e.string),e.type="time-signature",e.model=n;else if(tt(e.string))try{e.type="chord",e.model=Nt(e.string,{timeSignature:n})}catch(t){e.type="text"}else e.type="text";return e});return{allLines:r,allChords:function(e){var t,n=[];return jt(e,function(e){-1===(t=xt()(n,function(t){return it()(t.model,e.model)}))?n.push({model:ct()(e.model),occurrences:1}):n[t].occurrences++}),n}(r)}}n("4eEA"),n("Y7Wg");var Tt={0:{"":[]},2:{2:[3],11:[3,2]},3:{3:[3],12:[2,4],21:[6,0],111:[2,2,0]},4:{4:[3],13:[1,4],22:[3,2],31:[5,0],112:[1,1,3],121:[1,4,0],211:[4,1,0],1111:[2,2,2]}};var Bt=2,Ft=1;var Mt=n("cimT"),zt=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],_t={"C#":"Db","D#":"Eb","F#":"Gb","G#":"Ab","A#":"Bb"},Lt=n.n(Mt)()(_t);function At(e){return Lt[e]||e}function It(e,t,n){var r=zt.indexOf(e)+t,a=Math.floor(r/12),o=zt[r-12*a];return n&&_t[o]||o}function Dt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.transposeValue,a=void 0===r?0:r,o=n.accidentalsType,i=void 0===o?"auto":o,l=n.harmonizeAccidentals,c=void 0===l||l,u=ct()(e),s="auto"===i?function(e){var t="",n=0,r=0;return e.forEach(function(e){2===(t=e.model.symbol.rootNote).length&&("b"===t[1]?n+=e.occurrences:r+=e.occurrences)}),n>r?"flat":"sharp"}(t):i;return(c||0!==a)&&(u=jt(u,function(e){e.transposedModel=function(e,t,n){var r=ct()(e),a=r.symbol.rootNote,o=r.symbol.bassNote,i=At(a);if(r.symbol.rootNote=It(i,t,n),o){var l=At(o);r.symbol.bassNote=It(l,t,n)}return r}(e.model,a,"flat"===s)})),u}var Wt=n("uVib"),Vt=n.n(Wt),Gt=(n("eWUb"),n("FxsW"),n("lb95")),Ht=n.n(Gt);var Jt=n("6joI"),Kt=n.n(Jt),Ut=" ",Xt=0,Zt=2;function Qt(e){var t=0,n=0,r=e.allChords.reduce(function(e,r){var a;return t=pt()(r.spacesWithin)?r.spacesWithin:Xt,n=pt()(r.spacesAfter)?r.spacesAfter:Zt,e+=(a=r.symbol,Ht()({chordSymbol:a})+Ut.repeat(t)+Ut.repeat(n))},"");return Kt()({barContent:r})}var Yt=n("Ewt9"),$t=n.n(Yt);var en=n("d6nv"),tn=n.n(en),nn=n("/BFp"),rn=n.n(nn);var an=n("9hQf"),on=n.n(an),ln=new $e.Chords,cn=function(e){return ln.print(e.symbol)};function un(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.alignBars,r=void 0!==n&&n,a=t.transposeValue,o=void 0===a?0:a,i=t.accidentalsType,l=void 0===i?"auto":i,c=t.harmonizeAccidentals,u=void 0===c||c,s=e.allLines,p=function(e){var t=[];return e.filter(function(e){return"chord"===e.type}).forEach(function(e){e.model.allBars.forEach(function(e,n){if(!t[n]){t[n]={};for(var r=1;r<=e.timeSignature.beatCount;r++)t[n][r]=0}e.allChords.forEach(function(e){t[n][e.beat]=Math.max(t[n][e.beat],e.symbol.length)})})}),t}(s=jt(s=Dt(s,e.allChords,{transposeValue:o,accidentalsType:l,harmonizeAccidentals:u}),function(e){e.symbol=e.transposedModel?cn(e.transposedModel):cn(e.model)})),d=s.map(function(e){if("chord"===e.type){var t=r?function(e,t){var n,r=ct()(e);return r.allBars.forEach(function(e,r){e.allChords.forEach(function(a){if(a.spacesWithin=t[r][a.beat]-a.symbol.length,a.spacesAfter=0,a.beat!==e.timeSignature.beatCount){a.spacesAfter=Bt;for(var o=a.beat+1;o<a.beat+a.duration;o++)n=t[r][o],a.spacesAfter+=n||Ft,o!==e.timeSignature.beatCount&&n&&(a.spacesAfter+=Bt)}})}),r}(e.model,p):(a=e.model,o=ct()(a),i=0,l="",c=[],o.allBars.forEach(function(e){i=0,l="",e.allChords.forEach(function(e){l+=e.duration.toString(),i+=e.duration}),c=Tt[i][l];for(var t=0;t<l.length;t++)e.allChords[t].spacesAfter=c[t]}),o);e.rendered=function(e){var t=e.allBars.map(function(e){return Qt(e)}),n=$t()(),r=n+t.join(n)+n;return Vt()({chordLine:r})}(t)}else"text"===e.type&&(e.rendered=""===(n=e.string)?rn()():tn()({textLine:n}));var n,a,o,i,l,c;return e}).filter(function(e){return e.rendered}).map(function(e){return e.rendered}).join("\n");return on()({song:d})}function sn(e,t){return un(qt(e),t)}function pn(e){var t=e.content,n=De()(e,["alignBars","harmonizeAccidentals","accidentalsType","transposeValue"]);return _.a.createElement("div",{className:"songRenderer"},_.a.createElement("div",{dangerouslySetInnerHTML:{__html:Ge(sn(t,n))}}))}pn.propTypes={content:W.a.string},pn.defaultProps={content:""};var dn=pn,fn=Object(I.b)(function(e){return{accidentalsType:Ae(e,"rendering","preferredAccidentals"),alignBars:Ae(e,"rendering","alignBars"),harmonizeAccidentals:Ae(e,"rendering","harmonizeAccidentals"),transposeValue:Ae(e,"rendering","transposeValue")}})(dn);function mn(e){var t=e.selectedFile;return _.a.createElement("div",{className:"ep-SongRenderer"},_.a.createElement(fn,{content:t.content}))}mn.propTypes={selectedFile:W.a.object.isRequired};var gn=mn,hn=(n("Rfxz"),n("BC9S"),n("b/sn")),yn=n("cD+i"),vn=n("byeC"),bn=n("VuzU"),En=n("++pP"),Cn=n("Mhoe");var On=n("n5wB"),Sn=new vn.Schema({nodes:On.nodes,marks:On.marks});n("E9XD"),n("9LPj"),n("vxnP");function wn(e){return e.toJSON().doc.content.map(function(e){return e.content?e.content.reduce(function(e,t){return e+=t.text},""):""}).join("\n")}n("rB9j"),n("EnZy");function Rn(e){return Ve.a.sanitize(e,{ALLOWED_TAGS:["p","#text"],KEEP_CONTENT:!1})}n("Qe33");function Nn(e){var t,n,r=e.selectedFileId,a=e.editorContent,o=e.updateFile,i=Object(z.useRef)(),l=Object(z.useRef)(),c=(t=r,n=Object(z.useRef)(),Object(z.useEffect)(function(){n.current=t}),n.current);function u(){return i.current&&i.current.dom.parentNode}function s(){i.current.dom.parentNode.removeChild(i.current.dom)}return Object(z.useEffect)(function(){if(!r||i.current&&c===r)u()&&!r&&s();else{u()&&s();var e=function(e){return hn.EditorState.create({doc:vn.DOMParser.fromSchema(Sn).parse((t=e,n=Rn(t).split("\n").map(function(e){return"<p>".concat(e,"</p>")}).join(""),r=document.createElement("div"),r.innerHTML=Rn(n),r),{preserveWhitespace:"full"}),plugins:[Object(Cn.history)(),Object(bn.keymap)({"Mod-z":Cn.undo,"Mod-y":Cn.redo}),Object(bn.keymap)(En.baseKeymap)]});var t,n,r}(a);i.current=function(e,t,n){return new yn.EditorView(null,{state:e,dispatchTransaction:function(e){var r=this.state.applyTransaction(e),a=r.state,o=r.transactions;this.updateState(a),o.some(function(e){return e.docChanged})&&t(n,{content:wn(a)})}})}(e,o,r),l.current.appendChild(i.current.dom),Nn.editorView=i.current}}),_.a.createElement("div",{className:"prosemirrorWrapper",ref:l})}Nn.defaultProps={selectedFileId:"",editorContent:""},Nn.propTypes={selectedFileId:W.a.string,editorContent:W.a.string,updateFile:W.a.func.isRequired};var Pn=Nn;function xn(e){var t=e.selectedFile,n=e.updateFile;return _.a.createElement("div",{className:"songEditor"},_.a.createElement("div",{className:"songEditor-source"},_.a.createElement(Pn,{editorContent:t.content,updateFile:n,selectedFileId:t.id})),_.a.createElement("div",{className:"songEditor-preview"},_.a.createElement(gn,{selectedFile:t})))}xn.propTypes={selectedFile:W.a.object,updateFile:W.a.func.isRequired};var jn=xn;n("IA7u");function kn(e){var t=e.selectedFile;return _.a.createElement("div",{className:"exportPreview exp-SongRenderer"},_.a.createElement(fn,{content:t.content}))}kn.propTypes={selectedFile:W.a.object.isRequired};var qn=kn;n("eLJI");function Tn(e){var t=e.selectedFile;return _.a.createElement("div",{className:"playRenderer pr-SongRenderer"},_.a.createElement(fn,{content:t.content}))}Tn.propTypes={selectedFile:W.a.object.isRequired};var Bn=Tn;n("fNiH"),n("5s+n"),n("ls82");function Fn(e){var t=e.pageHeader,n=e.allColumnsLines,r=e.documentSize,a=e.documentMargins,o=e.printFontSize,i=n.map(function(e,t){var n=e.join("\n");return _.a.createElement("div",{key:t,className:"printPreview-pageColumn","data-testid":"printPreview-pageColumn",dangerouslySetInnerHTML:{__html:Ge(n)}})}),l=["printPreview-page"];l.push("printPreview-page--"+r),l.push("printPreview-page--font"+o);var c=["printPreview-pageContentWrapper"];return c.push("printPreview-pageContentWrapper--padding"+a),_.a.createElement("div",{className:l.join(" "),"data-testid":"printPreview-page"},_.a.createElement("div",{className:c.join(" "),"data-testid":"printPreview-pageContentWrapper"},_.a.createElement("div",{className:"printPreview-pageContent"},t,_.a.createElement("div",{className:"printPreview-pageColumnWrapper"},i))))}Fn.defaultProps={allColumnsLines:[]},Fn.propTypes={pageHeader:W.a.element,allColumnsLines:W.a.arrayOf(W.a.arrayOf(W.a.string)),documentSize:W.a.string.isRequired,documentMargins:W.a.number.isRequired,printFontSize:W.a.number.isRequired};var Mn=_.a.memo(Fn);function zn(e){var t=e.title;return _.a.createElement("div",{className:"printPreview-pageHeader"},t)}zn.defaultProps={allColumnsLines:[]},zn.propTypes={title:W.a.string.isRequired};var _n=_.a.memo(zn),Ln=(n("yXV3"),{emptyLine:"cmEmptyLine",chordLine:"cmChordLine",textLine:"cmTextLine"});function An(e,t){var n=t.columnsCount,r=t.firstPageHeight,a=t.normalPageHeight,o=t.columnBreakOnParagraph,i=t.noEmptyLinesOnColumnStart,l=void 0===i||i,c=t.noOrphanTextLine,u=void 0===c||c,s=function(e){var t=e.firstPageHeight,n=e.normalPageHeight,r=e.columnsCount,a=[],o=0,i=0,l=s(),c=0;function u(e){e.forEach(function(e){c+e.height>l&&p(),a[o][i].push(e.content),c+=e.height})}function s(){return 0===o&&t?t:n}function p(){i===r-1?(a[++o]=[],i=0):i++,a[o][i]=[],c=0,l=s()}return a[o]=[],a[o][i]=[],{insert:function(e){u(e)},insertOnNextColumn:function(e){p(),u(e)},fitsOnCurrentColumn:function(e){return c+e<=l},fitsOnNextColumn:function(e){return e<=(0===o&&i<r&&t?t:n)},get:function(){return a}}}({columnsCount:n,firstPageHeight:r,normalPageHeight:a,noEmptyLinesOnColumnStart:l}),p=[],d=0;return(r||a)>0&&e.forEach(function(t,n){(function(e,t,n,r){return!(In(t)&&!e.fitsOnCurrentColumn(t.height)&&0===n.length&&!0===r)})(s,t,p,l)&&(p.push(t),d+=t.height),p.length>0&&function(e,t,n){var r=n.noOrphanTextLine,a=n.columnBreakOnParagraph;if(In(e)||!t)return!0;var o=(i=e,Dn(i.content,Ln.chordLine)&&function(e){return Dn(e.content,Ln.textLine)}(t));var i;if(!0===r&&o)return!1;var l=In(t);if(!0===a&&!l)return!1;return!0}(t,e[n+1],{noOrphanTextLine:u,columnBreakOnParagraph:o})&&(s.fitsOnCurrentColumn(d)?s.insert(p):s.fitsOnNextColumn(d)?s.insertOnNextColumn(p):s.insert(p),p=[],d=0)}),s.get()}function In(e){return Dn(e.content,Ln.emptyLine)}function Dn(e,t){return e.indexOf(t)>-1}n("ddDh");function Wn(e,t){var n=document.createElement("div");return n.classList.add("measuring-node"),document.body.appendChild(n),new Promise(function(r){A.a.render(_.a.createElement("div",null,e),n,function(){var e=t(n);A.a.unmountComponentAtNode(n),n.parentNode.removeChild(n),r(e)})})}function Vn(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.length||0;n<e;n++)t.push([]);return t}function Gn(e){return e.clientHeight}function Hn(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}var Jn={line:".cmLine"};function Kn(e,t){return Un.apply(this,arguments)}function Un(){var e;return e=regeneratorRuntime.mark(function e(t,n){var r,a,o,i,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.columnsCount,a=n.documentSize,o=n.documentMargins,i=n.printFontSize,l=_.a.createElement(Mn,{allColumnsLines:Vn(r,[t]),columnsCount:r,documentSize:a,documentMargins:o,printFontSize:i}),c=function(e){var t=[];return e.querySelectorAll(Jn.line).forEach(function(e){t.push(e.offsetHeight)}),t},e.next=5,Wn(l,c);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}),(Un=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Hn(o,r,a,i,l,"next",e)}function l(e){Hn(o,r,a,i,l,"throw",e)}i(void 0)})}).apply(this,arguments)}function Xn(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Zn(e,t){return Qn.apply(this,arguments)}function Qn(){var e;return e=regeneratorRuntime.mark(function e(t,n){var r,a,o,i,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.columnsCount,a=n.documentSize,o=n.documentMargins,i=n.printFontSize,l=_.a.createElement(Mn,{pageHeader:_.a.createElement(_n,{title:t}),allColumnsLines:Vn(r),documentSize:a,documentMargins:o,printFontSize:i}),c=function(e){var t=e.querySelector(".printPreview-pageContent");return{firstPageHeight:Gn(e.querySelector(".printPreview-pageColumnWrapper")),normalPageHeight:Gn(t)}},e.next=5,Wn(l,c);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}),(Qn=function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Xn(o,r,a,i,l,"next",e)}function l(e){Xn(o,r,a,i,l,"throw",e)}i(void 0)})}).apply(this,arguments)}function Yn(e,t,n,r,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function $n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function er(e){var t=$n(Object(z.useState)([]),2),n=t[0],r=t[1],a=e.title,o=e.allLines,i=e.columnsCount,l=e.columnBreakOnParagraph,c=e.documentSize,u=e.documentMargins,s=e.printFontSize;Object(z.useLayoutEffect)(function(){(function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,n,p,d,f,m,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={columnsCount:i,documentSize:c,documentMargins:u,printFontSize:s},e.next=3,Kn(o,t);case 3:return n=e.sent,e.next=6,Zn(a,t);case 6:p=e.sent,d=p.normalPageHeight,f=p.firstPageHeight,m=o.map(function(e,t){return{content:e,height:n[t]}}),g=An(m,{columnsCount:i,columnBreakOnParagraph:l,normalPageHeight:d,firstPageHeight:f}),r(g);case 12:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Yn(o,r,a,i,l,"next",e)}function l(e){Yn(o,r,a,i,l,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}})()()},[o,a,i,l,c,u,s]);var p=n.map(function(e,t){return _.a.createElement(Mn,{key:t,pageHeader:0===t?_.a.createElement(_n,{title:a}):null,allColumnsLines:Vn(i,e),documentSize:c,documentMargins:u,printFontSize:s})});return _.a.createElement(_.a.Fragment,null,p)}er.propTypes={title:W.a.string.isRequired,allLines:W.a.arrayOf(W.a.string).isRequired,columnsCount:W.a.number.isRequired,columnBreakOnParagraph:W.a.bool.isRequired,documentSize:W.a.string.isRequired,documentMargins:W.a.number.isRequired,printFontSize:W.a.number.isRequired};var tr=er;function nr(e){var t=e.selectedFile,n=De()(e,["alignBars","harmonizeAccidentals","accidentalsType","transposeValue"]),r=sn(t.content,n).split("\n");return _.a.createElement("div",{className:"printPreview","data-testid":"printPreview"},_.a.createElement(tr,{title:t.title,allLines:r,columnsCount:e.columnsCount,columnBreakOnParagraph:e.columnBreakOnParagraph,documentSize:e.documentSize,documentMargins:e.documentMargins,printFontSize:e.printFontSize}))}nr.propTypes={selectedFile:W.a.object.isRequired,columnsCount:W.a.number.isRequired,columnBreakOnParagraph:W.a.bool.isRequired,documentSize:W.a.string.isRequired,documentMargins:W.a.number.isRequired,printFontSize:W.a.number.isRequired};var rr=nr,ar=Object(I.b)(function(e){return{columnsCount:Ae(e,"rendering","columnsCount"),columnBreakOnParagraph:Ae(e,"rendering","columnBreakOnParagraph"),documentSize:Ae(e,"rendering","documentSize"),documentMargins:Ae(e,"rendering","documentMargins"),accidentalsType:Ae(e,"rendering","preferredAccidentals"),alignBars:Ae(e,"rendering","alignBars"),harmonizeAccidentals:Ae(e,"rendering","harmonizeAccidentals"),transposeValue:Ae(e,"rendering","transposeValue"),printFontSize:Ae(e,"rendering","printFontSize")}})(rr);function or(e){switch(e.editorMode){case"edit":return _.a.createElement(jn,e);case"play":return _.a.createElement(Bn,e);case"print":return _.a.createElement(ar,e);case"export":return _.a.createElement(qn,e)}}or.propTypes={editorMode:W.a.string.isRequired};var ir=or,lr=Object(I.b)(function(e){return{selectedFile:Pe(e,fe(e))||{},editorMode:$(e)}},{updateFile:ve})(ir);n("3Z8G"),n("xeFo"),n("yq1k"),n("JTJg");function cr(){return(cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ur(e){var t,n,r,a,o,i,l,c=e.id,u=e.allWidgets,s=e.nonInteractableWidgets,p=e.hiddenWidgets,d=e.setOption,f=e.getEntryComponent,m=["optionsPanel","optionsPanel-"+c],g=u.widgetsOrder.filter(function(e){return!p.includes(e)}).map(function(e){return"optionsGroup"===(t=u.allWidgets[e]).type?(l=t.groupWidgetsOrder.filter(function(e){return!p.includes(e)}).map(function(r){return n=t.allGroupWidgets[r],i=!s.includes(e)&&!s.includes(r),h(r,n,i)}),a=f(t.type),o=!s.includes(e),_.a.createElement(a,{key:e,isInteractable:o,label:t.label,icon:t.icon},l)):h(e,t,!s.includes(e))});function h(t,n,a){return r=f(n.type),_.a.createElement(r,cr({key:t,isInteractable:a,optionContext:n.option.context,optionKey:n.option.key,optionValue:e[n.option.key],setOption:d,label:n.label},n.typeOptions))}return _.a.createElement("div",{className:m.join(" ")},g)}ur.propTypes={id:W.a.string.isRequired,allWidgets:W.a.object.isRequired,nonInteractableWidgets:W.a.arrayOf(W.a.string).isRequired,hiddenWidgets:W.a.arrayOf(W.a.string).isRequired,setOption:W.a.func.isRequired,getEntryComponent:W.a.func.isRequired};var sr=ur;n("cGxp");function pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function dr(e){var t=pr(Object(z.useState)(e.isOpened),2),n=t[0],r=t[1],a=e.isInteractable,o=e.icon,i=e.label,l=["sb-optionsGroup"];function c(){return a&&e.children&&e.children.length>0}return c()||l.push("sb-optionsGroup-isNotInteractable"),!n||e.children&&0!==e.children.length||r(!1),_.a.createElement("div",{className:l.join(" ")},_.a.createElement("div",{className:"sb-optionsGroup-title",onClick:c()?function(){r(!n)}:null},_.a.createElement("div",{className:"sb-optionsGroup-label"},_.a.createElement("span",{className:"sb-optionsGroup-iconTitle"},_.a.createElement(te,{iconName:o}))," ",i),_.a.createElement("div",{className:"sb-optionsGroup-toggle"},_.a.createElement("span",{className:"sb-optionsGroup-iconToggle"},_.a.createElement(te,{iconName:n?"unfold_less":"unfold_more"})))),_.a.createElement("div",{className:"sb-optionsGroup-content"},n&&e.children))}dr.propTypes={isOpened:W.a.bool,isInteractable:W.a.bool.isRequired,icon:W.a.string.isRequired,label:W.a.string.isRequired,children:W.a.arrayOf(W.a.element)},dr.defaultProps={isOpened:!1};var fr=dr;n("2ywC");function mr(e){var t,n=e.isSelected,r=e.label,a=e.onClick,o=["sb-optionSelectChoice"];return n&&(o.push("sb-optionSelectChoice-isSelected"),t=_.a.createElement("span",{className:"sb-optionSelectChoice-checkIcon"},_.a.createElement(te,{iconName:"check"}))),_.a.createElement("div",{className:o.join(" "),onClick:a},_.a.createElement("div",{className:"sb-optionSelectChoice-check"},n&&t),_.a.createElement("div",{className:"sb-optionSelectChoice-label"},r))}mr.propTypes={isSelected:W.a.bool.isRequired,label:W.a.string.isRequired,onClick:W.a.func.isRequired};var gr=_.a.memo(mr);function hr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function yr(e){var t=hr(Object(z.useState)(!1),2),n=t[0],r=t[1],a=e.isInteractable,o=e.label,i=e.allChoices,l=e.optionContext,c=e.optionKey,u=e.optionValue,s=e.setOption,p=["sb-optionSelect"];a||p.push("sb-optionSelect-isNotInteractable");var d=n?"keyboard_arrow_down":"keyboard_arrow_right";var f=n?_.a.createElement("div",{className:"sb-optionSelect-choices"},i.map(function(e){return _.a.createElement(gr,{key:e.value,label:e.label,isSelected:u===e.value,onClick:function(){return s(l,c,e.value)}})})):null;return _.a.createElement("div",{className:p.join(" ")},_.a.createElement("div",{className:"sb-optionSelect-title",onClick:a?function(){r(!n)}:null},_.a.createElement("div",{className:"sb-optionSelect-desc"},o),_.a.createElement("div",{className:"sb-optionSelect-toggle"},_.a.createElement("span",{className:"sb-optionSelect-icon"},_.a.createElement(te,{iconName:d})))),f)}yr.propTypes={isInteractable:W.a.bool.isRequired,label:W.a.string.isRequired,allChoices:W.a.array.isRequired,optionContext:W.a.string.isRequired,optionKey:W.a.string.isRequired,optionValue:W.a.string.isRequired,setOption:W.a.func.isRequired};var vr=yr;n("qePV"),n("JevA"),n("6EPN");function br(e){var t=e.isInteractable,n=e.label,r=e.min,a=e.max,o=e.showPlusSymbol,i=e.optionContext,l=e.optionKey,c=e.optionValue,u=e.setOption,s=["sb-optionSlider"];t||s.push("sb-optionSlider-isNotInteractable");var p=c>0&&o?"+"+c:c;return _.a.createElement("div",{className:s.join(" ")},_.a.createElement("div",{className:"sb-optionSlider-desc"},n),_.a.createElement("div",{className:"sb-optionSlider-value"},p),_.a.createElement("div",{className:"sb-optionSlider-range"},_.a.createElement("input",{min:r,max:a,value:c,type:"range",onChange:t?function(e){u(i,l,Number.parseInt(e.target.value))}:null,disabled:!t})))}br.propTypes={isInteractable:W.a.bool.isRequired,label:W.a.string.isRequired,min:W.a.number.isRequired,max:W.a.number.isRequired,showPlusSymbol:W.a.bool,optionContext:W.a.string.isRequired,optionKey:W.a.string.isRequired,optionValue:W.a.number.isRequired,setOption:W.a.func.isRequired},br.defaultProps={showPlusSymbol:!0};var Er=_.a.memo(br);n("UUiC");function Cr(e){var t=e.isInteractable,n=e.label,r=e.optionContext,a=e.optionKey,o=e.optionValue,i=e.setOption,l=["sb-optionToggle"];return l.push(!0===o?"sb-optionToggle-isOn":"sb-optionToggle-isOff"),t||l.push("sb-optionToggle-isNotInteractable"),_.a.createElement("div",{className:l.join(" "),onClick:t?function(){i(r,a,!o)}:null},_.a.createElement("div",{className:"sb-optionToggle-desc"},n),_.a.createElement("div",{className:"sb-optionToggle-icon"},_.a.createElement("span",{className:"sb-optionToggle-icon"},_.a.createElement(te,{iconName:!0===o?"toggle_on":"toggle_off"}))))}Cr.propTypes={isInteractable:W.a.bool.isRequired,label:W.a.string.isRequired,optionContext:W.a.string.isRequired,optionKey:W.a.string.isRequired,optionValue:W.a.bool.isRequired,setOption:W.a.func.isRequired};var Or=_.a.memo(Cr);function Sr(){return(Sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wr(e){switch(e){case"optionsGroup":return fr;case"select":return vr;case"slider":return Er;case"toggle":return Or}}function Rr(e){return _.a.createElement("div",{className:"sb-optionsPanel"},_.a.createElement(sr,Sr({},e,{getEntryComponent:wr})))}function Nr(){return(Nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Pr=function(e,t,n){if(!e)throw new TypeError("Cannot set an option without a context");if(!t)throw new TypeError("Cannot set an option without a key");return Z("db/options/setOptionValue",{context:e,key:t,value:n})};var xr,jr,kr,qr,Tr=(xr={widgetsOrder:["style","alignBars","layout","helpers","chords","format"],allWidgets:{style:{label:"Rendering style",type:"select",typeOptions:{allChoices:[{id:"styleUcc",label:"UCC",value:"ucc"},{id:"styleChordpro",label:"ChordPro",value:"chordpro"}]},option:{context:"rendering",key:"style"}},alignBars:{label:"Align bars",type:"toggle",option:{context:"rendering",key:"alignBars"}},layout:{type:"optionsGroup",label:"Layout",icon:"view_compact",groupWidgetsOrder:["documentSize","documentMargins","columnsCount","columnBreakOnParagraph"],allGroupWidgets:{documentSize:{label:"Document size",type:"select",typeOptions:{allChoices:[{id:"documentSizeA4",label:"A4",value:"a4"},{id:"documentSizeBooxMax2Pro",label:"Boox Max 2 Pro",value:"booxmax2pro"}]},option:{context:"rendering",key:"documentSize"}},documentMargins:{label:"Margins",type:"slider",typeOptions:{min:1,max:5},option:{context:"rendering",key:"documentMargins"}},columnsCount:{label:"Columns",type:"slider",typeOptions:{min:1,max:3},option:{context:"rendering",key:"columnsCount"}},columnBreakOnParagraph:{label:"Break on paragraph",type:"toggle",option:{context:"rendering",key:"columnBreakOnParagraph"}}}},helpers:{type:"optionsGroup",label:"Helpers",icon:"remove_red_eye",groupWidgetsOrder:["showChords","instrument","showStrummingPattern"],allGroupWidgets:{showChords:{label:"Show chords diagrams",type:"toggle",option:{context:"rendering",key:"showChords"}},instrument:{label:"Instrument",type:"select",typeOptions:{allChoices:[{id:"instrumentGuitar",label:"Guitar",value:"guitar"},{id:"instrumentUkulele",label:"Ukulele",value:"ukulele"},{id:"instrumentMandolin",label:"Mandolin",value:"mandolin"},{id:"instrumentPiano",label:"Piano",value:"piano"}]},option:{context:"rendering",key:"instrument"}},showStrummingPattern:{label:"Show strumming pattern",type:"toggle",option:{context:"rendering",key:"showStrummingPattern"}}}},chords:{type:"optionsGroup",label:"Chords",icon:"music_note",groupWidgetsOrder:["transposeValue","simplifyChords","capoPosition","harmonizeAccidentals","preferredAccidentals"],allGroupWidgets:{transposeValue:{label:"Transpose",type:"slider",typeOptions:{min:-11,max:11,showPlusSymbol:!0},option:{context:"rendering",key:"transposeValue"}},simplifyChords:{label:"Simplify chords",type:"toggle",option:{context:"rendering",key:"simplifyChords"}},capoPosition:{label:"Add capo on fret",type:"slider",typeOptions:{min:0,max:11,showPlusSymbol:!1},option:{context:"rendering",key:"capoPosition"}},harmonizeAccidentals:{label:"Harmonize accidentals",type:"toggle",option:{context:"rendering",key:"harmonizeAccidentals"}},preferredAccidentals:{label:"Preferred accidentals",type:"select",typeOptions:{allChoices:[{id:"preferredAccidentalsAuto",label:"Auto",value:"auto"},{id:"preferredAccidentalsSharp",label:"Sharp (#)",value:"sharp"},{id:"preferredAccidentalsFlat",label:"Flats (b)",value:"flat"}]},option:{context:"rendering",key:"preferredAccidentals"}}}},format:{type:"optionsGroup",label:"Format",icon:"format_size",groupWidgetsOrder:["fontSize","printFontSize","fontStyle","chordsColor","highlightChords"],allGroupWidgets:{fontSize:{label:"Font size",type:"slider",typeOptions:{min:-5,max:5,showPlusSymbol:!0},option:{context:"rendering",key:"fontSize"}},printFontSize:{label:"Font size (print)",type:"slider",typeOptions:{min:-5,max:5,showPlusSymbol:!0},option:{context:"rendering",key:"printFontSize"}},fontStyle:{label:"Font style",type:"select",typeOptions:{allChoices:[{id:"fontStyleRoboto",label:"Roboto",value:"roboto"}]},option:{context:"rendering",key:"fontStyle"}},chordsColor:{label:"Chords color",type:"select",typeOptions:{allChoices:[{id:"chordsColor",label:"Black",value:"black"},{id:"chordsColorRed",label:"Red",value:"red"}]},option:{context:"rendering",key:"chordsColor"}},highlightChords:{label:"Highlight Chords",type:"toggle",option:{context:"rendering",key:"highlightChords"}}}}}},jr=function(e){var t=[];switch($(e)){case"edit":t.push("alignBars"),t.push("helpers"),t.push("layout"),t.push("style");break;case"play":t.push("documentSize"),t.push("documentMargins");break;case"print":break;case"export":t.push("format"),t.push("layout")}return"ucc"!==Ae(e,"rendering","style")&&t.push("alignBars"),t},kr=function(e){var t=[],n=$(e),r=Ae(e,"rendering","showChords"),a=Ae(e,"rendering","harmonizeAccidentals");return r||t.push("instrument"),a||t.push("preferredAccidentals"),"print"===n?t.push("fontSize"):t.push("printFontSize"),t},qr=function(e){return _.a.createElement("div",{className:"renderingOptionsPanel"},_.a.createElement("div",{className:"renderingOptionsPanel-isCollapsed"},_.a.createElement("span",{className:"renderingOptionsPanel-icon"},_.a.createElement(te,{iconName:"settings"}))),_.a.createElement("div",{className:"renderingOptionsPanel-isExpanded"},_.a.createElement(Rr,Nr({},e,{id:"rendering"}))))},Object(I.b)(function(e){var t,n,r={allWidgets:xr,nonInteractableWidgets:jr(e),hiddenWidgets:kr(e)};return xr.widgetsOrder.forEach(function(a){"optionsGroup"===(t=xr.allWidgets[a]).type?t.groupWidgetsOrder.forEach(function(a){n=t.allGroupWidgets[a],r[n.option.key]=Ae(e,n.option.context,n.option.key)}):r[t.option.key]=Ae(e,t.option.context,t.option.key)}),r},{setOption:Pr})(qr));function Br(){var e=_.a.createElement(Le,null),t=_.a.createElement(Tr,null);return _.a.createElement(de,{leftBar:e,rightBar:t},_.a.createElement(lr,null))}var Fr=[{path:"/editor",action:function(){return Br}}],Mr=new M.a(Fr),zr={navigateTo:function(e){return Mr.resolve(e).then(function(e){return t=e,void A.a.render(_.a.createElement(I.a,{store:j},_.a.createElement(_.a.StrictMode,null,_.a.createElement(X,null,_.a.createElement(t,null)))),document.getElementById("app"));var t})}};(function(){window.__REDUX_DEVTOOLS_EXTENSION__&&F.push(window.__REDUX_DEVTOOLS_EXTENSION__({trace:!0}));var e=i(),t=a()(e,B);(j=Object(o.d)(T,t,o.c.apply(void 0,F))).subscribe(function(){l(j.getState())})})(),zr.navigateTo("/editor")},WoyN:function(e,t,n){},cGxp:function(e,t,n){},"d1+z":function(e,t,n){},d6nv:function(e,t,n){var r=n("3O+N");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,a){var o;return'<p class="cmLine cmTextLine">'+(null!=(o=e.lambda(null!=t?t.textLine:t,t))?o:"")+"</p>"},useData:!0})},ddDh:function(e,t,n){},eLJI:function(e,t,n){},fNiH:function(e,t,n){},g3KT:function(e,t,n){},kGR0:function(e,t,n){},lb95:function(e,t,n){var r=n("3O+N");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,a){return'<span class="cmChordSymbol">'+e.escapeExpression(e.lambda(null!=t?t.chordSymbol:t,t))+"</span>"},useData:!0})},u0UJ:function(e,t,n){},uVib:function(e,t,n){var r=n("3O+N");e.exports=(r.default||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,a){var o;return'<p class="cmLine cmChordLine">'+(null!=(o=e.lambda(null!=t?t.chordLine:t,t))?o:"")+"</p>"},useData:!0})},xeFo:function(e,t,n){},zIDs:function(e,t,n){}});
//# sourceMappingURL=main.dbae970e9fc0ba07e9ca.js.map
