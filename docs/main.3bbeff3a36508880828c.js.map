{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../chord-mark/src/renderer/components/tpl/line.hbs","webpack:///../chord-mark/src/renderer/components/tpl/chordLine.hbs","webpack:///../chord-mark/src/renderer/components/tpl/emptyLine.hbs","webpack:///../chord-mark/src/renderer/components/tpl/textLine.hbs","webpack:///../chord-mark/src/renderer/components/tpl/sectionLabel.hbs","webpack:///../chord-mark/src/renderer/components/tpl/barSeparator.hbs","webpack:///./src/state/localStorage.js","webpack:///./src/db/files/actionsTypes.js","webpack:///./src/db/files/reducers.js","webpack:///./src/db/options/reducers.js","webpack:///./src/db/reducers.js","webpack:///./src/db/options/actionsTypes.js","webpack:///./src/fileManager/_state/actionsTypes.js","webpack:///./src/fileManager/_state/reducers.js","webpack:///./src/ui/layout/app/_state/actionsTypes.js","webpack:///./src/ui/layout/app/_state/reducers.js","webpack:///./src/ui/layout/reducers.js","webpack:///./src/state/store.js","webpack:///./src/ui/reducers.js","webpack:///./src/state/reducers.js","webpack:///./src/state/seed.js","webpack:///./src/db/seed.js","webpack:///./src/db/options/seed.js","webpack:///./src/ui/_components/ErrorBoundary.js","webpack:///./src/core/createAction.js","webpack:///./src/ui/layout/app/_state/actions.js","webpack:///./src/ui/layout/app/_state/selectors.js","webpack:///./src/ui/_components/Icon.js","webpack:///./src/ui/sideBar/_components/Logo.js","webpack:///./src/ui/layout/app/_components/NavEntry.js","webpack:///./src/ui/layout/app/_components/Nav.js","webpack:///./src/ui/layout/app/_components/Footer.js","webpack:///./src/ui/layout/app/allNavEntries.js","webpack:///./src/ui/layout/app/_components/App.js","webpack:///./src/ui/layout/app/_containers/App.js","webpack:///./src/fileManager/_state/selectors.js","webpack:///./src/db/files/actions.js","webpack:///./src/db/files/selectors.js","webpack:///./src/fileManager/_components/FileActionEntry.js","webpack:///./src/fileManager/_components/FileActions.js","webpack:///./src/fileManager/_components/FileEntry.js","webpack:///./src/fileManager/_components/FileManager.js","webpack:///./src/fileManager/_containers/FileManager.js","webpack:///./src/fileManager/_state/actions.js","webpack:///./src/db/options/selectors.js","webpack:///./src/core/escapeHTML.js","webpack:///../chord-mark/src/core/dom/escapeHTML.js","webpack:///../chord-mark/src/core/dom/stripTags.js","webpack:///../chord-mark/src/parser/lineTypes.js","webpack:///../chord-mark/src/parser/matchers/isTimeSignatureString.js","webpack:///../chord-mark/src/parser/syntax.js","webpack:///../chord-mark/src/parser/matchers/isSectionLabel.js","webpack:///../chord-mark/src/parser/helper/clearSpaces.js","webpack:///../chord-mark/src/parser/matchers/isChordLine.js","webpack:///../chord-mark/src/parser/matchers/isChord.js","webpack:///../chord-mark/src/parser/parseTimeSignature.js","webpack:///../chord-mark/src/parser/exceptions/IncorrectBeatCountException.js","webpack:///../chord-mark/src/parser/exceptions/InvalidChordRepetitionException.js","webpack:///../chord-mark/src/parser/parseChordLine.js","webpack:///../chord-mark/src/parser/parseChord.js","webpack:///../chord-mark/src/parser/helper/songs.js","webpack:///../chord-mark/src/parser/songLinesFactory.js","webpack:///../chord-mark/src/parser/parseSectionLabel.js","webpack:///../chord-mark/src/parser/matchers/isChordLineRepeater.js","webpack:///../chord-mark/src/parser/matchers/isEmptyLine.js","webpack:///../chord-mark/src/parser/parseSong.js","webpack:///../chord-mark/src/parser/getAllChordsInSong.js","webpack:///../chord-mark/src/renderer/spacers/chord/simple.js","webpack:///../chord-mark/src/renderer/spacers/chord/aligned.js","webpack:///../chord-mark/src/renderer/modifiers/transposeChord.js","webpack:///../chord-mark/src/renderer/modifiers/transposeSong.js","webpack:///../chord-mark/src/renderer/helpers/getMainAccidental.js","webpack:///../chord-mark/src/renderer/components/renderBarContent.js","webpack:///../chord-mark/src/renderer/components/renderChordSymbol.js","webpack:///../chord-mark/src/renderer/components/renderSectionLabel.js","webpack:///../chord-mark/src/renderer/helpers/getChordSymbol.js","webpack:///../chord-mark/src/renderer/components/renderSong.js","webpack:///../chord-mark/src/renderer/helpers/getSectionsStats.js","webpack:///../chord-mark/src/renderer/spacers/chord/getMaxBeatsWidth.js","webpack:///../chord-mark/src/renderer/components/renderTextLine.js","webpack:///../chord-mark/src/renderer/components/renderTimeSignature.js","webpack:///../chord-mark/src/renderer/components/renderChordLine.js","webpack:///../chord-mark/src/renderer/components/renderEmptyLine.js","webpack:///../chord-mark/src/renderer/components/renderLine.js","webpack:///./src/core/renderSong.js","webpack:///./src/songRenderers/_components/SongRenderer.js","webpack:///./src/songRenderers/_containers/SongRenderer.js","webpack:///./src/songRenderers/editorPreview/_components/EditorPreview.js","webpack:///./src/songRenderers/editorPreview/_containers/EditorPreview.js","webpack:///./src/editor/songEditor/prosemirror/schema.js","webpack:///./src/editor/songEditor/prosemirror/converters/stateToText.js","webpack:///./src/editor/songEditor/prosemirror/converters/toSafeHtml.js","webpack:///./src/editor/songEditor/prosemirror/ProsemirrorEditorView.js","webpack:///./src/editor/songEditor/prosemirror/converters/textToDom.js","webpack:///./src/editor/songEditor/prosemirror/getPlugins.js","webpack:///./src/editor/songEditor/_components/EditorLayout.js","webpack:///./src/songRenderers/exportPreview/_components/ExportPreview.js","webpack:///./src/songRenderers/playRenderer/_components/PlayRenderer.js","webpack:///./src/songRenderers/playRenderer/_containers/PlayRenderer.js","webpack:///./src/songRenderers/printPreview/_components/Page.js","webpack:///./src/songRenderers/printPreview/_components/PageHeader.js","webpack:///./src/songRenderers/printPreview/helpers/mapLinesToColumns.js","webpack:///./src/songRenderers/printPreview/helpers/getDimensionsFromDom.js","webpack:///./src/songRenderers/printPreview/helpers/padColumns.js","webpack:///./src/songRenderers/printPreview/helpers/element.js","webpack:///./src/songRenderers/printPreview/helpers/getAllLinesHeight.js","webpack:///./src/songRenderers/printPreview/helpers/getPagesHeight.js","webpack:///./src/songRenderers/printPreview/_components/AllPages.js","webpack:///./src/songRenderers/printPreview/_components/PrintPreview.js","webpack:///./src/songRenderers/printPreview/_containers/PrintPreview.js","webpack:///./src/editor/_components/Editor.js","webpack:///./src/editor/_containers/Editor.js","webpack:///./src/optionsPanels/_components/OptionsPanel.js","webpack:///./src/ui/sideBar/options/_components/OptionsGroup.js","webpack:///./src/ui/sideBar/options/_components/SelectChoice.js","webpack:///./src/ui/sideBar/options/_components/Select.js","webpack:///./src/ui/sideBar/options/_components/Slider.js","webpack:///./src/ui/sideBar/options/_components/Toggle.js","webpack:///./src/ui/sideBar/options/_components/SidebarOptionsPanel.js","webpack:///./src/db/options/actions.js","webpack:///./src/optionsPanels/rendering/allWidgets.js","webpack:///./src/optionsPanels/_containers/OptionsPanelFactory.js","webpack:///./src/optionsPanels/rendering/_containers/Rendering.js","webpack:///./src/optionsPanels/rendering/_state/selectors.js","webpack:///./src/optionsPanels/rendering/_components/Rendering.js","webpack:///./src/controllers/Editor.js","webpack:///./src/router.js","webpack:///./src/renderController.js","webpack:///./src/app.js","webpack:///../chord-mark/src/renderer/components/tpl/timeSignature.hbs","webpack:///../chord-mark/src/renderer/components/tpl/song.hbs","webpack:///../chord-mark/src/renderer/components/tpl/chordSymbol.hbs","webpack:///../chord-mark/src/renderer/components/tpl/barContent.hbs"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Handlebars","template","compiler","main","container","depth0","helpers","partials","stack1","helper","escapeExpression","lineClasses","helperMissing","nullContext","hash","lambda","line","useData","chordLine","textLine","sectionLabel","loadState","serializedState","localStorage","getItem","JSON","parse","err","saveState","state","stringify","setItem","DB_FILES_CREATE","DB_FILES_UPDATE","DB_FILES_DELETE","initialState","allFiles","combineReducers","files","arguments","undefined","action","type","actionTypes","_action$payload","payload","id","title","content","_objectSpread","createFile","_action$payload2","updateFile","deleteFile","options","context","contextOptions","reducers_objectSpread","newState","FILE_MANAGER_SELECT_FILE","FILE_MANAGER_ENABLE_RENAME","selected","renamed","defaultTitle","UI_LAYOUT_APP_TOGGLE_LEFT_BAR","UI_LAYOUT_APP_TOGGLE_RIGHT_BAR","UI_LAYOUT_APP_SET_EDITOR_MODE","isLeftBarCollapsed","isRightBarCollapsed","editorMode","store","app","app_state_reducers_objectSpread","layout","db","fileManager","_state_reducers_objectSpread","ui","state_seed","rendering","style","default","resetOnSongChange","alignBars","autoRepeatChords","expandSectionRepeats","documentSize","documentMargins","columnsCount","columnBreakOnParagraph","showChords","instrument","showStrummingPattern","transposeValue","simplifyChords","capoPosition","harmonizeAccidentals","preferredAccidentals","fontSize","printFontSize","fontStyle","chordsColor","highlightChords","storeEnhancers","ErrorBoundary","props","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","error","errorInfo","React","Component","setState","react_default","a","createElement","className","whiteSpace","open","toString","componentStack","children","propTypes","PropTypes","any","createAction","TypeError","getEditorMode","Icon","iconName","join","string","isRequired","memo","_components_Icon","NavEntry","label","icon","setEditorMode","classNames","isActive","onClick","func","bool","Nav","currentMode","allEntries","map","entry","_components_NavEntry","_extends","arrayOf","shape","allNavEntries","App","toggleLeftBar","toggleRightBar","leftBar","rightBar","leftBarClassNames","rightBarClassNames","_components_Logo","data-testid","_components_Nav","_components_Footer","element","defaultProps","connect","getSelectedId","getRenamedId","getDefaultTitle","_ref","getAllTitles","createSelectorCreator","defaultMemoize","_isEqual","createDeepEqualSelector","_map","_sortBy","toLowerCase","getOne","FileActionEntry","text","FileActions","allActions","enableRename","_components_FileActionEntry","FileActions_extends","FileEntry","_useState2","_slicedToArray","useState","setTitle","fileId","isSelected","isRenamed","selectFile","classList","inputRef","createRef","saveTitle","newTitle","current","scrollLeft","useEffect","focus","onDoubleClick","e","target","select","ref","readOnly","autoFocus","onChange","onBlur","onFocus","onKeyPress","which","preventDefault","getSelection","removeAllRanges","FileManager","allTitles","_components_FileActions","file","_components_FileEntry","actionsTypes","uuid","v4","getOptionValue","escapeHTML","unescaped","domPurify","sanitize","stripTags","html","ALLOWED_TAGS","KEEP_CONTENT","lineTypes","CHORD","CHORD_LINE_REPEATER","EMPTY_LINE","SECTION_LABEL","TEXT","TIME_SIGNATURE","allowedTimeSignatures","isTimeSignatureString","includes","syntax","barRepeat","chordBeatCount","chordLineRepeat","noChord","noLyrics","sectionLabelRegexp","RegExp","isSectionLabel","trim","match","clearSpaces","replace","chordBeatCountSymbols","barRepeatSymbols","isChordLine","split","every","potentialChordToken","index","potentialChord","withoutBeatCount","_isString","parseChord","parseTimeSignature","array","count","Number","parseInt","beatCount","IncorrectBeatCountException","duration","currentBeatCount","IncorrectBeatCountException_classCallCheck","_isFinite","IncorrectBeatCountException_possibleConstructorReturn","IncorrectBeatCountException_getPrototypeOf","Error","InvalidChordRepetitionException","InvalidChordRepetitionException_classCallCheck","InvalidChordRepetitionException_possibleConstructorReturn","InvalidChordRepetitionException_getPrototypeOf","defaultTimeSignature","parseChordLine","tokenWithoutBeatCount","previousBar","_ref$timeSignature","timeSignature","allBars","emptyBar","allChords","bar","_cloneDeep","chord","chordCount","allTokens","forEach","token","tokenIndex","getChordDuration","model","isNoChordSymbol","chordString","beat","currentChord","previousChord","checkInvalidChordRepetition","shouldChangeBar","barClone","isLast","barBeatCount","hasTooManyBeats","hasTooFewBeats","hasInvalidBeatCount","message","checkInvalidBeatCount","forEachChordInSong","allLines","fn","newLines","getNthOfLabel","typesCount","enableSelect","currentLabel","songLinesFactory","currentSectionLabel","currentSectionStats","previousChordLine","previousSectionLabelLine","sectionsStats","currentTimeSignature","blueprint","blueprintIndex","blueprintLine","isRepeatingChords","shouldRepeatSection","getSectionLabelLine","increaseSectionStats","_string$trim$split2","parseSectionLabel_slicedToArray","labelSrc","repeatSrc","substring","repeatTimes","parseSectionLabel","getSectionCount","indexWithoutRepeats","withoutRepeats","isFirstOfLabel","getTextLine","isRepeated","repeatSection","lineIndex","allSrcLines","nextLine","isLastLineOfSection","sectionLabelLine","toRepeat","songLinesFactory_objectSpread","isFromSectionRepeat","_toConsumableArray","addLine","lineSrc","isTimeSignature","getChordLine","isChordLineRepeater","isFromChordLineRepeater","getPreviousChordLine","isEmptyLine","getEmptyLine","repeatedLine","shouldRepeatLineFromBlueprint","isFromAutoRepeatChords","repeatLinesFromBlueprint","asArray","currentLine","parseSong","songSrc","songArray","_isArray","songLines","_findIndex","occurrences","getAllChordsInSong","allMasks","","2","11","3","12","21","111","4","13","22","31","112","121","211","1111","spacesAfterDefault","emptyBeatSpaces","notes","sharpsToFlats","C#","D#","F#","G#","A#","flatsToSharps","_invert","convertToSharp","note","transposeNote","useFlats","transposedIndex","indexOf","octaves","Math","floor","transposed","transposeSong","_ref$transposeValue","_ref$accidentalsType","accidentalsType","_ref$harmonizeAcciden","accidental","rootNote","flatCount","sharpCount","filter","formatted","getMainAccidental","transposedModel","transposedChord","root","bass","bassNote","rootSharp","bassSharp","transposeChord","space","defaultSpacesWithin","defaultSpacesAfter","renderBarContent","spacesWithin","spacesAfter","barContent","reduce","chordSymbol","symbol","chordSymbolTpl","repeat","barContentTpl","labelsMapping","b","u","v","renderChord","chordRendererFactory","useShortNamings","getChordSymbol","renderSong","parsedSong","_ref$alignBars","_ref$expandSectionRep","_ref$autoRepeatChords","stats","getSectionsStats","maxBeatsWidth","barIndex","max","getMaxBeatsWidth","shouldSkipRepeatedSectionLine","song","shouldSkipAutoRepeatChordLine","rendered","timeSignatureLine","chordLineInput","chordPattern","chordSpaces","chordLineModel","allBarsRendered","barSeparator","barSeparatorTpl","chordLineTpl","renderChordLine","beatMaxWidth","alignedChordSpacer","emptyLineTpl","_ref$sectionsStats","labelRaw","toUpperCase","sectionLabelTpl","renderSectionLabel","timeSignatureTpl","textLineTpl","_ref$isFromSectionRep","_ref$isFromAutoRepeat","_ref$isFromChordLineR","lineTpl","renderLine","Boolean","songTpl","songTxt","renderOptions","renderSongCm","SongRenderer","_pick","dangerouslySetInnerHTML","__html","EditorPreview","selectedFile","_containers_SongRenderer","editorSchema","Schema","nodes","marks","stateToText","toJSON","doc","paragraph","acc","toSafeHtml","dirty","ProseMirrorEditorView","selectedFileId","editorContent","editorView","useRef","editorDom","previousFileId","editorExists","dom","parentNode","destroyEditor","removeChild","editorState","EditorState","pmDOMParser","fromSchema","concat","div","document","innerHTML","preserveWhitespace","plugins","pmHistory","keymap","Mod-z","undo","Mod-y","redo","baseKeymap","createEditorState","EditorView","dispatchTransaction","transaction","_this$state$applyTran","applyTransaction","transactions","updateState","some","tr","docChanged","createEditorView","appendChild","EditorLayout","prosemirror_ProsemirrorEditorView","_containers_EditorPreview","ExportPreview","PlayRenderer","number","Page","pageHeader","allColumnsLines","allSectionsRendered","columnLines","columnLinesTxt","pageClasses","pageContentWrapperClasses","PageHeader","cssClasses","emptyLine","mapLinesToColumns","allLinesWithHeight","firstPageHeight","normalPageHeight","_ref$noEmptyLinesOnCo","noEmptyLinesOnColumnStart","_ref$noOrphanTextLine","noOrphanTextLine","_ref3","allPagesColumns","pageIndex","columnIndex","maxColumnHeight","getMaxColumnHeight","currentColumnHeight","flushBuffer","buffer","height","changeColumn","insert","insertOnNextColumn","fitsOnCurrentColumn","bufferHeight","fitsOnNextColumn","layoutFactory","shouldRenderLine","_ref2","wouldProduceOrphanTextLine","hasClass","isTextLine","isEndOfParagraph","isBreakable","getDimensionsFromDom","component","measuringFn","add","body","Promise","resolve","ReactDOM","render","measure","unmountComponentAtNode","padColumns","columnCount","allColumns","getClientHeight","clientHeight","cssSelectors","getAllLinesHeight","_x","_x2","_getAllLinesHeight","_callee","regeneratorRuntime","wrap","_context","prev","next","_components_Page","allLinesHeight","querySelectorAll","offsetHeight","abrupt","sent","stop","helpers_getPagesHeight_getAllLinesHeight","_components_PageHeader","pageContent","querySelector","AllPages","AllPages_slicedToArray","setAllPagesColumns","useLayoutEffect","mark","pageOptions","mapped","getPagesHeight","getDimensions","allPagesRendered","pageColumns","Fragment","PrintPreview","_components_AllPages","Editor","_components_EditorLayout","_containers_PlayRenderer","_containers_PrintPreview","_components_ExportPreview","OptionsPanel","widget","groupWidget","WidgetComponent","GroupComponent","isGroupInteractable","isGroupWidgetInteractable","renderedGroupWidgets","allWidgets","nonInteractableWidgets","hiddenWidgets","setOption","getEntryComponent","renderedWidgets","widgetsOrder","widgetId","groupWidgetsOrder","groupWidgetId","allGroupWidgets","renderWidget","isInteractable","localWidget","OptionsPanel_extends","optionContext","option","optionKey","optionValue","typeOptions","OptionsGroup","OptionsGroup_slicedToArray","isOpened","setIsOpened","shouldBeInteractable","SelectChoice","checkIcon","Select","Select_slicedToArray","isOpen","setIsOpen","allChoices","renderedChoices","choice","_components_SelectChoice","Slider","min","showPlusSymbol","valueDisplay","disabled","Toggle","SidebarOptionPanel","_components_OptionsPanel","SidebarOptionsPanel_extends","setOptionValue","getNonInteractableWidgets","getHiddenWidgets","OptionsPanelFactory","chords","format","Rendering_extends","stateToProps","Edit","fm","_containers_FileManager","rightBarPanel","_containers_Rendering","_containers_App","_containers_Editor","routes","path","universalRouter","UniversalRouter","router","navigateTo","then","controller","Controller","ReactDom","es","StrictMode","ui_components_ErrorBoundary","getElementById","__REDUX_DEVTOOLS_EXTENSION__","trace","persistedState","_defaultsDeep","seed","createReduxStore","allReducers","compose","subscribe","getState","createStore"],"mappings":"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","file":"main.3bbeff3a36508880828c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"Vtdi\",1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<p class=\\\"\"\n    + container.escapeExpression(((helper = (helper = helpers.lineClasses || (depth0 != null ? depth0.lineClasses : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"lineClasses\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? depth0.line : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</p>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<span class=\\\"cmChordLine\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? depth0.chordLine : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<span class=\\\"cmEmptyLine\\\">&nbsp;</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<span class=\\\"cmTextLine\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? depth0.textLine : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<span class=\\\"cmSectionLabel\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? depth0.sectionLabel : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<span class=\\\"cmBarSeparator\\\">|</span>\";\n},\"useData\":true});","// @see https://egghead.io/lessons/javascript-redux-persisting-the-state-to-the-local-storage\n\nexport const loadState = () => {\n\ttry {\n\t\tconst serializedState = localStorage.getItem('state');\n\t\tif (!serializedState) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn JSON.parse(serializedState);\n\n\t} catch (err) {\n\t\treturn undefined;\n\t}\n};\n\nexport const saveState = (state) => {\n\ttry {\n\t\tconst serializedState = JSON.stringify(state);\n\t\tlocalStorage.setItem('state', serializedState);\n\t} catch (err) {\n\t\t// ignore write errors\n\t}\n};\n","export const DB_FILES_CREATE = 'db/files/Create';\nexport const DB_FILES_UPDATE = 'db/files/Update';\nexport const DB_FILES_DELETE = 'db/files/Delete';\n","import * as actionTypes from './actionsTypes';\n\nconst initialState = {\n\tallFiles: {},\n};\n\nfunction createFile(state, action) {\n\tconst { id, title, content } = action.payload;\n\n\tconst allFiles = { ...state.allFiles };\n\tallFiles[id] = {\n\t\tid,\n\t\ttitle,\n\t\tcontent\n\t};\n\n\treturn {\n\t\t...state,\n\t\tallFiles,\n\t};\n}\n\n\nfunction updateFile(state, action) {\n\tconst { id, title, content } = action.payload;\n\n\tif ((!title && !content) || !state.allFiles[id]) {\n\t\treturn state;\n\t}\n\n\tconst allFiles = { ...state.allFiles };\n\n\tallFiles[id] = { ...allFiles[id] };\n\n\tif (title) {\n\t\tallFiles[id].title = title;\n\t}\n\tif (content) {\n\t\tallFiles[id].content = content;\n\t}\n\treturn {\n\t\t...state,\n\t\tallFiles,\n\t};\n}\n\n\nfunction deleteFile(state, action) {\n\tconst { id } = action.payload;\n\n\tif (!id || !state.allFiles[id]) {\n\t\treturn state;\n\t}\n\n\tconst allFiles = { ...state.allFiles };\n\tdelete allFiles[id];\n\n\treturn {\n\t\t...state,\n\t\tallFiles,\n\t};\n}\n\n\nexport default (state = initialState, action = {}) => {\n\tswitch (action.type) {\n\t\tcase actionTypes.DB_FILES_CREATE: return createFile(state, action);\n\t\tcase actionTypes.DB_FILES_UPDATE: return updateFile(state, action);\n\t\tcase actionTypes.DB_FILES_DELETE: return deleteFile(state, action);\n\t}\n\treturn state;\n};\n","import * as actionTypes from './actionsTypes';\n\nconst initialState = {};\n\nexport default (state = initialState, action = {}) => {\n\tswitch (action.type) {\n\t\tcase actionTypes.DB_OPTION_SET_OPTION_VALUE: {\n\t\t\tconst { context, key, value } = action.payload;\n\n\t\t\tif (!state[context] || !state[context][key]) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst contextOptions = { ...state[context] };\n\t\t\tcontextOptions[key] = {\n\t\t\t\t...contextOptions[key],\n\t\t\t\tvalue\n\t\t\t};\n\n\t\t\tconst newState = {\n\t\t\t\t...state,\n\t\t\t};\n\t\t\tnewState[context] = contextOptions;\n\n\t\t\treturn newState;\n\t\t}\n\t}\n\treturn state;\n};\n","import { combineReducers } from 'redux';\nimport files from './files/reducers';\nimport options from './options/reducers';\n\nexport default combineReducers({\n\tfiles,\n\toptions,\n});\n","export const DB_OPTION_SET_OPTION_VALUE = 'db/options/setOptionValue';\n","export const FILE_MANAGER_SELECT_FILE = 'fileManager/select';\nexport const FILE_MANAGER_ENABLE_RENAME = 'fileManager/enableRename';\n\n","import {\n\tFILE_MANAGER_SELECT_FILE,\n\tFILE_MANAGER_ENABLE_RENAME\n} from './actionsTypes';\n\nimport {\n\tDB_FILES_CREATE,\n\tDB_FILES_UPDATE,\n\tDB_FILES_DELETE\n} from '../../db/files/actionsTypes';\n\nconst initialState = {\n\tselected: '',\n\trenamed: '',\n\tdefaultTitle: '[untitled]'\n};\n\nexport default function reducers(state = initialState, action = {}) {\n\tswitch (action.type) {\n\n\t\tcase DB_FILES_CREATE: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: id,\n\t\t\t\trenamed: id\n\t\t\t};\n\t\t}\n\n\t\tcase DB_FILES_UPDATE: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trenamed: ''\n\t\t\t};\n\t\t}\n\n\t\tcase DB_FILES_DELETE: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: '',\n\t\t\t\trenamed: ''\n\t\t\t};\n\t\t}\n\n\t\tcase FILE_MANAGER_SELECT_FILE: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: id,\n\t\t\t\trenamed: (id === state.renamed) ? id : ''\n\t\t\t};\n\t\t}\n\n\t\tcase FILE_MANAGER_ENABLE_RENAME: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trenamed: id\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n}\n","export const UI_LAYOUT_APP_TOGGLE_LEFT_BAR = 'ui/layout/app/toggleLeftBar';\nexport const UI_LAYOUT_APP_TOGGLE_RIGHT_BAR = 'ui/layout/app/toggleRightBar';\nexport const UI_LAYOUT_APP_SET_EDITOR_MODE = 'ui/layout/app/setEditorMode';\n","import {\n\tUI_LAYOUT_APP_TOGGLE_RIGHT_BAR,\n\tUI_LAYOUT_APP_TOGGLE_LEFT_BAR,\n\tUI_LAYOUT_APP_SET_EDITOR_MODE,\n} from './actionsTypes';\n\nconst initialState = {\n\tisLeftBarCollapsed: false,\n\tisRightBarCollapsed: false,\n\teditorMode: 'edit',\n};\n\nexport default function reducers(state = initialState, action = {}) {\n\tswitch (action.type) {\n\t\tcase UI_LAYOUT_APP_TOGGLE_LEFT_BAR: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLeftBarCollapsed: !state.isLeftBarCollapsed\n\t\t\t};\n\t\t}\n\t\tcase UI_LAYOUT_APP_TOGGLE_RIGHT_BAR: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisRightBarCollapsed: !state.isRightBarCollapsed\n\t\t\t};\n\t\t}\n\t\tcase UI_LAYOUT_APP_SET_EDITOR_MODE: {\n\t\t\tconst { mode } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditorMode: mode,\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n}\n","import { combineReducers } from 'redux';\nimport app from './app/_state/reducers';\n\nexport default combineReducers({\n\tapp\n});\n","import _defaultsDeep from 'lodash/defaultsDeep';\n\nimport { createStore as createReduxStore, compose } from 'redux';\n\nimport { loadState, saveState } from './localStorage';\nimport allReducers from './reducers';\nimport seed from './seed';\n\nconst storeEnhancers = [];\n\n/* * /\nimport { applyMiddleware } from 'redux';\nconst logger = () => next => action => {\n\tconsole.log('!!! DISPATCHING ACTION: ', action);\n\tlet result = next(action);\n\treturn result;\n};\nstoreEnhancers.push(applyMiddleware(logger));\n/* */\n\n\nlet store;\n\nexport function createStore() {\n\tif (window.__REDUX_DEVTOOLS_EXTENSION__) {\n\t\tstoreEnhancers.push(window.__REDUX_DEVTOOLS_EXTENSION__({ trace: true }));\n\t}\n\n\tconst persistedState = loadState();\n\tconst initialState = _defaultsDeep(persistedState, seed);\n\n\tstore = createReduxStore(\n\t\tallReducers,\n\t\tinitialState,\n\t\tcompose(...storeEnhancers)\n\t);\n\n\tstore.subscribe(() => {\n\t\tsaveState(store.getState());\n\t});\n}\n\nexport function getStore() {\n\treturn store;\n}\n","import { combineReducers } from 'redux';\nimport layout from './layout/reducers';\n\nexport default combineReducers({\n\tlayout\n});\n","import { combineReducers } from 'redux';\n\nimport db from '../db/reducers';\nimport fileManager from '../fileManager/_state/reducers';\nimport ui from '../ui/reducers';\n\nexport default combineReducers({\n\tdb,\n\tfileManager,\n\tui,\n});\n","import db from '../db/seed';\n\nexport default {\n\tdb,\n};\n","import options from './options/seed';\n\nexport default {\n\toptions\n};\n","export default {\n\trendering: {\n\n\t\tstyle: {\n\t\t\tvalue: 'chordmark',\n\t\t\tdefault: 'chordmark',\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\talignBars: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tautoRepeatChords: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\texpandSectionRepeats: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\n\t\t/** Layout */\n\n\t\tdocumentSize: {\n\t\t\tvalue: 'a4',\n\t\t\tdefault: 'a4',\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tdocumentMargins: {\n\t\t\tvalue: 3,\n\t\t\tdefault: 3,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tcolumnsCount: {\n\t\t\tvalue: 1,\n\t\t\tdefault: 1,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tcolumnBreakOnParagraph: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\n\n\t\t/** Display */\n\n\t\tshowChords: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tinstrument: {\n\t\t\tvalue: 'guitar',\n\t\t\tdefault: 'guitar',\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tshowStrummingPattern: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\n\n\n\t\t/** Customize Chords */\n\n\t\ttransposeValue: {\n\t\t\tvalue: 0,\n\t\t\tdefault: 0,\n\t\t\tresetOnSongChange: true,\n\t\t},\n\t\tsimplifyChords: {\n\t\t\tvalue: false,\n\t\t\tdefault: false,\n\t\t\tresetOnSongChange: true,\n\t\t},\n\t\tcapoPosition: {\n\t\t\tvalue: 0,\n\t\t\tdefault: 0,\n\t\t\tresetOnSongChange: true,\n\t\t},\n\t\tharmonizeAccidentals: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: true,\n\t\t},\n\t\tpreferredAccidentals: {\n\t\t\tvalue: 'auto',\n\t\t\tdefault: 'auto',\n\t\t\tresetOnSongChange: true,\n\t\t},\n\n\n\n\t\t/** Format */\n\n\t\tfontSize: {\n\t\t\tvalue: 0,\n\t\t\tdefault: 0,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tprintFontSize: {\n\t\t\tvalue: 0,\n\t\t\tdefault: 0,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tfontStyle: {\n\t\t\tvalue: 'roboto',\n\t\t\tdefault: 'roboto',\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tchordsColor: {\n\t\t\tvalue: 'yellow',\n\t\t\tdefault: 'yellow',\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\thighlightChords: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t}\n};\n","import './ErrorBoundary.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n// source: https://codepen.io/gaearon/pen/wqvxGa?editors=0010\nclass ErrorBoundary extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { error: null, errorInfo: null };\n\t}\n\n\tcomponentDidCatch(error, errorInfo) {\n\t\tthis.setState({\n\t\t\terror: error,\n\t\t\terrorInfo: errorInfo\n\t\t});\n\t}\n\n\trender() {\n\t\tif (this.state.errorInfo) {\n\t\t\treturn (\n\t\t\t\t<div className={'ErrorBoundary'}>\n\t\t\t\t\t<h2>Something went wrong</h2>\n\t\t\t\t\t<details style={{ whiteSpace: 'pre-wrap' }} open={true}>\n\t\t\t\t\t\t{this.state.error && this.state.error.toString()}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{this.state.errorInfo.componentStack}\n\t\t\t\t\t</details>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn this.props.children;\n\t}\n}\n\nErrorBoundary.propTypes = {\n\tchildren: PropTypes.any\n};\n\nexport default ErrorBoundary;\n","export default function createAction(type, payload) {\n\tif (!type) {\n\t\tthrow new TypeError('Cannot create an action without an action type');\n\t}\n\treturn {\n\t\ttype,\n\t\tpayload\n\t};\n}\n","import {\n\tUI_LAYOUT_APP_TOGGLE_LEFT_BAR,\n\tUI_LAYOUT_APP_TOGGLE_RIGHT_BAR,\n\tUI_LAYOUT_APP_SET_EDITOR_MODE,\n} from './actionsTypes';\n\nimport createAction from '../../../../core/createAction';\n\nexport const toggleLeftBar = () => createAction(UI_LAYOUT_APP_TOGGLE_LEFT_BAR);\n\nexport const toggleRightBar = () => createAction(UI_LAYOUT_APP_TOGGLE_RIGHT_BAR);\n\nexport const setEditorMode = (mode) => createAction(UI_LAYOUT_APP_SET_EDITOR_MODE, { mode });\n\n","export const isLeftBarCollapsed = (state) => state.ui.layout.app.isLeftBarCollapsed;\n\nexport const isRightBarCollapsed = (state) => state.ui.layout.app.isRightBarCollapsed;\n\nexport const getEditorMode = (state) => state.ui.layout.app.editorMode;\n","import './Icon.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Icon(props) {\n\tconst { iconName } = props;\n\n\tconst classList = ['icon', 'material-icons'];\n\n\treturn (\n\t\t<i className={classList.join(' ')}>{iconName}</i>\n\t);\n}\n\nIcon.propTypes = {\n\ticonName: PropTypes.string.isRequired,\n};\n\nexport default React.memo(Icon);\n","import './Logo.scss';\n\nimport React from 'react';\n\nimport Icon from '../../_components/Icon.js';\n\nfunction Logo() {\n\treturn (\n\t\t<div className={'logo'}>\n\t\t\t<div className={'logo-isCollapsed'}>\n\t\t\t\t<Icon iconName={'queue_music'} />\n\t\t\t</div>\n\n\t\t\t<div className={'logo-isExpanded'}>\n\t\t\t\t<span className={'logo-icon'}><Icon iconName={'queue_music'} /></span>Chords Charts Studio\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default React.memo(Logo);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon.js';\n\nfunction NavEntry(props) {\n\tconst {\n\t\tlabel,\n\t\ticon,\n\t\teditorMode,\n\t\tsetEditorMode,\n\t\tisActive,\n\t} = props;\n\n\tconst classNames = ['mainNavEntry'];\n\n\tif (isActive) {\n\t\tclassNames.push('mainNavEntry-isActive');\n\t}\n\n\tfunction handleClick() {\n\t\tsetEditorMode(editorMode);\n\t}\n\n\treturn (\n\t\t<li\n\t\t\tclassName={classNames.join(' ')}\n\t\t\tonClick={handleClick}\n\t\t>\n\t\t\t<span className={'mainNavEntry-icon'}><Icon iconName={icon} /></span>{label}\n\t\t</li>\n\t);\n}\n\nNavEntry.propTypes = {\n\tlabel: PropTypes.string.isRequired,\n\ticon: PropTypes.string.isRequired,\n\teditorMode: PropTypes.string.isRequired,\n\tsetEditorMode: PropTypes.func.isRequired,\n\tisActive: PropTypes.bool.isRequired,\n};\n\n\nexport default React.memo(NavEntry);\n","import './Nav.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport NavEntry from './NavEntry.js';\n\nfunction Nav(props) {\n\tconst {\n\t\tcurrentMode,\n\t\tallEntries,\n\t\tsetEditorMode,\n\t} = props;\n\n\treturn (\n\t\t<nav className={'mainNav'}>\n\t\t\t<ul className={'mainNav-entries'}>\n\t\t\t\t{\n\t\t\t\t\tallEntries.map((entry, key) =>\n\t\t\t\t\t\t<NavEntry\n\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\tisActive={(entry.editorMode === currentMode)}\n\t\t\t\t\t\t\tsetEditorMode={setEditorMode}\n\t\t\t\t\t\t\t{...entry}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</ul>\n\t\t</nav>\n\t);\n}\n\nNav.propTypes = {\n\tcurrentMode: PropTypes.string.isRequired,\n\tsetEditorMode: PropTypes.func.isRequired,\n\tallEntries: PropTypes.arrayOf(\n\t\tPropTypes.shape({\n\t\t\tid: PropTypes.string.isRequired,\n\t\t\tlabel: PropTypes.string.isRequired,\n\t\t\ticon: PropTypes.string.isRequired,\n\t\t\teditorMode: PropTypes.string.isRequired,\n\t\t})\n\t),\n};\n\nexport default React.memo(Nav);\n","import './Footer.scss';\n\nimport React from 'react';\n\nfunction Footer() {\n\treturn (\n\t\t<div className={'appFooter'}>\n\t\t\tChords Charts Studio v0.7.0 - ChordMark v0.3.0\n\t\t</div>\n\t);\n}\n\nexport default React.memo(Footer);\n","export default [\n\t{\n\t\tid: 'edit',\n\t\tlabel: 'Edit',\n\t\ticon: 'create',\n\t\teditorMode: 'edit',\n\t},\n\t{\n\t\tid: 'play',\n\t\tlabel: 'Play',\n\t\ticon: 'music_note',\n\t\teditorMode: 'play',\n\t},\n\t{\n\t\tid: 'print',\n\t\tlabel: 'Print / PDF',\n\t\ticon: 'print',\n\t\teditorMode: 'print',\n\t},\n\t{\n\t\tid: 'export',\n\t\tlabel: 'Export',\n\t\ticon: 'save_alt',\n\t\teditorMode: 'export',\n\t},\n];\n","import './App.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Logo from '../../../sideBar/_components/Logo';\nimport Nav from './Nav';\nimport Footer from './Footer';\nimport Icon from '../../../_components/Icon';\n\nimport allNavEntries from '../allNavEntries';\n\nfunction App(props) {\n\tconst {\n\t\tisLeftBarCollapsed,\n\t\tisRightBarCollapsed,\n\t\teditorMode,\n\t\ttoggleLeftBar,\n\t\ttoggleRightBar,\n\t\tsetEditorMode,\n\n\t\tleftBar,\n\t\trightBar,\n\t} = props;\n\n\tconst leftBarClassNames = ['leftBar'];\n\tif (isLeftBarCollapsed) {\n\t\tleftBarClassNames.push('leftBar-isCollapsed');\n\t}\n\n\tconst rightBarClassNames = ['rightBar'];\n\tif (isRightBarCollapsed) {\n\t\trightBarClassNames.push('rightBar-isCollapsed');\n\t}\n\n\treturn (\n\t\t<div className={'appLayout-wrapper'}>\n\t\t\t<section className={leftBarClassNames.join(' ')}>\n\t\t\t\t<div className={'leftBar-content'} onClick={(isLeftBarCollapsed) ? toggleLeftBar : null}>\n\t\t\t\t\t<Logo />\n\t\t\t\t\t{leftBar}\n\t\t\t\t</div>\n\t\t\t\t<div className={'leftBar-collapser'} onClick={toggleLeftBar} data-testid={'leftBar-collapser'}>\n\t\t\t\t\t<span className={'leftBar-collapserIcon'}>\n\t\t\t\t\t\t<Icon iconName={'keyboard_arrow_left'} />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t<section className={'appLayout-main'}>\n\t\t\t\t<section className={'appLayout-header'}>\n\t\t\t\t\t<Nav\n\t\t\t\t\t\tallEntries={allNavEntries}\n\t\t\t\t\t\tcurrentMode={editorMode}\n\t\t\t\t\t\tsetEditorMode={setEditorMode}\n\t\t\t\t\t/>\n\t\t\t\t</section>\n\t\t\t\t<section className={'appLayout-content'}>\n\t\t\t\t\t{props.children}\n\t\t\t\t</section>\n\t\t\t\t<section className={'appLayout-footer'}>\n\t\t\t\t\t<Footer/>\n\t\t\t\t</section>\n\t\t\t</section>\n\t\t\t<section className={rightBarClassNames.join(' ')}>\n\t\t\t\t<div className={'rightBar-collapser'} onClick={toggleRightBar} data-testid={'rightBar-collapser'}>\n\t\t\t\t\t<span className={'rightBar-collapserIcon'}>\n\t\t\t\t\t\t<Icon iconName={'keyboard_arrow_right'} />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div className={'rightBar-content'} onClick={(isRightBarCollapsed) ? toggleRightBar : null}>\n\t\t\t\t\t{rightBar}\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t</div>\n\t);\n}\n\nApp.propTypes = {\n\tchildren: PropTypes.element,\n\n\tisLeftBarCollapsed: PropTypes.bool,\n\tisRightBarCollapsed: PropTypes.bool,\n\ttoggleLeftBar: PropTypes.func.isRequired,\n\ttoggleRightBar: PropTypes.func.isRequired,\n\n\teditorMode: PropTypes.string.isRequired,\n\tsetEditorMode: PropTypes.func.isRequired,\n\n\tleftBar: PropTypes.element.isRequired,\n\trightBar: PropTypes.element.isRequired,\n};\n\nApp.defaultProps = {\n\tisLeftBarCollapsed: false,\n\tisRightBarCollapsed: false,\n};\n\nexport default App;\n","import { connect } from 'react-redux';\n\nimport { toggleLeftBar, toggleRightBar, setEditorMode} from '../_state/actions';\nimport { isLeftBarCollapsed, isRightBarCollapsed, getEditorMode } from '../_state/selectors';\n\nimport App from '../_components/App';\n\n\nexport default connect(\n\tstate => ({\n\t\tisLeftBarCollapsed: isLeftBarCollapsed(state),\n\t\tisRightBarCollapsed: isRightBarCollapsed(state),\n\t\teditorMode: getEditorMode(state)\n\t}),\n\n\t{\n\t\ttoggleLeftBar,\n\t\ttoggleRightBar,\n\t\tsetEditorMode,\n\t}\n\n)(App);\n\n\n","\nexport const getSelectedId = state => state.fileManager.selected;\n\nexport const getRenamedId = state => state.fileManager.renamed;\n\nexport const getDefaultTitle = state => state.fileManager.defaultTitle;\n","import uuid from 'uuid';\n\nimport createAction from '../../core/createAction';\nimport * as actionTypes from './actionsTypes';\n\n\nexport const createFile = (title) => {\n\tif (!title) {\n\t\tthrow new TypeError('Cannot create a file without title');\n\t}\n\tconst payload = {\n\t\tid: uuid.v4(),\n\t\ttitle,\n\t\tcontent: ''\n\t};\n\treturn createAction(actionTypes.DB_FILES_CREATE, payload);\n};\n\n\nexport const updateFile = (id, { title, content } = {}) => {\n\tif (!id) {\n\t\tthrow new TypeError('Cannot update a file without an id');\n\t}\n\tconst payload = {\n\t\tid,\n\t\ttitle,\n\t\tcontent\n\t};\n\treturn createAction(actionTypes.DB_FILES_UPDATE, payload);\n};\n\n\nexport const deleteFile = (id) => {\n\treturn createAction(actionTypes.DB_FILES_DELETE, { id });\n};\n\n","import _map from 'lodash/map';\nimport _isEqual from 'lodash/isEqual';\nimport _sortBy from 'lodash/sortBy';\n\nimport { createSelectorCreator, defaultMemoize } from 'reselect';\n\n\n// create a \"selector creator\" that uses lodash.isEqual instead of ===\nconst createDeepEqualSelector = createSelectorCreator(\n\tdefaultMemoize,\n\t_isEqual\n);\n\n\n// return value should not change when file content changes\nexport const getAllTitles = createDeepEqualSelector(\n\tstate => _map(state.db.files.allFiles, ({ title, id }) => ({ title, id })),\n\tallFiles => _sortBy(allFiles, o => o.title.toLowerCase())\n);\n\n\nexport const getOne = (state, id) => {\n\treturn state.db.files.allFiles[id];\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../ui/_components/Icon';\n\nfunction FileActionEntry(props) {\n\tconst { icon, text, action } = props;\n\n\treturn (\n\t\t<span className={'fileManagerAction'} onClick={action}>\n\t\t\t<span className={'fileManagerAction-icon'}>\n\t\t\t\t<Icon iconName={icon} /> {text}\n\t\t\t</span>\n\t\t</span>\n\t);\n}\n\nFileActionEntry.propTypes = {\n\ticon: PropTypes.string.isRequired,\n\ttext: PropTypes.string.isRequired,\n\taction: PropTypes.func.isRequired,\n};\n\nexport default React.memo(FileActionEntry);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport FileActionEntry from './FileActionEntry';\n\nfunction FileActions(props) {\n\tconst { createFile, deleteFile, enableRename } = props;\n\n\tconst allActions = [\n\t\t{\n\t\t\ticon: 'add_circle',\n\t\t\ttext: 'New',\n\t\t\taction: createFile\n\t\t},\n\t\t{\n\t\t\ticon: 'create',\n\t\t\ttext: 'Rename',\n\t\t\taction: enableRename\n\t\t},\n\t\t{\n\t\t\ticon: 'delete',\n\t\t\ttext: 'Delete',\n\t\t\taction: deleteFile\n\t\t},\n\t];\n\n\treturn (\n\t\t<div className={'fileManager-actionsList'}>\n\t\t\t{\n\t\t\t\tallActions.map((action, key) =>\n\t\t\t\t\t<FileActionEntry {...action} key={key} />\n\t\t\t\t)\n\t\t\t}\n\t\t</div>\n\t);\n}\n\nFileActions.propTypes = {\n\tcreateFile: PropTypes.func.isRequired,\n\tdeleteFile: PropTypes.func.isRequired,\n\tenableRename: PropTypes.func.isRequired,\n};\n\nexport default React.memo(FileActions);\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nfunction FileEntry(props) {\n\tconst [ title, setTitle ] = useState(props.title);\n\n\tconst { fileId, isSelected, isRenamed, defaultTitle, selectFile, enableRename, updateFile } = props;\n\n\tconst classList = ['fileManagerEntry'];\n\tif (isSelected) {\n\t\tclassList.push('fileManagerEntry-isSelected');\n\t}\n\tif (isRenamed) {\n\t\tclassList.push('fileManagerEntry-isRenamed');\n\t}\n\n\tconst inputRef = React.createRef();\n\n\tuseEffect(() => {\n\t\tif (isRenamed) {\n\t\t\tinputRef.current.focus();\n\t\t}\n\t}, [isRenamed, inputRef]);\n\n\tfunction handleClick() {\n\t\tif (!isSelected) {\n\t\t\tselectFile(fileId);\n\t\t}\n\t}\n\n\tfunction handleDoubleClick(e) {\n\t\tif (!isRenamed) {\n\t\t\tenableRename(fileId);\n\t\t\te.target.select();\n\t\t}\n\t}\n\n\tfunction handleKeyPress(e) {\n\t\tif (isRenamed && e.which === 13) {\n\t\t\te.preventDefault();\n\t\t\twindow.getSelection().removeAllRanges();\n\n\t\t\tconst newTitle = e.target.value;\n\t\t\tsaveTitle(newTitle);\n\t\t}\n\t}\n\n\tfunction handleChange(e) {\n\t\tsetTitle(e.target.value);\n\t}\n\n\tfunction handleFocus(e) {\n\t\tif (isRenamed) {\n\t\t\te.target.select();\n\t\t}\n\t}\n\n\tfunction handleBlur(e) {\n\t\tif (isRenamed) {\n\t\t\tconst newTitle = e.target.value;\n\t\t\tsaveTitle(newTitle);\n\t\t}\n\t}\n\n\tfunction saveTitle(newTitle) {\n\t\tnewTitle = newTitle || defaultTitle;\n\n\t\tupdateFile(fileId, {\n\t\t\ttitle: newTitle\n\t\t});\n\t\tsetTitle(newTitle);\n\n\t\tinputRef.current.scrollLeft = 0;\n\t}\n\n\treturn (\n\t\t<li\n\t\t\tclassName={classList.join(' ')}\n\t\t\tonClick={handleClick}\n\t\t\tonDoubleClick={handleDoubleClick}\n\t\t>\n\t\t\t<input\n\t\t\t\tclassName={'fileManagerEntry-input'}\n\t\t\t\tref={inputRef}\n\t\t\t\ttype={'text'}\n\t\t\t\tvalue={title}\n\t\t\t\treadOnly={(isRenamed) ? null : 'readOnly'}\n\t\t\t\tautoFocus={(isRenamed) ? 'autoFocus' : null}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tonBlur={handleBlur}\n\t\t\t\tonFocus={handleFocus}\n\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t/>\n\t\t</li>\n\t);\n}\n\nFileEntry.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n\tfileId: PropTypes.string.isRequired,\n\tisSelected: PropTypes.bool.isRequired,\n\tisRenamed: PropTypes.bool.isRequired,\n\tdefaultTitle: PropTypes.string.isRequired,\n\tselectFile: PropTypes.func.isRequired,\n\tenableRename: PropTypes.func.isRequired,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default FileEntry;\n","import './FileManager.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../ui/_components/Icon';\nimport FileActions from './FileActions';\nimport FileEntry from './FileEntry';\n\nfunction FileManager(props) {\n\tconst {\n\t\tallTitles,\n\t\tselected,\n\t\trenamed,\n\t\tdefaultTitle,\n\n\t\tselectFile,\n\t\tcreateFile,\n\t\tdeleteFile,\n\t\tenableRename,\n\t\tupdateFile,\n\n\t} = props;\n\n\treturn (\n\t\t<div className={'fileManager'}>\n\t\t\t<div className={'fileManager-isCollapsed'}>\n\t\t\t\t<span className={'fileManager-icon'}>\n\t\t\t\t\t<Icon iconName={'file_copy'} />\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div className={'fileManager-isExpanded'}>\n\t\t\t\t<FileActions\n\t\t\t\t\tcreateFile={() => createFile(defaultTitle)}\n\t\t\t\t\tdeleteFile={() => deleteFile(selected)}\n\t\t\t\t\tenableRename={() => enableRename(selected)}\n\t\t\t\t/>\n\t\t\t\t<ul className={'fileManager-entriesList'}>\n\t\t\t\t\t{\n\t\t\t\t\t\tallTitles.map(file =>\n\t\t\t\t\t\t\t<FileEntry\n\t\t\t\t\t\t\t\ttitle={file.title}\n\t\t\t\t\t\t\t\tdefaultTitle={defaultTitle}\n\t\t\t\t\t\t\t\tfileId={file.id}\n\t\t\t\t\t\t\t\tisSelected={selected === file.id}\n\t\t\t\t\t\t\t\tisRenamed={renamed === file.id}\n\t\t\t\t\t\t\t\tselectFile={selectFile}\n\t\t\t\t\t\t\t\tupdateFile={updateFile}\n\t\t\t\t\t\t\t\tenableRename={enableRename}\n\t\t\t\t\t\t\t\tkey={file.id}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nFileManager.propTypes = {\n\tallTitles: PropTypes.arrayOf(\n\t\tPropTypes.shape({\n\t\t\ttitle: PropTypes.string.isRequired,\n\t\t\tid: PropTypes.string.isRequired,\n\t\t})\n\t).isRequired,\n\tselected: PropTypes.string.isRequired,\n\trenamed: PropTypes.string.isRequired,\n\tdefaultTitle: PropTypes.string.isRequired,\n\n\tselectFile: PropTypes.func.isRequired,\n\tcreateFile: PropTypes.func.isRequired,\n\tdeleteFile: PropTypes.func.isRequired,\n\tenableRename: PropTypes.func.isRequired,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default FileManager;\n","import { connect } from 'react-redux';\n\nimport { selectFile, enableRename } from '../_state/actions';\nimport { getDefaultTitle, getSelectedId, getRenamedId } from '../_state/selectors';\n\nimport { createFile, updateFile, deleteFile } from '../../db/files/actions';\nimport { getAllTitles } from '../../db/files/selectors';\n\nimport FileManager from '../_components/FileManager';\n\nexport default connect(\n\tstate => ({\n\t\tselected: getSelectedId(state),\n\t\trenamed: getRenamedId(state),\n\t\tdefaultTitle: getDefaultTitle(state),\n\t\tallTitles: getAllTitles(state),\n\t}),\n\n\t{\n\t\tselectFile,\n\t\tcreateFile,\n\t\tdeleteFile,\n\t\tupdateFile,\n\t\tenableRename,\n\t}\n\n)(FileManager);\n","import createAction from '../../core/createAction';\n\nimport * as actionsTypes from './actionsTypes';\n\nexport const selectFile = (id) => createAction(actionsTypes.FILE_MANAGER_SELECT_FILE, { id });\n\nexport const enableRename = (id) => createAction(actionsTypes.FILE_MANAGER_ENABLE_RENAME, { id });\n\n\n\n\n","import _mapValues from 'lodash/mapValues';\n\nexport const getOptionValue = (state, context, key) => {\n\tif (!state.db.options[context] || !state.db.options[context][key]) {\n\t\treturn;\n\t}\n\treturn state.db.options[context][key].value;\n};\n\nexport const getContext = (state, context) => {\n\tif (!state.db.options[context]) {\n\t\treturn;\n\t}\n\treturn _mapValues(state.db.options[context], option => option.value);\n};\n","import domPurify from 'dompurify';\n\nexport default function escapeHTML(unescaped) {\n\treturn domPurify.sanitize(unescaped);\n}\n","import domPurify from 'dompurify';\n\nexport default function escapeHTML(unescaped) {\n\treturn domPurify.sanitize(unescaped);\n}\n","import domPurify from 'dompurify';\n\nexport default function stripTags(html) {\n\treturn domPurify.sanitize(html, {\n\t\tALLOWED_TAGS: ['#text'],\n\t\tKEEP_CONTENT: true,\n\t});\n}\n","/**\n * @enum {String}\n * @readonly\n */\nexport default {\n\tCHORD: 'chord',\n\tCHORD_LINE_REPEATER: 'chordLineRepeater',\n\tEMPTY_LINE: 'emptyLine',\n\tSECTION_LABEL: 'sectionLabel',\n\tTEXT: 'text',\n\tTIME_SIGNATURE: 'timeSignature',\n};\n","const allowedTimeSignatures = [\n\t'2/2', '3/2',\n\t'2/4', '3/4', '4/4', '5/4',\n\t'3/8', '6/8', '9/8', '12/8'\n];\n\nexport default function isTimeSignatureString(string) {\n\treturn allowedTimeSignatures.includes(string);\n}\n","export default {\n\tbarRepeat: '/',\n\tchordBeatCount: '\\\\.',\n\tchordLineRepeat: '/',\n\tnoChord: 'NC',\n\tnoLyrics: 'NL',\n\tsectionLabel: '#',\n};\n","import syntax from '../syntax';\n\nconst sectionLabelRegexp = new RegExp('^' + syntax.sectionLabel + '[a-zA-Z]+( x[2-9])?$');\n\nexport default function isSectionLabel(string) {\n\tconst found = string\n\t\t.trim()\n\t\t.match(sectionLabelRegexp);\n\treturn (found !== null);\n}\n","export default function clearSpaces(string) {\n\treturn string\n\t\t.replace(/\\t+/g, ' ')\n\t\t.replace(/  +/g, ' ')\n\t\t.trim();\n}","import clearSpaces from '../helper/clearSpaces';\n\nimport syntax from '../syntax';\nimport isChord from './isChord';\n\nconst chordBeatCountSymbols = new RegExp(syntax.chordBeatCount + '*$', 'g');\nconst barRepeatSymbols = new RegExp('^' + syntax.barRepeat + '+$');\n\nexport default function isChordLine(line = '') {\n\treturn clearSpaces(line)\n\t\t.split(' ')\n\t\t.every((potentialChordToken, index) => {\n\t\t\tconst withoutBeatCount = potentialChordToken.replace(chordBeatCountSymbols, '');\n\t\t\treturn isChord(withoutBeatCount)\n\t\t\t\t|| (potentialChordToken.match(barRepeatSymbols) && index > 0)\n\t\t\t\t|| (withoutBeatCount === syntax.noChord);\n\t\t});\n}\n","import _isString from 'lodash/isString';\n\nimport { parseChord }  from 'chord-symbol';\n\nexport default function isChord(potentialChord) {\n\treturn _isString(potentialChord) && !(parseChord(potentialChord) === null);\n}\n","import isTimeSignatureString from './matchers/isTimeSignatureString';\n\n/**\n * @typedef {Object} TimeSignature\n * @type {Object}\n * @property {String} string - original string\n * @property {Number} count - upper part of time signature\n * @property {Number} value - lower part of time signature\n * @property {Number} beatCount - number of beats per bar\n */\n\n/**\n * @param {String} string\n * @returns {TimeSignature}\n */\nexport default function parseTimeSignature(string) {\n\tif (!isTimeSignatureString(string)) {\n\t\tthrow new TypeError('Expected time signature string, received: ' + string);\n\t}\n\n\tconst array = string.split('/');\n\n\tconst count = Number.parseInt(array[0], 10);\n\tconst value = Number.parseInt(array[1], 10);\n\n\tlet beatCount = count;\n\n\tif (value === 2) {\n\t\tbeatCount = count * 2;\n\n\t} else if (value === 8) {\n\t\tbeatCount = count / 3;\n\t}\n\n\treturn {\n\t\tstring,\n\t\tcount,\n\t\tvalue,\n\t\tbeatCount,\n\t};\n}\n\n","import _isString from 'lodash/isString';\nimport _isFinite from 'lodash/isFinite';\n\nexport default class IncorrectBeatCountException extends Error {\n\tconstructor(\n\t\t{\n\t\t\tstring,\n\t\t\tduration,\n\t\t\tcurrentBeatCount,\n\t\t\tbeatCount\n\t\t} = {}\n\t) {\n\t\tif (!string || !_isString(string)) {\n\t\t\tthrow new TypeError('IncorrectBeatCountException cannot be created without chord string, received: ' + string);\n\t\t}\n\t\tif (!duration || !_isFinite(duration)) {\n\t\t\tthrow new TypeError('IncorrectBeatCountException cannot be created without chord duration, received: ' + duration);\n\t\t}\n\t\tif (!currentBeatCount || !_isFinite(currentBeatCount)) {\n\t\t\tthrow new TypeError('IncorrectBeatCountException cannot be created without currentBeatCount, received: ' + currentBeatCount);\n\t\t}\n\t\tif (!beatCount || !_isFinite(beatCount)) {\n\t\t\tthrow new TypeError('IncorrectBeatCountException cannot be created without beatCount, received: ' + beatCount);\n\t\t}\n\n\t\tsuper();\n\n\t\tthis.name = 'IncorrectBeatCountException';\n\t\tthis.string = string;\n\t\tthis.duration = duration;\n\t\tthis.currentBeatCount = currentBeatCount;\n\t\tthis.beatCount = beatCount;\n\t}\n}\n\n","import _isString from 'lodash/isString';\n\nexport default class InvalidChordRepetitionException extends Error {\n\tconstructor(\n\t\t{\n\t\t\tstring,\n\t\t} = {}\n\t) {\n\t\tif (!string || !_isString(string)) {\n\t\t\tthrow new TypeError('InvalidChordRepetitionException cannot be created without chord string, received: ' + string);\n\t\t}\n\n\t\tsuper();\n\n\t\tthis.name = 'InvalidChordRepetitionException';\n\t\tthis.string = string;\n\t}\n}\n\n","import _isEqual from 'lodash/isEqual';\nimport _cloneDeep from 'lodash/cloneDeep';\n\nimport syntax from './syntax';\nimport clearSpaces from './helper/clearSpaces';\n\nimport parseChord from './parseChord';\nimport parseTimeSignature from './parseTimeSignature';\n\nimport IncorrectBeatCountException from './exceptions/IncorrectBeatCountException';\nimport InvalidChordRepetitionException from './exceptions/InvalidChordRepetitionException';\n\nconst chordBeatCountSymbols = new RegExp(syntax.chordBeatCount, 'g');\nconst barRepeatSymbols = new RegExp('^' + syntax.barRepeat + '+$');\nconst defaultTimeSignature = parseTimeSignature('4/4');\n\n/**\n * @typedef {Object} ChordLine\n * @type {Object}\n * @property {Number} chordCount - number of chords in the line\n * @property {Bar[]} allBars\n */\n\n/**\n * @typedef {Object} Bar\n * @type {Object}\n * @property {TimeSignature} timeSignature\n * @property {ChordLineChord[]} allChords\n */\n\n/**\n * @typedef {Object} ChordLineChord\n * @type {Object}\n * @property {String} string - original chord string\n * @property {ChordDef|String} model - parsed chord or \"NC\" if \"no chord\" symbol\n * @property {Number} duration - number of beats the chord lasts\n * @property {Number} beat - beat on which the chord starts\n */\n\n/**\n * @param {String} chordLine\n * @param {TimeSignature} timeSignature\n * @returns {ChordLine}\n */\nexport default function parseChordLine(\n\tchordLine,\n\t{\n\t\ttimeSignature = defaultTimeSignature\n\t} = {}\n) {\n\tconst { beatCount } = timeSignature;\n\n\tconst allBars = [];\n\tconst emptyBar = { allChords: [] };\n\n\tlet bar = _cloneDeep(emptyBar);\n\tlet chord = {};\n\tlet tokenWithoutBeatCount;\n\tlet currentBeatCount = 0;\n\tlet chordCount = 0;\n\tlet previousBar;\n\n\tconst allTokens = clearSpaces(chordLine).split(' ');\n\tallTokens.forEach((token, tokenIndex) => {\n\t\tif (token.match(barRepeatSymbols)) {\n\t\t\tif (previousBar) {\n\t\t\t\tfor(let i = 0; i < token.length; i++) {\n\t\t\t\t\tallBars.push(_cloneDeep(previousBar));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error('A chord line cannot start with the barRepeat symbol');\n\t\t\t}\n\n\t\t} else {\n\t\t\ttokenWithoutBeatCount = token.replace(chordBeatCountSymbols, '');\n\t\t\tchord = {\n\t\t\t\tstring: token,\n\t\t\t\tduration: getChordDuration(token, beatCount),\n\t\t\t\tmodel: isNoChordSymbol(tokenWithoutBeatCount) ? syntax.noChord : parseChord(tokenWithoutBeatCount),\n\t\t\t\tbeat: currentBeatCount + 1,\n\t\t\t};\n\t\t\tcurrentBeatCount += chord.duration;\n\n\t\t\tcheckInvalidChordRepetition(bar, chord);\n\n\t\t\tbar.allChords.push(chord);\n\t\t\tchordCount++;\n\n\t\t\tif (shouldChangeBar(currentBeatCount, beatCount)) {\n\t\t\t\tbar.timeSignature = timeSignature;\n\t\t\t\tconst barClone = _cloneDeep(bar);\n\n\t\t\t\tallBars.push(barClone);\n\t\t\t\tpreviousBar = barClone;\n\n\t\t\t\tbar = _cloneDeep(emptyBar);\n\t\t\t\tcurrentBeatCount = 0;\n\n\t\t\t} else {\n\t\t\t\tcheckInvalidBeatCount(chord, currentBeatCount, beatCount, (allTokens.length === (tokenIndex + 1)));\n\t\t\t}\n\t\t}\n\t});\n\n\treturn {\n\t\tchordCount,\n\t\tallBars\n\t};\n}\n\nfunction isNoChordSymbol(token) {\n\treturn (token === syntax.noChord);\n}\n\nfunction getChordDuration(token, beatCount) {\n\treturn ((token.match(chordBeatCountSymbols) || []).length) || beatCount;\n}\n\nfunction checkInvalidChordRepetition(bar, currentChord) {\n\tif (bar.allChords.length > 0) {\n\t\tconst previousChord = bar.allChords[bar.allChords.length - 1];\n\t\tif (_isEqual(previousChord.model, currentChord.model)) {\n\t\t\tthrow new InvalidChordRepetitionException({\n\t\t\t\tstring: currentChord.string,\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction shouldChangeBar(currentBeatCount, beatCount) {\n\treturn currentBeatCount === beatCount;\n}\n\nfunction checkInvalidBeatCount(chord, currentBeatCount, beatCount, isLast) {\n\tif (hasInvalidBeatCount(currentBeatCount, beatCount, isLast)) {\n\t\tthrow new IncorrectBeatCountException({\n\t\t\tmessage: '',\n\t\t\tstring: chord.string,\n\t\t\tduration: chord.duration,\n\t\t\tcurrentBeatCount,\n\t\t\tbeatCount,\n\t\t});\n\t}\n}\nfunction hasInvalidBeatCount(currentBeatCount, barBeatCount, isLast) {\n\treturn hasTooManyBeats(currentBeatCount, barBeatCount)\n\t\t|| hasTooFewBeats(currentBeatCount, barBeatCount, isLast);\n}\nfunction hasTooManyBeats(currentBeatCount, barBeatCount) {\n\treturn currentBeatCount > barBeatCount;\n}\nfunction hasTooFewBeats(currentBeatCount, barBeatCount, isLast) {\n\treturn isLast && currentBeatCount < barBeatCount;\n}\n","import { parseChord } from 'chord-symbol';\n\n/**\n * @param chordString\n * @returns {Chord}\n */\nexport default function parseChordWrapper(chordString) {\n\treturn parseChord(chordString);\n}\n","import _cloneDeep from 'lodash/cloneDeep';\n\nimport lineTypes from '../lineTypes';\n\n/**\n * @param {SongLine[]} allLines\n * @param {Function} fn - to execute on each chord\n * @returns {SongLine[]}\n */\nexport function forEachChordInSong(allLines, fn) {\n\tconst newLines = _cloneDeep(allLines);\n\n\tnewLines.forEach(line => {\n\t\tif (line.type === lineTypes.CHORD) {\n\t\t\tline.model.allBars.forEach(bar => {\n\t\t\t\tbar.allChords.forEach(chord => {\n\t\t\t\t\tfn(chord);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n\treturn newLines;\n}\n\n\n/**\n * @param {ChordLine} chordLine\n * @param {Function} fn - to execute on each chord\n * @returns {ChordLine}\n */\nexport function forEachChordInChordLine(chordLine, fn) {\n\tconst newChordLine = _cloneDeep(chordLine);\n\n\tnewChordLine.allBars.forEach(bar => {\n\t\tbar.allChords.forEach(chord => {\n\t\t\tfn(chord);\n\t\t});\n\t});\n\n\treturn newChordLine;\n}\n\n\n/**\n * @param {SongLine[]} allLines\n * @param {String} label - the label to select\n * @param {Number} n - the index of the section to select\n * @returns {SongLine[]} all lines of the requested section\n */\nexport function getNthOfLabel(allLines, label, n) {\n\tconst selected = [];\n\tconst typesCount = {};\n\n\tlet enableSelect = false;\n\tlet currentLabel = '';\n\n\tallLines.forEach(line => {\n\t\tif (line.type === lineTypes.SECTION_LABEL) {\n\t\t\tcurrentLabel = line.model.label;\n\n\t\t\tif (! typesCount[currentLabel]) {\n\t\t\t\ttypesCount[currentLabel] = 1;\n\t\t\t} else {\n\t\t\t\ttypesCount[currentLabel]++;\n\t\t\t}\n\n\t\t\tenableSelect = (line.id === (label + n));\n\n\t\t} else if (enableSelect) {\n\t\t\tselected.push(line);\n\t\t}\n\t});\n\treturn selected;\n}\n","/*eslint-disable max-lines-per-function */\nimport _cloneDeep from 'lodash/cloneDeep';\nimport lineTypes from './lineTypes';\n\nimport isTimeSignature from './matchers/isTimeSignatureString';\nimport isSectionLabel from './matchers/isSectionLabel';\nimport isChordLine from './matchers/isChordLine';\nimport isChordLineRepeater from './matchers/isChordLineRepeater';\nimport isEmptyLine from './matchers/isEmptyLine';\n\nimport parseTimeSignature from './parseTimeSignature';\nimport parseChordLine from './parseChordLine';\nimport parseSectionLabel from './parseSectionLabel';\n\nimport { getNthOfLabel } from './helper/songs';\n\nconst defaultTimeSignature = '4/4';\n\n/**\n * @typedef {Object} SongLine\n * @type {Object}\n * @property {String} string - original line in source file\n * @property {String} type - chord|text|timeSignature|sectionLabel...\n * @property {Boolean} [isFromSectionRepeat] - line created by a section repeat directive (x3...)\n * @property {Boolean} [isFromAutoRepeatChords] - line created by auto repeats of chords from a section to another\n */\n\n/**\n * @typedef {SongLine} SongChordLine\n * @type {Object}\n * @property {ChordLine} model\n * @property {Boolean} [isFromChordLineRepeater] - line created by the chordLine repeat symbol\n */\n\n/**\n * @typedef {SongLine} SongTimeSignatureLine\n * @type {Object}\n * @property {TimeSignature} model\n */\n\n/**\n * @typedef {SongLine} SongTextLine\n * @type {Object}\n */\n\n/**\n * @typedef {SongLine} SongSectionLabelLine\n * @type {Object}\n * @property {SectionLabel} model\n * @property {Number} index - index of the section for a given label (#v, #v x2, #v => 1, 2, 3, 4)\n * @property {Number} indexWithoutRepeats - idem, but not taking repeats into account (#v, #v x2, #v => 1, 2, 3)\n * @property {String} id\n */\n\nexport default function songLinesFactory() {\n\tconst allLines = [];\n\tconst sectionsStats = {};\n\n\tlet currentTimeSignature = parseTimeSignature(defaultTimeSignature);\n\tlet currentSectionLabel;\n\tlet currentSectionStats;\n\n\tlet previousChordLine;\n\tlet previousSectionLabelLine;\n\n\tlet blueprint = [];\n\tlet blueprintIndex = 0;\n\tlet blueprintLine = '';\n\n\tlet isRepeatingChords = false;\n\tlet shouldRepeatSection = false;\n\n\t/**\n\t * @returns {SongTimeSignatureLine}\n\t */\n\tfunction getTimeSignatureLine(string) {\n\t\tcurrentTimeSignature = parseTimeSignature(string);\n\n\t\treturn {\n\t\t\tstring,\n\t\t\ttype: lineTypes.TIME_SIGNATURE,\n\t\t\tmodel: currentTimeSignature,\n\t\t};\n\t}\n\n\t/**\n\t * @returns {SongSectionLabelLine}\n\t */\n\tfunction getSectionLabelLine(string) {\n\t\tcurrentSectionLabel = parseSectionLabel(string);\n\n\t\tincreaseSectionStats(currentSectionLabel.label);\n\t\tcurrentSectionStats = getSectionCount(currentSectionLabel.label);\n\n\t\tconst line = {\n\t\t\tstring,\n\t\t\ttype: lineTypes.SECTION_LABEL,\n\t\t\tmodel: currentSectionLabel,\n\t\t\tindex: currentSectionStats.count,\n\t\t\tindexWithoutRepeats: currentSectionStats.withoutRepeats,\n\t\t\tid: currentSectionLabel.label + currentSectionStats.count,\n\t\t};\n\n\t\tshouldRepeatSection = (currentSectionLabel.repeatTimes > 0);\n\t\tpreviousSectionLabelLine = _cloneDeep(line);\n\n\t\tif (!isFirstOfLabel(currentSectionLabel, allLines)) {\n\t\t\tblueprint = getNthOfLabel(allLines, currentSectionLabel.label, 1);\n\t\t\tblueprintIndex = 0;\n\t\t\tisRepeatingChords = true;\n\t\t} else {\n\t\t\tisRepeatingChords = false;\n\t\t}\n\t\treturn line;\n\t}\n\n\t/**\n\t * @returns {SongTextLine}\n\t */\n\tfunction getEmptyLine(string) {\n\t\treturn {\n\t\t\tstring,\n\t\t\ttype: lineTypes.EMPTY_LINE,\n\t\t};\n\t}\n\n\t/**\n\t * @returns {SongChordLine|SongTextLine}\n\t */\n\tfunction getChordLine(string) {\n\t\tlet line;\n\t\ttry {\n\t\t\tconst model = parseChordLine(string, { timeSignature: currentTimeSignature });\n\t\t\tline = {\n\t\t\t\tstring,\n\t\t\t\ttype: lineTypes.CHORD,\n\t\t\t\tmodel,\n\t\t\t};\n\t\t\tpreviousChordLine = line;\n\n\t\t} catch (e) {\n\t\t\tline = getTextLine(string);\n\t\t}\n\t\treturn line;\n\t}\n\n\t/**\n\t * @returns {SongChordLine|SongTextLine}\n\t */\n\tfunction getPreviousChordLine(string) {\n\t\tif (previousChordLine) {\n\t\t\treturn {\n\t\t\t\t..._cloneDeep(previousChordLine),\n\t\t\t\tisFromChordLineRepeater: true\n\t\t\t};\n\t\t}\n\t\treturn getTextLine(string);\n\t}\n\n\t/**\n\t * @returns {SongTextLine}\n\t */\n\tfunction getTextLine(string) {\n\t\treturn {\n\t\t\tstring,\n\t\t\ttype: lineTypes.TEXT,\n\t\t};\n\t}\n\t\n\tfunction increaseSectionStats(label, isRepeated = false) {\n\t\tif (!sectionsStats[label]) {\n\t\t\tsectionsStats[label] = {\n\t\t\t\tcount: 1,\n\t\t\t\twithoutRepeats: 1,\n\t\t\t};\n\t\t} else {\n\t\t\tsectionsStats[label].count++;\n\t\t\tif (!isRepeated) {\n\t\t\t\tsectionsStats[label].withoutRepeats++;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getSectionCount(label) {\n\t\treturn sectionsStats[label];\n\t}\n\n\tfunction repeatLinesFromBlueprint(line) {\n\t\tif (isRepeatingChords && line.type !== lineTypes.SECTION_LABEL) {\n\t\t\tblueprintLine = blueprint[blueprintIndex];\n\t\t\tlet repeatedLine;\n\n\t\t\twhile (shouldRepeatLineFromBlueprint(blueprintLine, line)) {\n\t\t\t\tif (blueprintLine.type === lineTypes.CHORD) {\n\t\t\t\t\tpreviousChordLine = _cloneDeep(blueprintLine);\n\t\t\t\t}\n\t\t\t\trepeatedLine = {\n\t\t\t\t\t..._cloneDeep(blueprintLine),\n\t\t\t\t\tisFromAutoRepeatChords: true,\n\t\t\t\t};\n\t\t\t\tallLines.push(repeatedLine);\n\t\t\t\tblueprintIndex++;\n\t\t\t\tblueprintLine = blueprint[blueprintIndex];\n\t\t\t}\n\t\t\tblueprintIndex++;\n\t\t}\n\t}\n\n\tfunction repeatSection(lineIndex, allSrcLines) {\n\t\tif (shouldRepeatSection && isLastLineOfSection(lineIndex, allSrcLines)) {\n\t\t\tconst toRepeat = getNthOfLabel(allLines, currentSectionLabel.label, currentSectionStats.count)\n\t\t\t\t.map(line => ({\n\t\t\t\t\t..._cloneDeep(line),\n\t\t\t\t\tisFromSectionRepeat: true\n\t\t\t\t}));\n\t\t\tlet sectionLabelLine;\n\n\t\t\tfor (let i = 1; i < currentSectionLabel.repeatTimes; i++) {\n\t\t\t\tincreaseSectionStats(currentSectionLabel.label, true);\n\t\t\t\tcurrentSectionStats = getSectionCount(currentSectionLabel.label);\n\n\t\t\t\tsectionLabelLine = {\n\t\t\t\t\t..._cloneDeep(previousSectionLabelLine),\n\t\t\t\t\tindex: currentSectionStats.count,\n\t\t\t\t\tindexWithoutRepeats: currentSectionStats.withoutRepeats,\n\t\t\t\t\tid: currentSectionLabel.label + currentSectionStats.count,\n\t\t\t\t\tisFromSectionRepeat: true,\n\t\t\t\t};\n\t\t\t\tallLines.push(sectionLabelLine);\n\t\t\t\tallLines.push(..._cloneDeep(toRepeat));\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {\n\t\taddLine(lineSrc, lineIndex, allSrcLines) {\n\t\t\tlet line;\n\t\t\tif (isTimeSignature(lineSrc)) {\n\t\t\t\tline = getTimeSignatureLine(lineSrc);\n\n\t\t\t} else if (isSectionLabel(lineSrc)) {\n\t\t\t\tline = getSectionLabelLine(lineSrc);\n\n\t\t\t} else if (isChordLine(lineSrc)) {\n\t\t\t\tline = getChordLine(lineSrc);\n\n\t\t\t} else if (isChordLineRepeater(lineSrc)) {\n\t\t\t\tline = getPreviousChordLine(lineSrc);\n\n\t\t\t} else if (isEmptyLine(lineSrc)) {\n\t\t\t\tline = getEmptyLine(lineSrc);\n\n\t\t\t} else {\n\t\t\t\tline = getTextLine(lineSrc);\n\t\t\t}\n\n\t\t\trepeatLinesFromBlueprint(line);\n\n\t\t\tallLines.push(line);\n\n\t\t\trepeatSection(lineIndex, allSrcLines);\n\n\t\t},\n\n\t\t/**\n\t\t * returns {SongLine[]}\n\t\t */\n\t\tasArray() {\n\t\t\treturn _cloneDeep(allLines);\n\t\t}\n\t};\n}\n\nfunction isFirstOfLabel(currentLabel, allLines) {\n\treturn allLines.every(line =>\n\t\t(line.type === lineTypes.SECTION_LABEL && line.model.label !== currentLabel.label)\n\t);\n}\n\nfunction shouldRepeatLineFromBlueprint(blueprintLine, currentLine) {\n\treturn blueprintLine\n\t\t&& blueprintLine.type !== lineTypes.TEXT\n\t\t&& blueprintLine.type !== lineTypes.EMPTY_LINE\n\t\t&& blueprintLine.type !== currentLine.type\n\t\t&& currentLine.type !== lineTypes.EMPTY_LINE;\n}\n\nfunction isLastLineOfSection(lineIndex, allSrcLines) {\n\tconst nextLine = allSrcLines[lineIndex + 1];\n\treturn typeof nextLine === 'undefined' || isSectionLabel(nextLine);\n}\n","import isSectionLabel from './matchers/isSectionLabel';\n\n/**\n * @typedef {Object} SectionLabel\n * @type {Object}\n * @property {String} string - original string\n * @property {String} label - label of the section\n * @property {Number} repeatTimes - number of times the section should be repeated\n */\n\n/**\n * @param {String} string\n * @returns {SectionLabel}\n */\nexport default function parseSectionLabel(string) {\n\tif (!isSectionLabel(string)) {\n\t\tthrow new TypeError('Expected section identifier string, received: ' + string);\n\t}\n\n\tconst [ labelSrc, repeatSrc ] = string.trim().split(' ');\n\n\treturn {\n\t\tstring,\n\t\tlabel: labelSrc.substring(1),\n\t\trepeatTimes: (repeatSrc) ? Number.parseInt(repeatSrc.substring(1)) : 0\n\t};\n}\n\n","import syntax from '../syntax';\nimport clearSpaces from '../helper/clearSpaces';\n\nexport default function isChordLineRepeater(string) {\n\treturn (clearSpaces(string) === syntax.chordLineRepeat);\n}\n","import clearSpaces from '../helper/clearSpaces';\n\nexport default function isEmptyLine(string) {\n\treturn (clearSpaces(string) === '');\n}\n","import _isArray from 'lodash/isArray';\n\nimport escapeHTML from '../core/dom/escapeHTML';\nimport stripTags from '../core/dom/stripTags';\n\nimport songLinesFactory from './songLinesFactory';\n\nimport getAllChordsInSong from './getAllChordsInSong';\n\n/**\n * @typedef {Object} Song\n * @type {Object}\n * @property {SongLine[]} allLines\n * @property {SongChord[]} allChords\n */\n\n/**\n * @typedef {Object} SongChord\n * @type {Object}\n * @property {ChordDef} model\n * @property {number} occurrences - number of times the chord appears in the song\n */\n\n/**\n * @param {string|array} songSrc\n * @returns {Song}\n */\nexport default function parseSong(songSrc) {\n\tconst songArray = (!_isArray(songSrc)) ? songSrc.split('\\n') : songSrc;\n\n\tconst songLines = songLinesFactory();\n\n\t/**\n\t * @type {SongLine[]}\n\t */\n\tsongArray\n\t\t.map(escapeHTML)\n\t\t.map(stripTags)\n\t\t.forEach(songLines.addLine);\n\n\tconst allLines = songLines.asArray();\n\tconst allChords = getAllChordsInSong(allLines);\n\n\treturn {\n\t\tallLines,\n\t\tallChords\n\t};\n}\n","import _findIndex from 'lodash/findIndex';\nimport _isEqual from 'lodash/isEqual';\nimport _cloneDeep from 'lodash/cloneDeep';\n\nimport { forEachChordInSong } from './helper/songs';\n\n/**\n * @param {SongLine[]} allLines\n * @returns {SongChord[]}\n */\nexport default function getAllChordsInSong(allLines) {\n\tconst allChords = [];\n\tlet i;\n\n\tforEachChordInSong(allLines, chord => {\n\t\ti = _findIndex(allChords, o => _isEqual(o.model, chord.model));\n\n\t\tif (i === -1) {\n\t\t\tallChords.push({\n\t\t\t\tmodel: _cloneDeep(chord.model),\n\t\t\t\toccurrences: 1\n\t\t\t});\n\t\t} else {\n\t\t\tallChords[i].occurrences++;\n\t\t}\n\t});\n\n\treturn allChords;\n}\n","import _cloneDeep from 'lodash/cloneDeep';\n\nconst allMasks = {\n\t0: {\n\t\t'': []\n\t},\n\n\t2: {\n\t\t'2': \t[3], \t\t// 'A   '\n\t\t'11':  \t[3, 2], \t// 'A   B  ',\n\t},\n\n\t3: {\n\t\t'3': \t[3], \t\t// 'A   '\n\t\t'12':  \t[2, 4], \t// 'A  B    '\n\t\t'21': \t[6, 0], \t// 'A      C'\n\t\t'111': \t[2, 2, 0], \t// 'A  B  C'\n\t},\n\n\t4: {\n\t\t'4': \t[3], \t\t// 'A   ',\n\t\t'13': \t[1, 4], \t// 'A B    ',\n\t\t'22': \t[3, 2], \t// 'A   B  ',\n\t\t'31':   [5, 0], \t// 'A     B',\n\t\t'112':  [1, 1, 3], \t// 'A B C   ',\n\t\t'121':  [1, 4, 0], \t// 'A B    C',\n\t\t'211': \t[4, 1, 0], \t// 'A    B C',\n\t\t'1111': [2, 2, 2], \t// 'A  B  C  D',\n\t},\n};\n\nexport default function space(chordLineInput) {\n\tconst chordLine = _cloneDeep(chordLineInput);\n\n\tlet beatCount = 0;\n\tlet chordPattern = '';\n\tlet chordSpaces = [];\n\n\tchordLine.allBars.forEach(bar => {\n\t\tbeatCount = 0;\n\t\tchordPattern = '';\n\n\t\tbar.allChords.forEach(chord => {\n\t\t\tchordPattern += chord.duration.toString();\n\t\t\tbeatCount += chord.duration;\n\t\t});\n\n\t\tchordSpaces = allMasks[beatCount][chordPattern];\n\n\t\tfor (let i = 0; i < chordPattern.length; i++) {\n\t\t\tbar.allChords[i].spacesAfter = chordSpaces[i];\n\t\t}\n\t});\n\n\treturn chordLine;\n}\n","import _cloneDeep from 'lodash/cloneDeep';\n\nconst spacesAfterDefault = 2;\nconst emptyBeatSpaces = 1;\n\nexport default function space(chordLineInput, maxBeatsWidth) {\n\tconst chordLine = _cloneDeep(chordLineInput);\n\n\tlet beatMaxWidth;\n\n\tchordLine.allBars.forEach((bar, barIndex) => {\n\t\tbar.allChords.forEach(chord => {\n\t\t\tchord.spacesWithin = maxBeatsWidth[barIndex][chord.beat] - chord.symbol.length;\n\t\t\tchord.spacesAfter = 0;\n\n\t\t\tif (chord.beat !== bar.timeSignature.beatCount) {\n\t\t\t\tchord.spacesAfter = spacesAfterDefault;\n\n\t\t\t\tfor (let i = (chord.beat + 1); i < (chord.beat + chord.duration); i++) {\n\t\t\t\t\tbeatMaxWidth = maxBeatsWidth[barIndex][i];\n\n\t\t\t\t\tchord.spacesAfter += (beatMaxWidth)\n\t\t\t\t\t\t? beatMaxWidth\n\t\t\t\t\t\t: emptyBeatSpaces;\n\n\t\t\t\t\tif (i !== bar.timeSignature.beatCount && beatMaxWidth) {\n\t\t\t\t\t\tchord.spacesAfter += spacesAfterDefault;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\treturn chordLine;\n}\n","import _cloneDeep from 'lodash/cloneDeep';\nimport _invert from 'lodash/invert';\n\nconst notes = [\n\t'C',\n\t'C#',\n\t'D',\n\t'D#',\n\t'E',\n\t'F',\n\t'F#',\n\t'G',\n\t'G#',\n\t'A',\n\t'A#',\n\t'B',\n];\n\nconst sharpsToFlats = {\n\t'C#': 'Db',\n\t'D#': 'Eb',\n\t'F#': 'Gb',\n\t'G#': 'Ab',\n\t'A#': 'Bb',\n};\n\nconst flatsToSharps = _invert(sharpsToFlats);\n\nfunction convertToSharp(note) {\n\treturn flatsToSharps[note] || note;\n}\n\nfunction transposeNote(note, value, useFlats) {\n\tconst noteIndex = notes.indexOf(note);\n\tconst transposedIndex = noteIndex + value;\n\n\tconst octaves = Math.floor(transposedIndex / 12);\n\tconst correctedTransposedIndex = transposedIndex - (octaves * 12);\n\n\tconst transposed = notes[correctedTransposedIndex];\n\n\treturn (useFlats)\n\t\t? sharpsToFlats[transposed] || transposed\n\t\t: transposed;\n}\n\nexport default function transposeChord(chord, value, useFlats) {\n\tconst transposedChord = _cloneDeep(chord); // check immutability\n\n\tconst root = transposedChord.formatted.rootNote;\n\tconst bass = transposedChord.formatted.bassNote;\n\n\tconst rootSharp = convertToSharp(root);\n\ttransposedChord.formatted.rootNote = transposeNote(rootSharp, value, useFlats);\n\n\tif (bass) {\n\t\tconst bassSharp = convertToSharp(bass);\n\t\ttransposedChord.formatted.bassNote = transposeNote(bassSharp, value, useFlats);\n\t}\n\n\treturn transposedChord;\n}\n","import _cloneDeep from 'lodash/cloneDeep';\nimport transposeChord from './transposeChord';\nimport getMainAccidental from '../helpers/getMainAccidental';\nimport syntax from '../../parser/syntax';\n\nimport { forEachChordInSong } from '../../parser/helper/songs';\n\n/**\n * @param {SongLine[]} allLines\n * @param {SongChord[]} allChords\n * @param transposeValue\n * @param accidentalsType\n * @param harmonizeAccidentals\n * @returns {SongLine[]} - with added transposedModel property on each chord if needed\n */\nexport default function transposeSong(allLines, allChords, {\n\ttransposeValue = 0,\n\taccidentalsType = 'auto',\n\tharmonizeAccidentals = true\n} = {}) {\n\tlet transposed = _cloneDeep(allLines);\n\n\tlet accidental = (accidentalsType === 'auto')\n\t\t? getMainAccidental(allChords)\n\t\t: accidentalsType;\n\n\tif (harmonizeAccidentals || transposeValue !== 0) {\n\t\ttransposed = forEachChordInSong(transposed, (chord) => {\n\t\t\tif (chord.model !== syntax.noChord) {\n\t\t\t\tchord.transposedModel = transposeChord(\n\t\t\t\t\tchord.model,\n\t\t\t\t\ttransposeValue,\n\t\t\t\t\taccidental === 'flat'\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\treturn transposed;\n}\n","import syntax from '../../parser/syntax';\n\n/**\n * Returns the most used accidental of a song.\n *\n * @param {SongChord[]} allChords\n * @returns {('flat'|'sharp')}\n */\nexport default function getMainAccidental(allChords) {\n\tlet rootNote = '';\n\tlet flatCount = 0;\n\tlet sharpCount = 0;\n\n\tallChords\n\t\t.filter(chord => (chord.model !== syntax.noChord))\n\t\t.forEach(chord => {\n\t\t\trootNote = chord.model.formatted.rootNote;\n\n\t\t\tif (rootNote.length === 2) {\n\t\t\t\tlet accidental = rootNote[1];\n\n\t\t\t\tif (accidental === 'b') {\n\t\t\t\t\tflatCount += chord.occurrences;\n\t\t\t\t} else {\n\t\t\t\t\tsharpCount += chord.occurrences;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\treturn (flatCount > sharpCount) ? 'flat' : 'sharp';\n}\n","import _isFinite from 'lodash/isFinite';\n\nimport renderChord from './renderChordSymbol';\nimport barContentTpl from './tpl/barContent.hbs';\n\nconst space = ' ';\n\nconst defaultSpacesWithin = 0;\nconst defaultSpacesAfter = 2;\n\n/**\n * @param {Bar} bar\n * @returns {String} rendered html\n */\nexport default function renderBarContent(bar) {\n\tlet spacesWithin = 0;\n\tlet spacesAfter = 0;\n\n\tconst barContent = bar.allChords.reduce((rendering, chord) => {\n\t\tspacesWithin = _isFinite(chord.spacesWithin) ? chord.spacesWithin : defaultSpacesWithin;\n\t\tspacesAfter = _isFinite(chord.spacesAfter) ? chord.spacesAfter : defaultSpacesAfter;\n\n\t\trendering +=\n\t\t\trenderChord(chord.symbol) +\n\t\t\tspace.repeat(spacesWithin) +\n\t\t\tspace.repeat(spacesAfter);\n\n\t\treturn rendering;\n\t}, '');\n\n\treturn barContentTpl({ barContent });\n}\n","import chordSymbolTpl from './tpl/chordSymbol.hbs';\n\n/**\n * @param {String} chordSymbol\n * @returns {String} rendered html\n */\nexport default function renderChordSymbol (chordSymbol) {\n\treturn chordSymbolTpl({ chordSymbol });\n}\n","import sectionLabelTpl from './tpl/sectionLabel.hbs';\n\nconst labelsMapping = {\n\ta: 'adlib',\n\tb: 'bridge',\n\tc: 'chorus',\n\ti: 'intro',\n\to: 'outro',\n\tp: 'pre-chorus',\n\ts: 'solo',\n\tu: 'interlude',\n\tv: 'verse',\n};\n\n\n/**\n * @param {SongSectionLabelLine} sectionLabelLine\n * @param {Boolean} expandSectionRepeats\n * @param {Object} sectionsStats - key = section label, value = section count in song\n * @returns {String} rendered html\n */\nexport default function renderSectionLabel(sectionLabelLine, {\n\texpandSectionRepeats = true,\n\tsectionsStats = {},\n} = {}) {\n\tconst { model, index, indexWithoutRepeats } = sectionLabelLine;\n\tconst labelRaw = labelsMapping[model.label]\n\t\t? labelsMapping[model.label]\n\t\t: model.label;\n\n\n\tlet rendered = labelRaw[0].toUpperCase() + labelRaw.substring(1);\n\n\tif (sectionsStats[model.label] > 1) {\n\t\trendered += ' ';\n\t\trendered += (expandSectionRepeats) ? index : indexWithoutRepeats;\n\t}\n\n\tif (!expandSectionRepeats && model.repeatTimes) {\n\t\trendered += ' x' + model.repeatTimes;\n\t}\n\n\treturn sectionLabelTpl({ sectionLabel: rendered });\n}\n","import syntax from '../../parser/syntax';\nimport { chordRendererFactory } from 'chord-symbol';\n\nconst noChordSymbol = 'NC';\nconst renderChord = chordRendererFactory({ useShortNamings: true});\n\n/**\n * @param {Chord|String} model\n * @returns {string}\n */\nexport default function(model) {\n\treturn (model === syntax.noChord) ? noChordSymbol : renderChord(model);\n}\n","import getMaxBeatsWidth from '../spacers/chord/getMaxBeatsWidth';\n\nimport simpleChordSpacer from '../spacers/chord/simple';\nimport alignedChordSpacer from '../spacers/chord/aligned';\n\nimport transposeSong from '../modifiers/transposeSong';\nimport { forEachChordInSong } from '../../parser/helper/songs';\n\nimport renderChordLine from './renderChordLine';\nimport renderEmptyLine from './renderEmptyLine';\nimport renderLine from './renderLine';\nimport renderSectionLabel from './renderSectionLabel';\nimport renderTextLine from './renderTextLine';\nimport renderTimeSignature from './renderTimeSignature';\n\nimport songTpl from './tpl/song.hbs';\nimport getChordSymbol from '../helpers/getChordSymbol';\nimport getSectionsStats from '../helpers/getSectionsStats';\n\nimport lineTypes from '../../parser/lineTypes';\n\n/**\n * @param {Song} parsedSong\n * @param {Boolean} alignBars\n * @param {Number} transposeValue\n * @param {('auto'|'flat'|'sharp')} accidentalsType\n * @param {Boolean} harmonizeAccidentals\n * @param {Boolean} expandSectionRepeats\n * @param {Boolean} autoRepeatChords\n * @returns {String} rendered HTML\n */\nexport default function renderSong(parsedSong, {\n\talignBars = false,\n\ttransposeValue = 0,\n\taccidentalsType = 'auto',\n\tharmonizeAccidentals = true,\n\texpandSectionRepeats = true,\n\tautoRepeatChords = true,\n} = {}) {\n\tlet { allLines, allChords } = parsedSong;\n\n\tallLines = transposeSong(allLines, allChords,  {\n\t\ttransposeValue,\n\t\taccidentalsType,\n\t\tharmonizeAccidentals\n\t});\n\tallLines = forEachChordInSong(allLines, (chord) => {\n\t\tchord.symbol = (chord.transposedModel)\n\t\t\t? getChordSymbol(chord.transposedModel)\n\t\t\t: getChordSymbol(chord.model);\n\t});\n\n\tconst sectionsStats = getSectionsStats(allLines);\n\tconst maxBeatsWidth = getMaxBeatsWidth(allLines);\n\n\tlet shouldSkipRepeatedSectionLine = false;\n\n\tconst song = allLines\n\t\t.filter(shouldRenderLine)\n\t\t.map(line => {\n\t\t\tlet rendered;\n\n\t\t\tif (line.type === lineTypes.CHORD) {\n\t\t\t\t// todo: move this in renderChordLine\n\t\t\t\tconst spaced = (alignBars)\n\t\t\t\t\t? alignedChordSpacer(line.model, maxBeatsWidth)\n\t\t\t\t\t: simpleChordSpacer(line.model);\n\n\t\t\t\trendered = renderChordLine(spaced);\n\n\t\t\t} else if (line.type === lineTypes.EMPTY_LINE) {\n\t\t\t\trendered = renderEmptyLine();\n\n\t\t\t} else if (line.type === lineTypes.SECTION_LABEL) {\n\t\t\t\trendered = renderSectionLabel(line, { sectionsStats, expandSectionRepeats });\n\n\t\t\t} else if (line.type === lineTypes.TIME_SIGNATURE) {\n\t\t\t\trendered = renderTimeSignature(line);\n\n\t\t\t} else {\n\t\t\t\trendered = renderTextLine(line);\n\t\t\t}\n\t\t\treturn renderLine(rendered, {\n\t\t\t\tisFromSectionRepeat: line.isFromSectionRepeat,\n\t\t\t\tisFromAutoRepeatChords: line.isFromAutoRepeatChords,\n\t\t\t\tisFromChordLineRepeater: line.isFromChordLineRepeater,\n\t\t\t});\n\t\t})\n\t\t.filter(Boolean)\n\t\t.join('\\n');\n\n\n\tfunction shouldRenderLine(line) {\n\t\tif (line.type === lineTypes.SECTION_LABEL) {\n\t\t\tshouldSkipRepeatedSectionLine = (line.isFromSectionRepeat === true && !expandSectionRepeats);\n\t\t}\n\t\tconst shouldSkipAutoRepeatChordLine = (line.isFromAutoRepeatChords && !autoRepeatChords);\n\n\t\treturn !shouldSkipRepeatedSectionLine && !shouldSkipAutoRepeatChordLine;\n\t}\n\n\treturn songTpl({ song });\n}\n\n\n","import lineTypes from '../../parser/lineTypes';\n\n/**\n * Returns the number of usage of each section label\n *\n * @param {SongSectionLabelLine[]} allLines\n * @returns {Object} key = label, value = number of usage\n */\nexport default function getSectionsStats(allLines) {\n\tconst stats = {};\n\n\tallLines\n\t\t.filter(line => line.type === lineTypes.SECTION_LABEL)\n\t\t.forEach(line => {\n\t\t\tif (!stats[line.model.label]) {\n\t\t\t\tstats[line.model.label] = 1;\n\n\t\t\t} else {\n\t\t\t\tstats[line.model.label]++;\n\t\t\t}\n\t\t});\n\n\treturn stats;\n}\n","import lineTypes from '../../../parser/lineTypes';\n\n/**\n * @param {SongLine[]} allLines\n * @returns {Array}\n */\nexport default function getMaxBeatsWidth(allLines) {\n\tconst maxBeatsWidth = [];\n\n\tallLines\n\t\t.filter(line => line.type === lineTypes.CHORD)\n\t\t.forEach(line => {\n\t\t\tline.model.allBars.forEach((bar, barIndex) => {\n\t\t\t\tif (!maxBeatsWidth[barIndex]) {\n\t\t\t\t\tmaxBeatsWidth[barIndex] = {};\n\n\t\t\t\t\tfor (let i = 1; i <= bar.timeSignature.beatCount; i++) {\n\t\t\t\t\t\tmaxBeatsWidth[barIndex][i] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbar.allChords.forEach(chord => {\n\t\t\t\t\tmaxBeatsWidth[barIndex][chord.beat] = Math.max(\n\t\t\t\t\t\tmaxBeatsWidth[barIndex][chord.beat],\n\t\t\t\t\t\tchord.symbol.length\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\treturn maxBeatsWidth;\n}\n","import textLineTpl from './tpl/textLine.hbs';\n\n/**\n * @param {SongTextLine} textLine\n * @returns {String} rendered html\n */\nexport default function render(textLine) {\n\treturn textLineTpl({ textLine: textLine.string });\n}\n","import timeSignatureTpl from './tpl/timeSignature.hbs';\n\n/**\n * @param {SongTimeSignatureLine} timeSignatureLine\n * @returns {String} rendered html\n */\nexport default function render(timeSignatureLine) {\n\treturn timeSignatureTpl({ timeSignature: timeSignatureLine.string });\n}\n","import chordLineTpl from './tpl/chordLine.hbs';\n\nimport renderBarContent from './renderBarContent';\nimport barSeparatorTpl from './tpl/barSeparator.hbs';\n\n/**\n * @param {ChordLine} chordLineModel\n * @returns {String} rendered html\n */\nexport default function renderChordLine(chordLineModel) {\n\tconst allBarsRendered = chordLineModel.allBars\n\t\t.map(bar => renderBarContent(bar));\n\n\tconst barSeparator = barSeparatorTpl();\n\n\tconst chordLine = barSeparator +\n\t\tallBarsRendered.join(barSeparator) +\n\t\tbarSeparator;\n\n\treturn chordLineTpl({ chordLine });\n}\n","import emptyLineTpl from './tpl/emptyLine.hbs';\n\n/**\n * @returns {String} rendered html\n */\nexport default function render() {\n\treturn emptyLineTpl();\n}\n","import lineTpl from './tpl/line.hbs';\n\n/**\n * @param {string} line\n * @param {Boolean} isFromSectionRepeat\n * @param {Boolean} isFromAutoRepeatChords\n * @param {Boolean} isFromChordLineRepeater\n * @returns {String} rendered html\n */\nexport default function render(line, {\n\tisFromSectionRepeat = false,\n\tisFromAutoRepeatChords = false,\n\tisFromChordLineRepeater = false,\n} = {}) {\n\tconst lineClasses = ['cmLine'];\n\tif (isFromSectionRepeat) {\n\t\tlineClasses.push('cmLine--isFromSectionRepeat');\n\t}\n\tif (isFromAutoRepeatChords) {\n\t\tlineClasses.push('cmLine--isFromAutoRepeatChords');\n\t}\n\tif (isFromChordLineRepeater) {\n\t\tlineClasses.push('cmLine--isFromChordLineRepeater');\n\t}\n\n\treturn lineTpl({\n\t\tline,\n\t\tlineClasses: lineClasses.join(' '),\n\t});\n}\n","import { renderSong as renderSongCm, parseSong } from '@touffi/chord-mark';\n\nexport default function renderSong(songTxt, renderOptions) {\n\tconst parsed = parseSong(songTxt);\n\treturn renderSongCm(parsed, renderOptions);\n}\n","import './SongRenderer.scss';\n\nimport _pick from 'lodash/pick';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport escapeHTML from '../../core/escapeHTML';\n\nimport renderSong from '../../core/renderSong';\n\nfunction SongRenderer(props) {\n\tconst {\n\t\tcontent\n\t} = props;\n\n\tconst renderOptions = _pick(props, [\n\t\t'alignBars',\n\t\t'harmonizeAccidentals',\n\t\t'accidentalsType',\n\t\t'transposeValue',\n\t\t'autoRepeatChords',\n\t\t'expandSectionRepeats',\n\t]);\n\n\treturn (\n\t\t<div className={'songRenderer'}>\n\t\t\t<div dangerouslySetInnerHTML={{ __html: escapeHTML(renderSong(content, renderOptions)) }} />\n\t\t</div>\n\t);\n}\n\nSongRenderer.propTypes = {\n\tcontent: PropTypes.string\n};\n\nSongRenderer.defaultProps = {\n\tcontent: ''\n};\n\nexport default SongRenderer;\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../db/options/selectors';\n\nimport SongRenderer from '../_components/SongRenderer';\n\nexport default connect(\n\tstate => ({\n\t\taccidentalsType: getOptionValue(state, 'rendering', 'preferredAccidentals'),\n\t\talignBars: getOptionValue(state, 'rendering', 'alignBars'),\n\t\tharmonizeAccidentals: getOptionValue(state, 'rendering', 'harmonizeAccidentals'),\n\t\ttransposeValue: getOptionValue(state, 'rendering', 'transposeValue'),\n\t\tautoRepeatChords: getOptionValue(state, 'rendering', 'autoRepeatChords'),\n\t\texpandSectionRepeats: getOptionValue(state, 'rendering', 'expandSectionRepeats'),\n\t})\n)(SongRenderer);\n","import './EditorPreview.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport SongRenderer from '../../_containers/SongRenderer';\n\nfunction EditorPreview(props) {\n\tconst { selectedFile } = props;\n\n\tconst classNames = ['editorPreview'];\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<SongRenderer content={selectedFile.content} />\n\t\t</div>\n\t);\n}\n\nEditorPreview.propTypes = {\n\tselectedFile: PropTypes.object.isRequired,\n};\n\nexport default EditorPreview;\n","import { connect } from 'react-redux';\n\n//import { getOptionValue } from '../../../db/options/selectors';\n\nimport EditorPreview from '../_components/EditorPreview';\n\nexport default connect(\n\t() => ({})\n)(EditorPreview);\n","import { Schema } from 'prosemirror-model';\nimport { nodes, marks } from 'prosemirror-schema-basic';\n\nconst editorSchema = new Schema({\n\tnodes: nodes,\n\tmarks: marks\n});\n\nexport default editorSchema;","/**\n * Convert a proseMirror state to plain text\n */\nexport default function stateToText(state) {\n\tconst json = state.toJSON();\n\n\treturn json.doc.content\n\t\t.map(paragraph => {\n\t\t\tif (!paragraph.content) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn paragraph.content.reduce((acc, current) => {\n\t\t\t\tacc += current.text;\n\t\t\t\treturn acc;\n\t\t\t}, '');\n\t\t})\n\t\t.join('\\n');\n}\n","import domPurify from 'dompurify';\n\n/**\n * Minimal wrapper around DOMPurify library.\n * Pretty drastic also: anything that is HTML is just simply ignored, including text content of tags.\n *\n * @param {String} dirty\n * @returns {String} clean HTML\n */\nexport default function toSafeHtml(dirty) {\n\tconst config = {\n\t\tALLOWED_TAGS: ['p', '#text'],\n\t\tKEEP_CONTENT: false,\n\t};\n\n\treturn domPurify.sanitize(dirty, config);\n}\n","import './ProsemirrorEditorView.scss';\n\nimport React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { EditorState } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { DOMParser as pmDOMParser } from 'prosemirror-model';\n\nimport getPlugins from './getPlugins';\nimport editorSchema from './schema';\n\nimport stateToText from './converters/stateToText';\nimport textToDom from './converters/textToDom';\n\nimport 'prosemirror-view/style/prosemirror.css';\n\n\nfunction createEditorState(editorContent) {\n\treturn EditorState.create({\n\t\tdoc: pmDOMParser.fromSchema(editorSchema).parse(textToDom(editorContent), { preserveWhitespace: 'full' }),\n\t\tplugins: getPlugins()\n\t});\n}\n\nfunction createEditorView(editorState, updateFile, fileId) {\n\treturn new EditorView(null, {\n\t\tstate: editorState,\n\t\tdispatchTransaction: function dispatchTransaction(transaction) {\n\t\t\tconst { state, transactions } = this.state.applyTransaction(transaction);\n\n\t\t\tthis.updateState(state);\n\n\t\t\tif (transactions.some(tr => tr.docChanged)) {\n\t\t\t\tupdateFile(fileId, { content: stateToText(state) });\n\t\t\t}\n\t\t},\n\t});\n}\n\nfunction ProseMirrorEditorView(props) {\n\tconst { selectedFileId, editorContent, updateFile } = props;\n\n\tconst editorView = useRef();\n\tconst editorDom = useRef();\n\tconst previousFileId = usePrevious(selectedFileId);\n\n\t/**\n\t * Editor is recreated on component mount and on file change.\n\t * The later is needed as we need to to re-bind the change handler with the new file id.\n\t */\n\tfunction shouldCreateEditor() {\n\t\treturn selectedFileId && (!editorView.current || (previousFileId !== selectedFileId));\n\t}\n\n\t// Editor has been previously created, but now no file is selected anymore\n\tfunction isEditorOrphan() {\n\t\treturn editorExists() && !selectedFileId;\n\t}\n\n\tfunction editorExists() {\n\t\treturn editorView.current && editorView.current.dom.parentNode;\n\t}\n\n\tfunction destroyEditor() {\n\t\teditorView.current.dom.parentNode.removeChild(editorView.current.dom);\n\t}\n\n\tuseEffect(() => {\n\t\tif (shouldCreateEditor()) {\n\t\t\tif (editorExists()) {\n\t\t\t\tdestroyEditor();\n\t\t\t}\n\n\t\t\tconst editorState = createEditorState(editorContent);\n\t\t\teditorView.current = createEditorView(editorState, updateFile, selectedFileId);\n\t\t\teditorDom.current.appendChild(editorView.current.dom);\n\n\t\t\t// expose editor instance as a component property for unit tests\n\t\t\tProseMirrorEditorView.editorView = editorView.current;\n\n\t\t} else if (isEditorOrphan()) {\n\t\t\tdestroyEditor();\n\t\t}\n\t});\n\n\treturn (\n\t\t<div className={'prosemirrorWrapper'} ref={editorDom} />\n\t);\n}\n\nProseMirrorEditorView.defaultProps = {\n\tselectedFileId: '',\n\teditorContent: '',\n};\n\nProseMirrorEditorView.propTypes = {\n\tselectedFileId: PropTypes.string,\n\teditorContent: PropTypes.string,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default ProseMirrorEditorView;\n\n\n// @see https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\nfunction usePrevious(value) {\n\tconst ref = useRef();\n\tuseEffect(() => {\n\t\tref.current = value;\n\t});\n\treturn ref.current;\n}\n","import escapeHTML from './toSafeHtml';\n\n/**\n * @param {String} text\n * @returns {HTMLElement}\n */\nexport default function textToDom(text) {\n\tconst html = escapeHTML(text)\n\t\t.split('\\n')\n\t\t.map(line => `<p>${line}</p>`)\n\t\t.join('');\n\n\tconst div = document.createElement('div');\n\tdiv.innerHTML = escapeHTML(html);\n\n\treturn div;\n}\n","import { keymap } from 'prosemirror-keymap';\nimport { baseKeymap } from 'prosemirror-commands';\nimport { undo, redo, history as pmHistory } from 'prosemirror-history';\n\nexport default function getPlugins() {\n\treturn [\n\t\tpmHistory(),\n\t\tkeymap({ 'Mod-z': undo, 'Mod-y': redo }),\n\t\tkeymap(baseKeymap),\n\t];\n}\n","import './EditorLayout.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport EditorPreview from '../../../songRenderers/editorPreview/_containers/EditorPreview';\nimport ProseMirrorEditorView from '../prosemirror/ProsemirrorEditorView';\n\nfunction EditorLayout(props) {\n\tconst { selectedFile, updateFile } = props;\n\n\treturn (\n\t\t<div className={'songEditor'}>\n\t\t\t<div className={'songEditor-source'}>\n\t\t\t\t<ProseMirrorEditorView\n\t\t\t\t\teditorContent={selectedFile.content}\n\t\t\t\t\tupdateFile={updateFile}\n\t\t\t\t\tselectedFileId={selectedFile.id}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={'songEditor-preview'}>\n\t\t\t\t<EditorPreview\n\t\t\t\t\tselectedFile={selectedFile}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nEditorLayout.propTypes = {\n\tselectedFile: PropTypes.object,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default EditorLayout;\n","import './ExportPreview.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport SongRenderer from '../../_containers/SongRenderer';\n\nfunction ExportPreview(props) {\n\tconst { selectedFile } = props;\n\n\treturn (\n\t\t<div className={'exportPreview exp-SongRenderer'}>\n\t\t\t<SongRenderer content={selectedFile.content} />\n\t\t</div>\n\t);\n}\n\nExportPreview.propTypes = {\n\tselectedFile: PropTypes.object.isRequired,\n};\n\nexport default ExportPreview;\n","import './PlayRenderer.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport SongRenderer from '../../_containers/SongRenderer';\n\nfunction PlayRenderer(props) {\n\tconst { selectedFile, fontSize, chordsColor, highlightChords, columnsCount } = props;\n\n\tconst classNames = ['playRenderer'];\n\tclassNames.push('playRenderer--columns-' + columnsCount);\n\tclassNames.push('cmLine--fontSize' + fontSize);\n\tclassNames.push('cmChordSymbol--chordsColor-' + chordsColor);\n\tif (highlightChords) {\n\t\tclassNames.push('cmChordLine--highlightChords');\n\t}\n\n\n\treturn (\n\t\t<div className={'playRendererWrapper1'}>\n\t\t\t<div className={'playRendererWrapper2'}>\n\t\t\t\t<div className={classNames.join(' ')} data-testid={'playRenderer'}>\n\t\t\t\t\t<SongRenderer content={selectedFile.content} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nPlayRenderer.propTypes = {\n\tselectedFile: PropTypes.object.isRequired,\n\tcolumnsCount: PropTypes.number.isRequired,\n\tfontSize: PropTypes.number.isRequired,\n\tchordsColor: PropTypes.string.isRequired,\n\thighlightChords: PropTypes.bool.isRequired,\n};\n\nexport default PlayRenderer;\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../../db/options/selectors';\n\nimport PlayRenderer from '../_components/PlayRenderer';\n\nexport default connect(\n\tstate => ({\n\t\tchordsColor: getOptionValue(state, 'rendering', 'chordsColor'),\n\t\thighlightChords: getOptionValue(state, 'rendering', 'highlightChords'),\n\t\tfontSize: getOptionValue(state, 'rendering', 'fontSize'),\n\t\tcolumnsCount: getOptionValue(state, 'rendering', 'columnsCount'),\n\t})\n)(PlayRenderer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport escapeHTML from '../../../core/escapeHTML';\n\nfunction Page(props) {\n\tconst { pageHeader, allColumnsLines, documentSize, documentMargins, printFontSize } = props;\n\n\tconst allSectionsRendered = allColumnsLines.map((columnLines, index) => {\n\t\tconst columnLinesTxt = columnLines.join('\\n');\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tkey={index}\n\t\t\t\tclassName={'printPreview-pageColumn'}\n\t\t\t\tdata-testid={'printPreview-pageColumn'}\n\t\t\t\tdangerouslySetInnerHTML={{ __html: escapeHTML(columnLinesTxt) }}\n\t\t\t/>\n\t\t);\n\t});\n\n\tconst pageClasses = ['printPreview-page'];\n\tpageClasses.push('printPreview-page--' + documentSize);\n\tpageClasses.push('printPreview-page--font' + printFontSize);\n\n\tconst pageContentWrapperClasses = ['printPreview-pageContentWrapper'];\n\tpageContentWrapperClasses.push('printPreview-pageContentWrapper--padding' + documentMargins);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={pageClasses.join(' ')}\n\t\t\tdata-testid={'printPreview-page'}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={pageContentWrapperClasses.join(' ')}\n\t\t\t\tdata-testid={'printPreview-pageContentWrapper'}\n\t\t\t>\n\t\t\t\t<div className={'printPreview-pageContent'}>\n\t\t\t\t\t{pageHeader}\n\t\t\t\t\t<div className={'printPreview-pageColumnWrapper'}>\n\t\t\t\t\t\t{allSectionsRendered}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\nPage.defaultProps = {\n\tallColumnsLines: [],\n};\nPage.propTypes = {\n\tpageHeader: PropTypes.element,\n\tallColumnsLines: PropTypes.arrayOf(\n\t\tPropTypes.arrayOf(\n\t\t\tPropTypes.string\n\t\t)\n\t),\n\tdocumentSize: PropTypes.string.isRequired,\n\tdocumentMargins: PropTypes.number.isRequired,\n\tprintFontSize: PropTypes.number.isRequired,\n};\n\nexport default React.memo(Page);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction PageHeader(props) {\n\tconst { title } = props;\n\n\treturn (\n\t\t<div className={'printPreview-pageHeader'}>\n\t\t\t{title}\n\t\t</div>\n\t);\n}\nPageHeader.defaultProps = {\n\tallColumnsLines: [],\n};\nPageHeader.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n};\n\nexport default React.memo(PageHeader);\n","const cssClasses = {\n\temptyLine: 'cmEmptyLine',\n\tchordLine: 'cmChordLine',\n\ttextLine: 'cmTextLine',\n};\n\n\n/**\n * @param {Object[]} allLinesWithHeight\n * @param {String} allLinesWithHeight.content\n * @param {Number} allLinesWithHeight.height\n * @param {Number} columnsCount\n * @param {Number} firstPageHeight\n * @param {Number} normalPageHeight\n * @param {Boolean} columnBreakOnParagraph\n * @param {Boolean} noEmptyLinesOnColumnStart\n * @param {Boolean} noOrphanTextLine\n * @returns {Array} array of pages, as array of columns\n */\nexport default function mapLinesToColumns(allLinesWithHeight, {\n\tcolumnsCount,\n\tfirstPageHeight,\n\tnormalPageHeight,\n\tcolumnBreakOnParagraph,\n\tnoEmptyLinesOnColumnStart = true,\n\tnoOrphanTextLine = true,\n}) {\n\tconst layout = layoutFactory({\n\t\tcolumnsCount,\n\t\tfirstPageHeight,\n\t\tnormalPageHeight,\n\t\tnoEmptyLinesOnColumnStart,\n\t});\n\n\tlet buffer = [];\n\tlet bufferHeight = 0;\n\n\tconst pageHeight = firstPageHeight || normalPageHeight;\n\n\tif (pageHeight > 0) {\n\t\tallLinesWithHeight.forEach((line, lineIndex) => {\n\n\t\t\tif (shouldRenderLine(layout, line, buffer, noEmptyLinesOnColumnStart)) {\n\t\t\t\tbuffer.push(line);\n\t\t\t\tbufferHeight += line.height;\n\t\t\t}\n\n\t\t\tif (buffer.length > 0 && isBreakable(\n\t\t\t\tline,\n\t\t\t\tallLinesWithHeight[lineIndex + 1],\n\t\t\t\t{ noOrphanTextLine, columnBreakOnParagraph }\n\t\t\t)) {\n\t\t\t\tif (layout.fitsOnCurrentColumn(bufferHeight)) {\n\t\t\t\t\tlayout.insert(buffer);\n\n\t\t\t\t} else if (layout.fitsOnNextColumn(bufferHeight)) {\n\t\t\t\t\tlayout.insertOnNextColumn(buffer);\n\n\t\t\t\t} else {\n\t\t\t\t\tlayout.insert(buffer);\n\t\t\t\t}\n\t\t\t\tbuffer = [];\n\t\t\t\tbufferHeight = 0;\n\t\t\t}\n\t\t});\n\t}\n\treturn layout.get();\n}\n\n/**\n * Try to spot the case where the line is empty and would be rendered as the first line\n * of the next column, which we may want to avoid\n */\nfunction shouldRenderLine(layout, line, buffer, noEmptyLinesOnColumnStart) {\n\treturn !(\n\t\tisEmptyLine(line)\n\t\t&& !layout.fitsOnCurrentColumn(line.height)\n\t\t&& buffer.length === 0\n\t\t&& noEmptyLinesOnColumnStart === true\n\t);\n}\n\nfunction isBreakable(currentLine, nextLine, { noOrphanTextLine, columnBreakOnParagraph }) {\n\tif (isEmptyLine(currentLine) || !nextLine) {\n\t\treturn true;\n\t}\n\n\tconst wouldProduceOrphanTextLine = isChordLine(currentLine) && isTextLine(nextLine);\n\tif (noOrphanTextLine === true && wouldProduceOrphanTextLine) {\n\t\treturn false;\n\t}\n\n\tconst isEndOfParagraph = isEmptyLine(nextLine);\n\tif (columnBreakOnParagraph === true && !isEndOfParagraph) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction isEmptyLine(line) {\n\treturn hasClass(line.content, cssClasses.emptyLine);\n}\n\nfunction isChordLine(line) {\n\treturn hasClass(line.content, cssClasses.chordLine);\n}\n\nfunction isTextLine(line) {\n\treturn hasClass(line.content, cssClasses.textLine);\n}\n\nfunction hasClass(line, className) {\n\treturn line.indexOf(className) > -1;\n}\n\n\nfunction layoutFactory({ firstPageHeight, normalPageHeight, columnsCount }) {\n\tconst allPagesColumns = [];\n\n\tlet pageIndex = 0;\n\tlet columnIndex = 0;\n\tlet maxColumnHeight = getMaxColumnHeight();\n\tlet currentColumnHeight = 0;\n\n\tallPagesColumns[pageIndex] = [];\n\tallPagesColumns[pageIndex][columnIndex] = [];\n\n\tfunction flushBuffer(buffer) {\n\t\tbuffer.forEach(line => {\n\t\t\tif (shouldChangeColumn(currentColumnHeight + line.height)) {\n\t\t\t\tchangeColumn();\n\t\t\t}\n\t\t\tallPagesColumns[pageIndex][columnIndex].push(line.content);\n\t\t\tcurrentColumnHeight += line.height;\n\t\t});\n\t}\n\n\tfunction getMaxColumnHeight() {\n\t\treturn (pageIndex === 0 && firstPageHeight) ? firstPageHeight : normalPageHeight;\n\t}\n\n\tfunction shouldChangeColumn(nextHeight) {\n\t\treturn nextHeight > maxColumnHeight;\n\t}\n\n\tfunction changeColumn() {\n\t\tif (shouldChangePage()) {\n\t\t\tpageIndex++;\n\t\t\tallPagesColumns[pageIndex] = [];\n\t\t\tcolumnIndex = 0;\n\t\t} else {\n\t\t\tcolumnIndex++;\n\t\t}\n\t\tallPagesColumns[pageIndex][columnIndex] = [];\n\t\tcurrentColumnHeight = 0;\n\t\tmaxColumnHeight = getMaxColumnHeight();\n\t}\n\n\tfunction shouldChangePage() {\n\t\treturn columnIndex === (columnsCount - 1);\n\t}\n\n\treturn {\n\t\tinsert(buffer) {\n\t\t\tflushBuffer(buffer);\n\t\t},\n\n\t\tinsertOnNextColumn(buffer) {\n\t\t\tchangeColumn();\n\t\t\tflushBuffer(buffer);\n\t\t},\n\n\t\tfitsOnCurrentColumn(bufferHeight) {\n\t\t\treturn (currentColumnHeight + bufferHeight) <= maxColumnHeight;\n\t\t},\n\n\t\tfitsOnNextColumn(bufferHeight) {\n\t\t\tconst nextColumnHeight = (pageIndex === 0 && columnIndex < columnsCount && firstPageHeight)\n\t\t\t\t? firstPageHeight\n\t\t\t\t: normalPageHeight;\n\t\t\treturn bufferHeight <= nextColumnHeight;\n\t\t},\n\n\t\tget() {\n\t\t\treturn allPagesColumns;\n\t\t},\n\t};\n}\n\n","import './getDimensionsFromDom.scss';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nexport default function getDimensionsFromDom(component, measuringFn) {\n\tconst container = document.createElement('div');\n\tcontainer.classList.add('measuring-node');\n\tdocument.body.appendChild(container);\n\n\treturn new Promise(resolve => {\n\t\tReactDOM.render(<div>{component}</div>, container, () => {\n\n\t\t\tconst measure = measuringFn(container);\n\n\t\t\tReactDOM.unmountComponentAtNode(container);\n\t\t\tcontainer.parentNode.removeChild(container);\n\n\t\t\tresolve(measure);\n\t\t});\n\t});\n}\n\n","export default function padColumns(columnCount, allColumns = []) {\n\tfor (let i = (allColumns.length || 0); i < columnCount; i++) {\n\t\tallColumns.push([]);\n\t}\n\treturn allColumns;\n}\n","export function getOffsetHeight(element) {\n\treturn element.offsetHeight;\n}\n\nexport function getClientHeight(element) {\n\treturn element.clientHeight;\n}\n","import React from 'react';\n\nimport getDimensionsFromDom from './getDimensionsFromDom';\nimport padColumns from './padColumns';\nimport { getOffsetHeight } from './element';\n\nimport Page from '../_components/Page';\n\nconst cssSelectors = {\n\tline: '.cmLine',\n};\n\nexport default async function getAllLinesHeight(allLines, {\n\tcolumnsCount,\n\tdocumentSize,\n\tdocumentMargins,\n\tprintFontSize\n}) {\n\tconst component = <div className={'printPreview'}>\n\t\t<Page\n\t\t\tallColumnsLines={padColumns(columnsCount, [allLines])}\n\t\t\tcolumnsCount={columnsCount}\n\t\t\tdocumentSize={documentSize}\n\t\t\tdocumentMargins={documentMargins}\n\t\t\tprintFontSize={printFontSize}\n\t\t/>\n\t</div>;\n\n\tconst measuringFn = (container) => {\n\t\tconst allLinesHeight = [];\n\t\tcontainer.querySelectorAll(cssSelectors.line).forEach(line => {\n\t\t\tallLinesHeight.push(getOffsetHeight(line));\n\t\t});\n\t\treturn allLinesHeight;\n\t};\n\n\treturn await getDimensionsFromDom(component, measuringFn);\n}\n","import React from 'react';\n\nimport getDimensionsFromDom from './getDimensionsFromDom';\nimport padColumns from './padColumns';\nimport { getClientHeight } from './element';\n\nimport Page from '../_components/Page';\nimport PageHeader from '../_components/PageHeader';\n\nexport default async function getAllLinesHeight(title, {\n\tcolumnsCount,\n\tdocumentSize,\n\tdocumentMargins,\n\tprintFontSize\n}) {\n\tconst component = <Page\n\t\tpageHeader={<PageHeader title={title} />}\n\t\tallColumnsLines={padColumns(columnsCount)}\n\t\tdocumentSize={documentSize}\n\t\tdocumentMargins={documentMargins}\n\t\tprintFontSize={printFontSize}\n\t/>;\n\n\tconst measuringFn = (container) => {\n\t\tconst pageContent = container.querySelector('.printPreview-pageContent');\n\t\tconst pageColumnWrapper = container.querySelector('.printPreview-pageColumnWrapper');\n\t\treturn {\n\t\t\tfirstPageHeight: getClientHeight(pageColumnWrapper),\n\t\t\tnormalPageHeight: getClientHeight(pageContent),\n\t\t};\n\t};\n\n\treturn await getDimensionsFromDom(component, measuringFn);\n}\n","import React, { useState, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Page from './Page';\nimport PageHeader from './PageHeader';\n\nimport mapLinesToColumns from '../helpers/mapLinesToColumns';\nimport getAllLinesHeight from '../helpers/getAllLinesHeight';\nimport getPagesHeight from '../helpers/getPagesHeight';\nimport padColumns from '../helpers/padColumns';\n\n\nfunction AllPages(props) {\n\tconst [ allPagesColumns, setAllPagesColumns ] = useState([]);\n\n\tconst {\n\t\ttitle,\n\t\tallLines,\n\t\tcolumnsCount,\n\t\tcolumnBreakOnParagraph,\n\t\tdocumentSize,\n\t\tdocumentMargins,\n\t\tprintFontSize,\n\t} = props;\n\n\tuseLayoutEffect(() => {\n\t\tconst getDimensions = async () => {\n\t\t\tconst pageOptions = {\n\t\t\t\tcolumnsCount,\n\t\t\t\tdocumentSize,\n\t\t\t\tdocumentMargins,\n\t\t\t\tprintFontSize\n\t\t\t};\n\n\t\t\tconst allLinesHeight = await getAllLinesHeight(allLines, pageOptions);\n\n\t\t\tconst { normalPageHeight, firstPageHeight } = await getPagesHeight(title, pageOptions);\n\n\t\t\tconst allLinesWithHeight = allLines.map((line, index) => ({\n\t\t\t\tcontent: line,\n\t\t\t\theight: allLinesHeight[index]\n\t\t\t}));\n\n\t\t\tconst mapped = mapLinesToColumns(allLinesWithHeight, {\n\t\t\t\tcolumnsCount,\n\t\t\t\tcolumnBreakOnParagraph,\n\t\t\t\tnormalPageHeight,\n\t\t\t\tfirstPageHeight,\n\t\t\t});\n\n\t\t\tsetAllPagesColumns(mapped);\n\t\t};\n\t\tgetDimensions();\n\t}, [\n\t\tallLines,\n\t\ttitle,\n\t\tcolumnsCount,\n\t\tcolumnBreakOnParagraph,\n\t\tdocumentSize,\n\t\tdocumentMargins,\n\t\tprintFontSize,\n\t]);\n\n\tconst allPagesRendered = allPagesColumns.map((pageColumns, index) => {\n\t\treturn <Page\n\t\t\tkey={index}\n\t\t\tpageHeader={(index === 0) ? <PageHeader title={title} /> : null}\n\t\t\tallColumnsLines={padColumns(columnsCount, pageColumns)}\n\t\t\tdocumentSize={documentSize}\n\t\t\tdocumentMargins={documentMargins}\n\t\t\tprintFontSize={printFontSize}\n\t\t/>;\n\t});\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{allPagesRendered}\n\t\t</React.Fragment>\n\t);\n}\n\nAllPages.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n\tallLines: PropTypes.arrayOf(PropTypes.string).isRequired,\n\tcolumnsCount: PropTypes.number.isRequired,\n\tcolumnBreakOnParagraph: PropTypes.bool.isRequired,\n\tdocumentSize: PropTypes.string.isRequired,\n\tdocumentMargins: PropTypes.number.isRequired,\n\tprintFontSize: PropTypes.number.isRequired,\n};\n\nexport default AllPages;\n","import './PrintPreview.scss';\n\nimport _pick from 'lodash/pick';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport renderSong from '../../../core/renderSong';\nimport AllPages from './AllPages';\n\n\nfunction PrintPreview(props) {\n\tconst { selectedFile, highlightChords } = props;\n\n\tconst renderOptions = _pick(props, [\n\t\t'alignBars',\n\t\t'harmonizeAccidentals',\n\t\t'accidentalsType',\n\t\t'transposeValue',\n\t\t'autoRepeatChords',\n\t\t'expandSectionRepeats',\n\t]);\n\n\tconst allLines = renderSong(selectedFile.content, renderOptions).split('\\n');\n\n\tconst classNames = ['printPreview'];\n\tif (highlightChords) {\n\t\tclassNames.push('cmChordLine--highlightChords');\n\t}\n\n\treturn (\n\t\t<div className={classNames.join(' ')} data-testid={'printPreview'}>\n\t\t\t<AllPages\n\t\t\t\ttitle={selectedFile.title}\n\t\t\t\tallLines={allLines}\n\t\t\t\tcolumnsCount={props.columnsCount}\n\t\t\t\tcolumnBreakOnParagraph={props.columnBreakOnParagraph}\n\t\t\t\tdocumentSize={props.documentSize}\n\t\t\t\tdocumentMargins={props.documentMargins}\n\t\t\t\tprintFontSize={props.printFontSize}\n\t\t\t/>\n\t\t</div>\n\t);\n}\nPrintPreview.propTypes = {\n\tselectedFile: PropTypes.object.isRequired,\n\tcolumnsCount: PropTypes.number.isRequired,\n\tcolumnBreakOnParagraph: PropTypes.bool.isRequired,\n\tdocumentSize: PropTypes.string.isRequired,\n\tdocumentMargins: PropTypes.number.isRequired,\n\tprintFontSize: PropTypes.number.isRequired,\n\thighlightChords: PropTypes.bool.isRequired,\n};\n\nexport default PrintPreview;\n\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../../db/options/selectors';\n\nimport PrintPreview from '../_components/PrintPreview';\n\nexport default connect(\n\tstate => ({\n\t\tcolumnsCount: getOptionValue(state, 'rendering', 'columnsCount'),\n\t\tcolumnBreakOnParagraph: getOptionValue(state, 'rendering', 'columnBreakOnParagraph'),\n\t\tdocumentSize: getOptionValue(state, 'rendering', 'documentSize'),\n\t\tdocumentMargins: getOptionValue(state, 'rendering', 'documentMargins'),\n\t\taccidentalsType: getOptionValue(state, 'rendering', 'preferredAccidentals'),\n\t\talignBars: getOptionValue(state, 'rendering', 'alignBars'),\n\t\tharmonizeAccidentals: getOptionValue(state, 'rendering', 'harmonizeAccidentals'),\n\t\ttransposeValue: getOptionValue(state, 'rendering', 'transposeValue'),\n\t\tprintFontSize: getOptionValue(state, 'rendering', 'printFontSize'),\n\t\thighlightChords: getOptionValue(state, 'rendering', 'highlightChords'),\n\t\tautoRepeatChords: getOptionValue(state, 'rendering', 'autoRepeatChords'),\n\t\texpandSectionRepeats: getOptionValue(state, 'rendering', 'expandSectionRepeats'),\n\t})\n)(PrintPreview);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport EditorLayout from '../songEditor/_components/EditorLayout';\nimport ExportPreview from '../../songRenderers/exportPreview/_components/ExportPreview';\nimport PlayRenderer from '../../songRenderers/playRenderer/_containers/PlayRenderer';\nimport PrintPreview from '../../songRenderers/printPreview/_containers/PrintPreview';\n\nfunction Editor(props) {\n\tconst { editorMode } = props;\n\n\tswitch (editorMode) {\n\t\tcase 'edit': return <EditorLayout {...props} />;\n\t\tcase 'play': return <PlayRenderer {...props} />;\n\t\tcase 'print': return <PrintPreview {...props} />;\n\t\tcase 'export': return <ExportPreview {...props} />;\n\t}\n}\n\nEditor.propTypes = {\n\teditorMode: PropTypes.string.isRequired,\n};\n\nexport default Editor;\n","import { connect } from 'react-redux';\n\nimport { getSelectedId } from '../../fileManager/_state/selectors';\nimport { getEditorMode } from '../../ui/layout/app/_state/selectors';\n\nimport { getOne } from '../../db/files/selectors';\nimport { updateFile } from '../../db/files/actions';\n\nimport Editor from '../_components/Editor';\n\nexport default connect(\n\tstate => ({\n\t\tselectedFile: getOne(state, getSelectedId(state)) || {},\n\t\teditorMode: getEditorMode(state),\n\t}),\n\n\t{\n\t\tupdateFile\n\t}\n\n)(Editor);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction OptionsPanel(props) {\n\tconst {\n\t\tid,\n\t\tallWidgets,\n\t\tnonInteractableWidgets,\n\t\thiddenWidgets,\n\t\tsetOption,\n\t\tgetEntryComponent,\n\t} = props;\n\n\tconst classNames = [\n\t\t'optionsPanel',\n\t\t'optionsPanel-' + id\n\t];\n\n\tlet widget, groupWidget;\n\n\tlet WidgetComponent, GroupComponent;\n\tlet isGroupInteractable, isGroupWidgetInteractable;\n\n\tlet renderedGroupWidgets;\n\n\tconst renderedWidgets = allWidgets.widgetsOrder\n\t\t.filter(widgetId => {\n\t\t\treturn !(hiddenWidgets.includes(widgetId));\n\t\t})\n\t\t.map(widgetId => {\n\t\t\twidget = allWidgets.allWidgets[widgetId];\n\n\t\t\tif (widget.type === 'optionsGroup') {\n\t\t\t\trenderedGroupWidgets = widget.groupWidgetsOrder\n\t\t\t\t\t.filter(groupWidgetId => {\n\t\t\t\t\t\treturn !(hiddenWidgets.includes(groupWidgetId));\n\t\t\t\t\t})\n\t\t\t\t\t.map(groupWidgetId => {\n\t\t\t\t\t\tgroupWidget = widget.allGroupWidgets[groupWidgetId];\n\n\t\t\t\t\t\tisGroupWidgetInteractable = !(nonInteractableWidgets.includes(widgetId)) && !(nonInteractableWidgets.includes(groupWidgetId));\n\n\t\t\t\t\t\treturn renderWidget(\n\t\t\t\t\t\t\tgroupWidgetId,\n\t\t\t\t\t\t\tgroupWidget,\n\t\t\t\t\t\t\tisGroupWidgetInteractable\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\tGroupComponent = getEntryComponent(widget.type);\n\t\t\t\tisGroupInteractable = !(nonInteractableWidgets.includes(widgetId));\n\n\t\t\t\treturn (\n\t\t\t\t\t<GroupComponent\n\t\t\t\t\t\tkey={widgetId}\n\t\t\t\t\t\tisInteractable={isGroupInteractable}\n\t\t\t\t\t\tlabel={widget.label}\n\t\t\t\t\t\ticon={widget.icon}\n\t\t\t\t\t>\n\t\t\t\t\t\t{renderedGroupWidgets}\n\t\t\t\t\t</GroupComponent>\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\treturn renderWidget(\n\t\t\t\t\twidgetId,\n\t\t\t\t\twidget,\n\t\t\t\t\t!(nonInteractableWidgets.includes(widgetId))\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\tfunction renderWidget(widgetId, localWidget, isInteractable) {\n\t\tWidgetComponent = getEntryComponent(localWidget.type);\n\n\t\treturn (\n\t\t\t<WidgetComponent\n\t\t\t\tkey={widgetId}\n\t\t\t\tisInteractable={isInteractable}\n\n\t\t\t\toptionContext={localWidget.option.context}\n\t\t\t\toptionKey={localWidget.option.key}\n\t\t\t\toptionValue={props[localWidget.option.key]}\n\t\t\t\tsetOption={setOption}\n\n\t\t\t\tlabel={localWidget.label}\n\t\t\t\t{...localWidget.typeOptions}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t{renderedWidgets}\n\t\t</div>\n\t);\n}\n\nOptionsPanel.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tallWidgets: PropTypes.object.isRequired,\n\tnonInteractableWidgets: PropTypes.arrayOf(PropTypes.string).isRequired,\n\thiddenWidgets: PropTypes.arrayOf(PropTypes.string).isRequired,\n\tsetOption: PropTypes.func.isRequired,\n\tgetEntryComponent: PropTypes.func.isRequired,\n};\n\nexport default OptionsPanel;\n","import './OptionsGroup.scss';\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon';\n\nfunction OptionsGroup(props) {\n\tconst [ isOpened, setIsOpened ] = useState(props.isOpened);\n\n\tconst {\n\t\tisInteractable,\n\t\ticon,\n\t\tlabel\n\t} = props;\n\n\tconst classNames = ['sb-optionsGroup'];\n\tif (!shouldBeInteractable()) {\n\t\tclassNames.push('sb-optionsGroup-isNotInteractable');\n\t}\n\n\tif (shouldBeClosed()) {\n\t\tsetIsOpened(false);\n\t}\n\n\tfunction shouldBeInteractable() {\n\t\treturn isInteractable && props.children && props.children.length > 0;\n\t}\n\n\tfunction shouldBeClosed() {\n\t\treturn isOpened && (!props.children || props.children.length === 0);\n\t}\n\n\tfunction handleClick() {\n\t\tsetIsOpened(!isOpened);\n\t}\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<div\n\t\t\t\tclassName={'sb-optionsGroup-title'}\n\t\t\t\tonClick={(shouldBeInteractable()) ? handleClick : null}\n\t\t\t>\n\t\t\t\t<div className={'sb-optionsGroup-label'}>\n\t\t\t\t\t<span className={'sb-optionsGroup-iconTitle'}><Icon iconName={icon} /></span> {label}\n\t\t\t\t</div>\n\t\t\t\t<div className={'sb-optionsGroup-toggle'}>\n\t\t\t\t\t<span className={'sb-optionsGroup-iconToggle'}>\n\t\t\t\t\t\t<Icon iconName={(isOpened) ? 'unfold_less' : 'unfold_more' } />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className={'sb-optionsGroup-content'}>\n\t\t\t\t{isOpened && props.children}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nOptionsGroup.propTypes = {\n\tisOpened: PropTypes.bool,\n\tisInteractable: PropTypes.bool.isRequired,\n\ticon: PropTypes.string.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tchildren: PropTypes.arrayOf(PropTypes.element),\n};\n\nOptionsGroup.defaultProps = {\n\tisOpened: true,\n};\n\nexport default OptionsGroup;\n","import './Select.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon';\n\nfunction SelectChoice(props) {\n\tconst {\n\t\tisSelected,\n\t\tlabel,\n\t\tonClick\n\t} = props;\n\n\tlet checkIcon;\n\tconst classNames = ['sb-optionSelectChoice'];\n\n\tif (isSelected) {\n\t\tclassNames.push('sb-optionSelectChoice-isSelected');\n\t\tcheckIcon = (\n\t\t\t<span className={'sb-optionSelectChoice-checkIcon'}>\n\t\t\t\t<Icon iconName={'check'} />\n\t\t\t</span>\n\t\t);\n\t}\n\n\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames.join(' ')}\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t<div className={'sb-optionSelectChoice-check'}>\n\t\t\t\t{isSelected && checkIcon}\n\t\t\t</div>\n\t\t\t<div className={'sb-optionSelectChoice-label'}>\n\t\t\t\t{label}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nSelectChoice.propTypes = {\n\tisSelected: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tonClick: PropTypes.func.isRequired,\n};\n\nexport default React.memo(SelectChoice);\n\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport SelectChoice from './SelectChoice';\n\nimport Icon from '../../../_components/Icon';\n\nfunction Select(props) {\n\tconst [ isOpen, setIsOpen ] = useState(false);\n\n\tconst {\n\t\tisInteractable,\n\t\tlabel,\n\t\tallChoices,\n\t\toptionContext,\n\t\toptionKey,\n\t\toptionValue,\n\t\tsetOption\n\t} = props;\n\n\tconst classNames = ['sb-optionSelect'];\n\tif (!isInteractable) {\n\t\tclassNames.push('sb-optionSelect-isNotInteractable');\n\t}\n\n\tconst iconName = (isOpen) ? 'keyboard_arrow_down' : 'keyboard_arrow_right';\n\n\tfunction toggleChoices() {\n\t\tsetIsOpen(!isOpen);\n\t}\n\n\tconst renderedChoices = (!isOpen)\n\t\t? null\n\t\t: (\n\t\t\t<div className={'sb-optionSelect-choices'}>\n\t\t\t\t{allChoices.map(choice =>\n\t\t\t\t\t<SelectChoice\n\t\t\t\t\t\tkey={choice.value}\n\t\t\t\t\t\tlabel={choice.label}\n\t\t\t\t\t\tisSelected={(optionValue === choice.value)}\n\t\t\t\t\t\tonClick={() => setOption(optionContext, optionKey, choice.value)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<div\n\t\t\t\tclassName={'sb-optionSelect-title'}\n\t\t\t\tonClick={(isInteractable) ? toggleChoices : null}\n\t\t\t>\n\t\t\t\t<div className={'sb-optionSelect-desc'}>{label}</div>\n\t\t\t\t<div className={'sb-optionSelect-toggle'}>\n\t\t\t\t\t<span className={'sb-optionSelect-icon'}>\n\t\t\t\t\t\t<Icon iconName={iconName} />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{renderedChoices}\n\t\t</div>\n\t);\n}\n\nSelect.propTypes = {\n\tisInteractable: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tallChoices: PropTypes.array.isRequired,\n\toptionContext: PropTypes.string.isRequired,\n\toptionKey: PropTypes.string.isRequired,\n\toptionValue: PropTypes.string.isRequired,\n\tsetOption: PropTypes.func.isRequired\n};\n\nexport default Select;\n","import './Slider.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Slider(props) {\n\tconst {\n\t\tisInteractable,\n\t\tlabel,\n\t\tmin,\n\t\tmax,\n\t\tshowPlusSymbol,\n\t\toptionContext,\n\t\toptionKey,\n\t\toptionValue,\n\t\tsetOption\n\t} = props;\n\n\tconst classNames = ['sb-optionSlider'];\n\tif (!isInteractable) {\n\t\tclassNames.push('sb-optionSlider-isNotInteractable');\n\t}\n\n\tfunction handleChange(e) {\n\t\tsetOption(\n\t\t\toptionContext,\n\t\t\toptionKey,\n\t\t\tNumber.parseInt(e.target.value)\n\t\t);\n\t}\n\n\tconst valueDisplay = (optionValue > 0 && showPlusSymbol)\n\t\t? '+' + optionValue\n\t\t: optionValue;\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<div className={'sb-optionSlider-desc'}>{label}</div>\n\t\t\t<div className={'sb-optionSlider-value'}>{valueDisplay}</div>\n\t\t\t<div className={'sb-optionSlider-range'}>\n\t\t\t\t<input\n\t\t\t\t\tmin={min}\n\t\t\t\t\tmax={max}\n\t\t\t\t\tvalue={optionValue}\n\t\t\t\t\ttype={'range'}\n\t\t\t\t\tonChange={(isInteractable) ? handleChange : null}\n\t\t\t\t\tdisabled={!isInteractable}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nSlider.propTypes = {\n\tisInteractable: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tmin: PropTypes.number.isRequired,\n\tmax: PropTypes.number.isRequired,\n\tshowPlusSymbol: PropTypes.bool,\n\toptionContext: PropTypes.string.isRequired,\n\toptionKey: PropTypes.string.isRequired,\n\toptionValue: PropTypes.number.isRequired,\n\tsetOption: PropTypes.func.isRequired,\n};\n\nSlider.defaultProps = {\n\tshowPlusSymbol: true\n};\n\nexport default React.memo(Slider);\n","import './Toggle.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon';\n\nfunction Toggle(props) {\n\tconst {\n\t\tisInteractable,\n\t\tlabel,\n\t\toptionContext,\n\t\toptionKey,\n\t\toptionValue,\n\t\tsetOption\n\t} = props;\n\n\tconst classNames = ['sb-optionToggle'];\n\tclassNames.push(\n\t\t(optionValue === true) ? 'sb-optionToggle-isOn' : 'sb-optionToggle-isOff'\n\t);\n\tif (!isInteractable) {\n\t\tclassNames.push('sb-optionToggle-isNotInteractable');\n\t}\n\n\tfunction handleClick() {\n\t\tsetOption(optionContext, optionKey, !optionValue);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames.join(' ')}\n\t\t\tonClick={(isInteractable) ? handleClick : null}\n\t\t>\n\t\t\t<div className={'sb-optionToggle-desc'}>{label}</div>\n\t\t\t<div className={'sb-optionToggle-icon'}>\n\t\t\t\t<span className={'sb-optionToggle-icon'}>\n\t\t\t\t\t<Icon iconName={(optionValue === true) ? 'toggle_on' : 'toggle_off' } />\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nToggle.propTypes = {\n\tisInteractable: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\toptionContext: PropTypes.string.isRequired,\n\toptionKey: PropTypes.string.isRequired,\n\toptionValue: PropTypes.bool.isRequired,\n\tsetOption: PropTypes.func.isRequired,\n};\n\nexport default React.memo(Toggle);\n","import './SidebarOptionsPanel.scss';\n\nimport React from 'react';\n\nimport OptionPanel from '../../../../optionsPanels/_components/OptionsPanel';\n\nimport OptionsGroup from './OptionsGroup';\nimport Select from './Select';\nimport Slider from './Slider';\nimport Toggle from './Toggle';\n\n\nfunction getEntryComponent(type) {\n\tswitch (type) {\n\t\tcase 'optionsGroup': return OptionsGroup;\n\t\tcase 'select': return Select;\n\t\tcase 'slider': return Slider;\n\t\tcase 'toggle': return Toggle;\n\t}\n}\n\nexport default function SidebarOptionPanel(props) {\n\treturn (\n\t\t<div className={'sb-optionsPanel'}>\n\t\t\t<OptionPanel\n\t\t\t\t{...props}\n\t\t\t\tgetEntryComponent={getEntryComponent}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import createAction from '../../core/createAction';\nimport * as actionTypes from './actionsTypes';\n\n\nexport const setOptionValue = (context, key, value) => {\n\tif (!context) {\n\t\tthrow new TypeError('Cannot set an option without a context');\n\t}\n\tif (!key) {\n\t\tthrow new TypeError('Cannot set an option without a key');\n\t}\n\tconst payload = {\n\t\tcontext,\n\t\tkey,\n\t\tvalue\n\t};\n\treturn createAction(actionTypes.DB_OPTION_SET_OPTION_VALUE, payload);\n};\n\n","/* eslint-disable max-lines */\nexport default {\n\twidgetsOrder: [\n\t\t'style',\n\t\t'alignBars',\n\t\t'autoRepeatChords',\n\t\t'expandSectionRepeats',\n\n\t\t'layout',\n\t\t'helpers',\n\t\t'chords',\n\t\t'format',\n\t],\n\n\tallWidgets: {\n\t\tstyle: {\n\t\t\tlabel: 'Rendering style',\n\t\t\ttype: 'select',\n\t\t\ttypeOptions: {\n\t\t\t\tallChoices: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'styleChordMark',\n\t\t\t\t\t\tlabel: 'ChordMark',\n\t\t\t\t\t\tvalue: 'chordmark'\n\t\t\t\t\t},\n\t\t\t\t\t// {\n\t\t\t\t\t// \tid: 'styleChordpro',\n\t\t\t\t\t// \tlabel: 'ChordPro',\n\t\t\t\t\t// \tvalue: 'chordpro'\n\t\t\t\t\t// },\n\t\t\t\t],\n\t\t\t},\n\t\t\toption: {\n\t\t\t\tcontext: 'rendering',\n\t\t\t\tkey: 'style'\n\t\t\t},\n\t\t},\n\t\talignBars: {\n\t\t\tlabel: 'Align bars',\n\t\t\ttype: 'toggle',\n\t\t\toption: {\n\t\t\t\tcontext: 'rendering',\n\t\t\t\tkey: 'alignBars'\n\t\t\t},\n\t\t},\n\t\tautoRepeatChords: {\n\t\t\tlabel: 'Auto repeat chords',\n\t\t\ttype: 'toggle',\n\t\t\toption: {\n\t\t\t\tcontext: 'rendering',\n\t\t\t\tkey: 'autoRepeatChords'\n\t\t\t},\n\t\t},\n\t\texpandSectionRepeats: {\n\t\t\tlabel: 'Expand section repeats',\n\t\t\ttype: 'toggle',\n\t\t\toption: {\n\t\t\t\tcontext: 'rendering',\n\t\t\t\tkey: 'expandSectionRepeats'\n\t\t\t},\n\t\t},\n\n\n\n\t\tlayout: {\n\t\t\ttype: 'optionsGroup',\n\t\t\tlabel: 'Layout',\n\t\t\ticon: 'view_compact',\n\n\t\t\tgroupWidgetsOrder: [\n\t\t\t\t'documentSize',\n\t\t\t\t'documentMargins',\n\t\t\t\t'columnsCount',\n\t\t\t\t'columnBreakOnParagraph',\n\t\t\t],\n\t\t\tallGroupWidgets: {\n\t\t\t\tdocumentSize: {\n\t\t\t\t\tlabel: 'Document size',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'documentSizeA4',\n\t\t\t\t\t\t\t\tlabel: 'A4',\n\t\t\t\t\t\t\t\tvalue: 'a4'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'documentSizeBooxMax2Pro',\n\t\t\t\t\t\t\t\tlabel: 'Boox Max 2 Pro',\n\t\t\t\t\t\t\t\tvalue: 'booxmax2pro'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'documentSize'\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tdocumentMargins: {\n\t\t\t\t\tlabel: 'Margins',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\tmax: 5\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'documentMargins'\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tcolumnsCount: {\n\t\t\t\t\tlabel: 'Columns',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\tmax: 4\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'columnsCount'\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tcolumnBreakOnParagraph: {\n\t\t\t\t\tlabel: 'Break on paragraph',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'columnBreakOnParagraph'\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\n\n\t\thelpers: {\n\t\t\ttype: 'optionsGroup',\n\t\t\tlabel: 'Helpers',\n\t\t\ticon: 'remove_red_eye',\n\n\t\t\tgroupWidgetsOrder: [\n\t\t\t\t'showChords',\n\t\t\t\t'instrument',\n\t\t\t\t'showStrummingPattern',\n\t\t\t],\n\n\t\t\tallGroupWidgets: {\n\t\t\t\tshowChords: {\n\t\t\t\t\tlabel: 'Show chords diagrams',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'showChords'\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tinstrument: {\n\t\t\t\t\tlabel: 'Instrument',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'instrumentGuitar',\n\t\t\t\t\t\t\t\tlabel: 'Guitar',\n\t\t\t\t\t\t\t\tvalue: 'guitar'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'instrumentUkulele',\n\t\t\t\t\t\t\t\tlabel: 'Ukulele',\n\t\t\t\t\t\t\t\tvalue: 'ukulele'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'instrumentMandolin',\n\t\t\t\t\t\t\t\tlabel: 'Mandolin',\n\t\t\t\t\t\t\t\tvalue: 'mandolin'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'instrumentPiano',\n\t\t\t\t\t\t\t\tlabel: 'Piano',\n\t\t\t\t\t\t\t\tvalue: 'piano'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'instrument'\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tshowStrummingPattern: {\n\t\t\t\t\tlabel: 'Show strumming pattern',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'showStrummingPattern'\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\n\n\t\tchords: {\n\t\t\ttype: 'optionsGroup',\n\t\t\tlabel: 'Chords',\n\t\t\ticon: 'music_note',\n\n\t\t\tgroupWidgetsOrder: [\n\t\t\t\t'transposeValue',\n\t\t\t\t'simplifyChords',\n\t\t\t\t'capoPosition',\n\t\t\t\t'harmonizeAccidentals',\n\t\t\t\t'preferredAccidentals',\n\t\t\t],\n\n\t\t\tallGroupWidgets: {\n\t\t\t\ttransposeValue: {\n\t\t\t\t\tlabel: 'Transpose',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: -11,\n\t\t\t\t\t\tmax: 11,\n\t\t\t\t\t\tshowPlusSymbol: true,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'transposeValue'\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tsimplifyChords: {\n\t\t\t\t\tlabel: 'Simplify chords',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'simplifyChords'\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tcapoPosition: {\n\t\t\t\t\tlabel: 'Add capo on fret',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\tmax: 11,\n\t\t\t\t\t\tshowPlusSymbol: false,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'capoPosition'\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tharmonizeAccidentals: {\n\t\t\t\t\tlabel: 'Harmonize accidentals',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'harmonizeAccidentals'\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tpreferredAccidentals: {\n\t\t\t\t\tlabel: 'Preferred accidentals',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'preferredAccidentalsAuto',\n\t\t\t\t\t\t\t\tlabel: 'Auto',\n\t\t\t\t\t\t\t\tvalue: 'auto'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'preferredAccidentalsSharp',\n\t\t\t\t\t\t\t\tlabel: 'Sharp (#)',\n\t\t\t\t\t\t\t\tvalue: 'sharp'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'preferredAccidentalsFlat',\n\t\t\t\t\t\t\t\tlabel: 'Flats (b)',\n\t\t\t\t\t\t\t\tvalue: 'flat'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'preferredAccidentals'\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\n\n\t\tformat: {\n\t\t\ttype: 'optionsGroup',\n\t\t\tlabel: 'Format',\n\t\t\ticon: 'format_size',\n\n\t\t\tgroupWidgetsOrder: [\n\t\t\t\t'fontSize',\n\t\t\t\t'printFontSize',\n\t\t\t\t'fontStyle',\n\t\t\t\t'chordsColor',\n\t\t\t\t'highlightChords',\n\t\t\t],\n\n\t\t\tallGroupWidgets: {\n\t\t\t\tfontSize: {\n\t\t\t\t\tlabel: 'Font size',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: -5,\n\t\t\t\t\t\tmax: +5,\n\t\t\t\t\t\tshowPlusSymbol: true,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'fontSize'\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tprintFontSize: {\n\t\t\t\t\tlabel: 'Font size (print)',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: -5,\n\t\t\t\t\t\tmax: +5,\n\t\t\t\t\t\tshowPlusSymbol: true,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'printFontSize'\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tfontStyle: {\n\t\t\t\t\tlabel: 'Font style',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'fontStyleRoboto',\n\t\t\t\t\t\t\t\tlabel: 'Roboto',\n\t\t\t\t\t\t\t\tvalue: 'roboto'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'fontStyle'\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tchordsColor: {\n\t\t\t\t\tlabel: 'Chords color',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'chordsColor',\n\t\t\t\t\t\t\t\tlabel: 'Base',\n\t\t\t\t\t\t\t\tvalue: 'base'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'chordsColorRed',\n\t\t\t\t\t\t\t\tlabel: 'Red',\n\t\t\t\t\t\t\t\tvalue: 'red'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'chordsColorYellow',\n\t\t\t\t\t\t\t\tlabel: 'Yellow',\n\t\t\t\t\t\t\t\tvalue: 'yellow'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'chordsColorGreen',\n\t\t\t\t\t\t\t\tlabel: 'Green',\n\t\t\t\t\t\t\t\tvalue: 'green'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'chordsColor'\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\thighlightChords: {\n\t\t\t\t\tlabel: 'Highlight Chords',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'highlightChords'\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t},\n};\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../db/options/selectors';\nimport { setOptionValue } from '../../db/options/actions';\n\nexport default function OptionsPanelFactory(allWidgets, getNonInteractableWidgets, getHiddenWidgets, component) {\n\treturn connect(\n\t\tstate => {\n\t\t\tconst stateToProps = {\n\t\t\t\tallWidgets,\n\t\t\t\tnonInteractableWidgets: getNonInteractableWidgets(state),\n\t\t\t\thiddenWidgets: getHiddenWidgets(state),\n\t\t\t};\n\n\t\t\tlet widget;\n\t\t\tlet groupWidget;\n\n\t\t\tallWidgets.widgetsOrder.forEach(widgetId => {\n\t\t\t\twidget = allWidgets.allWidgets[widgetId];\n\n\t\t\t\tif (widget.type === 'optionsGroup') {\n\t\t\t\t\twidget.groupWidgetsOrder.forEach(groupWidgetId => {\n\t\t\t\t\t\tgroupWidget = widget.allGroupWidgets[groupWidgetId];\n\n\t\t\t\t\t\tstateToProps[groupWidget.option.key] = getOptionValue(state, groupWidget.option.context, groupWidget.option.key);\n\t\t\t\t\t});\n\n\t\t\t\t} else {\n\t\t\t\t\tstateToProps[widget.option.key] = getOptionValue(state, widget.option.context, widget.option.key);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn stateToProps;\n\t\t},\n\n\t\t{\n\t\t\tsetOption: setOptionValue\n\t\t}\n\n\t)(component);\n}\n\n","import Rendering from '../_components/Rendering';\nimport OptionsPanelFactory from '../../_containers/OptionsPanelFactory';\n\nimport allWidgets from '../allWidgets';\nimport { getNonInteractableWidgets, getHiddenWidgets } from '../_state/selectors';\n\nexport default OptionsPanelFactory(allWidgets, getNonInteractableWidgets, getHiddenWidgets, Rendering);\n","import { getEditorMode } from '../../../ui/layout/app/_state/selectors';\nimport { getOptionValue } from '../../../db/options/selectors';\n\nexport const getNonInteractableWidgets = (state) => {\n\tconst nonInteractableWidgets = [];\n\n\tconst editorMode = getEditorMode(state);\n\n\tswitch (editorMode) {\n\t\tcase 'edit': {\n\t\t\tnonInteractableWidgets.push('helpers');\n\t\t\tnonInteractableWidgets.push('layout');\n\t\t\tnonInteractableWidgets.push('style');\n\t\t\tnonInteractableWidgets.push('format');\n\n\t\t\tbreak;\n\t\t}\n\t\tcase 'play': {\n\t\t\tnonInteractableWidgets.push('documentSize');\n\t\t\tnonInteractableWidgets.push('documentMargins');\n\t\t\tnonInteractableWidgets.push('columnBreakOnParagraph');\n\t\t\tbreak;\n\t\t}\n\t\tcase 'print': {\n\t\t\tnonInteractableWidgets.push('chordsColor');\n\t\t\tbreak;\n\t\t}\n\t\tcase 'export': {\n\t\t\tnonInteractableWidgets.push('format');\n\t\t\tnonInteractableWidgets.push('layout');\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t//const style = getOptionValue(state, 'rendering', 'style');\n\t//if (style !== 'chordmark') {\n\t//\tnonInteractableWidgets.push('alignBars');\n\t//}\n\n\treturn nonInteractableWidgets;\n};\n\nexport const getHiddenWidgets = (state) => {\n\tconst hiddenWidgets = [];\n\n\tconst editorMode = getEditorMode(state);\n\n\t//const showChords = getOptionValue(state, 'rendering', 'showChords');\n\tconst harmonizeAccidentals = getOptionValue(state, 'rendering', 'harmonizeAccidentals');\n\n\t//if (!showChords) {\n\t//\thiddenWidgets.push('instrument');\n\t//}\n\tif (!harmonizeAccidentals) {\n\t\thiddenWidgets.push('preferredAccidentals');\n\t}\n\n\tif (editorMode === 'print') {\n\t\thiddenWidgets.push('fontSize');\n\t} else {\n\t\thiddenWidgets.push('printFontSize');\n\t}\n\n\thiddenWidgets.push('helpers');\n\thiddenWidgets.push('simplifyChords');\n\thiddenWidgets.push('capoPosition');\n\n\treturn hiddenWidgets;\n};\n","import './Rendering.scss';\n\nimport React from 'react';\n\nimport Icon from '../../../ui/_components/Icon';\n\nimport SidebarOptionPanel from '../../../ui/sideBar/options/_components/SidebarOptionsPanel';\n\nexport default function Rendering(props) {\n\treturn (\n\t\t<div className={'renderingOptionsPanel'}>\n\t\t\t<div className={'renderingOptionsPanel-isCollapsed'}>\n\t\t\t\t<span className={'renderingOptionsPanel-icon'}>\n\t\t\t\t\t<Icon iconName={'settings'} />\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div className={'renderingOptionsPanel-isExpanded'}>\n\t\t\t\t<SidebarOptionPanel\n\t\t\t\t\t{...props}\n\t\t\t\t\tid={'rendering'}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nimport AppLayout from '../ui/layout/app/_containers/App';\nimport FileManager from '../fileManager/_containers/FileManager';\nimport Editor from '../editor/_containers/Editor';\nimport RightBarPanel from '../optionsPanels/rendering/_containers/Rendering';\n\nexport default function Edit() {\n\tconst fm = <FileManager />;\n\tconst rightBarPanel = <RightBarPanel />;\n\n\treturn (\n\t\t<AppLayout\n\t\t\tleftBar={fm}\n\t\t\trightBar={rightBarPanel}\n\t\t>\n\t\t\t<Editor />\n\t\t</AppLayout>\n\t);\n}\n","import UniversalRouter from 'universal-router';\nimport renderController from './renderController';\n\nimport Editor from './controllers/Editor';\n\nconst routes = [\n\t{\n\t\tpath: '/editor',\n\t\taction: () => Editor,\n\t},\n];\n\nconst universalRouter = new UniversalRouter(routes);\n\nexport default {\n\tnavigateTo(path) {\n\t\treturn universalRouter.resolve(path)\n\t\t\t.then(controller => {\n\t\t\t\treturn renderController(controller);\n\t\t\t});\n\t}\n};\n\n\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport { getStore } from './state/store';\n\nimport ErrorBoundary from './ui/_components/ErrorBoundary';\n\nexport default function renderController(Controller) {\n\tReactDom.render(\n\t\t<Provider store={getStore()}>\n\t\t\t<React.StrictMode>\n\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t<Controller />\n\t\t\t\t</ErrorBoundary>\n\t\t\t</React.StrictMode>\n\t\t</Provider>,\n\t\tdocument.getElementById('app')\n\t);\n}\n","import '../scss/styles.scss';\n\nimport { createStore } from './state/store';\nimport router from './router';\n\nexport default function run() {\n\tcreateStore();\n\n\treturn router.navigateTo('/editor');\n}\n","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<span class=\\\"cmTimeSignature\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? depth0.timeSignature : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = container.lambda((depth0 != null ? depth0.song : depth0), depth0)) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<span class=\\\"cmChordSymbol\\\">\"\n    + container.escapeExpression(container.lambda((depth0 != null ? depth0.chordSymbol : depth0), depth0))\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<span class=\\\"cmBarContent\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? depth0.barContent : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});"],"sourceRoot":""}