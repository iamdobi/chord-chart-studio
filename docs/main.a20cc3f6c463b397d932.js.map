{"version":3,"file":"main.a20cc3f6c463b397d932.js","mappings":"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","sources":["webpack://@touffi/chords-charts-studio/webpack/runtime/chunk loaded","webpack://@touffi/chords-charts-studio/./src/db/files/actionsTypes.js","webpack://@touffi/chords-charts-studio/./src/db/files/reducers.js","webpack://@touffi/chords-charts-studio/./src/db/options/actionsTypes.js","webpack://@touffi/chords-charts-studio/./src/db/options/reducers.js","webpack://@touffi/chords-charts-studio/./src/db/reducers.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_state/actionsTypes.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_state/reducers.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_state/actionsTypes.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_state/reducers.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/reducers.js","webpack://@touffi/chords-charts-studio/./src/ui/reducers.js","webpack://@touffi/chords-charts-studio/./src/state/reducers.js","webpack://@touffi/chords-charts-studio/./src/state/seed.js","webpack://@touffi/chords-charts-studio/./src/db/seed.js","webpack://@touffi/chords-charts-studio/./src/db/options/seed.js","webpack://@touffi/chords-charts-studio/./src/state/store.js","webpack://@touffi/chords-charts-studio/./src/state/localStorage.js","webpack://@touffi/chords-charts-studio/./src/core/createAction.js","webpack://@touffi/chords-charts-studio/./src/db/files/actions.js","webpack://@touffi/chords-charts-studio/./src/core/converters/chordSheetJs2ChordMark.js","webpack://@touffi/chords-charts-studio/./src/songImporters/importers/ultimateGuitar.js","webpack://@touffi/chords-charts-studio/./src/songImporters/getMessageHandlers.js","webpack://@touffi/chords-charts-studio/./src/registerHandlers.js","webpack://@touffi/chords-charts-studio/./src/ui/_components/ErrorBoundary.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_state/actions.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_state/selectors.js","webpack://@touffi/chords-charts-studio/./src/ui/_components/Icon.js","webpack://@touffi/chords-charts-studio/./src/ui/sideBar/_components/Logo.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_components/NavEntry.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_components/Nav.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_components/Footer.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/getVersions.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/allNavEntries.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_components/App.js","webpack://@touffi/chords-charts-studio/./src/ui/layout/app/_containers/App.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_state/actions.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_state/selectors.js","webpack://@touffi/chords-charts-studio/./src/db/files/selectors.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_components/FileActionEntry.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_components/FileActions.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_components/FileEntry.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_components/FileManager.js","webpack://@touffi/chords-charts-studio/./src/fileManager/_containers/FileManager.js","webpack://@touffi/chords-charts-studio/./src/db/options/selectors.js","webpack://@touffi/chords-charts-studio/./src/core/escapeHTML.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/core/dom/escapeHTML.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/core/dom/stripTags.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/lineTypes.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/matchers/isTimeSignatureString.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/syntax.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/matchers/isSectionLabel.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/helper/clearSpaces.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/matchers/isChord.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/matchers/isChordLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/matchers/isEmptyLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/parseTimeSignature.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/parseChord.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/exceptions/IncorrectBeatCountException.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/exceptions/InvalidChordRepetitionException.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/parseChordLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/parseLyricLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/helper/songs.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/songLinesFactory.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/parseSectionLabel.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/matchers/isChordLineRepeater.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/parseSong.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/parser/getAllChordsInSong.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/symbols.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/spacers/chord/getMaxBeatsWidth.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/spacers/chord/simple.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/spacers/chord/aligned.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/spacers/chord/chordLyrics.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderBarContent.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderChordSymbol.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderChordLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderEmptyLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderSectionLabel.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderLyricLine.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderTimeSignature.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/helpers/getChordSymbol.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/helpers/getSectionsStats.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/helpers/getMainAccidental.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/replaceRepeatedBars.js","webpack://@touffi/chords-charts-studio/./src/core/renderSong.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/renderSong.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/_components/SongRenderer.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/_containers/SongRenderer.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/editorPreview/_components/EditorPreview.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/editorPreview/_containers/EditorPreview.js","webpack://@touffi/chords-charts-studio/./src/editor/songEditor/prosemirror/schema.js","webpack://@touffi/chords-charts-studio/./src/editor/songEditor/prosemirror/converters/stateToText.js","webpack://@touffi/chords-charts-studio/./src/editor/songEditor/prosemirror/converters/toSafeHtml.js","webpack://@touffi/chords-charts-studio/./src/editor/songEditor/prosemirror/ProsemirrorEditorView.js","webpack://@touffi/chords-charts-studio/./src/editor/songEditor/prosemirror/converters/textToDom.js","webpack://@touffi/chords-charts-studio/./src/editor/songEditor/prosemirror/getPlugins.js","webpack://@touffi/chords-charts-studio/./src/editor/songEditor/_components/EditorLayout.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/exportPreview/_components/ExportPreview.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/playRenderer/_components/PlayRenderer.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/playRenderer/_containers/PlayRenderer.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/_components/Page.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/_components/PageHeader.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/helpers/mapLinesToColumns.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/helpers/getDimensionsFromDom.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/helpers/padColumns.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/helpers/element.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/helpers/getAllLinesHeight.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/helpers/getPagesHeight.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/_components/AllPages.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/_components/PrintPreview.js","webpack://@touffi/chords-charts-studio/./src/songRenderers/printPreview/_containers/PrintPreview.js","webpack://@touffi/chords-charts-studio/./src/editor/_components/Editor.js","webpack://@touffi/chords-charts-studio/./src/editor/_containers/Editor.js","webpack://@touffi/chords-charts-studio/./src/optionsPanels/_components/OptionsPanel.js","webpack://@touffi/chords-charts-studio/./src/ui/sideBar/options/_components/OptionsGroup.js","webpack://@touffi/chords-charts-studio/./src/ui/sideBar/options/_components/SelectChoice.js","webpack://@touffi/chords-charts-studio/./src/ui/sideBar/options/_components/Select.js","webpack://@touffi/chords-charts-studio/./src/ui/sideBar/options/_components/Slider.js","webpack://@touffi/chords-charts-studio/./src/ui/sideBar/options/_components/Toggle.js","webpack://@touffi/chords-charts-studio/./src/ui/sideBar/options/_components/SidebarOptionsPanel.js","webpack://@touffi/chords-charts-studio/./src/db/options/actions.js","webpack://@touffi/chords-charts-studio/./src/optionsPanels/rendering/_containers/Rendering.js","webpack://@touffi/chords-charts-studio/./src/optionsPanels/_containers/OptionsPanelFactory.js","webpack://@touffi/chords-charts-studio/./src/optionsPanels/rendering/allWidgets.js","webpack://@touffi/chords-charts-studio/./src/optionsPanels/rendering/_state/selectors.js","webpack://@touffi/chords-charts-studio/./src/optionsPanels/rendering/_components/Rendering.js","webpack://@touffi/chords-charts-studio/./src/controllers/Editor.js","webpack://@touffi/chords-charts-studio/./src/router.js","webpack://@touffi/chords-charts-studio/./src/renderController.js","webpack://@touffi/chords-charts-studio/./src/app.js","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/barContent.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/barSeparator.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/chordLine.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/chordSymbol.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/emptyLine.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/line.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/lyricLine.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/sectionLabel.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/song.hbs","webpack://@touffi/chords-charts-studio/../chord-mark/src/renderer/components/tpl/timeSignature.hbs","webpack://@touffi/chords-charts-studio/webpack/bootstrap","webpack://@touffi/chords-charts-studio/webpack/runtime/compat get default export","webpack://@touffi/chords-charts-studio/webpack/runtime/define property getters","webpack://@touffi/chords-charts-studio/webpack/runtime/global","webpack://@touffi/chords-charts-studio/webpack/runtime/hasOwnProperty shorthand","webpack://@touffi/chords-charts-studio/webpack/runtime/node module decorator","webpack://@touffi/chords-charts-studio/webpack/runtime/jsonp chunk loading","webpack://@touffi/chords-charts-studio/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","export const DB_FILES_CREATE = 'db/files/Create';\nexport const DB_FILES_DELETE = 'db/files/Delete';\nexport const DB_FILES_IMPORT = 'db/files/Import';\nexport const DB_FILES_UPDATE = 'db/files/Update';\n","import * as actionTypes from './actionsTypes';\n\n//import { DB_OPTION_SET_OPTION_VALUE } from '../../db/options/actionsTypes';\n\n//import { getEditorMode } from '../../ui/layout/app/_state/selectors';\n\nconst initialState = {\n\tallFiles: {},\n};\n\nfunction createFile(state, action) {\n\tconst { id, title, content } = action.payload;\n\n\tconst allFiles = { ...state.allFiles };\n\tallFiles[id] = {\n\t\tid,\n\t\ttitle,\n\t\tcontent,\n\t};\n\n\treturn {\n\t\t...state,\n\t\tallFiles,\n\t};\n}\n\nfunction updateFile(state, action) {\n\tconst { id, title, content } = action.payload;\n\n\tif ((!title && !content) || !state.allFiles[id]) {\n\t\treturn state;\n\t}\n\n\tconst allFiles = { ...state.allFiles };\n\n\tallFiles[id] = { ...allFiles[id] };\n\n\tif (title) {\n\t\tallFiles[id].title = title;\n\t}\n\tif (content) {\n\t\tallFiles[id].content = content;\n\t}\n\treturn {\n\t\t...state,\n\t\tallFiles,\n\t};\n}\n\nfunction deleteFile(state, action) {\n\tconst { id } = action.payload;\n\n\tif (!id || !state.allFiles[id]) {\n\t\treturn state;\n\t}\n\n\tconst allFiles = { ...state.allFiles };\n\tdelete allFiles[id];\n\n\treturn {\n\t\t...state,\n\t\tallFiles,\n\t};\n}\n\n/*\nfunction updateRenderingOption(state, action) {\n\t//const editorMode = getEditorMode(state);\n}\n\n */\n\nexport default (state = initialState, action = {}) => {\n\tswitch (action.type) {\n\t\tcase actionTypes.DB_FILES_CREATE:\n\t\tcase actionTypes.DB_FILES_IMPORT:\n\t\t\treturn createFile(state, action);\n\t\tcase actionTypes.DB_FILES_UPDATE:\n\t\t\treturn updateFile(state, action);\n\t\tcase actionTypes.DB_FILES_DELETE:\n\t\t\treturn deleteFile(state, action);\n\t\t/*\n\t\t\tcase DB_OPTION_SET_OPTION_VALUE:\n\t\t\treturn updateRenderingOption(state, action);\n\t\t\t\n\t\t */\n\t}\n\treturn state;\n};\n","export const DB_OPTION_SET_OPTION_VALUE = 'db/options/setOptionValue';\n","import * as actionTypes from './actionsTypes';\n\nconst initialState = {};\n\nexport default (state = initialState, action = {}) => {\n\tswitch (action.type) {\n\t\tcase actionTypes.DB_OPTION_SET_OPTION_VALUE: {\n\t\t\tconst { context, key, value } = action.payload;\n\n\t\t\tif (!state[context] || !state[context][key]) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst contextOptions = { ...state[context] };\n\t\t\tcontextOptions[key] = {\n\t\t\t\t...contextOptions[key],\n\t\t\t\tvalue,\n\t\t\t};\n\n\t\t\tconst newState = {\n\t\t\t\t...state,\n\t\t\t};\n\t\t\tnewState[context] = contextOptions;\n\n\t\t\treturn newState;\n\t\t}\n\t}\n\treturn state;\n};\n","import { combineReducers } from 'redux';\nimport files from './files/reducers';\nimport options from './options/reducers';\n\nexport default combineReducers({\n\tfiles,\n\toptions,\n});\n","export const FILE_MANAGER_SELECT_FILE = 'fileManager/select';\nexport const FILE_MANAGER_ENABLE_RENAME = 'fileManager/enableRename';\n","import {\n\tFILE_MANAGER_SELECT_FILE,\n\tFILE_MANAGER_ENABLE_RENAME,\n} from './actionsTypes';\n\nimport {\n\tDB_FILES_CREATE,\n\tDB_FILES_DELETE,\n\tDB_FILES_IMPORT,\n\tDB_FILES_UPDATE,\n} from '../../db/files/actionsTypes';\n\nconst initialState = {\n\tselected: '',\n\trenamed: '',\n\tdefaultTitle: '[untitled]',\n};\n\nexport default function reducers(state = initialState, action = {}) {\n\tswitch (action.type) {\n\t\tcase DB_FILES_CREATE: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: id,\n\t\t\t\trenamed: id,\n\t\t\t};\n\t\t}\n\n\t\tcase DB_FILES_IMPORT: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: id,\n\t\t\t\trenamed: '',\n\t\t\t};\n\t\t}\n\n\t\tcase DB_FILES_UPDATE: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trenamed: '',\n\t\t\t};\n\t\t}\n\n\t\tcase DB_FILES_DELETE: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: '',\n\t\t\t\trenamed: '',\n\t\t\t};\n\t\t}\n\n\t\tcase FILE_MANAGER_SELECT_FILE: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselected: id,\n\t\t\t\trenamed: id === state.renamed ? id : '',\n\t\t\t};\n\t\t}\n\n\t\tcase FILE_MANAGER_ENABLE_RENAME: {\n\t\t\tconst { id } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trenamed: id,\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n}\n","export const UI_LAYOUT_APP_TOGGLE_LEFT_BAR = 'ui/layout/app/toggleLeftBar';\nexport const UI_LAYOUT_APP_TOGGLE_RIGHT_BAR = 'ui/layout/app/toggleRightBar';\nexport const UI_LAYOUT_APP_SET_EDITOR_MODE = 'ui/layout/app/setEditorMode';\n","import {\n\tUI_LAYOUT_APP_TOGGLE_RIGHT_BAR,\n\tUI_LAYOUT_APP_TOGGLE_LEFT_BAR,\n\tUI_LAYOUT_APP_SET_EDITOR_MODE,\n} from './actionsTypes';\n\nconst initialState = {\n\tisLeftBarCollapsed: false,\n\tisRightBarCollapsed: false,\n\teditorMode: 'edit',\n};\n\nexport default function reducers(state = initialState, action = {}) {\n\tswitch (action.type) {\n\t\tcase UI_LAYOUT_APP_TOGGLE_LEFT_BAR: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLeftBarCollapsed: !state.isLeftBarCollapsed,\n\t\t\t};\n\t\t}\n\t\tcase UI_LAYOUT_APP_TOGGLE_RIGHT_BAR: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisRightBarCollapsed: !state.isRightBarCollapsed,\n\t\t\t};\n\t\t}\n\t\tcase UI_LAYOUT_APP_SET_EDITOR_MODE: {\n\t\t\tconst { mode } = action.payload;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditorMode: mode,\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n}\n","import { combineReducers } from 'redux';\nimport app from './app/_state/reducers';\n\nexport default combineReducers({\n\tapp,\n});\n","import { combineReducers } from 'redux';\nimport layout from './layout/reducers';\n\nexport default combineReducers({\n\tlayout,\n});\n","import { combineReducers } from 'redux';\n\nimport db from '../db/reducers';\nimport fileManager from '../fileManager/_state/reducers';\nimport ui from '../ui/reducers';\n\nexport default combineReducers({\n\tdb,\n\tfileManager,\n\tui,\n});\n","import db from '../db/seed';\n\nexport default {\n\tdb,\n};\n","import options from './options/seed';\n\nexport default {\n\toptions,\n};\n","export default {\n\trendering: {\n\t\tstyle: {\n\t\t\tvalue: 'chordmark',\n\t\t\tdefault: 'chordmark',\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tchordsAndLyricsDisplay: {\n\t\t\tvalue: 'all',\n\t\t\tdefault: 'all',\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\talignChordsWithLyrics: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\talignBars: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tautoRepeatChords: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\texpandSectionRepeats: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\n\t\t/** Layout */\n\n\t\tdocumentSize: {\n\t\t\tvalue: 'a4',\n\t\t\tdefault: 'a4',\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tdocumentMargins: {\n\t\t\tvalue: 3,\n\t\t\tdefault: 3,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tcolumnsCount: {\n\t\t\tvalue: 1,\n\t\t\tdefault: 1,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tcolumnBreakOnParagraph: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\n\t\t/** Display */\n\n\t\tshowChords: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tinstrument: {\n\t\t\tvalue: 'guitar',\n\t\t\tdefault: 'guitar',\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tshowStrummingPattern: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\n\t\t/** Customize Chords */\n\n\t\ttransposeValue: {\n\t\t\tvalue: 0,\n\t\t\tdefault: 0,\n\t\t\tresetOnSongChange: true,\n\t\t},\n\t\tsimplifyChords: {\n\t\t\tvalue: 'none',\n\t\t\tdefault: 'none',\n\t\t\tresetOnSongChange: true,\n\t\t},\n\t\tcapoPosition: {\n\t\t\tvalue: 0,\n\t\t\tdefault: 0,\n\t\t\tresetOnSongChange: true,\n\t\t},\n\t\tharmonizeAccidentals: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: true,\n\t\t},\n\t\tpreferredAccidentals: {\n\t\t\tvalue: 'auto',\n\t\t\tdefault: 'auto',\n\t\t\tresetOnSongChange: true,\n\t\t},\n\t\tuseShortNamings: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\n\t\t/** Format */\n\n\t\tfontSize: {\n\t\t\tvalue: 0,\n\t\t\tdefault: 0,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tprintFontSize: {\n\t\t\tvalue: 0,\n\t\t\tdefault: 0,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tfontStyle: {\n\t\t\tvalue: 'roboto',\n\t\t\tdefault: 'roboto',\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\tchordsColor: {\n\t\t\tvalue: 'yellow',\n\t\t\tdefault: 'yellow',\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t\thighlightChords: {\n\t\t\tvalue: true,\n\t\t\tdefault: true,\n\t\t\tresetOnSongChange: false,\n\t\t},\n\t},\n};\n","import _defaultsDeep from 'lodash/defaultsDeep';\n\nimport { createStore as createReduxStore, compose } from 'redux';\n\nimport { loadState, saveState } from './localStorage';\nimport allReducers from './reducers';\nimport seed from './seed';\n\nconst storeEnhancers = [];\n\n/* * /\nimport { applyMiddleware } from 'redux';\nconst logger = () => next => action => {\n\tconsole.log('!!! DISPATCHING ACTION: ', action);\n\tlet result = next(action);\n\treturn result;\n};\nstoreEnhancers.push(applyMiddleware(logger));\n/* */\n\nlet store;\n\nexport function createStore() {\n\tif (window.__REDUX_DEVTOOLS_EXTENSION__) {\n\t\tstoreEnhancers.push(\n\t\t\twindow.__REDUX_DEVTOOLS_EXTENSION__({ trace: true })\n\t\t);\n\t}\n\n\tconst persistedState = loadState();\n\tconst initialState = _defaultsDeep(persistedState, seed);\n\n\tstore = createReduxStore(\n\t\tallReducers,\n\t\tinitialState,\n\t\tcompose(...storeEnhancers)\n\t);\n\n\tstore.subscribe(() => {\n\t\tsaveState(store.getState());\n\t});\n}\n\nexport function getStore() {\n\treturn store;\n}\n","// @see https://egghead.io/lessons/javascript-redux-persisting-the-state-to-the-local-storage\n\nexport const loadState = () => {\n\ttry {\n\t\tconst serializedState = localStorage.getItem('state');\n\t\tif (!serializedState) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn JSON.parse(serializedState);\n\t} catch (err) {\n\t\treturn undefined;\n\t}\n};\n\nexport const saveState = (state) => {\n\ttry {\n\t\tconst serializedState = JSON.stringify(state);\n\t\tlocalStorage.setItem('state', serializedState);\n\t} catch (err) {\n\t\t// ignore write errors\n\t}\n};\n","export default function createAction(type, payload) {\n\tif (!type) {\n\t\tthrow new TypeError('Cannot create an action without an action type');\n\t}\n\treturn {\n\t\ttype,\n\t\tpayload,\n\t};\n}\n","import { v4 as uuidv4 } from 'uuid';\n\nimport createAction from '../../core/createAction';\nimport * as actionTypes from './actionsTypes';\n\nexport const createFile = (title, content = '') => {\n\tif (!title) {\n\t\tthrow new TypeError('Cannot create a file without title');\n\t}\n\tconst payload = {\n\t\tid: uuidv4(),\n\t\ttitle,\n\t\tcontent,\n\t};\n\treturn createAction(actionTypes.DB_FILES_CREATE, payload);\n};\n\nexport const importFile = (title, content = '') => {\n\tif (!title) {\n\t\tthrow new TypeError('Cannot import a file without title');\n\t}\n\tconst payload = {\n\t\tid: uuidv4(),\n\t\ttitle,\n\t\tcontent,\n\t};\n\treturn createAction(actionTypes.DB_FILES_IMPORT, payload);\n};\n\nexport const updateFile = (id, { title, content } = {}) => {\n\tif (!id) {\n\t\tthrow new TypeError('Cannot update a file without an id');\n\t}\n\tconst payload = {\n\t\tid,\n\t\ttitle,\n\t\tcontent,\n\t};\n\treturn createAction(actionTypes.DB_FILES_UPDATE, payload);\n};\n\nexport const deleteFile = (id) => {\n\treturn createAction(actionTypes.DB_FILES_DELETE, { id });\n};\n","import { ChordLyricsPair, Tag } from 'chordsheetjs';\n\nconst allLines = [];\n\nexport default function chordSheetJs2ChordMark(song) {\n\tallLines.length = 0;\n\tformatAllParagraphs(song);\n\treturn allLines.join('\\n');\n}\n\nconst formatAllParagraphs = (song) => {\n\tconst { bodyParagraphs } = song;\n\tbodyParagraphs.map((paragraph) => {\n\t\tformatParagraph(paragraph);\n\t\tallLines.push('');\n\t});\n};\n\nconst formatParagraph = (paragraph) => {\n\tswitch (paragraph.type) {\n\t\tcase 'verse':\n\t\t\tallLines.push('#v');\n\t\t\tbreak;\n\t\tcase 'chorus':\n\t\t\tallLines.push('#c');\n\t\t\tbreak;\n\t}\n\tparagraph.lines.map((line) => formatLine(line));\n};\n\nconst formatLine = (line) => {\n\tconst parts = [\n\t\tformatChordLine(line),\n\t\tformatLyricLine(line),\n\t\tformatTagLine(line),\n\t]\n\t\t.filter((i) => i !== null)\n\t\t.map((part) => part.trimRight());\n\n\tallLines.push(...parts);\n};\n\nconst formatChordLine = (line) => {\n\tif (!lineHasChords(line)) {\n\t\treturn null;\n\t}\n\n\treturn line.items.reduce((chordLine, item) => {\n\t\tif (itemHasChord(item)) {\n\t\t\tchordLine += item.chords.trim() + ' ';\n\t\t}\n\t\treturn chordLine;\n\t}, '');\n};\n\nconst formatLyricLine = (line) => {\n\tif (!lineHasLyrics(line)) {\n\t\treturn null;\n\t}\n\treturn line.items.reduce((lyricsLine, item) => {\n\t\tif (!itemHasLyric(item)) lyricsLine += ' ';\n\t\tif (itemHasChord(item)) lyricsLine += '_';\n\t\tif (itemHasLeftPadding(item)) lyricsLine += ' ';\n\n\t\tlyricsLine += item.lyrics.trim();\n\n\t\tif (itemHasRightPadding(item)) lyricsLine += ' ';\n\n\t\treturn lyricsLine;\n\t}, '');\n};\n\nconst formatTagLine = (line) => {\n\tif (!lineHasTag(line)) {\n\t\treturn null;\n\t}\n\tconst tagValue = line.items[0].value.toLowerCase().replace(/[- 0-9]/g, '');\n\n\treturn sectionLabelsMapping[tagValue]\n\t\t? sectionLabelsMapping[tagValue]\n\t\t: '#' + tagValue;\n};\n\nconst sectionLabelsMapping = {\n\tadlib: '#a',\n\tbridge: '#b',\n\tchorus: '#c',\n\tinterlude: '#u',\n\tintro: '#i',\n\tintroduction: '#i',\n\toutro: '#o',\n\tprechorus: '#p',\n\tsolo: '#s',\n};\n\nconst lineHasChords = (line) =>\n\tline.items.some((item) => item instanceof ChordLyricsPair && item.chords);\n\nconst lineHasLyrics = (line) =>\n\tline.items.some((item) => item instanceof ChordLyricsPair && item.lyrics);\n\nconst lineHasTag = (line) =>\n\tline.items.some((item) => item instanceof Tag && item.isRenderable());\n\nconst itemHasChord = (item) => {\n\treturn item instanceof ChordLyricsPair && item.chords.trim().length;\n};\n\nconst itemHasLyric = (item) => {\n\treturn item.lyrics.length;\n};\n\nconst itemHasLeftPadding = (item) => {\n\treturn item.lyrics.length - item.lyrics.trimLeft().length >= 1;\n};\n\nconst itemHasRightPadding = (item) => {\n\treturn (\n\t\titem.lyrics.trim().length &&\n\t\titem.lyrics.length - item.lyrics.trimRight().length >= 1\n\t);\n};\n","import ChordSheetJS from 'chordsheetjs';\nimport chordSheetJs2ChordMark from '../../core/converters/chordSheetJs2ChordMark';\n\nexport default function getFromUltimateGuitar(ugChordChartRaw) {\n\tconst ugChordChart = ugChordChartRaw\n\t\t.replace(/\\r\\n/g, '\\n')\n\t\t.replace(/\\t/g, ' ')\n\t\t.replace(/\\[\\/?ch]/g, '')\n\t\t.replace(/\\[\\/?tab]/g, '');\n\n\tconst parser = new ChordSheetJS.UltimateGuitarParser();\n\tconst parsed = parser.parse(ugChordChart);\n\n\treturn chordSheetJs2ChordMark(parsed);\n}\n","import { importFile } from '../db/files/actions';\nimport { getStore } from '../state/store';\n\nimport getFromUltimateGuitar from './importers/ultimateGuitar';\n\n/**\n * @typedef {Object} WebsiteImportMessage\n * @type {Object}\n * @property {('ultimateGuitar')} source - website from which the tab comes from\n * @property {String} chordChart - content of the chord chart\n * @property {String} title - song title\n * @property {String} artist - song artist\n */\n\nconst songImporterHandlers = {\n\t/**\n\t *\n\t * @param {WebsiteImportMessage} message\n\t */\n\t'@CCS/IMPORT_TAB': (message) => {\n\t\tconst store = getStore();\n\n\t\tlet chordChart;\n\n\t\ttry {\n\t\t\tswitch (message.source) {\n\t\t\t\tcase 'ultimateGuitar':\n\t\t\t\t\tchordChart = getFromUltimateGuitar(message.chordChart);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// todo\n\t\t\tconsole.log('error in import');\n\t\t}\n\n\t\tif (chordChart) {\n\t\t\tconst title = buildTitle(message.title, message.artist);\n\t\t\tstore.dispatch(importFile(title, chordChart));\n\t\t}\n\t},\n};\n\nconst buildTitle = (songTitle, artist) => {\n\tlet title = songTitle;\n\tif (artist) {\n\t\ttitle += ' - ' + artist;\n\t}\n\treturn title;\n};\n\nexport default function getSongImporterHandlers() {\n\treturn songImporterHandlers;\n}\n","import getSongImporterHandlers from './songImporters/getMessageHandlers';\n\nexport default function registerHandlers() {\n\twindow.addEventListener('message', _handleMessage);\n}\n\n// unit test backdoor, not for public usage!\nexport const _handleMessage = (e) => {\n\tconst allHandlers = {\n\t\t...getSongImporterHandlers(),\n\t};\n\n\tif (e.source !== window || e.origin !== window.location.origin) {\n\t\treturn false;\n\t}\n\tconst message = e.data;\n\n\tif (typeof allHandlers[message.type] === 'function') {\n\t\tallHandlers[message.type](message.payload);\n\t}\n\treturn true;\n};\n","import './ErrorBoundary.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n// source: https://codepen.io/gaearon/pen/wqvxGa?editors=0010\nclass ErrorBoundary extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { error: null, errorInfo: null };\n\t}\n\n\tcomponentDidCatch(error, errorInfo) {\n\t\tthis.setState({\n\t\t\terror: error,\n\t\t\terrorInfo: errorInfo,\n\t\t});\n\t}\n\n\trender() {\n\t\tif (this.state.errorInfo) {\n\t\t\treturn (\n\t\t\t\t<div className={'ErrorBoundary'}>\n\t\t\t\t\t<h2>Something went wrong</h2>\n\t\t\t\t\t<details style={{ whiteSpace: 'pre-wrap' }} open={true}>\n\t\t\t\t\t\t{this.state.error && this.state.error.toString()}\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{this.state.errorInfo.componentStack}\n\t\t\t\t\t</details>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn this.props.children;\n\t}\n}\n\nErrorBoundary.propTypes = {\n\tchildren: PropTypes.any,\n};\n\nexport default ErrorBoundary;\n","import {\n\tUI_LAYOUT_APP_TOGGLE_LEFT_BAR,\n\tUI_LAYOUT_APP_TOGGLE_RIGHT_BAR,\n\tUI_LAYOUT_APP_SET_EDITOR_MODE,\n} from './actionsTypes';\n\nimport createAction from '../../../../core/createAction';\n\nexport const toggleLeftBar = () => createAction(UI_LAYOUT_APP_TOGGLE_LEFT_BAR);\n\nexport const toggleRightBar = () =>\n\tcreateAction(UI_LAYOUT_APP_TOGGLE_RIGHT_BAR);\n\nexport const setEditorMode = (mode) =>\n\tcreateAction(UI_LAYOUT_APP_SET_EDITOR_MODE, { mode });\n","export const isLeftBarCollapsed = (state) =>\n\tstate.ui.layout.app.isLeftBarCollapsed;\n\nexport const isRightBarCollapsed = (state) =>\n\tstate.ui.layout.app.isRightBarCollapsed;\n\nexport const getEditorMode = (state) => state.ui.layout.app.editorMode;\n","import './Icon.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Icon(props) {\n\tconst { iconName } = props;\n\n\tconst classList = ['icon', 'material-icons'];\n\n\treturn <i className={classList.join(' ')}>{iconName}</i>;\n}\n\nIcon.propTypes = {\n\ticonName: PropTypes.string.isRequired,\n};\n\nexport default React.memo(Icon);\n","import './Logo.scss';\n\nimport React from 'react';\n\nimport Icon from '../../_components/Icon.js';\n\nfunction Logo() {\n\treturn (\n\t\t<div className={'logo'}>\n\t\t\t<div className={'logo-isCollapsed'}>\n\t\t\t\t<Icon iconName={'queue_music'} />\n\t\t\t</div>\n\n\t\t\t<div className={'logo-isExpanded'}>\n\t\t\t\t<span className={'logo-icon'}>\n\t\t\t\t\t<Icon iconName={'queue_music'} />\n\t\t\t\t</span>\n\t\t\t\tChords Charts Studio\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default React.memo(Logo);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon.js';\n\nfunction NavEntry(props) {\n\tconst { label, icon, editorMode, setEditorMode, isActive } = props;\n\n\tconst classNames = ['mainNavEntry'];\n\n\tif (isActive) {\n\t\tclassNames.push('mainNavEntry-isActive');\n\t}\n\n\tfunction handleClick() {\n\t\tsetEditorMode(editorMode);\n\t}\n\n\treturn (\n\t\t<li className={classNames.join(' ')} onClick={handleClick}>\n\t\t\t<span className={'mainNavEntry-icon'}>\n\t\t\t\t<Icon iconName={icon} />\n\t\t\t</span>\n\t\t\t{label}\n\t\t</li>\n\t);\n}\n\nNavEntry.propTypes = {\n\tlabel: PropTypes.string.isRequired,\n\ticon: PropTypes.string.isRequired,\n\teditorMode: PropTypes.string.isRequired,\n\tsetEditorMode: PropTypes.func.isRequired,\n\tisActive: PropTypes.bool.isRequired,\n};\n\nexport default React.memo(NavEntry);\n","import './Nav.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport NavEntry from './NavEntry.js';\n\nfunction Nav(props) {\n\tconst { currentMode, allEntries, setEditorMode } = props;\n\n\treturn (\n\t\t<nav className={'mainNav'}>\n\t\t\t<ul className={'mainNav-entries'}>\n\t\t\t\t{allEntries.map((entry, key) => (\n\t\t\t\t\t<NavEntry\n\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\tisActive={entry.editorMode === currentMode}\n\t\t\t\t\t\tsetEditorMode={setEditorMode}\n\t\t\t\t\t\t{...entry}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</nav>\n\t);\n}\n\nNav.propTypes = {\n\tcurrentMode: PropTypes.string.isRequired,\n\tsetEditorMode: PropTypes.func.isRequired,\n\tallEntries: PropTypes.arrayOf(\n\t\tPropTypes.shape({\n\t\t\tid: PropTypes.string.isRequired,\n\t\t\tlabel: PropTypes.string.isRequired,\n\t\t\ticon: PropTypes.string.isRequired,\n\t\t\teditorMode: PropTypes.string.isRequired,\n\t\t})\n\t),\n};\n\nexport default React.memo(Nav);\n","import getVersions from '../getVersions';\nimport './Footer.scss';\n\nimport React from 'react';\n\nfunction Footer() {\n\tconst versions = getVersions();\n\treturn (\n\t\t<div className={'appFooter'}>\n\t\t\tChords Charts Studio {versions['chord-charts-studio']}- ChordMark{' '}\n\t\t\t{versions['chord-mark']}- ChordSymbol {versions['chord-symbol']}\n\t\t</div>\n\t);\n}\n\nexport default React.memo(Footer);\n","export default () => ({'chord-charts-studio':'v0.8.3','chord-symbol':'v2.0.0','chord-mark':'v0.5.5'});","export default [\n\t{\n\t\tid: 'edit',\n\t\tlabel: 'Edit',\n\t\ticon: 'create',\n\t\teditorMode: 'edit',\n\t},\n\t{\n\t\tid: 'play',\n\t\tlabel: 'Play',\n\t\ticon: 'music_note',\n\t\teditorMode: 'play',\n\t},\n\t{\n\t\tid: 'print',\n\t\tlabel: 'Print / PDF',\n\t\ticon: 'print',\n\t\teditorMode: 'print',\n\t},\n\t{\n\t\tid: 'export',\n\t\tlabel: 'Export',\n\t\ticon: 'save_alt',\n\t\teditorMode: 'export',\n\t},\n];\n","import './App.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Logo from '../../../sideBar/_components/Logo';\nimport Nav from './Nav';\nimport Footer from './Footer';\nimport Icon from '../../../_components/Icon';\n\nimport allNavEntries from '../allNavEntries';\n\nfunction App(props) {\n\tconst {\n\t\tisLeftBarCollapsed,\n\t\tisRightBarCollapsed,\n\t\teditorMode,\n\t\ttoggleLeftBar,\n\t\ttoggleRightBar,\n\t\tsetEditorMode,\n\n\t\tleftBar,\n\t\trightBar,\n\t} = props;\n\n\tconst leftBarClassNames = ['leftBar'];\n\tif (isLeftBarCollapsed) {\n\t\tleftBarClassNames.push('leftBar-isCollapsed');\n\t}\n\n\tconst rightBarClassNames = ['rightBar'];\n\tif (isRightBarCollapsed) {\n\t\trightBarClassNames.push('rightBar-isCollapsed');\n\t}\n\n\treturn (\n\t\t<div className={'appLayout-wrapper'}>\n\t\t\t<section className={leftBarClassNames.join(' ')}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'leftBar-content'}\n\t\t\t\t\tonClick={isLeftBarCollapsed ? toggleLeftBar : null}\n\t\t\t\t>\n\t\t\t\t\t<Logo />\n\t\t\t\t\t{leftBar}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'leftBar-collapser'}\n\t\t\t\t\tonClick={toggleLeftBar}\n\t\t\t\t\tdata-testid={'leftBar-collapser'}\n\t\t\t\t>\n\t\t\t\t\t<span className={'leftBar-collapserIcon'}>\n\t\t\t\t\t\t<Icon iconName={'keyboard_arrow_left'} />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t<section className={'appLayout-main'}>\n\t\t\t\t<section className={'appLayout-header'}>\n\t\t\t\t\t<Nav\n\t\t\t\t\t\tallEntries={allNavEntries}\n\t\t\t\t\t\tcurrentMode={editorMode}\n\t\t\t\t\t\tsetEditorMode={setEditorMode}\n\t\t\t\t\t/>\n\t\t\t\t</section>\n\t\t\t\t<section className={'appLayout-content'}>\n\t\t\t\t\t{props.children}\n\t\t\t\t</section>\n\t\t\t\t<section className={'appLayout-footer'}>\n\t\t\t\t\t<Footer />\n\t\t\t\t</section>\n\t\t\t</section>\n\t\t\t<section className={rightBarClassNames.join(' ')}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'rightBar-collapser'}\n\t\t\t\t\tonClick={toggleRightBar}\n\t\t\t\t\tdata-testid={'rightBar-collapser'}\n\t\t\t\t>\n\t\t\t\t\t<span className={'rightBar-collapserIcon'}>\n\t\t\t\t\t\t<Icon iconName={'keyboard_arrow_right'} />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName={'rightBar-content'}\n\t\t\t\t\tonClick={isRightBarCollapsed ? toggleRightBar : null}\n\t\t\t\t>\n\t\t\t\t\t{rightBar}\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t</div>\n\t);\n}\n\nApp.propTypes = {\n\tchildren: PropTypes.element,\n\n\tisLeftBarCollapsed: PropTypes.bool,\n\tisRightBarCollapsed: PropTypes.bool,\n\ttoggleLeftBar: PropTypes.func.isRequired,\n\ttoggleRightBar: PropTypes.func.isRequired,\n\n\teditorMode: PropTypes.string.isRequired,\n\tsetEditorMode: PropTypes.func.isRequired,\n\n\tleftBar: PropTypes.element.isRequired,\n\trightBar: PropTypes.element.isRequired,\n};\n\nApp.defaultProps = {\n\tisLeftBarCollapsed: false,\n\tisRightBarCollapsed: false,\n};\n\nexport default App;\n","import { connect } from 'react-redux';\n\nimport {\n\ttoggleLeftBar,\n\ttoggleRightBar,\n\tsetEditorMode,\n} from '../_state/actions';\nimport {\n\tisLeftBarCollapsed,\n\tisRightBarCollapsed,\n\tgetEditorMode,\n} from '../_state/selectors';\n\nimport App from '../_components/App';\n\nexport default connect(\n\t(state) => ({\n\t\tisLeftBarCollapsed: isLeftBarCollapsed(state),\n\t\tisRightBarCollapsed: isRightBarCollapsed(state),\n\t\teditorMode: getEditorMode(state),\n\t}),\n\n\t{\n\t\ttoggleLeftBar,\n\t\ttoggleRightBar,\n\t\tsetEditorMode,\n\t}\n)(App);\n","import createAction from '../../core/createAction';\n\nimport * as actionsTypes from './actionsTypes';\n\nexport const selectFile = (id) =>\n\tcreateAction(actionsTypes.FILE_MANAGER_SELECT_FILE, { id });\n\nexport const enableRename = (id) =>\n\tcreateAction(actionsTypes.FILE_MANAGER_ENABLE_RENAME, { id });\n","export const getSelectedId = (state) => state.fileManager.selected;\n\nexport const getRenamedId = (state) => state.fileManager.renamed;\n\nexport const getDefaultTitle = (state) => state.fileManager.defaultTitle;\n","import _map from 'lodash/map';\nimport _isEqual from 'lodash/isEqual';\nimport _sortBy from 'lodash/sortBy';\n\nimport { createSelectorCreator, defaultMemoize } from 'reselect';\n\n// create a \"selector creator\" that uses lodash.isEqual instead of ===\nconst createDeepEqualSelector = createSelectorCreator(defaultMemoize, _isEqual);\n\n// return value should not change when file content changes\nexport const getAllTitles = createDeepEqualSelector(\n\t(state) =>\n\t\t_map(state.db.files.allFiles, ({ title, id }) => ({ title, id })),\n\t(allFiles) => _sortBy(allFiles, (o) => o.title.toLowerCase())\n);\n\nexport const getOne = (state, id) => {\n\treturn state.db.files.allFiles[id];\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../ui/_components/Icon';\n\nfunction FileActionEntry(props) {\n\tconst { icon, text, action } = props;\n\n\treturn (\n\t\t<span className={'fileManagerAction'} onClick={action}>\n\t\t\t<span className={'fileManagerAction-icon'}>\n\t\t\t\t<Icon iconName={icon} /> {text}\n\t\t\t</span>\n\t\t</span>\n\t);\n}\n\nFileActionEntry.propTypes = {\n\ticon: PropTypes.string.isRequired,\n\ttext: PropTypes.string.isRequired,\n\taction: PropTypes.func.isRequired,\n};\n\nexport default React.memo(FileActionEntry);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport FileActionEntry from './FileActionEntry';\n\nfunction FileActions(props) {\n\tconst { createFile, deleteFile, enableRename } = props;\n\n\tconst allActions = [\n\t\t{\n\t\t\ticon: 'add_circle',\n\t\t\ttext: 'New',\n\t\t\taction: createFile,\n\t\t},\n\t\t{\n\t\t\ticon: 'create',\n\t\t\ttext: 'Rename',\n\t\t\taction: enableRename,\n\t\t},\n\t\t{\n\t\t\ticon: 'delete',\n\t\t\ttext: 'Delete',\n\t\t\taction: deleteFile,\n\t\t},\n\t];\n\n\treturn (\n\t\t<div className={'fileManager-actionsList'}>\n\t\t\t{allActions.map((action, key) => (\n\t\t\t\t<FileActionEntry {...action} key={key} />\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nFileActions.propTypes = {\n\tcreateFile: PropTypes.func.isRequired,\n\tdeleteFile: PropTypes.func.isRequired,\n\tenableRename: PropTypes.func.isRequired,\n};\n\nexport default React.memo(FileActions);\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nfunction FileEntry(props) {\n\tconst [title, setTitle] = useState(props.title);\n\n\tconst {\n\t\tfileId,\n\t\tisSelected,\n\t\tisRenamed,\n\t\tdefaultTitle,\n\t\tselectFile,\n\t\tenableRename,\n\t\tupdateFile,\n\t} = props;\n\n\tconst classList = ['fileManagerEntry'];\n\tif (isSelected) {\n\t\tclassList.push('fileManagerEntry-isSelected');\n\t}\n\tif (isRenamed) {\n\t\tclassList.push('fileManagerEntry-isRenamed');\n\t}\n\n\tconst inputRef = React.createRef();\n\n\tuseEffect(() => {\n\t\tif (isRenamed) {\n\t\t\tinputRef.current.focus();\n\t\t}\n\t}, [isRenamed, inputRef]);\n\n\tfunction handleClick() {\n\t\tif (!isSelected) {\n\t\t\tselectFile(fileId);\n\t\t}\n\t}\n\n\tfunction handleDoubleClick(e) {\n\t\tif (!isRenamed) {\n\t\t\tenableRename(fileId);\n\t\t\te.target.select();\n\t\t}\n\t}\n\n\tfunction handleKeyPress(e) {\n\t\tif (isRenamed && e.which === 13) {\n\t\t\te.preventDefault();\n\t\t\twindow.getSelection().removeAllRanges();\n\n\t\t\tconst newTitle = e.target.value;\n\t\t\tsaveTitle(newTitle);\n\t\t}\n\t}\n\n\tfunction handleChange(e) {\n\t\tsetTitle(e.target.value);\n\t}\n\n\tfunction handleFocus(e) {\n\t\tif (isRenamed) {\n\t\t\te.target.select();\n\t\t}\n\t}\n\n\tfunction handleBlur(e) {\n\t\tif (isRenamed) {\n\t\t\tconst newTitle = e.target.value;\n\t\t\tsaveTitle(newTitle);\n\t\t}\n\t}\n\n\tfunction saveTitle(newTitle) {\n\t\tnewTitle = newTitle || defaultTitle;\n\n\t\tupdateFile(fileId, {\n\t\t\ttitle: newTitle,\n\t\t});\n\t\tsetTitle(newTitle);\n\n\t\tinputRef.current.scrollLeft = 0;\n\t}\n\n\treturn (\n\t\t<li\n\t\t\tclassName={classList.join(' ')}\n\t\t\tonClick={handleClick}\n\t\t\tonDoubleClick={handleDoubleClick}\n\t\t>\n\t\t\t<input\n\t\t\t\tclassName={'fileManagerEntry-input'}\n\t\t\t\tref={inputRef}\n\t\t\t\ttype={'text'}\n\t\t\t\tvalue={title}\n\t\t\t\treadOnly={isRenamed ? null : 'readOnly'}\n\t\t\t\tautoFocus={isRenamed ? 'autoFocus' : null}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tonBlur={handleBlur}\n\t\t\t\tonFocus={handleFocus}\n\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t/>\n\t\t</li>\n\t);\n}\n\nFileEntry.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n\tfileId: PropTypes.string.isRequired,\n\tisSelected: PropTypes.bool.isRequired,\n\tisRenamed: PropTypes.bool.isRequired,\n\tdefaultTitle: PropTypes.string.isRequired,\n\tselectFile: PropTypes.func.isRequired,\n\tenableRename: PropTypes.func.isRequired,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default FileEntry;\n","import './FileManager.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../ui/_components/Icon';\nimport FileActions from './FileActions';\nimport FileEntry from './FileEntry';\n\nfunction FileManager(props) {\n\tconst {\n\t\tallTitles,\n\t\tselected,\n\t\trenamed,\n\t\tdefaultTitle,\n\n\t\tselectFile,\n\t\tcreateFile,\n\t\tdeleteFile,\n\t\tenableRename,\n\t\tupdateFile,\n\t} = props;\n\n\treturn (\n\t\t<div className={'fileManager'}>\n\t\t\t<div className={'fileManager-isCollapsed'}>\n\t\t\t\t<span className={'fileManager-icon'}>\n\t\t\t\t\t<Icon iconName={'file_copy'} />\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div className={'fileManager-isExpanded'}>\n\t\t\t\t<FileActions\n\t\t\t\t\tcreateFile={() => createFile(defaultTitle)}\n\t\t\t\t\tdeleteFile={() => deleteFile(selected)}\n\t\t\t\t\tenableRename={() => enableRename(selected)}\n\t\t\t\t/>\n\t\t\t\t<ul className={'fileManager-entriesList'}>\n\t\t\t\t\t{allTitles.map((file) => (\n\t\t\t\t\t\t<FileEntry\n\t\t\t\t\t\t\ttitle={file.title}\n\t\t\t\t\t\t\tdefaultTitle={defaultTitle}\n\t\t\t\t\t\t\tfileId={file.id}\n\t\t\t\t\t\t\tisSelected={selected === file.id}\n\t\t\t\t\t\t\tisRenamed={renamed === file.id}\n\t\t\t\t\t\t\tselectFile={selectFile}\n\t\t\t\t\t\t\tupdateFile={updateFile}\n\t\t\t\t\t\t\tenableRename={enableRename}\n\t\t\t\t\t\t\tkey={file.id}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nFileManager.propTypes = {\n\tallTitles: PropTypes.arrayOf(\n\t\tPropTypes.shape({\n\t\t\ttitle: PropTypes.string.isRequired,\n\t\t\tid: PropTypes.string.isRequired,\n\t\t})\n\t).isRequired,\n\tselected: PropTypes.string.isRequired,\n\trenamed: PropTypes.string.isRequired,\n\tdefaultTitle: PropTypes.string.isRequired,\n\n\tselectFile: PropTypes.func.isRequired,\n\tcreateFile: PropTypes.func.isRequired,\n\tdeleteFile: PropTypes.func.isRequired,\n\tenableRename: PropTypes.func.isRequired,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default FileManager;\n","import { connect } from 'react-redux';\n\nimport { selectFile, enableRename } from '../_state/actions';\nimport {\n\tgetDefaultTitle,\n\tgetSelectedId,\n\tgetRenamedId,\n} from '../_state/selectors';\n\nimport { createFile, updateFile, deleteFile } from '../../db/files/actions';\nimport { getAllTitles } from '../../db/files/selectors';\n\nimport FileManager from '../_components/FileManager';\n\nexport default connect(\n\t(state) => ({\n\t\tselected: getSelectedId(state),\n\t\trenamed: getRenamedId(state),\n\t\tdefaultTitle: getDefaultTitle(state),\n\t\tallTitles: getAllTitles(state),\n\t}),\n\n\t{\n\t\tselectFile,\n\t\tcreateFile,\n\t\tdeleteFile,\n\t\tupdateFile,\n\t\tenableRename,\n\t}\n)(FileManager);\n","import _mapValues from 'lodash/mapValues';\n\nexport const getOptionValue = (state, context, key) => {\n\tif (!state.db.options[context] || !state.db.options[context][key]) {\n\t\treturn;\n\t}\n\treturn state.db.options[context][key].value;\n};\n\nexport const getContext = (state, context) => {\n\tif (!state.db.options[context]) {\n\t\treturn;\n\t}\n\treturn _mapValues(state.db.options[context], (option) => option.value);\n};\n","import domPurify from 'dompurify';\n\nexport default function escapeHTML(unescaped) {\n\treturn domPurify.sanitize(unescaped);\n}\n","import domPurify from 'dompurify';\n\nexport default function escapeHTML(unescaped) {\n\treturn domPurify.sanitize(unescaped);\n}\n","import domPurify from 'dompurify';\n\nexport default function stripTags(html) {\n\treturn domPurify.sanitize(html, {\n\t\tALLOWED_TAGS: ['#text'],\n\t\tKEEP_CONTENT: true,\n\t});\n}\n","/**\n * @enum {String}\n * @readonly\n */\nexport default {\n\tCHORD: 'chord',\n\tCHORD_LINE_REPEATER: 'chordLineRepeater',\n\tEMPTY_LINE: 'emptyLine',\n\tLYRIC: 'lyric',\n\tSECTION_LABEL: 'sectionLabel',\n\tTIME_SIGNATURE: 'timeSignature',\n};\n","const allowedTimeSignatures = [\n\t'2/2',\n\t'3/2',\n\t'2/4',\n\t'3/4',\n\t'4/4',\n\t'5/4',\n\t'3/8',\n\t'6/8',\n\t'9/8',\n\t'12/8',\n];\n\nexport default function isTimeSignatureString(string) {\n\treturn allowedTimeSignatures.includes(string);\n}\n","export default {\n\tbarRepeat: '%',\n\tchordBeatCount: '\\\\.',\n\tchordLineRepeat: '%',\n\tnoChord: 'NC',\n\tnoLyrics: 'NL',\n\tsectionLabel: '#',\n\tchordPositionMarker: '_',\n};\n","import syntax from '../syntax';\n\nexport const sectionLabelRegexp = new RegExp(\n\t'^' + syntax.sectionLabel + '([a-zA-Z]+)([1-9])?( x[2-9])?$'\n);\n\nexport default function isSectionLabel(string) {\n\tconst found = string.trim().match(sectionLabelRegexp);\n\treturn found !== null;\n}\n","export default function clearSpaces(string) {\n\treturn string.replace(/\\t+/g, ' ').replace(/  +/g, ' ').trim();\n}\n","import { chordParserFactory } from 'chord-symbol';\n\nexport default function isChord(potentialChord) {\n\tconst parseChord = chordParserFactory();\n\tconst parsed = parseChord(potentialChord);\n\treturn !parsed.error;\n}\n","import clearSpaces from '../helper/clearSpaces';\n\nimport syntax from '../syntax';\nimport isChord from './isChord';\n\nconst chordBeatCountSymbols = new RegExp(syntax.chordBeatCount + '*$', 'g');\nconst barRepeatSymbols = new RegExp('^' + syntax.barRepeat + '+$');\n\nexport default function isChordLine(line = '') {\n\treturn clearSpaces(line)\n\t\t.split(' ')\n\t\t.every((potentialChordToken, index) => {\n\t\t\tconst withoutBeatCount = potentialChordToken.replace(\n\t\t\t\tchordBeatCountSymbols,\n\t\t\t\t''\n\t\t\t);\n\t\t\treturn (\n\t\t\t\tisChord(withoutBeatCount) ||\n\t\t\t\t(potentialChordToken.match(barRepeatSymbols) && index > 0) ||\n\t\t\t\twithoutBeatCount === syntax.noChord\n\t\t\t);\n\t\t});\n}\n","import clearSpaces from '../helper/clearSpaces';\n\nexport default function isEmptyLine(string) {\n\treturn clearSpaces(string) === '';\n}\n","import isTimeSignatureString from './matchers/isTimeSignatureString';\n\n/**\n * @typedef {Object} TimeSignature\n * @type {Object}\n * @property {String} string - original string\n * @property {Number} count - upper part of time signature\n * @property {Number} value - lower part of time signature\n * @property {Number} beatCount - number of beats per bar\n */\n\n/**\n * @param {String} string\n * @returns {TimeSignature}\n */\nexport default function parseTimeSignature(string) {\n\tif (!isTimeSignatureString(string)) {\n\t\tthrow new TypeError(\n\t\t\t'Expected time signature string, received: ' + string\n\t\t);\n\t}\n\n\tconst array = string.split('/');\n\n\tconst count = Number.parseInt(array[0], 10);\n\tconst value = Number.parseInt(array[1], 10);\n\n\tlet beatCount = count;\n\n\tif (value === 2) {\n\t\tbeatCount = count * 2;\n\t} else if (value === 8) {\n\t\tbeatCount = count / 3;\n\t}\n\n\treturn {\n\t\tstring,\n\t\tcount,\n\t\tvalue,\n\t\tbeatCount,\n\t};\n}\n","import { chordParserFactory } from 'chord-symbol';\n\n/**\n * @param chordString\n * @returns {Chord}\n */\nexport default function parseChordWrapper(chordString) {\n\tconst parseChord = chordParserFactory();\n\treturn parseChord(chordString);\n}\n","import _isString from 'lodash/isString';\nimport _isFinite from 'lodash/isFinite';\n\nexport default class IncorrectBeatCountException extends Error {\n\tconstructor({ string, duration, currentBeatCount, beatCount } = {}) {\n\t\tif (!string || !_isString(string)) {\n\t\t\tthrow new TypeError(\n\t\t\t\t'IncorrectBeatCountException cannot be created without chord string, received: ' +\n\t\t\t\t\tstring\n\t\t\t);\n\t\t}\n\t\tif (!duration || !_isFinite(duration)) {\n\t\t\tthrow new TypeError(\n\t\t\t\t'IncorrectBeatCountException cannot be created without chord duration, received: ' +\n\t\t\t\t\tduration\n\t\t\t);\n\t\t}\n\t\tif (!currentBeatCount || !_isFinite(currentBeatCount)) {\n\t\t\tthrow new TypeError(\n\t\t\t\t'IncorrectBeatCountException cannot be created without currentBeatCount, received: ' +\n\t\t\t\t\tcurrentBeatCount\n\t\t\t);\n\t\t}\n\t\tif (!beatCount || !_isFinite(beatCount)) {\n\t\t\tthrow new TypeError(\n\t\t\t\t'IncorrectBeatCountException cannot be created without beatCount, received: ' +\n\t\t\t\t\tbeatCount\n\t\t\t);\n\t\t}\n\n\t\tsuper();\n\n\t\tthis.name = 'IncorrectBeatCountException';\n\t\tthis.string = string;\n\t\tthis.duration = duration;\n\t\tthis.currentBeatCount = currentBeatCount;\n\t\tthis.beatCount = beatCount;\n\t}\n}\n","import _isString from 'lodash/isString';\n\nexport default class InvalidChordRepetitionException extends Error {\n\tconstructor({ string } = {}) {\n\t\tif (!string || !_isString(string)) {\n\t\t\tthrow new TypeError(\n\t\t\t\t'InvalidChordRepetitionException cannot be created without chord string, received: ' +\n\t\t\t\t\tstring\n\t\t\t);\n\t\t}\n\n\t\tsuper();\n\n\t\tthis.name = 'InvalidChordRepetitionException';\n\t\tthis.string = string;\n\t}\n}\n","import _isEqual from 'lodash/isEqual';\nimport _cloneDeep from 'lodash/cloneDeep';\n\nimport syntax from './syntax';\nimport clearSpaces from './helper/clearSpaces';\n\nimport parseChord from './parseChord';\nimport parseTimeSignature from './parseTimeSignature';\n\nimport IncorrectBeatCountException from './exceptions/IncorrectBeatCountException';\nimport InvalidChordRepetitionException from './exceptions/InvalidChordRepetitionException';\n\nconst chordBeatCountSymbols = new RegExp(syntax.chordBeatCount, 'g');\nconst barRepeatSymbols = new RegExp('^' + syntax.barRepeat + '+$');\nconst defaultTimeSignature = parseTimeSignature('4/4');\n\n/**\n * @typedef {Object} ChordLine\n * @type {Object}\n * @property {Number} chordCount - number of chords in the line\n * @property {Bar[]} allBars\n */\n\n/**\n * @typedef {Object} Bar\n * @type {Object}\n * @property {TimeSignature} timeSignature\n * @property {ChordLineChord[]} allChords\n * @property {Boolean} isRepeated\n * @property {Boolean} hasPositionedChords\n * @property {Boolean} hasUnevenChordsDurations\n */\n\n/**\n * @typedef {Object} ChordLineChord\n * @type {Object}\n * @property {String} string - original chord string\n * @property {ChordDef|String} model - parsed chord or \"NC\" if \"no chord\" symbol\n * @property {Number} duration - number of beats the chord lasts\n * @property {Number} beat - beat on which the chord starts\n * @property {Boolean} isPositioned - whether this chord has been positioned over a specific lyric or not\n */\n\n/**\n * @param {String} chordLine\n * @param {TimeSignature} timeSignature\n * @returns {ChordLine}\n */\nexport default function parseChordLine(\n\tchordLine,\n\t{ timeSignature = defaultTimeSignature } = {}\n) {\n\tconst { beatCount } = timeSignature;\n\n\tconst allBars = [];\n\tconst emptyBar = { allChords: [] };\n\n\tlet bar = _cloneDeep(emptyBar);\n\tlet chord = {};\n\tlet tokenWithoutBeatCount;\n\tlet currentBeatCount = 0;\n\tlet chordCount = 0;\n\tlet previousBar;\n\n\tconst allTokens = clearSpaces(chordLine).split(' ');\n\tallTokens.forEach((token, tokenIndex) => {\n\t\tif (token.match(barRepeatSymbols)) {\n\t\t\tif (previousBar) {\n\t\t\t\tconst repeatedBar = _cloneDeep(previousBar);\n\t\t\t\trepeatedBar.isRepeated = true;\n\n\t\t\t\tfor (let i = 0; i < token.length; i++) {\n\t\t\t\t\tallBars.push(_cloneDeep(repeatedBar));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t'A chord line cannot start with the barRepeat symbol'\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\ttokenWithoutBeatCount = token.replace(chordBeatCountSymbols, '');\n\t\t\tchord = {\n\t\t\t\tstring: token,\n\t\t\t\tduration: getChordDuration(token, beatCount),\n\t\t\t\tmodel: isNoChordSymbol(tokenWithoutBeatCount)\n\t\t\t\t\t? syntax.noChord\n\t\t\t\t\t: parseChord(tokenWithoutBeatCount),\n\t\t\t\tbeat: currentBeatCount + 1,\n\t\t\t};\n\t\t\tcurrentBeatCount += chord.duration;\n\n\t\t\tcheckInvalidChordRepetition(bar, chord);\n\n\t\t\tbar.allChords.push(chord);\n\t\t\tchordCount++;\n\n\t\t\tif (shouldChangeBar(currentBeatCount, beatCount)) {\n\t\t\t\tbar.timeSignature = timeSignature;\n\t\t\t\tbar.hasUnevenChordsDurations = hasUnevenChordsDurations(bar);\n\t\t\t\tconst barClone = _cloneDeep(bar);\n\n\t\t\t\tbar.isRepeated = _isEqual(bar, previousBar);\n\n\t\t\t\tallBars.push(_cloneDeep(bar));\n\n\t\t\t\tpreviousBar = barClone;\n\n\t\t\t\tbar = _cloneDeep(emptyBar);\n\t\t\t\tcurrentBeatCount = 0;\n\t\t\t} else {\n\t\t\t\tcheckInvalidBeatCount(\n\t\t\t\t\tchord,\n\t\t\t\t\tcurrentBeatCount,\n\t\t\t\t\tbeatCount,\n\t\t\t\t\tallTokens.length === tokenIndex + 1\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn {\n\t\tchordCount,\n\t\tallBars,\n\t};\n}\n\nfunction isNoChordSymbol(token) {\n\treturn token === syntax.noChord;\n}\n\nfunction getChordDuration(token, beatCount) {\n\treturn (token.match(chordBeatCountSymbols) || []).length || beatCount;\n}\n\nfunction checkInvalidChordRepetition(bar, currentChord) {\n\tif (bar.allChords.length > 0) {\n\t\tconst previousChord = bar.allChords[bar.allChords.length - 1];\n\t\tif (_isEqual(previousChord.model, currentChord.model)) {\n\t\t\tthrow new InvalidChordRepetitionException({\n\t\t\t\tstring: currentChord.string,\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction shouldChangeBar(currentBeatCount, beatCount) {\n\treturn currentBeatCount === beatCount;\n}\n\nfunction checkInvalidBeatCount(chord, currentBeatCount, beatCount, isLast) {\n\tif (hasInvalidBeatCount(currentBeatCount, beatCount, isLast)) {\n\t\tthrow new IncorrectBeatCountException({\n\t\t\tmessage: '',\n\t\t\tstring: chord.string,\n\t\t\tduration: chord.duration,\n\t\t\tcurrentBeatCount,\n\t\t\tbeatCount,\n\t\t});\n\t}\n}\nfunction hasInvalidBeatCount(currentBeatCount, barBeatCount, isLast) {\n\treturn (\n\t\thasTooManyBeats(currentBeatCount, barBeatCount) ||\n\t\thasTooFewBeats(currentBeatCount, barBeatCount, isLast)\n\t);\n}\nfunction hasTooManyBeats(currentBeatCount, barBeatCount) {\n\treturn currentBeatCount > barBeatCount;\n}\nfunction hasTooFewBeats(currentBeatCount, barBeatCount, isLast) {\n\treturn isLast && currentBeatCount < barBeatCount;\n}\n\nfunction hasUnevenChordsDurations(bar) {\n\tlet firstChordDuration = bar.allChords[0].duration;\n\treturn bar.allChords.some((chord) => chord.duration !== firstChordDuration);\n}\n","import syntax from './syntax';\n\n/**\n * @typedef {Object} LyricLine\n * @type {Object}\n * @property {String} lyrics\n * @property {Number[]} chordPositions\n */\n\n/**\n * @param {String} string\n * @returns {LyricLine}\n */\nexport default function parseLyricLine(string) {\n\tconst regexp = new RegExp(syntax.chordPositionMarker, 'g');\n\tconst stringWithoutPositionMarkers = string.replace(regexp, '');\n\n\tconst chordPositions = [];\n\tlet tmpString = string;\n\tlet position;\n\n\twhile ((position = tmpString.indexOf(syntax.chordPositionMarker)) !== -1) {\n\t\tif (!chordPositions.includes(position)) {\n\t\t\tchordPositions.push(position);\n\t\t}\n\t\ttmpString = tmpString.replace(syntax.chordPositionMarker, '');\n\t}\n\treturn {\n\t\tlyrics: stringWithoutPositionMarkers,\n\t\tchordPositions,\n\t};\n}\n","import _cloneDeep from 'lodash/cloneDeep';\n\nimport lineTypes from '../lineTypes';\n\n/**\n * @param {SongLine[]} allLines\n * @param {Function} fn - to execute on each bar\n * @returns {SongLine[]}\n */\nexport function forEachBarInSong(allLines, fn) {\n\tconst newLines = _cloneDeep(allLines);\n\n\tnewLines.forEach((line) => {\n\t\tif (line.type === lineTypes.CHORD) {\n\t\t\tline.model.allBars.forEach((bar) => {\n\t\t\t\tfn(bar);\n\t\t\t});\n\t\t}\n\t});\n\treturn newLines;\n}\n\n/**\n * @param {SongLine[]} allLines\n * @param {Function} fn - to execute on each chord\n * @returns {SongLine[]}\n */\nexport function forEachChordInSong(allLines, fn) {\n\tconst newLines = _cloneDeep(allLines);\n\n\tnewLines.forEach((line) => {\n\t\tif (line.type === lineTypes.CHORD) {\n\t\t\tline.model.allBars.forEach((bar) => {\n\t\t\t\tbar.allChords.forEach((chord) => {\n\t\t\t\t\tfn(chord);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n\treturn newLines;\n}\n\n/**\n * @param {ChordLine} chordLine\n * @param {Function} fn - to execute on each chord\n * @returns {ChordLine}\n */\nexport function forEachChordInChordLine(chordLine, fn) {\n\tconst newChordLine = _cloneDeep(chordLine);\n\n\tnewChordLine.allBars.forEach((bar, barIndex) => {\n\t\tbar.allChords.forEach((chord, chordIndex) => {\n\t\t\tfn(chord, chordIndex, barIndex);\n\t\t});\n\t});\n\n\treturn newChordLine;\n}\n\n/**\n * @param {SongLine[]} allLines\n * @param {String} label - the label to select\n * @param {Number} n - the index of the section to select\n * @returns {SongLine[]} all lines of the requested section\n */\nexport function getNthOfLabel(allLines, label, n) {\n\tconst selected = [];\n\tconst typesCount = {};\n\n\tlet enableSelect = false;\n\tlet currentLabel = '';\n\n\tallLines.forEach((line) => {\n\t\tif (line.type === lineTypes.SECTION_LABEL) {\n\t\t\tcurrentLabel = line.model.label;\n\n\t\t\tif (!typesCount[currentLabel]) {\n\t\t\t\ttypesCount[currentLabel] = 1;\n\t\t\t} else {\n\t\t\t\ttypesCount[currentLabel]++;\n\t\t\t}\n\n\t\t\tenableSelect = line.id === label + n;\n\t\t} else if (enableSelect) {\n\t\t\tselected.push(line);\n\t\t}\n\t});\n\treturn selected;\n}\n","/*eslint-disable max-lines-per-function */\nimport _cloneDeep from 'lodash/cloneDeep';\nimport lineTypes from './lineTypes';\n\nimport isTimeSignature from './matchers/isTimeSignatureString';\nimport isSectionLabel from './matchers/isSectionLabel';\nimport isChordLine from './matchers/isChordLine';\nimport isChordLineRepeater from './matchers/isChordLineRepeater';\nimport isEmptyLine from './matchers/isEmptyLine';\n\nimport parseTimeSignature from './parseTimeSignature';\nimport parseChordLine from './parseChordLine';\nimport parseSectionLabel from './parseSectionLabel';\nimport parseLyricLine from './parseLyricLine';\n\nimport clearSpaces from './helper/clearSpaces';\n\nimport { forEachChordInChordLine, getNthOfLabel } from './helper/songs';\n\nconst defaultTimeSignature = '4/4';\n\n/**\n * @typedef {Object} SongLine\n * @type {Object}\n * @property {String} string - original line in source file\n * @property {String} type - chord|lyric|timeSignature|sectionLabel...\n * @property {Boolean} [isFromSectionRepeat] - line created by a section repeat directive (x3...)\n * @property {Boolean} [isFromSectionCopy] - line created by a section copy (eg empty # section)\n * @property {Boolean} [isFromAutoRepeatChords] - line created by auto repeats of chords from a section to another\n */\n\n/**\n * @typedef {SongLine} SongChordLine\n * @type {Object}\n * @property {ChordLine} model\n * @property {Boolean} [isFromChordLineRepeater] - line created by the chordLine repeat symbol\n */\n\n/**\n * @typedef {SongLine} SongTimeSignatureLine\n * @type {Object}\n * @property {TimeSignature} model\n */\n\n/**\n * @typedef {SongLine} SongLyricLine\n * @type {Object}\n * @property {LyricLine} model\n */\n\n/**\n * @typedef {SongLine} SongSectionLabelLine\n * @type {Object}\n * @property {SectionLabel} model\n * @property {Number} index - index of the section for a given label (#v, #v x2, #v => 1, 2, 3, 4)\n * @property {Number} indexWithoutRepeats - idem, but not taking repeats into account (#v, #v x2, #v => 1, 2, 3)\n * @property {String} id\n */\n\nexport default function songLinesFactory() {\n\tconst allLines = [];\n\tconst sectionsStats = {};\n\n\tlet currentTimeSignature = parseTimeSignature(defaultTimeSignature);\n\tlet currentSection;\n\tlet currentSectionStats;\n\n\tconst MAX_PREVIOUS_CHORD_LINES = 2;\n\tlet previousChordLines = [];\n\tlet previousSectionLabelLine;\n\n\tlet blueprint = [];\n\tlet blueprintIndex = 0;\n\tlet blueprintLine = '';\n\n\tlet isRepeatingChords = false;\n\tlet shouldRepeatSection = false;\n\tlet shouldCopySection = false;\n\n\t/**\n\t * @returns {SongTimeSignatureLine}\n\t */\n\tfunction getTimeSignatureLine(string) {\n\t\tcurrentTimeSignature = parseTimeSignature(string);\n\n\t\treturn {\n\t\t\tstring,\n\t\t\ttype: lineTypes.TIME_SIGNATURE,\n\t\t\tmodel: currentTimeSignature,\n\t\t};\n\t}\n\n\t/**\n\t * @returns {SongSectionLabelLine}\n\t */\n\tfunction getSectionLabelLine(string, lineIndex, allSrcLines) {\n\t\tcurrentSection = parseSectionLabel(string);\n\n\t\tincreaseSectionStats(currentSection.label);\n\t\tcurrentSectionStats = getSectionCount(currentSection.label);\n\n\t\tconst line = {\n\t\t\tstring,\n\t\t\ttype: lineTypes.SECTION_LABEL,\n\t\t\tmodel: currentSection,\n\t\t\tindex: currentSectionStats.count,\n\t\t\tindexWithoutRepeats: currentSectionStats.withoutRepeats,\n\t\t\tid: currentSection.label + currentSectionStats.count,\n\t\t};\n\n\t\tshouldCopySection =\n\t\t\tisCurrentSectionEmpty(lineIndex, allSrcLines) &&\n\t\t\tcurrentSectionStats.count > 1;\n\t\tif (shouldCopySection) {\n\t\t\tline.isFromSectionCopy = true;\n\t\t}\n\n\t\tshouldRepeatSection = currentSection.repeatTimes > 0;\n\t\tpreviousSectionLabelLine = _cloneDeep(line);\n\n\t\tif (!isFirstOfLabel(currentSection, allLines)) {\n\t\t\tblueprint = getNthOfLabel(allLines, currentSection.label, 1);\n\t\t\tblueprintIndex = 0;\n\t\t\tisRepeatingChords = true;\n\t\t} else {\n\t\t\tisRepeatingChords = false;\n\t\t}\n\t\treturn line;\n\t}\n\n\t/**\n\t * @returns {SongLyricLine}\n\t */\n\tfunction getEmptyLine(string) {\n\t\treturn {\n\t\t\tstring,\n\t\t\ttype: lineTypes.EMPTY_LINE,\n\t\t};\n\t}\n\n\t/**\n\t * @returns {SongChordLine|SongLyricLine}\n\t */\n\tfunction getChordLine(string) {\n\t\tlet line;\n\t\ttry {\n\t\t\tconst model = parseChordLine(string, {\n\t\t\t\ttimeSignature: currentTimeSignature,\n\t\t\t});\n\t\t\tline = {\n\t\t\t\tstring,\n\t\t\t\ttype: lineTypes.CHORD,\n\t\t\t\tmodel,\n\t\t\t};\n\t\t\taddPreviousChordLine(line);\n\t\t} catch (e) {\n\t\t\tline = getLyricLine(string);\n\t\t}\n\t\treturn line;\n\t}\n\n\tfunction addPreviousChordLine(line) {\n\t\tif (previousChordLines.length >= MAX_PREVIOUS_CHORD_LINES) {\n\t\t\tpreviousChordLines.shift();\n\t\t}\n\t\tpreviousChordLines.push(line);\n\t}\n\n\t/**\n\t * @returns {SongChordLine|SongLyricLine}\n\t */\n\tfunction getRepeatedChordLine(string) {\n\t\tconst repeatString = clearSpaces(string);\n\t\tconst sliceStart = -repeatString.length;\n\t\tconst sliceEnd = sliceStart < -1 ? sliceStart + 1 : undefined;\n\n\t\tif (previousChordLines.length >= repeatString.length) {\n\t\t\treturn {\n\t\t\t\t..._cloneDeep(\n\t\t\t\t\t...previousChordLines.slice(sliceStart, sliceEnd)\n\t\t\t\t),\n\t\t\t\tisFromChordLineRepeater: true,\n\t\t\t};\n\t\t}\n\t\treturn getLyricLine(string);\n\t}\n\n\t/**\n\t * @returns {SongLyricLine}\n\t */\n\tfunction getLyricLine(string) {\n\t\treturn {\n\t\t\tstring,\n\t\t\ttype: lineTypes.LYRIC,\n\t\t\tmodel: parseLyricLine(string),\n\t\t};\n\t}\n\n\tfunction increaseSectionStats(label, isRepeated = false) {\n\t\tif (!sectionsStats[label]) {\n\t\t\tsectionsStats[label] = {\n\t\t\t\tcount: 1,\n\t\t\t\twithoutRepeats: 1,\n\t\t\t};\n\t\t} else {\n\t\t\tsectionsStats[label].count++;\n\t\t\tif (!isRepeated) {\n\t\t\t\tsectionsStats[label].withoutRepeats++;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction getSectionCount(label) {\n\t\treturn sectionsStats[label];\n\t}\n\n\tfunction repeatLinesFromBlueprint(line) {\n\t\tif (isRepeatingChords && line.type !== lineTypes.SECTION_LABEL) {\n\t\t\tblueprintLine = blueprint[blueprintIndex];\n\t\t\tlet repeatedLine;\n\n\t\t\twhile (shouldRepeatLineFromBlueprint(blueprintLine, line)) {\n\t\t\t\tif (blueprintLine.type === lineTypes.CHORD) {\n\t\t\t\t\taddPreviousChordLine(_cloneDeep(blueprintLine));\n\t\t\t\t}\n\t\t\t\trepeatedLine = {\n\t\t\t\t\t..._cloneDeep(blueprintLine),\n\t\t\t\t\tisFromAutoRepeatChords: true,\n\t\t\t\t};\n\t\t\t\tallLines.push(repeatedLine);\n\t\t\t\tblueprintIndex++;\n\t\t\t\tblueprintLine = blueprint[blueprintIndex];\n\t\t\t}\n\t\t\tblueprintIndex++;\n\t\t}\n\t}\n\n\tfunction copySection() {\n\t\tif (shouldCopySection) {\n\t\t\tconst toCopy = getNthOfLabel(\n\t\t\t\tallLines,\n\t\t\t\tcurrentSection.label,\n\t\t\t\tcurrentSection.copyIndex\n\t\t\t).map((line) => ({\n\t\t\t\t..._cloneDeep(line),\n\t\t\t\tisFromSectionCopy: true,\n\t\t\t}));\n\n\t\t\tif (!toCopy.length) return;\n\n\t\t\tif (endsWithEmptyLine(toCopy)) {\n\t\t\t\ttoCopy.pop();\n\t\t\t}\n\n\t\t\tallLines.push(..._cloneDeep(toCopy));\n\n\t\t\tshouldCopySection = false;\n\t\t}\n\t}\n\n\tfunction isCurrentSectionEmpty(lineIndex, allSrcLines) {\n\t\tconst remainingLines = allSrcLines.slice(lineIndex + 1);\n\n\t\tlet nextSectionIndex = remainingLines.findIndex((line) =>\n\t\t\tisSectionLabel(line)\n\t\t);\n\n\t\tif (nextSectionIndex === 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst currentSectionContent = remainingLines\n\t\t\t.slice(0, nextSectionIndex !== -1 ? nextSectionIndex : undefined)\n\t\t\t.filter((line) => !(isTimeSignature(line) || isEmptyLine(line)));\n\n\t\treturn currentSectionContent.length === 0;\n\t}\n\n\tfunction repeatSection(lineIndex, allSrcLines) {\n\t\tif (\n\t\t\tshouldRepeatSection &&\n\t\t\tisLastLineOfSection(lineIndex, allSrcLines)\n\t\t) {\n\t\t\tconst toRepeat = getNthOfLabel(\n\t\t\t\tallLines,\n\t\t\t\tcurrentSection.label,\n\t\t\t\tcurrentSectionStats.count\n\t\t\t).map((line) => ({\n\t\t\t\t..._cloneDeep(line),\n\t\t\t\tisFromSectionRepeat: true,\n\t\t\t}));\n\t\t\tlet sectionLabelLine;\n\n\t\t\tfor (let i = 1; i < currentSection.repeatTimes; i++) {\n\t\t\t\tincreaseSectionStats(currentSection.label, true);\n\t\t\t\tcurrentSectionStats = getSectionCount(currentSection.label);\n\n\t\t\t\tsectionLabelLine = {\n\t\t\t\t\t..._cloneDeep(previousSectionLabelLine),\n\t\t\t\t\tindex: currentSectionStats.count,\n\t\t\t\t\tindexWithoutRepeats: currentSectionStats.withoutRepeats,\n\t\t\t\t\tid: currentSection.label + currentSectionStats.count,\n\t\t\t\t\tisFromSectionRepeat: true,\n\t\t\t\t};\n\t\t\t\tallLines.push(sectionLabelLine);\n\t\t\t\tallLines.push(..._cloneDeep(toRepeat));\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {\n\t\taddLine(lineSrc, lineIndex, allSrcLines) {\n\t\t\tlet line;\n\t\t\tif (isTimeSignature(lineSrc)) {\n\t\t\t\tline = getTimeSignatureLine(lineSrc);\n\t\t\t} else if (isSectionLabel(lineSrc)) {\n\t\t\t\tline = getSectionLabelLine(lineSrc, lineIndex, allSrcLines);\n\t\t\t} else if (isChordLine(lineSrc)) {\n\t\t\t\tline = getChordLine(lineSrc);\n\t\t\t} else if (isChordLineRepeater(lineSrc)) {\n\t\t\t\tline = getRepeatedChordLine(lineSrc);\n\t\t\t} else if (isEmptyLine(lineSrc)) {\n\t\t\t\tline = getEmptyLine(lineSrc);\n\t\t\t} else {\n\t\t\t\tline = getLyricLine(lineSrc);\n\t\t\t}\n\n\t\t\trepeatLinesFromBlueprint(line);\n\n\t\t\tallLines.push(line);\n\n\t\t\tcopySection();\n\t\t\trepeatSection(lineIndex, allSrcLines);\n\t\t},\n\n\t\t/**\n\t\t * returns {SongLine[]}\n\t\t */\n\t\tasArray() {\n\t\t\treturn _cloneDeep(allLines);\n\t\t},\n\n\t\tflagPositionedChords() {\n\t\t\tlet nextLine;\n\t\t\tlet lineChordCount;\n\n\t\t\tallLines.forEach((line, lineIndex) => {\n\t\t\t\tnextLine = allLines[lineIndex + 1];\n\n\t\t\t\tif (shouldPositionChords(line, nextLine)) {\n\t\t\t\t\tlineChordCount = 0;\n\t\t\t\t\tline.model.hasPositionedChords = true;\n\t\t\t\t\tline.model = forEachChordInChordLine(\n\t\t\t\t\t\tline.model,\n\t\t\t\t\t\t(chord) => {\n\t\t\t\t\t\t\tchord.isPositioned =\n\t\t\t\t\t\t\t\tlineChordCount <\n\t\t\t\t\t\t\t\tnextLine.model.chordPositions.length;\n\t\t\t\t\t\t\tlineChordCount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} else if (line.type === lineTypes.CHORD) {\n\t\t\t\t\tline.model.hasPositionedChords = false;\n\t\t\t\t\tline.model = forEachChordInChordLine(\n\t\t\t\t\t\tline.model,\n\t\t\t\t\t\t(chord) => {\n\t\t\t\t\t\t\tchord.isPositioned = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t};\n}\n\nfunction isFirstOfLabel(currentLabel, allLines) {\n\treturn allLines.every(\n\t\t(line) =>\n\t\t\tline.type === lineTypes.SECTION_LABEL &&\n\t\t\tline.model.label !== currentLabel.label\n\t);\n}\n\nfunction shouldRepeatLineFromBlueprint(blueprintLine, currentLine) {\n\treturn (\n\t\tblueprintLine &&\n\t\tblueprintLine.type !== lineTypes.LYRIC &&\n\t\tblueprintLine.type !== lineTypes.EMPTY_LINE &&\n\t\tblueprintLine.type !== currentLine.type &&\n\t\tcurrentLine.type !== lineTypes.EMPTY_LINE\n\t);\n}\n\nfunction isLastLineOfSection(lineIndex, allSrcLines) {\n\tconst nextLine = allSrcLines[lineIndex + 1];\n\treturn typeof nextLine === 'undefined' || isSectionLabel(nextLine);\n}\n\nfunction shouldPositionChords(line, nextLine) {\n\treturn (\n\t\tline.type === lineTypes.CHORD &&\n\t\tnextLine &&\n\t\tnextLine.type === lineTypes.LYRIC &&\n\t\tnextLine.model.chordPositions.length > 0\n\t);\n}\n\nfunction endsWithEmptyLine(allLines) {\n\tconst lastLine = allLines[allLines.length - 1];\n\treturn lastLine.type === lineTypes.EMPTY_LINE;\n}\n","import isSectionLabel, { sectionLabelRegexp } from './matchers/isSectionLabel';\n\n/**\n * @typedef {Object} SectionLabel\n * @type {Object}\n * @property {String} string - original string\n * @property {String} label - label of the section\n * @property {Number} repeatTimes - number of times the section should be repeated\n * @property {Number} copyIndex - index of the section that should be copied\n */\n\n/**\n * @param {String} string\n * @returns {SectionLabel}\n */\nexport default function parseSectionLabel(string) {\n\tif (!isSectionLabel(string)) {\n\t\tthrow new TypeError(\n\t\t\t'Expected section identifier string, received: ' + string\n\t\t);\n\t}\n\n\tconst found = string.trim().match(sectionLabelRegexp);\n\n\treturn {\n\t\tstring,\n\t\tlabel: found[1],\n\t\tcopyIndex: found[2] ? Number.parseInt(found[2]) : 1,\n\t\trepeatTimes: found[3] ? Number.parseInt(found[3].replace(' x', '')) : 0,\n\t};\n}\n","import syntax from '../syntax';\nimport clearSpaces from '../helper/clearSpaces';\n\nexport default function isChordLineRepeater(string) {\n\tconst candidate = clearSpaces(string);\n\treturn (\n\t\tcandidate === syntax.chordLineRepeat ||\n\t\tcandidate === syntax.chordLineRepeat.repeat(2)\n\t);\n}\n","import _isArray from 'lodash/isArray';\n\nimport escapeHTML from '../core/dom/escapeHTML';\nimport stripTags from '../core/dom/stripTags';\n\nimport songLinesFactory from './songLinesFactory';\n\nimport getAllChordsInSong from './getAllChordsInSong';\n\n/**\n * @typedef {Object} Song\n * @type {Object}\n * @property {SongLine[]} allLines\n * @property {SongChord[]} allChords\n */\n\n/**\n * @typedef {Object} SongChord\n * @type {Object}\n * @property {ChordDef} model\n * @property {number} occurrences - number of times the chord appears in the song\n */\n\n/**\n * @param {string|array} songSrc\n * @returns {Song}\n */\nexport default function parseSong(songSrc) {\n\tconst songArray = !_isArray(songSrc) ? songSrc.split('\\n') : songSrc;\n\n\tconst songLines = songLinesFactory();\n\n\t/**\n\t * @type {SongLine[]}\n\t */\n\tsongArray.map(escapeHTML).map(stripTags).forEach(songLines.addLine);\n\n\tsongLines.flagPositionedChords();\n\n\tconst allLines = songLines.asArray();\n\tconst allChords = getAllChordsInSong(allLines);\n\n\treturn {\n\t\tallLines,\n\t\tallChords,\n\t};\n}\n","import _findIndex from 'lodash/findIndex';\nimport _isEqual from 'lodash/isEqual';\nimport _cloneDeep from 'lodash/cloneDeep';\n\nimport { forEachChordInSong } from './helper/songs';\n\n/**\n * @param {SongLine[]} allLines\n * @returns {SongChord[]}\n */\nexport default function getAllChordsInSong(allLines) {\n\tconst allChords = [];\n\tlet i;\n\n\tforEachChordInSong(allLines, (chord) => {\n\t\ti = _findIndex(allChords, (o) => _isEqual(o.model, chord.model));\n\n\t\tif (i === -1) {\n\t\t\tallChords.push({\n\t\t\t\tmodel: _cloneDeep(chord.model),\n\t\t\t\toccurrences: 1,\n\t\t\t});\n\t\t} else {\n\t\t\tallChords[i].occurrences++;\n\t\t}\n\t});\n\n\treturn allChords;\n}\n","export default {\n\tbarRepeat: '%',\n\tbarSeparator: '|',\n\tchordBeat: '.',\n\tchordLineOffsetSpacer: ' ',\n\temptyBeatSpaces: 1,\n\tlyricsSpacer: ' ',\n\tnoChordSymbol: 'NC',\n\tspacesAfterDefault: 2,\n};\n","import lineTypes from '../../../parser/lineTypes';\nimport symbols from '../../symbols';\n\n/**\n * @param {SongLine[]} allLines\n * @returns {Array}\n */\nexport default function getMaxBeatsWidth(allLines) {\n\tconst maxBeatsWidth = [];\n\n\tallLines\n\t\t.filter((line) => line.type === lineTypes.CHORD)\n\t\t.forEach((line) => {\n\t\t\tline.model.allBars.forEach((bar, barIndex) => {\n\t\t\t\tif (!maxBeatsWidth[barIndex]) {\n\t\t\t\t\tmaxBeatsWidth[barIndex] = {};\n\n\t\t\t\t\tfor (let i = 1; i <= bar.timeSignature.beatCount; i++) {\n\t\t\t\t\t\tmaxBeatsWidth[barIndex][i] = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbar.allChords.forEach((chord) => {\n\t\t\t\t\tlet symbolLength = chord.symbol.length;\n\t\t\t\t\tif (bar.shouldPrintChordsDuration) {\n\t\t\t\t\t\tsymbolLength += symbols.chordBeat.repeat(\n\t\t\t\t\t\t\tchord.duration\n\t\t\t\t\t\t).length;\n\t\t\t\t\t}\n\t\t\t\t\tmaxBeatsWidth[barIndex][chord.beat] = Math.max(\n\t\t\t\t\t\tmaxBeatsWidth[barIndex][chord.beat],\n\t\t\t\t\t\tsymbolLength\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\treturn maxBeatsWidth;\n}\n","import _cloneDeep from 'lodash/cloneDeep';\nimport symbols from '../../symbols';\n\nconst allMasks = {\n\t0: {\n\t\t'': [],\n\t},\n\n\t2: {\n\t\t2: [3], // 'A   '\n\t\t11: [3, 2], // 'A   B  ',\n\t},\n\n\t3: {\n\t\t3: [3], // 'A   '\n\t\t12: [2, 4], // 'A  B    '\n\t\t21: [6, 0], // 'A      C'\n\t\t111: [2, 2, 0], // 'A  B  C'\n\t},\n\n\t4: {\n\t\t4: [3], // 'A   ',\n\t\t13: [1, 4], // 'A B    ',\n\t\t22: [3, 2], // 'A   B  ',\n\t\t31: [5, 0], // 'A     B',\n\t\t112: [1, 1, 3], // 'A B C   ',\n\t\t121: [1, 4, 0], // 'A B    C',\n\t\t211: [4, 1, 0], // 'A    B C',\n\t\t1111: [2, 2, 2, 0], // 'A  B  C  D',\n\t},\n};\n\n/**\n * @param {ChordLine} chordLineInput\n */\nexport default function space(chordLineInput) {\n\tconst chordLine = _cloneDeep(chordLineInput);\n\n\tlet beatCount = 0;\n\tlet chordCount = 0;\n\tlet chordPattern = '';\n\tlet chordSpaces = [];\n\n\tchordLine.allBars.forEach((bar) => {\n\t\tbeatCount = 0;\n\t\tchordPattern = '';\n\t\tchordSpaces = [];\n\t\tchordCount = bar.allChords.length;\n\n\t\tbar.allChords.forEach((chord) => {\n\t\t\tchordPattern += chord.duration.toString();\n\t\t\tbeatCount += chord.duration;\n\t\t});\n\n\t\tif (allMasks[beatCount] && allMasks[beatCount][chordPattern]) {\n\t\t\tchordSpaces = allMasks[beatCount][chordPattern];\n\t\t}\n\n\t\tfor (let i = 0; i < chordCount; i++) {\n\t\t\tbar.allChords[i].spacesAfter =\n\t\t\t\ttypeof chordSpaces[i] !== 'undefined'\n\t\t\t\t\t? chordSpaces[i]\n\t\t\t\t\t: symbols.spacesAfterDefault;\n\t\t}\n\t});\n\n\treturn chordLine;\n}\n","import _cloneDeep from 'lodash/cloneDeep';\nimport symbols from '../../symbols';\n\nexport default function space(chordLineInput, maxBeatsWidth) {\n\tconst chordLine = _cloneDeep(chordLineInput);\n\n\tlet beatMaxWidth;\n\n\tchordLine.allBars.forEach((bar, barIndex) => {\n\t\tbar.allChords.forEach((chord) => {\n\t\t\tlet symbolLength = chord.symbol.length;\n\t\t\tif (bar.shouldPrintChordsDuration) {\n\t\t\t\tsymbolLength += symbols.chordBeat.repeat(chord.duration).length;\n\t\t\t}\n\n\t\t\tchord.spacesWithin =\n\t\t\t\tmaxBeatsWidth[barIndex][chord.beat] - symbolLength;\n\t\t\tchord.spacesAfter = 0;\n\n\t\t\tif (chord.beat !== bar.timeSignature.beatCount) {\n\t\t\t\tchord.spacesAfter = symbols.spacesAfterDefault;\n\n\t\t\t\tfor (\n\t\t\t\t\tlet i = chord.beat + 1;\n\t\t\t\t\ti < chord.beat + chord.duration;\n\t\t\t\t\ti++\n\t\t\t\t) {\n\t\t\t\t\tbeatMaxWidth = maxBeatsWidth[barIndex][i];\n\n\t\t\t\t\tchord.spacesAfter += beatMaxWidth\n\t\t\t\t\t\t? beatMaxWidth\n\t\t\t\t\t\t: symbols.emptyBeatSpaces;\n\n\t\t\t\t\tif (i !== bar.timeSignature.beatCount && beatMaxWidth) {\n\t\t\t\t\t\tchord.spacesAfter += symbols.spacesAfterDefault;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\treturn chordLine;\n}\n","import _cloneDeep from 'lodash/cloneDeep';\n\nimport symbols from '../../symbols';\n\nconst chordSpaceAfterDefault = 1;\n\n/**\n * @param {ChordLine} chordLineInput\n * @param {LyricLine} lyricsLineInput\n * @returns {Object}\n */\nexport default function space(chordLineInput, lyricsLineInput) {\n\tconst chordLine = _cloneDeep(chordLineInput);\n\tconst lyricsLine = _cloneDeep(lyricsLineInput);\n\n\tif (hasNoPositionMarkers(lyricsLine)) {\n\t\treturn {\n\t\t\tchordLine,\n\t\t\tlyricsLine,\n\t\t};\n\t}\n\n\tconst tokenizedLyrics = lyricsLine.chordPositions.map(\n\t\t(position, i, allPositions) => {\n\t\t\treturn lyricsLine.lyrics.substring(position, allPositions[i + 1]);\n\t\t}\n\t);\n\tlet spacedLyricsLine = '';\n\n\tlet chordToken;\n\tlet lyricToken;\n\tlet currentBarIndex = 0;\n\n\tchordLine.allBars.forEach((bar, barIndex) => {\n\t\tbar.allChords.forEach((chord, chordIndex) => {\n\t\t\tlyricToken = tokenizedLyrics.shift();\n\n\t\t\tif (lyricToken) {\n\t\t\t\tchordToken = chord.symbol;\n\n\t\t\t\tif (bar.shouldPrintChordsDuration) {\n\t\t\t\t\tchordToken += symbols.chordBeat.repeat(chord.duration);\n\t\t\t\t}\n\n\t\t\t\tif (isFirstChord(barIndex, chordIndex)) {\n\t\t\t\t\tchordToken = symbols.barSeparator + chordToken;\n\t\t\t\t} else if (isNewBar(currentBarIndex, barIndex)) {\n\t\t\t\t\tchordToken = symbols.barSeparator + chordToken;\n\t\t\t\t\tcurrentBarIndex = barIndex;\n\t\t\t\t}\n\n\t\t\t\tif (startsWithSpace(lyricToken)) {\n\t\t\t\t\tlyricToken =\n\t\t\t\t\t\tsymbols.lyricsSpacer.repeat(chordToken.length) +\n\t\t\t\t\t\tlyricToken;\n\t\t\t\t}\n\n\t\t\t\tif (lyricToken.length - chordToken.length > 0) {\n\t\t\t\t\tchord.spacesAfter = lyricToken.length - chordToken.length;\n\t\t\t\t} else {\n\t\t\t\t\tchord.spacesAfter = chordSpaceAfterDefault;\n\t\t\t\t\tconst lyricsSpaceAfter =\n\t\t\t\t\t\tchordToken.length -\n\t\t\t\t\t\tlyricToken.length +\n\t\t\t\t\t\tchordSpaceAfterDefault;\n\t\t\t\t\tlyricToken += symbols.lyricsSpacer.repeat(lyricsSpaceAfter);\n\t\t\t\t}\n\t\t\t\tspacedLyricsLine += lyricToken;\n\t\t\t} else {\n\t\t\t\tchord.spacesAfter = chordSpaceAfterDefault;\n\t\t\t}\n\t\t\tchord.spacesWithin = 0;\n\t\t});\n\t});\n\n\tif (shouldOffsetChordLine(lyricsLine)) {\n\t\tconst chordLineOffset = lyricsLine.chordPositions[0];\n\t\tchordLine.offset = chordLineOffset;\n\t\tspacedLyricsLine =\n\t\t\tlyricsLine.lyrics.substring(0, chordLineOffset) + spacedLyricsLine;\n\t}\n\n\tif (tokenizedLyrics.length) {\n\t\tspacedLyricsLine += tokenizedLyrics.join('');\n\t}\n\tlyricsLine.lyrics = trimEnd(spacedLyricsLine);\n\n\treturn {\n\t\tchordLine,\n\t\tlyricsLine,\n\t};\n}\n\nconst hasNoPositionMarkers = (lyricsLine) =>\n\tlyricsLine.chordPositions.length === 0;\n\nconst shouldOffsetChordLine = (lyricsLine) => lyricsLine.chordPositions[0] > 0;\n\nconst isFirstChord = (barIndex, chordIndex) =>\n\tbarIndex === 0 && chordIndex === 0;\n\nconst isNewBar = (currentBarIndex, barIndex) => currentBarIndex !== barIndex;\n\n// source: https://github.com/es-shims/String.prototype.trimEnd/blob/main/implementation.js\nconst trimEnd = (str) => {\n\tconst endWhitespace =\n\t\t// eslint-disable-next-line max-len,no-control-regex\n\t\t/[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]*$/;\n\treturn str.replace(endWhitespace, '');\n};\n\nconst startsWithSpace = (str) => str.indexOf(' ') === 0;\n","import _isFinite from 'lodash/isFinite';\n\nimport renderChordSymbol from './renderChordSymbol';\nimport barContentTpl from './tpl/barContent.hbs';\n\nconst space = ' ';\n\nconst defaultSpacesWithin = 0;\nconst defaultSpacesAfter = 2;\n\n/**\n * @param {Bar} bar\n * @returns {String} rendered html\n */\nexport default function renderBarContent(bar) {\n\tlet spacesWithin = 0;\n\tlet spacesAfter = 0;\n\n\tconst barContent = bar.allChords.reduce((rendering, chord) => {\n\t\tspacesWithin = _isFinite(chord.spacesWithin)\n\t\t\t? chord.spacesWithin\n\t\t\t: defaultSpacesWithin;\n\t\tspacesAfter = _isFinite(chord.spacesAfter)\n\t\t\t? chord.spacesAfter\n\t\t\t: defaultSpacesAfter;\n\n\t\trendering +=\n\t\t\trenderChordSymbol(chord, bar.shouldPrintChordsDuration) +\n\t\t\tspace.repeat(spacesWithin) +\n\t\t\tspace.repeat(spacesAfter);\n\n\t\treturn rendering;\n\t}, '');\n\n\treturn barContentTpl({ barContent });\n}\n","import chordSymbolTpl from './tpl/chordSymbol.hbs';\nimport symbols from '../symbols';\n\n/**\n * @param {ChordLineChord} chord\n * @param {Boolean} shouldPrintChordsDuration\n * @returns {String} rendered html\n */\nexport default function renderChordSymbol(\n\tchord,\n\tshouldPrintChordsDuration = false\n) {\n\treturn chordSymbolTpl({\n\t\tchordSymbol: chord.symbol,\n\t\tchordDuration: shouldPrintChordsDuration\n\t\t\t? symbols.chordBeat.repeat(chord.duration)\n\t\t\t: false,\n\t});\n}\n","import chordLineTpl from './tpl/chordLine.hbs';\n\nimport renderBarContent from './renderBarContent';\nimport barSeparatorTpl from './tpl/barSeparator.hbs';\nimport symbols from '../symbols';\n\n/**\n * @param {ChordLine} chordLineModel\n * @returns {String} rendered html\n */\nexport default function renderChordLine(chordLineModel) {\n\tconst allBarsRendered = chordLineModel.allBars.map((bar) =>\n\t\trenderBarContent(bar)\n\t);\n\n\tconst barSeparator = barSeparatorTpl({\n\t\tbarSeparator: symbols.barSeparator,\n\t});\n\n\tconst chordLine =\n\t\tbarSeparator + allBarsRendered.join(barSeparator) + barSeparator;\n\n\tconst chordLineOffset = symbols.chordLineOffsetSpacer.repeat(\n\t\tchordLineModel.offset || 0\n\t);\n\n\treturn chordLineTpl({ chordLineOffset, chordLine });\n}\n","import emptyLineTpl from './tpl/emptyLine.hbs';\n\n/**\n * @returns {String} rendered html\n */\nexport default function render() {\n\treturn emptyLineTpl();\n}\n","import lineTpl from './tpl/line.hbs';\n\n/**\n * @param {string} line\n * @param {Boolean} isFromSectionRepeat\n * @param {Boolean} isFromAutoRepeatChords\n * @param {Boolean} isFromChordLineRepeater\n * @param {Boolean} isFromSectionCopy\n * @returns {String} rendered html\n */\nexport default function render(\n\tline,\n\t{\n\t\tisFromSectionRepeat = false,\n\t\tisFromAutoRepeatChords = false,\n\t\tisFromChordLineRepeater = false,\n\t\tisFromSectionCopy = false,\n\t} = {}\n) {\n\tconst lineClasses = ['cmLine'];\n\tif (isFromSectionRepeat) {\n\t\tlineClasses.push('cmLine--isFromSectionRepeat');\n\t}\n\tif (isFromAutoRepeatChords) {\n\t\tlineClasses.push('cmLine--isFromAutoRepeatChords');\n\t}\n\tif (isFromChordLineRepeater) {\n\t\tlineClasses.push('cmLine--isFromChordLineRepeater');\n\t}\n\tif (isFromSectionCopy) {\n\t\tlineClasses.push('cmLine--isFromSectionCopy');\n\t}\n\n\treturn lineTpl({\n\t\tline,\n\t\tlineClasses: lineClasses.join(' '),\n\t});\n}\n","import sectionLabelTpl from './tpl/sectionLabel.hbs';\n\nconst labelsMapping = {\n\ta: 'adlib',\n\tb: 'bridge',\n\tc: 'chorus',\n\ti: 'intro',\n\to: 'outro',\n\tp: 'pre-chorus',\n\ts: 'solo',\n\tu: 'interlude',\n\tv: 'verse',\n};\n\n/**\n * @param {SongSectionLabelLine} sectionLabelLine\n * @param {Boolean} expandSectionRepeats\n * @param {Object} sectionsStats - key = section label, value = section count in song\n * @returns {String} rendered html\n */\nexport default function renderSectionLabel(\n\tsectionLabelLine,\n\t{ expandSectionRepeats = true, sectionsStats = {} } = {}\n) {\n\tconst { model, index, indexWithoutRepeats } = sectionLabelLine;\n\tconst labelRaw = labelsMapping[model.label]\n\t\t? labelsMapping[model.label]\n\t\t: model.label;\n\n\tlet rendered = labelRaw[0].toUpperCase() + labelRaw.substring(1);\n\n\tif (sectionsStats[model.label] > 1) {\n\t\trendered += ' ';\n\t\trendered += expandSectionRepeats ? index : indexWithoutRepeats;\n\t}\n\n\tif (!expandSectionRepeats && model.repeatTimes) {\n\t\trendered += ' x' + model.repeatTimes;\n\t}\n\n\treturn sectionLabelTpl({ sectionLabel: rendered });\n}\n","import lyricLineTpl from './tpl/lyricLine.hbs';\n\n/**\n * @param {SongLyricLine} lyricLine\n * @param {Boolean} alignChordsWithLyrics\n * @param {('all'|'lyrics'|'chords'|'chordsFirstLyricLine')} chordsAndLyricsDisplay\n * @returns {String} rendered html\n */\nexport default function render(\n\tlyricLine,\n\t{ alignChordsWithLyrics = false, chordsAndLyricsDisplay = 'all' } = {}\n) {\n\tconst trimmedLyricLine = shouldTrimLine(\n\t\talignChordsWithLyrics,\n\t\tchordsAndLyricsDisplay\n\t)\n\t\t? lyricLine.model.lyrics.trim()\n\t\t: lyricLine.model.lyrics;\n\treturn lyricLineTpl({ lyricLine: trimmedLyricLine });\n}\n\nconst shouldTrimLine = (alignChordsWithLyrics, chordsAndLyricsDisplay) =>\n\t!alignChordsWithLyrics || chordsAndLyricsDisplay === 'lyrics';\n","import timeSignatureTpl from './tpl/timeSignature.hbs';\n\n/**\n * @param {SongTimeSignatureLine} timeSignatureLine\n * @returns {String} rendered html\n */\nexport default function render(timeSignatureLine) {\n\treturn timeSignatureTpl({ timeSignature: timeSignatureLine.string });\n}\n","import syntax from '../../parser/syntax';\nimport symbols from '../symbols';\nimport { chordRendererFactory } from 'chord-symbol';\n\nconst defaultRenderChord = chordRendererFactory();\n\n/**\n * @param {Chord|String} model\n * @param {Function} renderChord\n * @returns {string}\n */\nexport default function (model, renderChord = defaultRenderChord) {\n\tswitch (model) {\n\t\tcase syntax.noChord:\n\t\t\treturn symbols.noChordSymbol;\n\t\tcase symbols.barRepeat:\n\t\t\treturn symbols.barRepeat;\n\t\tdefault:\n\t\t\treturn renderChord(model);\n\t}\n}\n","import lineTypes from '../../parser/lineTypes';\n\n/**\n * Returns the number of usage of each section label\n *\n * @param {SongSectionLabelLine[]} allLines\n * @returns {Object} key = label, value = number of usage\n */\nexport default function getSectionsStats(allLines) {\n\tconst stats = {};\n\n\tallLines\n\t\t.filter((line) => line.type === lineTypes.SECTION_LABEL)\n\t\t.forEach((line) => {\n\t\t\tif (!stats[line.model.label]) {\n\t\t\t\tstats[line.model.label] = 1;\n\t\t\t} else {\n\t\t\t\tstats[line.model.label]++;\n\t\t\t}\n\t\t});\n\n\treturn stats;\n}\n","import syntax from '../../parser/syntax';\n\n/**\n * Returns the most used accidental of a song.\n *\n * @param {SongChord[]} allChords\n * @returns {('flat'|'sharp')}\n */\nexport default function getMainAccidental(allChords) {\n\tlet rootNote = '';\n\tlet flatCount = 0;\n\tlet sharpCount = 0;\n\n\tallChords\n\t\t.filter((chord) => chord.model !== syntax.noChord)\n\t\t.forEach((chord) => {\n\t\t\trootNote = chord.model.formatted.rootNote;\n\n\t\t\tif (rootNote.length === 2) {\n\t\t\t\tlet accidental = rootNote[1];\n\n\t\t\t\tif (accidental === 'b') {\n\t\t\t\t\tflatCount += chord.occurrences;\n\t\t\t\t} else {\n\t\t\t\t\tsharpCount += chord.occurrences;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\treturn flatCount > sharpCount ? 'flat' : 'sharp';\n}\n","import lineTypes from '../parser/lineTypes';\nimport symbols from './symbols';\n\nconst replaceRepeatedBars = (line, { alignChordsWithLyrics }) => {\n\tif (line.type === lineTypes.CHORD) {\n\t\tline.model.allBars.forEach((bar) => {\n\t\t\tif (shouldReplaceWithBarRepeat(line, bar, alignChordsWithLyrics)) {\n\t\t\t\tbar.allChords = [\n\t\t\t\t\t{\n\t\t\t\t\t\tstring: symbols.barRepeat,\n\t\t\t\t\t\tmodel: symbols.barRepeat,\n\t\t\t\t\t\tsymbol: symbols.barRepeat,\n\t\t\t\t\t\tduration: bar.timeSignature.beatCount,\n\t\t\t\t\t\tbeat: 1,\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}\n\t\t});\n\t}\n\n\treturn line;\n};\n\nconst shouldReplaceWithBarRepeat = (line, bar, alignChordsWithLyrics) => {\n\treturn (\n\t\tbar.isRepeated &&\n\t\t!barHasMultiplePositionedChords(line, bar, alignChordsWithLyrics)\n\t);\n};\n\nconst barHasMultiplePositionedChords = (line, bar, alignChordsWithLyrics) => {\n\treturn (\n\t\talignChordsWithLyrics &&\n\t\tline.model.hasPositionedChords &&\n\t\tbar.allChords.length > 1 &&\n\t\tbar.allChords.some((chord) => chord.isPositioned)\n\t);\n};\n\nexport default replaceRepeatedBars;\n","import {\n\trenderSong as renderSongCm,\n\tparseSong,\n} from '../../../chord-mark/src/chordMark';\n\nexport default function renderSong(songTxt, renderOptions) {\n\tconst parsed = parseSong(songTxt);\n\treturn renderSongCm(parsed, {\n\t\t...renderOptions,\n\t\tprintChordsDuration: 'uneven',\n\t});\n}\n","import getMaxBeatsWidth from '../spacers/chord/getMaxBeatsWidth';\n\nimport simpleChordSpacer from '../spacers/chord/simple';\nimport alignedChordSpacer from '../spacers/chord/aligned';\nimport chordLyricsSpacer from '../spacers/chord/chordLyrics';\n\nimport { forEachChordInSong } from '../../parser/helper/songs';\n\nimport renderChordLineModel from './renderChordLine';\nimport renderEmptyLine from './renderEmptyLine';\nimport renderLine from './renderLine';\nimport renderSectionLabel from './renderSectionLabel';\nimport renderLyricLine from './renderLyricLine';\nimport renderTimeSignature from './renderTimeSignature';\n\nimport songTpl from './tpl/song.hbs';\nimport getChordSymbol from '../helpers/getChordSymbol';\nimport getSectionsStats from '../helpers/getSectionsStats';\nimport getMainAccidental from '../helpers/getMainAccidental';\n\nimport { chordRendererFactory } from 'chord-symbol';\n\nimport lineTypes from '../../parser/lineTypes';\nimport replaceRepeatedBars from '../replaceRepeatedBars';\n\n/**\n * @param {Song} parsedSong\n * @param {Boolean} alignBars\n * @param {Boolean} alignChordsWithLyrics\n * @param {('all'|'lyrics'|'chords'|'chordsFirstLyricLine')} chordsAndLyricsDisplay\n * @param {Number} transposeValue\n * @param {('auto'|'flat'|'sharp')} accidentalsType\n * @param {Boolean} harmonizeAccidentals\n * @param {Boolean} expandSectionRepeats\n * @param {Boolean} autoRepeatChords\n * @param {Boolean|('none'|'max'|'core')} simplifyChords\n * @param {Boolean} useShortNamings\n * @param {('never'|'uneven'|'always')} printChordsDuration\n * @returns {String} rendered HTML\n */\n// eslint-disable-next-line max-lines-per-function\nexport default function renderSong(\n\tparsedSong,\n\t{\n\t\talignBars = false,\n\t\talignChordsWithLyrics = false,\n\t\tchordsAndLyricsDisplay = 'all',\n\t\ttransposeValue = 0,\n\t\taccidentalsType = 'auto',\n\t\tharmonizeAccidentals = true,\n\t\texpandSectionRepeats = true,\n\t\tautoRepeatChords = true,\n\t\tsimplifyChords = 'none',\n\t\tuseShortNamings = true,\n\t\tprintChordsDuration = 'never',\n\t} = {}\n) {\n\tlet { allLines, allChords } = parsedSong;\n\n\tlet shouldSkipRepeatedSectionLine = false;\n\tlet isFirstLyricLineOfSection = false;\n\n\tallLines = renderChords()\n\t\t.map(addPrintChordsDurationsFlag)\n\t\t.filter(shouldRenderLine)\n\t\t.map((line) => {\n\t\t\treturn replaceRepeatedBars(line, { alignChordsWithLyrics });\n\t\t});\n\n\tconst sectionsStats = getSectionsStats(allLines);\n\tconst maxBeatsWidth = getMaxBeatsWidth(allLines);\n\n\tconst song = renderAllLines().join('\\n');\n\n\treturn songTpl({ song });\n\n\tfunction renderChords() {\n\t\tconst accidental =\n\t\t\taccidentalsType === 'auto'\n\t\t\t\t? getMainAccidental(allChords)\n\t\t\t\t: accidentalsType;\n\n\t\tconst renderChord = chordRendererFactory({\n\t\t\tsimplify: simplifyChords,\n\t\t\tuseShortNamings,\n\t\t\ttransposeValue,\n\t\t\tharmonizeAccidentals,\n\t\t\tuseFlats: accidental === 'flat',\n\t\t});\n\n\t\treturn forEachChordInSong(allLines, (chord) => {\n\t\t\tchord.symbol = getChordSymbol(chord.model, renderChord);\n\t\t});\n\t}\n\n\tfunction addPrintChordsDurationsFlag(line) {\n\t\tif (line.type === lineTypes.CHORD) {\n\t\t\tline.model.allBars.forEach((bar) => {\n\t\t\t\tbar.shouldPrintChordsDuration = shouldPrintChordsDuration(bar);\n\t\t\t});\n\t\t}\n\t\treturn line;\n\t}\n\n\tfunction shouldPrintChordsDuration(bar) {\n\t\treturn (\n\t\t\tbar.allChords.length > 1 &&\n\t\t\t((printChordsDuration === 'uneven' &&\n\t\t\t\tbar.hasUnevenChordsDurations) ||\n\t\t\t\tprintChordsDuration === 'always')\n\t\t);\n\t}\n\n\tfunction shouldRenderLine(line) {\n\t\treturn shouldRepeatLines(line) && !isFiltered(line);\n\t}\n\n\tfunction shouldRepeatLines(line) {\n\t\tif (line.type === lineTypes.SECTION_LABEL) {\n\t\t\tshouldSkipRepeatedSectionLine =\n\t\t\t\tline.isFromSectionRepeat === true && !expandSectionRepeats;\n\t\t}\n\t\tconst shouldSkipAutoRepeatChordLine =\n\t\t\tline.isFromAutoRepeatChords && !autoRepeatChords;\n\n\t\treturn !shouldSkipRepeatedSectionLine && !shouldSkipAutoRepeatChordLine;\n\t}\n\n\tfunction isFiltered(line) {\n\t\tif (chordsAndLyricsDisplay === 'chordsFirstLyricLine') {\n\t\t\tif (line.type === lineTypes.SECTION_LABEL) {\n\t\t\t\tisFirstLyricLineOfSection = true;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (isFirstLyricLineOfSection && line.type === lineTypes.LYRIC) {\n\t\t\t\tisFirstLyricLineOfSection = false;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t(['chords', 'chordsFirstLyricLine'].includes(\n\t\t\t\tchordsAndLyricsDisplay\n\t\t\t) &&\n\t\t\t\tline.type === lineTypes.LYRIC) ||\n\t\t\t(chordsAndLyricsDisplay === 'lyrics' &&\n\t\t\t\tline.type === lineTypes.CHORD)\n\t\t);\n\t}\n\n\tfunction renderAllLines() {\n\t\treturn allLines\n\t\t\t.map((line, lineIndex, allFilteredLines) => {\n\t\t\t\tlet rendered;\n\n\t\t\t\tif (line.type === lineTypes.CHORD) {\n\t\t\t\t\tlet spaced = alignBars\n\t\t\t\t\t\t? alignedChordSpacer(line.model, maxBeatsWidth)\n\t\t\t\t\t\t: simpleChordSpacer(line.model);\n\n\t\t\t\t\tconst nextLine = allFilteredLines[lineIndex + 1];\n\t\t\t\t\tif (shouldAlignChords(line)) {\n\t\t\t\t\t\tconst { chordLine, lyricsLine } = chordLyricsSpacer(\n\t\t\t\t\t\t\tspaced,\n\t\t\t\t\t\t\tnextLine.model\n\t\t\t\t\t\t);\n\t\t\t\t\t\tallFilteredLines[lineIndex + 1].model = lyricsLine;\n\t\t\t\t\t\tspaced = chordLine;\n\t\t\t\t\t}\n\n\t\t\t\t\trendered = renderChordLineModel(spaced);\n\t\t\t\t} else if (line.type === lineTypes.EMPTY_LINE) {\n\t\t\t\t\trendered = renderEmptyLine();\n\t\t\t\t} else if (line.type === lineTypes.SECTION_LABEL) {\n\t\t\t\t\trendered = renderSectionLabel(line, {\n\t\t\t\t\t\tsectionsStats,\n\t\t\t\t\t\texpandSectionRepeats,\n\t\t\t\t\t});\n\t\t\t\t} else if (line.type === lineTypes.TIME_SIGNATURE) {\n\t\t\t\t\trendered = renderTimeSignature(line);\n\t\t\t\t} else {\n\t\t\t\t\trendered = renderLyricLine(line, {\n\t\t\t\t\t\talignChordsWithLyrics,\n\t\t\t\t\t\tchordsAndLyricsDisplay,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn renderLine(rendered, {\n\t\t\t\t\tisFromSectionRepeat: line.isFromSectionRepeat,\n\t\t\t\t\tisFromAutoRepeatChords: line.isFromAutoRepeatChords,\n\t\t\t\t\tisFromChordLineRepeater: line.isFromChordLineRepeater,\n\t\t\t\t\tisFromSectionCopy: line.isFromSectionCopy,\n\t\t\t\t});\n\t\t\t})\n\t\t\t.filter(Boolean);\n\t}\n\n\tfunction shouldAlignChords(line) {\n\t\treturn (\n\t\t\tchordsAndLyricsDisplay === 'all' &&\n\t\t\talignChordsWithLyrics &&\n\t\t\tline.model.hasPositionedChords\n\t\t);\n\t}\n}\n","import './SongRenderer.scss';\n\nimport _pick from 'lodash/pick';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport escapeHTML from '../../core/escapeHTML';\n\nimport renderSong from '../../core/renderSong';\n\nfunction SongRenderer(props) {\n\tconst { content } = props;\n\n\tconst renderOptions = _pick(props, [\n\t\t'alignBars',\n\t\t'chordsAndLyricsDisplay',\n\t\t'alignChordsWithLyrics',\n\t\t'harmonizeAccidentals',\n\t\t'accidentalsType',\n\t\t'transposeValue',\n\t\t'autoRepeatChords',\n\t\t'expandSectionRepeats',\n\t\t'useShortNamings',\n\t\t'simplifyChords',\n\t]);\n\n\treturn (\n\t\t<div className={'songRenderer'}>\n\t\t\t<div\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: escapeHTML(renderSong(content, renderOptions)),\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nSongRenderer.propTypes = {\n\tcontent: PropTypes.string,\n};\n\nSongRenderer.defaultProps = {\n\tcontent: '',\n};\n\nexport default SongRenderer;\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../db/options/selectors';\n\nimport SongRenderer from '../_components/SongRenderer';\n\nexport default connect((state) => ({\n\taccidentalsType: getOptionValue(state, 'rendering', 'preferredAccidentals'),\n\talignBars: getOptionValue(state, 'rendering', 'alignBars'),\n\tchordsAndLyricsDisplay: getOptionValue(\n\t\tstate,\n\t\t'rendering',\n\t\t'chordsAndLyricsDisplay'\n\t),\n\talignChordsWithLyrics: getOptionValue(\n\t\tstate,\n\t\t'rendering',\n\t\t'alignChordsWithLyrics'\n\t),\n\tharmonizeAccidentals: getOptionValue(\n\t\tstate,\n\t\t'rendering',\n\t\t'harmonizeAccidentals'\n\t),\n\ttransposeValue: getOptionValue(state, 'rendering', 'transposeValue'),\n\tautoRepeatChords: getOptionValue(state, 'rendering', 'autoRepeatChords'),\n\texpandSectionRepeats: getOptionValue(\n\t\tstate,\n\t\t'rendering',\n\t\t'expandSectionRepeats'\n\t),\n\tuseShortNamings: getOptionValue(state, 'rendering', 'useShortNamings'),\n\tsimplifyChords: getOptionValue(state, 'rendering', 'simplifyChords'),\n}))(SongRenderer);\n","import './EditorPreview.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport SongRenderer from '../../_containers/SongRenderer';\n\nfunction EditorPreview(props) {\n\tconst { selectedFile } = props;\n\n\tconst classNames = ['editorPreview'];\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<SongRenderer content={selectedFile.content} />\n\t\t</div>\n\t);\n}\n\nEditorPreview.propTypes = {\n\tselectedFile: PropTypes.object.isRequired,\n};\n\nexport default EditorPreview;\n","import { connect } from 'react-redux';\n\n//import { getOptionValue } from '../../../db/options/selectors';\n\nimport EditorPreview from '../_components/EditorPreview';\n\nexport default connect(() => ({}))(EditorPreview);\n","import { Schema } from 'prosemirror-model';\nimport { nodes, marks } from 'prosemirror-schema-basic';\n\nconst editorSchema = new Schema({\n\tnodes: nodes,\n\tmarks: marks,\n});\n\nexport default editorSchema;\n","/**\n * Convert a proseMirror state to plain text\n */\nexport default function stateToText(state) {\n\tconst json = state.toJSON();\n\n\treturn json.doc.content\n\t\t.map((paragraph) => {\n\t\t\tif (!paragraph.content) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn paragraph.content.reduce((acc, current) => {\n\t\t\t\tacc += current.text;\n\t\t\t\treturn acc;\n\t\t\t}, '');\n\t\t})\n\t\t.join('\\n');\n}\n","import domPurify from 'dompurify';\n\n/**\n * Minimal wrapper around DOMPurify library.\n * Pretty drastic also: anything that is HTML is just simply ignored, including text content of tags.\n *\n * @param {String} dirty\n * @returns {String} clean HTML\n */\nexport default function toSafeHtml(dirty) {\n\tconst config = {\n\t\tALLOWED_TAGS: ['p', '#text'],\n\t\tKEEP_CONTENT: false,\n\t};\n\n\treturn domPurify.sanitize(dirty, config);\n}\n","import './ProsemirrorEditorView.scss';\n\nimport React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { EditorState } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { DOMParser as pmDOMParser } from 'prosemirror-model';\n\nimport getPlugins from './getPlugins';\nimport editorSchema from './schema';\n\nimport stateToText from './converters/stateToText';\nimport textToDom from './converters/textToDom';\n\nimport 'prosemirror-view/style/prosemirror.css';\n\nfunction createEditorState(editorContent) {\n\treturn EditorState.create({\n\t\tdoc: pmDOMParser\n\t\t\t.fromSchema(editorSchema)\n\t\t\t.parse(textToDom(editorContent), { preserveWhitespace: 'full' }),\n\t\tplugins: getPlugins(),\n\t});\n}\n\nfunction createEditorView(editorState, updateFile, fileId) {\n\treturn new EditorView(null, {\n\t\tstate: editorState,\n\t\tdispatchTransaction: function dispatchTransaction(transaction) {\n\t\t\tconst { state, transactions } =\n\t\t\t\tthis.state.applyTransaction(transaction);\n\n\t\t\tthis.updateState(state);\n\n\t\t\tif (transactions.some((tr) => tr.docChanged)) {\n\t\t\t\tupdateFile(fileId, { content: stateToText(state) });\n\t\t\t}\n\t\t},\n\t});\n}\n\nfunction ProseMirrorEditorView(props) {\n\tconst { selectedFileId, editorContent, updateFile } = props;\n\n\tconst editorView = useRef();\n\tconst editorDom = useRef();\n\tconst previousFileId = usePrevious(selectedFileId);\n\n\t/**\n\t * Editor is recreated on component mount and on file change.\n\t * The later is needed as we need to to re-bind the change handler with the new file id.\n\t */\n\tfunction shouldCreateEditor() {\n\t\treturn (\n\t\t\tselectedFileId &&\n\t\t\t(!editorView.current || previousFileId !== selectedFileId)\n\t\t);\n\t}\n\n\t// Editor has been previously created, but now no file is selected anymore\n\tfunction isEditorOrphan() {\n\t\treturn editorExists() && !selectedFileId;\n\t}\n\n\tfunction editorExists() {\n\t\treturn editorView.current && editorView.current.dom.parentNode;\n\t}\n\n\tfunction destroyEditor() {\n\t\teditorView.current.dom.parentNode.removeChild(editorView.current.dom);\n\t}\n\n\tuseEffect(() => {\n\t\tif (shouldCreateEditor()) {\n\t\t\tif (editorExists()) {\n\t\t\t\tdestroyEditor();\n\t\t\t}\n\n\t\t\tconst editorState = createEditorState(editorContent);\n\t\t\teditorView.current = createEditorView(\n\t\t\t\teditorState,\n\t\t\t\tupdateFile,\n\t\t\t\tselectedFileId\n\t\t\t);\n\t\t\teditorDom.current.appendChild(editorView.current.dom);\n\n\t\t\t// expose editor instance as a component property for unit tests\n\t\t\tProseMirrorEditorView.editorView = editorView.current;\n\t\t} else if (isEditorOrphan()) {\n\t\t\tdestroyEditor();\n\t\t}\n\t});\n\n\treturn <div className={'prosemirrorWrapper'} ref={editorDom} />;\n}\n\nProseMirrorEditorView.defaultProps = {\n\tselectedFileId: '',\n\teditorContent: '',\n};\n\nProseMirrorEditorView.propTypes = {\n\tselectedFileId: PropTypes.string,\n\teditorContent: PropTypes.string,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default ProseMirrorEditorView;\n\n// @see https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\nfunction usePrevious(value) {\n\tconst ref = useRef();\n\tuseEffect(() => {\n\t\tref.current = value;\n\t});\n\treturn ref.current;\n}\n","import escapeHTML from './toSafeHtml';\n\n/**\n * @param {String} text\n * @returns {HTMLElement}\n */\nexport default function textToDom(text) {\n\tconst html = escapeHTML(text)\n\t\t.split('\\n')\n\t\t.map((line) => `<p>${line}</p>`)\n\t\t.join('');\n\n\tconst div = document.createElement('div');\n\tdiv.innerHTML = escapeHTML(html);\n\n\treturn div;\n}\n","import { keymap } from 'prosemirror-keymap';\nimport { baseKeymap } from 'prosemirror-commands';\nimport { undo, redo, history as pmHistory } from 'prosemirror-history';\n\nexport default function getPlugins() {\n\treturn [\n\t\tpmHistory(),\n\t\tkeymap({ 'Mod-z': undo, 'Mod-y': redo }),\n\t\tkeymap(baseKeymap),\n\t];\n}\n","import './EditorLayout.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport EditorPreview from '../../../songRenderers/editorPreview/_containers/EditorPreview';\nimport ProseMirrorEditorView from '../prosemirror/ProsemirrorEditorView';\n\nfunction EditorLayout(props) {\n\tconst { selectedFile, updateFile } = props;\n\n\treturn (\n\t\t<div className={'songEditor'}>\n\t\t\t<div className={'songEditor-source'}>\n\t\t\t\t<ProseMirrorEditorView\n\t\t\t\t\teditorContent={selectedFile.content}\n\t\t\t\t\tupdateFile={updateFile}\n\t\t\t\t\tselectedFileId={selectedFile.id}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={'songEditor-preview'}>\n\t\t\t\t<EditorPreview selectedFile={selectedFile} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nEditorLayout.propTypes = {\n\tselectedFile: PropTypes.object,\n\tupdateFile: PropTypes.func.isRequired,\n};\n\nexport default EditorLayout;\n","import './ExportPreview.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport SongRenderer from '../../_containers/SongRenderer';\n\nfunction ExportPreview(props) {\n\tconst { selectedFile } = props;\n\n\treturn (\n\t\t<div className={'exportPreview exp-SongRenderer'}>\n\t\t\t<SongRenderer content={selectedFile.content} />\n\t\t</div>\n\t);\n}\n\nExportPreview.propTypes = {\n\tselectedFile: PropTypes.object.isRequired,\n};\n\nexport default ExportPreview;\n","import './PlayRenderer.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport SongRenderer from '../../_containers/SongRenderer';\n\nfunction PlayRenderer(props) {\n\tconst {\n\t\tselectedFile,\n\t\tfontSize,\n\t\tchordsColor,\n\t\thighlightChords,\n\t\tcolumnsCount,\n\t} = props;\n\n\tconst classNames = ['playRenderer'];\n\tclassNames.push('playRenderer--columns-' + columnsCount);\n\tclassNames.push('cmLine--fontSize' + fontSize);\n\tclassNames.push('cmChordSymbol--chordsColor-' + chordsColor);\n\tif (highlightChords) {\n\t\tclassNames.push('cmChordLine--highlightChords');\n\t}\n\n\treturn (\n\t\t<div className={'playRendererWrapper1'}>\n\t\t\t<div className={'playRendererWrapper2'}>\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames.join(' ')}\n\t\t\t\t\tdata-testid={'playRenderer'}\n\t\t\t\t>\n\t\t\t\t\t<SongRenderer content={selectedFile.content} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nPlayRenderer.propTypes = {\n\tselectedFile: PropTypes.object.isRequired,\n\tcolumnsCount: PropTypes.number.isRequired,\n\tfontSize: PropTypes.number.isRequired,\n\tchordsColor: PropTypes.string.isRequired,\n\thighlightChords: PropTypes.bool.isRequired,\n};\n\nexport default PlayRenderer;\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../../db/options/selectors';\n\nimport PlayRenderer from '../_components/PlayRenderer';\n\nexport default connect((state) => ({\n\tchordsColor: getOptionValue(state, 'rendering', 'chordsColor'),\n\thighlightChords: getOptionValue(state, 'rendering', 'highlightChords'),\n\tfontSize: getOptionValue(state, 'rendering', 'fontSize'),\n\tcolumnsCount: getOptionValue(state, 'rendering', 'columnsCount'),\n}))(PlayRenderer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport escapeHTML from '../../../core/escapeHTML';\n\nfunction Page(props) {\n\tconst {\n\t\tpageHeader,\n\t\tallColumnsLines,\n\t\tdocumentSize,\n\t\tdocumentMargins,\n\t\tprintFontSize,\n\t} = props;\n\n\tconst allSectionsRendered = allColumnsLines.map((columnLines, index) => {\n\t\tconst columnLinesTxt = columnLines.join('\\n');\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tkey={index}\n\t\t\t\tclassName={'printPreview-pageColumn'}\n\t\t\t\tdata-testid={'printPreview-pageColumn'}\n\t\t\t\tdangerouslySetInnerHTML={{ __html: escapeHTML(columnLinesTxt) }}\n\t\t\t/>\n\t\t);\n\t});\n\n\tconst pageClasses = ['printPreview-page'];\n\tpageClasses.push('printPreview-page--' + documentSize);\n\tpageClasses.push('printPreview-page--font' + printFontSize);\n\n\tconst pageContentWrapperClasses = ['printPreview-pageContentWrapper'];\n\tpageContentWrapperClasses.push(\n\t\t'printPreview-pageContentWrapper--padding' + documentMargins\n\t);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={pageClasses.join(' ')}\n\t\t\tdata-testid={'printPreview-page'}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={pageContentWrapperClasses.join(' ')}\n\t\t\t\tdata-testid={'printPreview-pageContentWrapper'}\n\t\t\t>\n\t\t\t\t<div className={'printPreview-pageContent'}>\n\t\t\t\t\t{pageHeader}\n\t\t\t\t\t<div className={'printPreview-pageColumnWrapper'}>\n\t\t\t\t\t\t{allSectionsRendered}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\nPage.defaultProps = {\n\tallColumnsLines: [],\n};\nPage.propTypes = {\n\tpageHeader: PropTypes.element,\n\tallColumnsLines: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)),\n\tdocumentSize: PropTypes.string.isRequired,\n\tdocumentMargins: PropTypes.number.isRequired,\n\tprintFontSize: PropTypes.number.isRequired,\n};\n\nexport default React.memo(Page);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction PageHeader(props) {\n\tconst { title } = props;\n\n\treturn <div className={'printPreview-pageHeader'}>{title}</div>;\n}\nPageHeader.defaultProps = {\n\tallColumnsLines: [],\n};\nPageHeader.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n};\n\nexport default React.memo(PageHeader);\n","const cssClasses = {\n\temptyLine: 'cmEmptyLine',\n\tchordLine: 'cmChordLine',\n\ttextLine: 'cmTextLine',\n};\n\n/**\n * @param {Object[]} allLinesWithHeight\n * @param {String} allLinesWithHeight.content\n * @param {Number} allLinesWithHeight.height\n * @param {Number} columnsCount\n * @param {Number} firstPageHeight\n * @param {Number} normalPageHeight\n * @param {Boolean} columnBreakOnParagraph\n * @param {Boolean} noEmptyLinesOnColumnStart\n * @param {Boolean} noOrphanTextLine\n * @returns {Array} array of pages, as array of columns\n */\nexport default function mapLinesToColumns(\n\tallLinesWithHeight,\n\t{\n\t\tcolumnsCount,\n\t\tfirstPageHeight,\n\t\tnormalPageHeight,\n\t\tcolumnBreakOnParagraph,\n\t\tnoEmptyLinesOnColumnStart = true,\n\t\tnoOrphanTextLine = true,\n\t}\n) {\n\tconst layout = layoutFactory({\n\t\tcolumnsCount,\n\t\tfirstPageHeight,\n\t\tnormalPageHeight,\n\t\tnoEmptyLinesOnColumnStart,\n\t});\n\n\tlet buffer = [];\n\tlet bufferHeight = 0;\n\n\tconst pageHeight = firstPageHeight || normalPageHeight;\n\n\tif (pageHeight > 0) {\n\t\tallLinesWithHeight.forEach((line, lineIndex) => {\n\t\t\tif (\n\t\t\t\tshouldRenderLine(\n\t\t\t\t\tlayout,\n\t\t\t\t\tline,\n\t\t\t\t\tbuffer,\n\t\t\t\t\tnoEmptyLinesOnColumnStart\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tbuffer.push(line);\n\t\t\t\tbufferHeight += line.height;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tbuffer.length > 0 &&\n\t\t\t\tisBreakable(line, allLinesWithHeight[lineIndex + 1], {\n\t\t\t\t\tnoOrphanTextLine,\n\t\t\t\t\tcolumnBreakOnParagraph,\n\t\t\t\t})\n\t\t\t) {\n\t\t\t\tif (layout.fitsOnCurrentColumn(bufferHeight)) {\n\t\t\t\t\tlayout.insert(buffer);\n\t\t\t\t} else if (layout.fitsOnNextColumn(bufferHeight)) {\n\t\t\t\t\tlayout.insertOnNextColumn(buffer);\n\t\t\t\t} else {\n\t\t\t\t\tlayout.insert(buffer);\n\t\t\t\t}\n\t\t\t\tbuffer = [];\n\t\t\t\tbufferHeight = 0;\n\t\t\t}\n\t\t});\n\t}\n\treturn layout.get();\n}\n\n/**\n * Try to spot the case where the line is empty and would be rendered as the first line\n * of the next column, which we may want to avoid\n */\nfunction shouldRenderLine(layout, line, buffer, noEmptyLinesOnColumnStart) {\n\treturn !(\n\t\tisEmptyLine(line) &&\n\t\t!layout.fitsOnCurrentColumn(line.height) &&\n\t\tbuffer.length === 0 &&\n\t\tnoEmptyLinesOnColumnStart === true\n\t);\n}\n\nfunction isBreakable(\n\tcurrentLine,\n\tnextLine,\n\t{ noOrphanTextLine, columnBreakOnParagraph }\n) {\n\tif (isEmptyLine(currentLine) || !nextLine) {\n\t\treturn true;\n\t}\n\n\tconst wouldProduceOrphanTextLine =\n\t\tisChordLine(currentLine) && isTextLine(nextLine);\n\tif (noOrphanTextLine === true && wouldProduceOrphanTextLine) {\n\t\treturn false;\n\t}\n\n\tconst isEndOfParagraph = isEmptyLine(nextLine);\n\tif (columnBreakOnParagraph === true && !isEndOfParagraph) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction isEmptyLine(line) {\n\treturn hasClass(line.content, cssClasses.emptyLine);\n}\n\nfunction isChordLine(line) {\n\treturn hasClass(line.content, cssClasses.chordLine);\n}\n\nfunction isTextLine(line) {\n\treturn hasClass(line.content, cssClasses.textLine);\n}\n\nfunction hasClass(line, className) {\n\treturn line.indexOf(className) > -1;\n}\n\nfunction layoutFactory({ firstPageHeight, normalPageHeight, columnsCount }) {\n\tconst allPagesColumns = [];\n\n\tlet pageIndex = 0;\n\tlet columnIndex = 0;\n\tlet maxColumnHeight = getMaxColumnHeight();\n\tlet currentColumnHeight = 0;\n\n\tallPagesColumns[pageIndex] = [];\n\tallPagesColumns[pageIndex][columnIndex] = [];\n\n\tfunction flushBuffer(buffer) {\n\t\tbuffer.forEach((line) => {\n\t\t\tif (shouldChangeColumn(currentColumnHeight + line.height)) {\n\t\t\t\tchangeColumn();\n\t\t\t}\n\t\t\tallPagesColumns[pageIndex][columnIndex].push(line.content);\n\t\t\tcurrentColumnHeight += line.height;\n\t\t});\n\t}\n\n\tfunction getMaxColumnHeight() {\n\t\treturn pageIndex === 0 && firstPageHeight\n\t\t\t? firstPageHeight\n\t\t\t: normalPageHeight;\n\t}\n\n\tfunction shouldChangeColumn(nextHeight) {\n\t\treturn nextHeight > maxColumnHeight;\n\t}\n\n\tfunction changeColumn() {\n\t\tif (shouldChangePage()) {\n\t\t\tpageIndex++;\n\t\t\tallPagesColumns[pageIndex] = [];\n\t\t\tcolumnIndex = 0;\n\t\t} else {\n\t\t\tcolumnIndex++;\n\t\t}\n\t\tallPagesColumns[pageIndex][columnIndex] = [];\n\t\tcurrentColumnHeight = 0;\n\t\tmaxColumnHeight = getMaxColumnHeight();\n\t}\n\n\tfunction shouldChangePage() {\n\t\treturn columnIndex === columnsCount - 1;\n\t}\n\n\treturn {\n\t\tinsert(buffer) {\n\t\t\tflushBuffer(buffer);\n\t\t},\n\n\t\tinsertOnNextColumn(buffer) {\n\t\t\tchangeColumn();\n\t\t\tflushBuffer(buffer);\n\t\t},\n\n\t\tfitsOnCurrentColumn(bufferHeight) {\n\t\t\treturn currentColumnHeight + bufferHeight <= maxColumnHeight;\n\t\t},\n\n\t\tfitsOnNextColumn(bufferHeight) {\n\t\t\tconst nextColumnHeight =\n\t\t\t\tpageIndex === 0 && columnIndex < columnsCount && firstPageHeight\n\t\t\t\t\t? firstPageHeight\n\t\t\t\t\t: normalPageHeight;\n\t\t\treturn bufferHeight <= nextColumnHeight;\n\t\t},\n\n\t\tget() {\n\t\t\treturn allPagesColumns;\n\t\t},\n\t};\n}\n","import './getDimensionsFromDom.scss';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nexport default function getDimensionsFromDom(component, measuringFn) {\n\tconst container = document.createElement('div');\n\tcontainer.classList.add('measuring-node');\n\tdocument.body.appendChild(container);\n\n\treturn new Promise((resolve) => {\n\t\tReactDOM.render(<div>{component}</div>, container, () => {\n\t\t\tconst measure = measuringFn(container);\n\n\t\t\tReactDOM.unmountComponentAtNode(container);\n\t\t\tcontainer.parentNode.removeChild(container);\n\n\t\t\tresolve(measure);\n\t\t});\n\t});\n}\n","export default function padColumns(columnCount, allColumns = []) {\n\tfor (let i = allColumns.length || 0; i < columnCount; i++) {\n\t\tallColumns.push([]);\n\t}\n\treturn allColumns;\n}\n","export function getOffsetHeight(element) {\n\treturn element.offsetHeight;\n}\n\nexport function getClientHeight(element) {\n\treturn element.clientHeight;\n}\n","import React from 'react';\n\nimport getDimensionsFromDom from './getDimensionsFromDom';\nimport padColumns from './padColumns';\nimport { getOffsetHeight } from './element';\n\nimport Page from '../_components/Page';\n\nconst cssSelectors = {\n\tline: '.cmLine',\n};\n\nexport default async function getAllLinesHeight(\n\tallLines,\n\t{ columnsCount, documentSize, documentMargins, printFontSize }\n) {\n\tconst component = (\n\t\t<div className={'printPreview'}>\n\t\t\t<Page\n\t\t\t\tallColumnsLines={padColumns(columnsCount, [allLines])}\n\t\t\t\tcolumnsCount={columnsCount}\n\t\t\t\tdocumentSize={documentSize}\n\t\t\t\tdocumentMargins={documentMargins}\n\t\t\t\tprintFontSize={printFontSize}\n\t\t\t/>\n\t\t</div>\n\t);\n\n\tconst measuringFn = (container) => {\n\t\tconst allLinesHeight = [];\n\t\tcontainer.querySelectorAll(cssSelectors.line).forEach((line) => {\n\t\t\tallLinesHeight.push(getOffsetHeight(line));\n\t\t});\n\t\treturn allLinesHeight;\n\t};\n\n\treturn await getDimensionsFromDom(component, measuringFn);\n}\n","import React from 'react';\n\nimport getDimensionsFromDom from './getDimensionsFromDom';\nimport padColumns from './padColumns';\nimport { getClientHeight } from './element';\n\nimport Page from '../_components/Page';\nimport PageHeader from '../_components/PageHeader';\n\nexport default async function getAllLinesHeight(\n\ttitle,\n\t{ columnsCount, documentSize, documentMargins, printFontSize }\n) {\n\tconst component = (\n\t\t<Page\n\t\t\tpageHeader={<PageHeader title={title} />}\n\t\t\tallColumnsLines={padColumns(columnsCount)}\n\t\t\tdocumentSize={documentSize}\n\t\t\tdocumentMargins={documentMargins}\n\t\t\tprintFontSize={printFontSize}\n\t\t/>\n\t);\n\n\tconst measuringFn = (container) => {\n\t\tconst pageContent = container.querySelector(\n\t\t\t'.printPreview-pageContent'\n\t\t);\n\t\tconst pageColumnWrapper = container.querySelector(\n\t\t\t'.printPreview-pageColumnWrapper'\n\t\t);\n\t\treturn {\n\t\t\tfirstPageHeight: getClientHeight(pageColumnWrapper),\n\t\t\tnormalPageHeight: getClientHeight(pageContent),\n\t\t};\n\t};\n\n\treturn await getDimensionsFromDom(component, measuringFn);\n}\n","import React, { useState, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Page from './Page';\nimport PageHeader from './PageHeader';\n\nimport mapLinesToColumns from '../helpers/mapLinesToColumns';\nimport getAllLinesHeight from '../helpers/getAllLinesHeight';\nimport getPagesHeight from '../helpers/getPagesHeight';\nimport padColumns from '../helpers/padColumns';\n\nfunction AllPages(props) {\n\tconst [allPagesColumns, setAllPagesColumns] = useState([]);\n\n\tconst {\n\t\ttitle,\n\t\tallLines,\n\t\tcolumnsCount,\n\t\tcolumnBreakOnParagraph,\n\t\tdocumentSize,\n\t\tdocumentMargins,\n\t\tprintFontSize,\n\t} = props;\n\n\tuseLayoutEffect(() => {\n\t\tconst getDimensions = async () => {\n\t\t\tconst pageOptions = {\n\t\t\t\tcolumnsCount,\n\t\t\t\tdocumentSize,\n\t\t\t\tdocumentMargins,\n\t\t\t\tprintFontSize,\n\t\t\t};\n\n\t\t\tconst allLinesHeight = await getAllLinesHeight(\n\t\t\t\tallLines,\n\t\t\t\tpageOptions\n\t\t\t);\n\n\t\t\tconst { normalPageHeight, firstPageHeight } = await getPagesHeight(\n\t\t\t\ttitle,\n\t\t\t\tpageOptions\n\t\t\t);\n\n\t\t\tconst allLinesWithHeight = allLines.map((line, index) => ({\n\t\t\t\tcontent: line,\n\t\t\t\theight: allLinesHeight[index],\n\t\t\t}));\n\n\t\t\tconst mapped = mapLinesToColumns(allLinesWithHeight, {\n\t\t\t\tcolumnsCount,\n\t\t\t\tcolumnBreakOnParagraph,\n\t\t\t\tnormalPageHeight,\n\t\t\t\tfirstPageHeight,\n\t\t\t});\n\n\t\t\tsetAllPagesColumns(mapped);\n\t\t};\n\t\tgetDimensions();\n\t}, [\n\t\tallLines,\n\t\ttitle,\n\t\tcolumnsCount,\n\t\tcolumnBreakOnParagraph,\n\t\tdocumentSize,\n\t\tdocumentMargins,\n\t\tprintFontSize,\n\t]);\n\n\tconst allPagesRendered = allPagesColumns.map((pageColumns, index) => {\n\t\treturn (\n\t\t\t<Page\n\t\t\t\tkey={index}\n\t\t\t\tpageHeader={index === 0 ? <PageHeader title={title} /> : null}\n\t\t\t\tallColumnsLines={padColumns(columnsCount, pageColumns)}\n\t\t\t\tdocumentSize={documentSize}\n\t\t\t\tdocumentMargins={documentMargins}\n\t\t\t\tprintFontSize={printFontSize}\n\t\t\t/>\n\t\t);\n\t});\n\n\treturn <React.Fragment>{allPagesRendered}</React.Fragment>;\n}\n\nAllPages.propTypes = {\n\ttitle: PropTypes.string.isRequired,\n\tallLines: PropTypes.arrayOf(PropTypes.string).isRequired,\n\tcolumnsCount: PropTypes.number.isRequired,\n\tcolumnBreakOnParagraph: PropTypes.bool.isRequired,\n\tdocumentSize: PropTypes.string.isRequired,\n\tdocumentMargins: PropTypes.number.isRequired,\n\tprintFontSize: PropTypes.number.isRequired,\n};\n\nexport default AllPages;\n","import './PrintPreview.scss';\n\nimport _pick from 'lodash/pick';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport renderSong from '../../../core/renderSong';\nimport AllPages from './AllPages';\n\nfunction PrintPreview(props) {\n\tconst { selectedFile, highlightChords } = props;\n\n\tconst renderOptions = _pick(props, [\n\t\t'chordsAndLyricsDisplay',\n\t\t'alignChordsWithLyrics',\n\t\t'alignBars',\n\t\t'harmonizeAccidentals',\n\t\t'accidentalsType',\n\t\t'transposeValue',\n\t\t'autoRepeatChords',\n\t\t'expandSectionRepeats',\n\t\t'useShortNamings',\n\t\t'simplifyChords',\n\t]);\n\n\tconst allLines = renderSong(\n\t\tselectedFile.content || '',\n\t\trenderOptions\n\t).split('\\n');\n\n\tconst classNames = ['printPreview'];\n\tif (highlightChords) {\n\t\tclassNames.push('cmChordLine--highlightChords');\n\t}\n\n\treturn (\n\t\t<div className={classNames.join(' ')} data-testid={'printPreview'}>\n\t\t\t<AllPages\n\t\t\t\ttitle={selectedFile.title || ''}\n\t\t\t\tallLines={allLines}\n\t\t\t\tcolumnsCount={props.columnsCount}\n\t\t\t\tcolumnBreakOnParagraph={props.columnBreakOnParagraph}\n\t\t\t\tdocumentSize={props.documentSize}\n\t\t\t\tdocumentMargins={props.documentMargins}\n\t\t\t\tprintFontSize={props.printFontSize}\n\t\t\t/>\n\t\t</div>\n\t);\n}\nPrintPreview.propTypes = {\n\tselectedFile: PropTypes.object.isRequired,\n\tcolumnsCount: PropTypes.number.isRequired,\n\tcolumnBreakOnParagraph: PropTypes.bool.isRequired,\n\tdocumentSize: PropTypes.string.isRequired,\n\tdocumentMargins: PropTypes.number.isRequired,\n\tprintFontSize: PropTypes.number.isRequired,\n\thighlightChords: PropTypes.bool.isRequired,\n};\n\nexport default PrintPreview;\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../../db/options/selectors';\n\nimport PrintPreview from '../_components/PrintPreview';\n\nexport default connect((state) => ({\n\tchordsAndLyricsDisplay: getOptionValue(\n\t\tstate,\n\t\t'rendering',\n\t\t'chordsAndLyricsDisplay'\n\t),\n\talignChordsWithLyrics: getOptionValue(\n\t\tstate,\n\t\t'rendering',\n\t\t'alignChordsWithLyrics'\n\t),\n\tcolumnsCount: getOptionValue(state, 'rendering', 'columnsCount'),\n\tcolumnBreakOnParagraph: getOptionValue(\n\t\tstate,\n\t\t'rendering',\n\t\t'columnBreakOnParagraph'\n\t),\n\tdocumentSize: getOptionValue(state, 'rendering', 'documentSize'),\n\tdocumentMargins: getOptionValue(state, 'rendering', 'documentMargins'),\n\taccidentalsType: getOptionValue(state, 'rendering', 'preferredAccidentals'),\n\talignBars: getOptionValue(state, 'rendering', 'alignBars'),\n\tharmonizeAccidentals: getOptionValue(\n\t\tstate,\n\t\t'rendering',\n\t\t'harmonizeAccidentals'\n\t),\n\ttransposeValue: getOptionValue(state, 'rendering', 'transposeValue'),\n\tprintFontSize: getOptionValue(state, 'rendering', 'printFontSize'),\n\thighlightChords: getOptionValue(state, 'rendering', 'highlightChords'),\n\tautoRepeatChords: getOptionValue(state, 'rendering', 'autoRepeatChords'),\n\texpandSectionRepeats: getOptionValue(\n\t\tstate,\n\t\t'rendering',\n\t\t'expandSectionRepeats'\n\t),\n\tuseShortNamings: getOptionValue(state, 'rendering', 'useShortNamings'),\n\tsimplifyChords: getOptionValue(state, 'rendering', 'simplifyChords'),\n}))(PrintPreview);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport EditorLayout from '../songEditor/_components/EditorLayout';\nimport ExportPreview from '../../songRenderers/exportPreview/_components/ExportPreview';\nimport PlayRenderer from '../../songRenderers/playRenderer/_containers/PlayRenderer';\nimport PrintPreview from '../../songRenderers/printPreview/_containers/PrintPreview';\n\nfunction Editor(props) {\n\tconst { editorMode } = props;\n\n\tswitch (editorMode) {\n\t\tcase 'edit':\n\t\t\treturn <EditorLayout {...props} />;\n\t\tcase 'play':\n\t\t\treturn <PlayRenderer {...props} />;\n\t\tcase 'print':\n\t\t\treturn <PrintPreview {...props} />;\n\t\tcase 'export':\n\t\t\treturn <ExportPreview {...props} />;\n\t}\n}\n\nEditor.propTypes = {\n\teditorMode: PropTypes.string.isRequired,\n};\n\nexport default Editor;\n","import { connect } from 'react-redux';\n\nimport { getSelectedId } from '../../fileManager/_state/selectors';\nimport { getEditorMode } from '../../ui/layout/app/_state/selectors';\n\nimport { getOne } from '../../db/files/selectors';\nimport { updateFile } from '../../db/files/actions';\n\nimport Editor from '../_components/Editor';\n\nexport default connect(\n\t(state) => ({\n\t\tselectedFile: getOne(state, getSelectedId(state)) || {},\n\t\teditorMode: getEditorMode(state),\n\t}),\n\n\t{\n\t\tupdateFile,\n\t}\n)(Editor);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction OptionsPanel(props) {\n\tconst {\n\t\tid,\n\t\tallWidgets,\n\t\tnonInteractableWidgets,\n\t\thiddenWidgets,\n\t\tsetOption,\n\t\tgetEntryComponent,\n\t} = props;\n\n\tconst classNames = ['optionsPanel', 'optionsPanel-' + id];\n\n\tlet widget, groupWidget;\n\n\tlet WidgetComponent, GroupComponent;\n\tlet isGroupInteractable, isGroupWidgetInteractable;\n\n\tlet renderedGroupWidgets;\n\n\tconst renderedWidgets = allWidgets.widgetsOrder\n\t\t.filter((widgetId) => {\n\t\t\treturn !hiddenWidgets.includes(widgetId);\n\t\t})\n\t\t.map((widgetId) => {\n\t\t\twidget = allWidgets.allWidgets[widgetId];\n\n\t\t\tif (widget.type === 'optionsGroup') {\n\t\t\t\trenderedGroupWidgets = widget.groupWidgetsOrder\n\t\t\t\t\t.filter((groupWidgetId) => {\n\t\t\t\t\t\treturn !hiddenWidgets.includes(groupWidgetId);\n\t\t\t\t\t})\n\t\t\t\t\t.map((groupWidgetId) => {\n\t\t\t\t\t\tgroupWidget = widget.allGroupWidgets[groupWidgetId];\n\n\t\t\t\t\t\tisGroupWidgetInteractable =\n\t\t\t\t\t\t\t!nonInteractableWidgets.includes(widgetId) &&\n\t\t\t\t\t\t\t!nonInteractableWidgets.includes(groupWidgetId);\n\n\t\t\t\t\t\treturn renderWidget(\n\t\t\t\t\t\t\tgroupWidgetId,\n\t\t\t\t\t\t\tgroupWidget,\n\t\t\t\t\t\t\tisGroupWidgetInteractable\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\tGroupComponent = getEntryComponent(widget.type);\n\t\t\t\tisGroupInteractable =\n\t\t\t\t\t!nonInteractableWidgets.includes(widgetId);\n\n\t\t\t\treturn (\n\t\t\t\t\t<GroupComponent\n\t\t\t\t\t\tkey={widgetId}\n\t\t\t\t\t\tisInteractable={isGroupInteractable}\n\t\t\t\t\t\tlabel={widget.label}\n\t\t\t\t\t\ticon={widget.icon}\n\t\t\t\t\t>\n\t\t\t\t\t\t{renderedGroupWidgets}\n\t\t\t\t\t</GroupComponent>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn renderWidget(\n\t\t\t\t\twidgetId,\n\t\t\t\t\twidget,\n\t\t\t\t\t!nonInteractableWidgets.includes(widgetId)\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\tfunction renderWidget(widgetId, localWidget, isInteractable) {\n\t\tWidgetComponent = getEntryComponent(localWidget.type);\n\n\t\treturn (\n\t\t\t<WidgetComponent\n\t\t\t\tkey={widgetId}\n\t\t\t\tisInteractable={isInteractable}\n\t\t\t\toptionContext={localWidget.option.context}\n\t\t\t\toptionKey={localWidget.option.key}\n\t\t\t\toptionValue={props[localWidget.option.key]}\n\t\t\t\tsetOption={setOption}\n\t\t\t\tlabel={localWidget.label}\n\t\t\t\t{...localWidget.typeOptions}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn <div className={classNames.join(' ')}>{renderedWidgets}</div>;\n}\n\nOptionsPanel.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tallWidgets: PropTypes.object.isRequired,\n\tnonInteractableWidgets: PropTypes.arrayOf(PropTypes.string).isRequired,\n\thiddenWidgets: PropTypes.arrayOf(PropTypes.string).isRequired,\n\tsetOption: PropTypes.func.isRequired,\n\tgetEntryComponent: PropTypes.func.isRequired,\n};\n\nexport default OptionsPanel;\n","import './OptionsGroup.scss';\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon';\n\nfunction OptionsGroup(props) {\n\tconst [isOpened, setIsOpened] = useState(props.isOpened);\n\n\tconst { isInteractable, icon, label } = props;\n\n\tconst classNames = ['sb-optionsGroup'];\n\tif (!shouldBeInteractable()) {\n\t\tclassNames.push('sb-optionsGroup-isNotInteractable');\n\t}\n\n\tif (shouldBeClosed()) {\n\t\tsetIsOpened(false);\n\t}\n\n\tfunction shouldBeInteractable() {\n\t\treturn isInteractable && props.children && props.children.length > 0;\n\t}\n\n\tfunction shouldBeClosed() {\n\t\treturn isOpened && (!props.children || props.children.length === 0);\n\t}\n\n\tfunction handleClick() {\n\t\tsetIsOpened(!isOpened);\n\t}\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<div\n\t\t\t\tclassName={'sb-optionsGroup-title'}\n\t\t\t\tonClick={shouldBeInteractable() ? handleClick : null}\n\t\t\t>\n\t\t\t\t<div className={'sb-optionsGroup-label'}>\n\t\t\t\t\t<span className={'sb-optionsGroup-iconTitle'}>\n\t\t\t\t\t\t<Icon iconName={icon} />\n\t\t\t\t\t</span>{' '}\n\t\t\t\t\t{label}\n\t\t\t\t</div>\n\t\t\t\t<div className={'sb-optionsGroup-toggle'}>\n\t\t\t\t\t<span className={'sb-optionsGroup-iconToggle'}>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ticonName={isOpened ? 'unfold_less' : 'unfold_more'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className={'sb-optionsGroup-content'}>\n\t\t\t\t{isOpened && props.children}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nOptionsGroup.propTypes = {\n\tisOpened: PropTypes.bool,\n\tisInteractable: PropTypes.bool.isRequired,\n\ticon: PropTypes.string.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tchildren: PropTypes.arrayOf(PropTypes.element),\n};\n\nOptionsGroup.defaultProps = {\n\tisOpened: true,\n};\n\nexport default OptionsGroup;\n","import './Select.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon';\n\nfunction SelectChoice(props) {\n\tconst { isSelected, label, onClick } = props;\n\n\tlet checkIcon;\n\tconst classNames = ['sb-optionSelectChoice'];\n\n\tif (isSelected) {\n\t\tclassNames.push('sb-optionSelectChoice-isSelected');\n\t\tcheckIcon = (\n\t\t\t<span className={'sb-optionSelectChoice-checkIcon'}>\n\t\t\t\t<Icon iconName={'check'} />\n\t\t\t</span>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className={classNames.join(' ')} onClick={onClick}>\n\t\t\t<div className={'sb-optionSelectChoice-check'}>\n\t\t\t\t{isSelected && checkIcon}\n\t\t\t</div>\n\t\t\t<div className={'sb-optionSelectChoice-label'}>{label}</div>\n\t\t</div>\n\t);\n}\n\nSelectChoice.propTypes = {\n\tisSelected: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tonClick: PropTypes.func.isRequired,\n};\n\nexport default React.memo(SelectChoice);\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport SelectChoice from './SelectChoice';\n\nimport Icon from '../../../_components/Icon';\n\nfunction Select(props) {\n\tconst [isOpen, setIsOpen] = useState(false);\n\n\tconst {\n\t\tisInteractable,\n\t\tlabel,\n\t\tallChoices,\n\t\toptionContext,\n\t\toptionKey,\n\t\toptionValue,\n\t\tsetOption,\n\t} = props;\n\n\tconst classNames = ['sb-optionSelect'];\n\tif (!isInteractable) {\n\t\tclassNames.push('sb-optionSelect-isNotInteractable');\n\t}\n\n\tconst iconName = isOpen ? 'keyboard_arrow_down' : 'keyboard_arrow_right';\n\n\tfunction toggleChoices() {\n\t\tsetIsOpen(!isOpen);\n\t}\n\n\tconst renderedChoices = !isOpen ? null : (\n\t\t<div className={'sb-optionSelect-choices'}>\n\t\t\t{allChoices.map((choice) => (\n\t\t\t\t<SelectChoice\n\t\t\t\t\tkey={choice.value}\n\t\t\t\t\tlabel={choice.label}\n\t\t\t\t\tisSelected={optionValue === choice.value}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\tsetOption(optionContext, optionKey, choice.value)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<div\n\t\t\t\tclassName={'sb-optionSelect-title'}\n\t\t\t\tonClick={isInteractable ? toggleChoices : null}\n\t\t\t>\n\t\t\t\t<div className={'sb-optionSelect-desc'}>{label}</div>\n\t\t\t\t<div className={'sb-optionSelect-toggle'}>\n\t\t\t\t\t<span className={'sb-optionSelect-icon'}>\n\t\t\t\t\t\t<Icon iconName={iconName} />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{renderedChoices}\n\t\t</div>\n\t);\n}\n\nSelect.propTypes = {\n\tisInteractable: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tallChoices: PropTypes.array.isRequired,\n\toptionContext: PropTypes.string.isRequired,\n\toptionKey: PropTypes.string.isRequired,\n\toptionValue: PropTypes.string.isRequired,\n\tsetOption: PropTypes.func.isRequired,\n};\n\nexport default Select;\n","import './Slider.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Slider(props) {\n\tconst {\n\t\tisInteractable,\n\t\tlabel,\n\t\tmin,\n\t\tmax,\n\t\tshowPlusSymbol,\n\t\toptionContext,\n\t\toptionKey,\n\t\toptionValue,\n\t\tsetOption,\n\t} = props;\n\n\tconst classNames = ['sb-optionSlider'];\n\tif (!isInteractable) {\n\t\tclassNames.push('sb-optionSlider-isNotInteractable');\n\t}\n\n\tfunction handleChange(e) {\n\t\tsetOption(optionContext, optionKey, Number.parseInt(e.target.value));\n\t}\n\n\tconst valueDisplay =\n\t\toptionValue > 0 && showPlusSymbol ? '+' + optionValue : optionValue;\n\n\treturn (\n\t\t<div className={classNames.join(' ')}>\n\t\t\t<div className={'sb-optionSlider-desc'}>{label}</div>\n\t\t\t<div className={'sb-optionSlider-value'}>{valueDisplay}</div>\n\t\t\t<div className={'sb-optionSlider-range'}>\n\t\t\t\t<input\n\t\t\t\t\tmin={min}\n\t\t\t\t\tmax={max}\n\t\t\t\t\tvalue={optionValue}\n\t\t\t\t\ttype={'range'}\n\t\t\t\t\tonChange={isInteractable ? handleChange : null}\n\t\t\t\t\tdisabled={!isInteractable}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nSlider.propTypes = {\n\tisInteractable: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\tmin: PropTypes.number.isRequired,\n\tmax: PropTypes.number.isRequired,\n\tshowPlusSymbol: PropTypes.bool,\n\toptionContext: PropTypes.string.isRequired,\n\toptionKey: PropTypes.string.isRequired,\n\toptionValue: PropTypes.number.isRequired,\n\tsetOption: PropTypes.func.isRequired,\n};\n\nSlider.defaultProps = {\n\tshowPlusSymbol: true,\n};\n\nexport default React.memo(Slider);\n","import './Toggle.scss';\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Icon from '../../../_components/Icon';\n\nfunction Toggle(props) {\n\tconst {\n\t\tisInteractable,\n\t\tlabel,\n\t\toptionContext,\n\t\toptionKey,\n\t\toptionValue,\n\t\tsetOption,\n\t} = props;\n\n\tconst classNames = ['sb-optionToggle'];\n\tclassNames.push(\n\t\toptionValue === true ? 'sb-optionToggle-isOn' : 'sb-optionToggle-isOff'\n\t);\n\tif (!isInteractable) {\n\t\tclassNames.push('sb-optionToggle-isNotInteractable');\n\t}\n\n\tfunction handleClick() {\n\t\tsetOption(optionContext, optionKey, !optionValue);\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames.join(' ')}\n\t\t\tonClick={isInteractable ? handleClick : null}\n\t\t>\n\t\t\t<div className={'sb-optionToggle-desc'}>{label}</div>\n\t\t\t<div className={'sb-optionToggle-icon'}>\n\t\t\t\t<span className={'sb-optionToggle-icon'}>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticonName={\n\t\t\t\t\t\t\toptionValue === true ? 'toggle_on' : 'toggle_off'\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nToggle.propTypes = {\n\tisInteractable: PropTypes.bool.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\toptionContext: PropTypes.string.isRequired,\n\toptionKey: PropTypes.string.isRequired,\n\toptionValue: PropTypes.bool.isRequired,\n\tsetOption: PropTypes.func.isRequired,\n};\n\nexport default React.memo(Toggle);\n","import './SidebarOptionsPanel.scss';\n\nimport React from 'react';\n\nimport OptionPanel from '../../../../optionsPanels/_components/OptionsPanel';\n\nimport OptionsGroup from './OptionsGroup';\nimport Select from './Select';\nimport Slider from './Slider';\nimport Toggle from './Toggle';\n\nfunction getEntryComponent(type) {\n\tswitch (type) {\n\t\tcase 'optionsGroup':\n\t\t\treturn OptionsGroup;\n\t\tcase 'select':\n\t\t\treturn Select;\n\t\tcase 'slider':\n\t\t\treturn Slider;\n\t\tcase 'toggle':\n\t\t\treturn Toggle;\n\t}\n}\n\nexport default function SidebarOptionPanel(props) {\n\treturn (\n\t\t<div className={'sb-optionsPanel'}>\n\t\t\t<OptionPanel {...props} getEntryComponent={getEntryComponent} />\n\t\t</div>\n\t);\n}\n","import createAction from '../../core/createAction';\nimport * as actionTypes from './actionsTypes';\n\nexport const setOptionValue = (context, key, value) => {\n\tif (!context) {\n\t\tthrow new TypeError('Cannot set an option without a context');\n\t}\n\tif (!key) {\n\t\tthrow new TypeError('Cannot set an option without a key');\n\t}\n\tconst payload = {\n\t\tcontext,\n\t\tkey,\n\t\tvalue,\n\t};\n\treturn createAction(actionTypes.DB_OPTION_SET_OPTION_VALUE, payload);\n};\n","import Rendering from '../_components/Rendering';\nimport OptionsPanelFactory from '../../_containers/OptionsPanelFactory';\n\nimport allWidgets from '../allWidgets';\nimport {\n\tgetNonInteractableWidgets,\n\tgetHiddenWidgets,\n} from '../_state/selectors';\n\nexport default OptionsPanelFactory(\n\tallWidgets,\n\tgetNonInteractableWidgets,\n\tgetHiddenWidgets,\n\tRendering\n);\n","import { connect } from 'react-redux';\n\nimport { getOptionValue } from '../../db/options/selectors';\nimport { setOptionValue } from '../../db/options/actions';\n\nexport default function OptionsPanelFactory(\n\tallWidgets,\n\tgetNonInteractableWidgets,\n\tgetHiddenWidgets,\n\tcomponent\n) {\n\treturn connect(\n\t\t(state) => {\n\t\t\tconst stateToProps = {\n\t\t\t\tallWidgets,\n\t\t\t\tnonInteractableWidgets: getNonInteractableWidgets(state),\n\t\t\t\thiddenWidgets: getHiddenWidgets(state),\n\t\t\t};\n\n\t\t\tlet widget;\n\t\t\tlet groupWidget;\n\n\t\t\tallWidgets.widgetsOrder.forEach((widgetId) => {\n\t\t\t\twidget = allWidgets.allWidgets[widgetId];\n\n\t\t\t\tif (widget.type === 'optionsGroup') {\n\t\t\t\t\twidget.groupWidgetsOrder.forEach((groupWidgetId) => {\n\t\t\t\t\t\tgroupWidget = widget.allGroupWidgets[groupWidgetId];\n\n\t\t\t\t\t\tstateToProps[groupWidget.option.key] = getOptionValue(\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tgroupWidget.option.context,\n\t\t\t\t\t\t\tgroupWidget.option.key\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tstateToProps[widget.option.key] = getOptionValue(\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\twidget.option.context,\n\t\t\t\t\t\twidget.option.key\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn stateToProps;\n\t\t},\n\n\t\t{\n\t\t\tsetOption: setOptionValue,\n\t\t}\n\t)(component);\n}\n","/* eslint-disable max-lines */\nexport default {\n\twidgetsOrder: [\n\t\t'style',\n\t\t'chordsAndLyricsDisplay',\n\t\t'alignChordsWithLyrics',\n\t\t'alignBars',\n\t\t'autoRepeatChords',\n\t\t'expandSectionRepeats',\n\n\t\t'layout',\n\t\t'helpers',\n\t\t'chords',\n\t\t'format',\n\t],\n\n\tallWidgets: {\n\t\tstyle: {\n\t\t\tlabel: 'Rendering style',\n\t\t\ttype: 'select',\n\t\t\ttypeOptions: {\n\t\t\t\tallChoices: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'styleChordMark',\n\t\t\t\t\t\tlabel: 'ChordMark',\n\t\t\t\t\t\tvalue: 'chordmark',\n\t\t\t\t\t},\n\t\t\t\t\t// {\n\t\t\t\t\t// \tid: 'styleChordpro',\n\t\t\t\t\t// \tlabel: 'ChordPro',\n\t\t\t\t\t// \tvalue: 'chordpro'\n\t\t\t\t\t// },\n\t\t\t\t],\n\t\t\t},\n\t\t\toption: {\n\t\t\t\tcontext: 'rendering',\n\t\t\t\tkey: 'style',\n\t\t\t},\n\t\t},\n\t\tchordsAndLyricsDisplay: {\n\t\t\tlabel: 'Chords and lyrics',\n\t\t\ttype: 'select',\n\t\t\ttypeOptions: {\n\t\t\t\tallChoices: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'cldisplayAll',\n\t\t\t\t\t\tlabel: 'Display both',\n\t\t\t\t\t\tvalue: 'all',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'cldisplayLyrics',\n\t\t\t\t\t\tlabel: 'Lyrics only',\n\t\t\t\t\t\tvalue: 'lyrics',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'cldisplayChords',\n\t\t\t\t\t\tlabel: 'Chords only',\n\t\t\t\t\t\tvalue: 'chords',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'cldisplayChordsFirstLyricLine',\n\t\t\t\t\t\tlabel: 'Chords + First lyric line',\n\t\t\t\t\t\tvalue: 'chordsFirstLyricLine',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\toption: {\n\t\t\t\tcontext: 'rendering',\n\t\t\t\tkey: 'chordsAndLyricsDisplay',\n\t\t\t},\n\t\t},\n\t\talignChordsWithLyrics: {\n\t\t\tlabel: 'Align chords with lyrics',\n\t\t\ttype: 'toggle',\n\t\t\toption: {\n\t\t\t\tcontext: 'rendering',\n\t\t\t\tkey: 'alignChordsWithLyrics',\n\t\t\t},\n\t\t},\n\t\talignBars: {\n\t\t\tlabel: 'Align bars',\n\t\t\ttype: 'toggle',\n\t\t\toption: {\n\t\t\t\tcontext: 'rendering',\n\t\t\t\tkey: 'alignBars',\n\t\t\t},\n\t\t},\n\t\tautoRepeatChords: {\n\t\t\tlabel: 'Auto repeat chords',\n\t\t\ttype: 'toggle',\n\t\t\toption: {\n\t\t\t\tcontext: 'rendering',\n\t\t\t\tkey: 'autoRepeatChords',\n\t\t\t},\n\t\t},\n\t\texpandSectionRepeats: {\n\t\t\tlabel: 'Expand section repeats',\n\t\t\ttype: 'toggle',\n\t\t\toption: {\n\t\t\t\tcontext: 'rendering',\n\t\t\t\tkey: 'expandSectionRepeats',\n\t\t\t},\n\t\t},\n\n\t\tlayout: {\n\t\t\ttype: 'optionsGroup',\n\t\t\tlabel: 'Layout',\n\t\t\ticon: 'view_compact',\n\n\t\t\tgroupWidgetsOrder: [\n\t\t\t\t'documentSize',\n\t\t\t\t'documentMargins',\n\t\t\t\t'columnsCount',\n\t\t\t\t'columnBreakOnParagraph',\n\t\t\t],\n\t\t\tallGroupWidgets: {\n\t\t\t\tdocumentSize: {\n\t\t\t\t\tlabel: 'Document size',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'documentSizeA4',\n\t\t\t\t\t\t\t\tlabel: 'A4',\n\t\t\t\t\t\t\t\tvalue: 'a4',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'documentSizeBooxMax2Pro',\n\t\t\t\t\t\t\t\tlabel: 'Boox Max 2 Pro',\n\t\t\t\t\t\t\t\tvalue: 'booxmax2pro',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'documentSize',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tdocumentMargins: {\n\t\t\t\t\tlabel: 'Margins',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\tmax: 5,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'documentMargins',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tcolumnsCount: {\n\t\t\t\t\tlabel: 'Columns',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\tmax: 4,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'columnsCount',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tcolumnBreakOnParagraph: {\n\t\t\t\t\tlabel: 'Break on paragraph',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'columnBreakOnParagraph',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\thelpers: {\n\t\t\ttype: 'optionsGroup',\n\t\t\tlabel: 'Helpers',\n\t\t\ticon: 'remove_red_eye',\n\n\t\t\tgroupWidgetsOrder: [\n\t\t\t\t'showChords',\n\t\t\t\t'instrument',\n\t\t\t\t'showStrummingPattern',\n\t\t\t],\n\n\t\t\tallGroupWidgets: {\n\t\t\t\tshowChords: {\n\t\t\t\t\tlabel: 'Show chords diagrams',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'showChords',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tinstrument: {\n\t\t\t\t\tlabel: 'Instrument',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'instrumentGuitar',\n\t\t\t\t\t\t\t\tlabel: 'Guitar',\n\t\t\t\t\t\t\t\tvalue: 'guitar',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'instrumentUkulele',\n\t\t\t\t\t\t\t\tlabel: 'Ukulele',\n\t\t\t\t\t\t\t\tvalue: 'ukulele',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'instrumentMandolin',\n\t\t\t\t\t\t\t\tlabel: 'Mandolin',\n\t\t\t\t\t\t\t\tvalue: 'mandolin',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'instrumentPiano',\n\t\t\t\t\t\t\t\tlabel: 'Piano',\n\t\t\t\t\t\t\t\tvalue: 'piano',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'instrument',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tshowStrummingPattern: {\n\t\t\t\t\tlabel: 'Show strumming pattern',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'showStrummingPattern',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\tchords: {\n\t\t\ttype: 'optionsGroup',\n\t\t\tlabel: 'Chords',\n\t\t\ticon: 'music_note',\n\n\t\t\tgroupWidgetsOrder: [\n\t\t\t\t'transposeValue',\n\t\t\t\t'simplifyChords',\n\t\t\t\t'capoPosition',\n\t\t\t\t'harmonizeAccidentals',\n\t\t\t\t'preferredAccidentals',\n\t\t\t\t'useShortNamings',\n\t\t\t],\n\n\t\t\tallGroupWidgets: {\n\t\t\t\ttransposeValue: {\n\t\t\t\t\tlabel: 'Transpose',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: -11,\n\t\t\t\t\t\tmax: 11,\n\t\t\t\t\t\tshowPlusSymbol: true,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'transposeValue',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tsimplifyChords: {\n\t\t\t\t\tlabel: 'Simplify chords',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'simplifyChordsNone',\n\t\t\t\t\t\t\t\tlabel: 'None',\n\t\t\t\t\t\t\t\tvalue: 'none',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'simplifyChordsMax',\n\t\t\t\t\t\t\t\tlabel: 'Max',\n\t\t\t\t\t\t\t\tvalue: 'max',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'simplifyChordsCore',\n\t\t\t\t\t\t\t\tlabel: 'Core',\n\t\t\t\t\t\t\t\tvalue: 'core',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'simplifyChords',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tcapoPosition: {\n\t\t\t\t\tlabel: 'Add capo on fret',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\tmax: 11,\n\t\t\t\t\t\tshowPlusSymbol: false,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'capoPosition',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tharmonizeAccidentals: {\n\t\t\t\t\tlabel: 'Harmonize accidentals',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'harmonizeAccidentals',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tpreferredAccidentals: {\n\t\t\t\t\tlabel: 'Preferred accidentals',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'preferredAccidentalsAuto',\n\t\t\t\t\t\t\t\tlabel: 'Auto',\n\t\t\t\t\t\t\t\tvalue: 'auto',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'preferredAccidentalsSharp',\n\t\t\t\t\t\t\t\tlabel: 'Sharp (#)',\n\t\t\t\t\t\t\t\tvalue: 'sharp',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'preferredAccidentalsFlat',\n\t\t\t\t\t\t\t\tlabel: 'Flats (b)',\n\t\t\t\t\t\t\t\tvalue: 'flat',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'preferredAccidentals',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tuseShortNamings: {\n\t\t\t\t\tlabel: 'Use short names',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'useShortNamings',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\tformat: {\n\t\t\ttype: 'optionsGroup',\n\t\t\tlabel: 'Format',\n\t\t\ticon: 'format_size',\n\n\t\t\tgroupWidgetsOrder: [\n\t\t\t\t'fontSize',\n\t\t\t\t'printFontSize',\n\t\t\t\t'fontStyle',\n\t\t\t\t'chordsColor',\n\t\t\t\t'highlightChords',\n\t\t\t],\n\n\t\t\tallGroupWidgets: {\n\t\t\t\tfontSize: {\n\t\t\t\t\tlabel: 'Font size',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: -5,\n\t\t\t\t\t\tmax: +5,\n\t\t\t\t\t\tshowPlusSymbol: true,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'fontSize',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tprintFontSize: {\n\t\t\t\t\tlabel: 'Font size (print)',\n\t\t\t\t\ttype: 'slider',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tmin: -5,\n\t\t\t\t\t\tmax: +5,\n\t\t\t\t\t\tshowPlusSymbol: true,\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'printFontSize',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tfontStyle: {\n\t\t\t\t\tlabel: 'Font style',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'fontStyleRoboto',\n\t\t\t\t\t\t\t\tlabel: 'Roboto',\n\t\t\t\t\t\t\t\tvalue: 'roboto',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'fontStyle',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\tchordsColor: {\n\t\t\t\t\tlabel: 'Chords color',\n\t\t\t\t\ttype: 'select',\n\t\t\t\t\ttypeOptions: {\n\t\t\t\t\t\tallChoices: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'chordsColor',\n\t\t\t\t\t\t\t\tlabel: 'Base',\n\t\t\t\t\t\t\t\tvalue: 'base',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'chordsColorRed',\n\t\t\t\t\t\t\t\tlabel: 'Red',\n\t\t\t\t\t\t\t\tvalue: 'red',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'chordsColorYellow',\n\t\t\t\t\t\t\t\tlabel: 'Yellow',\n\t\t\t\t\t\t\t\tvalue: 'yellow',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'chordsColorGreen',\n\t\t\t\t\t\t\t\tlabel: 'Green',\n\t\t\t\t\t\t\t\tvalue: 'green',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'chordsColor',\n\t\t\t\t\t},\n\t\t\t\t},\n\n\t\t\t\thighlightChords: {\n\t\t\t\t\tlabel: 'Highlight Chords',\n\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\toption: {\n\t\t\t\t\t\tcontext: 'rendering',\n\t\t\t\t\t\tkey: 'highlightChords',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n};\n","import { getEditorMode } from '../../../ui/layout/app/_state/selectors';\nimport { getOptionValue } from '../../../db/options/selectors';\n\nexport const getNonInteractableWidgets = (state) => {\n\tconst nonInteractableWidgets = [];\n\n\tconst editorMode = getEditorMode(state);\n\n\tswitch (editorMode) {\n\t\tcase 'edit': {\n\t\t\tnonInteractableWidgets.push('chordsAndLyricsDisplay');\n\t\t\tnonInteractableWidgets.push('helpers');\n\t\t\tnonInteractableWidgets.push('layout');\n\t\t\tnonInteractableWidgets.push('style');\n\t\t\tnonInteractableWidgets.push('format');\n\n\t\t\tbreak;\n\t\t}\n\t\tcase 'play': {\n\t\t\tnonInteractableWidgets.push('documentSize');\n\t\t\tnonInteractableWidgets.push('documentMargins');\n\t\t\tnonInteractableWidgets.push('columnBreakOnParagraph');\n\t\t\tbreak;\n\t\t}\n\t\tcase 'print': {\n\t\t\tnonInteractableWidgets.push('chordsColor');\n\t\t\tbreak;\n\t\t}\n\t\tcase 'export': {\n\t\t\tnonInteractableWidgets.push('format');\n\t\t\tnonInteractableWidgets.push('layout');\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t//const style = getOptionValue(state, 'rendering', 'style');\n\t//if (style !== 'chordmark') {\n\t//\tnonInteractableWidgets.push('alignBars');\n\t//}\n\n\treturn nonInteractableWidgets;\n};\n\nexport const getHiddenWidgets = (state) => {\n\tconst hiddenWidgets = [];\n\n\tconst editorMode = getEditorMode(state);\n\n\t//const showChords = getOptionValue(state, 'rendering', 'showChords');\n\tconst harmonizeAccidentals = getOptionValue(\n\t\tstate,\n\t\t'rendering',\n\t\t'harmonizeAccidentals'\n\t);\n\t/*\n\tconst chordsAndLyricsDisplay = getOptionValue(\n\t\tstate,\n\t\t'rendering',\n\t\t'chordsAndLyricsDisplay'\n\t);\n\n\t//if (!showChords) {\n\t//\thiddenWidgets.push('instrument');\n\t//}\n\tif (chordsAndLyricsDisplay !== 'all') {\n\t\thiddenWidgets.push('alignChordsWithLyrics');\n\t}\n\t\n\t */\n\tif (!harmonizeAccidentals) {\n\t\thiddenWidgets.push('preferredAccidentals');\n\t}\n\n\tif (editorMode === 'print') {\n\t\thiddenWidgets.push('fontSize');\n\t} else {\n\t\thiddenWidgets.push('printFontSize');\n\t}\n\n\thiddenWidgets.push('helpers');\n\t//hiddenWidgets.push('simplifyChords');\n\thiddenWidgets.push('capoPosition');\n\n\treturn hiddenWidgets;\n};\n","import './Rendering.scss';\n\nimport React from 'react';\n\nimport Icon from '../../../ui/_components/Icon';\n\nimport SidebarOptionPanel from '../../../ui/sideBar/options/_components/SidebarOptionsPanel';\n\nexport default function Rendering(props) {\n\treturn (\n\t\t<div className={'renderingOptionsPanel'}>\n\t\t\t<div className={'renderingOptionsPanel-isCollapsed'}>\n\t\t\t\t<span className={'renderingOptionsPanel-icon'}>\n\t\t\t\t\t<Icon iconName={'settings'} />\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div className={'renderingOptionsPanel-isExpanded'}>\n\t\t\t\t<SidebarOptionPanel {...props} id={'rendering'} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react';\n\nimport AppLayout from '../ui/layout/app/_containers/App';\nimport FileManager from '../fileManager/_containers/FileManager';\nimport Editor from '../editor/_containers/Editor';\nimport RightBarPanel from '../optionsPanels/rendering/_containers/Rendering';\n\nexport default function Edit() {\n\tconst fm = <FileManager />;\n\tconst rightBarPanel = <RightBarPanel />;\n\n\treturn (\n\t\t<AppLayout leftBar={fm} rightBar={rightBarPanel}>\n\t\t\t<Editor />\n\t\t</AppLayout>\n\t);\n}\n","import UniversalRouter from 'universal-router';\nimport renderController from './renderController';\n\nimport Editor from './controllers/Editor';\n\nconst routes = [\n\t{\n\t\tpath: '/editor',\n\t\taction: () => Editor,\n\t},\n];\n\nconst universalRouter = new UniversalRouter(routes);\n\nexport default {\n\tnavigateTo(path) {\n\t\treturn universalRouter.resolve(path).then((controller) => {\n\t\t\treturn renderController(controller);\n\t\t});\n\t},\n};\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport { getStore } from './state/store';\n\nimport ErrorBoundary from './ui/_components/ErrorBoundary';\n\nexport default function renderController(Controller) {\n\tReactDom.render(\n\t\t<Provider store={getStore()}>\n\t\t\t<React.StrictMode>\n\t\t\t\t<ErrorBoundary>\n\t\t\t\t\t<Controller />\n\t\t\t\t</ErrorBoundary>\n\t\t\t</React.StrictMode>\n\t\t</Provider>,\n\t\tdocument.getElementById('app')\n\t);\n}\n","import '../scss/styles.scss';\n\nimport { createStore } from './state/store';\nimport registerHandlers from './registerHandlers';\nimport router from './router';\n\nregisterHandlers();\n\nexport default function run() {\n\tcreateStore();\n\n\treturn router.navigateTo('/editor');\n}\n","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmBarContent\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"barContent\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmBarSeparator\\\">\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"barSeparator\") || (depth0 != null ? lookupProperty(depth0,\"barSeparator\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"barSeparator\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":29},\"end\":{\"line\":1,\"column\":47}}}) : helper)))\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmChordLineOffset\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"chordLineOffset\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmChordLine\\\">\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"chordLineOffset\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":26},\"end\":{\"line\":1,\"column\":128}}})) != null ? stack1 : \"\")\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"chordLine\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmChordDuration\\\">\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"chordDuration\") : depth0), depth0))\n    + \"</span>\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmChordSymbol\\\">\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"chordSymbol\") : depth0), depth0))\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"chordDuration\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":50},\"end\":{\"line\":1,\"column\":144}}})) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<span class=\\\"cmEmptyLine\\\">&nbsp;</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<p class=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"lineClasses\") || (depth0 != null ? lookupProperty(depth0,\"lineClasses\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"lineClasses\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":10},\"end\":{\"line\":1,\"column\":27}}}) : helper)))\n    + \"\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"line\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</p>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmLyricLine\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"lyricLine\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmSectionLabel\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"sectionLabel\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"song\") : depth0), depth0)) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"../../../../../chords-charts-studio/node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"cmTimeSignature\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"timeSignature\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</span>\";\n},\"useData\":true});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_touffi_chords_charts_studio\"] = self[\"webpackChunk_touffi_chords_charts_studio\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216], () => (__webpack_require__(\"fUxO\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","DB_FILES_CREATE","DB_FILES_DELETE","DB_FILES_IMPORT","DB_FILES_UPDATE","initialState","allFiles","createFile","state","action","payload","id","title","content","updateFile","deleteFile","DB_OPTION_SET_OPTION_VALUE","combineReducers","files","type","actionTypes","options","context","key","value","contextOptions","newState","FILE_MANAGER_SELECT_FILE","FILE_MANAGER_ENABLE_RENAME","selected","renamed","defaultTitle","UI_LAYOUT_APP_TOGGLE_LEFT_BAR","UI_LAYOUT_APP_TOGGLE_RIGHT_BAR","UI_LAYOUT_APP_SET_EDITOR_MODE","isLeftBarCollapsed","isRightBarCollapsed","editorMode","app","mode","layout","db","fileManager","ui","rendering","style","default","resetOnSongChange","chordsAndLyricsDisplay","alignChordsWithLyrics","alignBars","autoRepeatChords","expandSectionRepeats","documentSize","documentMargins","columnsCount","columnBreakOnParagraph","showChords","instrument","showStrummingPattern","transposeValue","simplifyChords","capoPosition","harmonizeAccidentals","preferredAccidentals","useShortNamings","fontSize","printFontSize","fontStyle","chordsColor","highlightChords","store","storeEnhancers","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","push","trace","persistedState","serializedState","localStorage","getItem","JSON","parse","err","loadState","_defaultsDeep","seed","createReduxStore","allReducers","compose","subscribe","stringify","setItem","saveState","getState","getStore","createAction","TypeError","allLines","formatAllParagraphs","song","bodyParagraphs","map","paragraph","formatParagraph","lines","line","formatLine","parts","formatChordLine","formatLyricLine","formatTagLine","filter","i","part","trimRight","lineHasChords","items","reduce","chordLine","item","itemHasChord","chords","trim","lineHasLyrics","lyricsLine","itemHasLyric","itemHasLeftPadding","lyrics","itemHasRightPadding","lineHasTag","tagValue","toLowerCase","replace","sectionLabelsMapping","adlib","bridge","chorus","interlude","intro","introduction","outro","prechorus","solo","some","ChordLyricsPair","Tag","isRenderable","length","trimLeft","getFromUltimateGuitar","ugChordChartRaw","ugChordChart","parsed","ChordSheetJS","join","songImporterHandlers","message","chordChart","source","e","console","log","buildTitle","artist","dispatch","uuidv4","importFile","songTitle","_handleMessage","allHandlers","origin","location","data","ErrorBoundary","props","error","errorInfo","this","setState","className","whiteSpace","open","toString","componentStack","children","React","propTypes","PropTypes","getEditorMode","Icon","iconName","Logo","NavEntry","label","icon","setEditorMode","classNames","isActive","onClick","Nav","currentMode","allEntries","entry","Footer","versions","App","toggleLeftBar","toggleRightBar","leftBar","rightBar","leftBarClassNames","rightBarClassNames","allNavEntries","defaultProps","connect","getSelectedId","getRenamedId","getDefaultTitle","getAllTitles","createSelectorCreator","defaultMemoize","_isEqual","createDeepEqualSelector","_map","_sortBy","o","getOne","FileActionEntry","text","FileActions","allActions","enableRename","FileEntry","useState","setTitle","fileId","isSelected","isRenamed","selectFile","classList","inputRef","saveTitle","newTitle","current","scrollLeft","useEffect","focus","onDoubleClick","target","select","ref","readOnly","autoFocus","onChange","onBlur","onFocus","onKeyPress","which","preventDefault","getSelection","removeAllRanges","FileManager","allTitles","file","isRequired","actionsTypes","getOptionValue","escapeHTML","unescaped","domPurify","stripTags","html","ALLOWED_TAGS","KEEP_CONTENT","allowedTimeSignatures","isTimeSignatureString","string","includes","barRepeat","chordBeatCount","chordLineRepeat","noChord","noLyrics","sectionLabel","chordPositionMarker","sectionLabelRegexp","RegExp","syntax","isSectionLabel","match","clearSpaces","isChord","potentialChord","chordParserFactory","parseChord","chordBeatCountSymbols","barRepeatSymbols","isEmptyLine","parseTimeSignature","array","split","count","Number","parseInt","beatCount","parseChordWrapper","chordString","IncorrectBeatCountException","duration","currentBeatCount","_isString","_isFinite","name","Error","InvalidChordRepetitionException","defaultTimeSignature","isNoChordSymbol","token","getChordDuration","checkInvalidChordRepetition","bar","currentChord","allChords","previousChord","model","shouldChangeBar","checkInvalidBeatCount","chord","isLast","barBeatCount","hasTooManyBeats","hasTooFewBeats","hasInvalidBeatCount","hasUnevenChordsDurations","firstChordDuration","parseLyricLine","position","regexp","stringWithoutPositionMarkers","chordPositions","tmpString","indexOf","forEachChordInSong","fn","newLines","_cloneDeep","forEach","lineTypes","allBars","forEachChordInChordLine","newChordLine","barIndex","chordIndex","getNthOfLabel","n","typesCount","enableSelect","currentLabel","songLinesFactory","currentSection","currentSectionStats","previousSectionLabelLine","sectionsStats","currentTimeSignature","previousChordLines","blueprint","blueprintIndex","blueprintLine","isRepeatingChords","shouldRepeatSection","shouldCopySection","getSectionLabelLine","lineIndex","allSrcLines","found","copyIndex","repeatTimes","parseSectionLabel","increaseSectionStats","getSectionCount","index","indexWithoutRepeats","withoutRepeats","remainingLines","slice","nextSectionIndex","findIndex","currentSectionContent","undefined","isTimeSignature","isCurrentSectionEmpty","isFromSectionCopy","every","isFirstOfLabel","getChordLine","tokenWithoutBeatCount","previousBar","timeSignature","emptyBar","chordCount","allTokens","tokenIndex","repeatedBar","isRepeated","beat","barClone","parseChordLine","addPreviousChordLine","getLyricLine","shift","copySection","toCopy","endsWithEmptyLine","pop","repeatSection","nextLine","isLastLineOfSection","sectionLabelLine","toRepeat","isFromSectionRepeat","addLine","lineSrc","potentialChordToken","withoutBeatCount","isChordLine","candidate","repeat","isChordLineRepeater","repeatString","sliceStart","sliceEnd","isFromChordLineRepeater","getRepeatedChordLine","getEmptyLine","repeatedLine","shouldRepeatLineFromBlueprint","isFromAutoRepeatChords","repeatLinesFromBlueprint","asArray","flagPositionedChords","lineChordCount","shouldPositionChords","hasPositionedChords","isPositioned","currentLine","parseSong","songSrc","songArray","_isArray","songLines","_findIndex","occurrences","getAllChordsInSong","barSeparator","chordBeat","chordLineOffsetSpacer","emptyBeatSpaces","lyricsSpacer","noChordSymbol","spacesAfterDefault","getMaxBeatsWidth","maxBeatsWidth","symbolLength","symbol","shouldPrintChordsDuration","symbols","Math","max","allMasks","space","chordLineInput","chordPattern","chordSpaces","spacesAfter","beatMaxWidth","spacesWithin","lyricsLineInput","hasNoPositionMarkers","chordToken","lyricToken","tokenizedLyrics","allPositions","substring","spacedLyricsLine","currentBarIndex","isFirstChord","isNewBar","startsWithSpace","lyricsSpaceAfter","shouldOffsetChordLine","chordLineOffset","offset","trimEnd","str","renderBarContent","barContent","chordSymbolTpl","chordSymbol","chordDuration","renderChordSymbol","barContentTpl","renderChordLine","chordLineModel","allBarsRendered","barSeparatorTpl","chordLineTpl","render","emptyLineTpl","lineClasses","lineTpl","labelsMapping","a","b","c","p","s","u","v","renderSectionLabel","labelRaw","rendered","toUpperCase","sectionLabelTpl","lyricLine","trimmedLyricLine","shouldTrimLine","lyricLineTpl","timeSignatureLine","timeSignatureTpl","defaultRenderChord","chordRendererFactory","renderChord","getSectionsStats","stats","getMainAccidental","rootNote","flatCount","sharpCount","formatted","shouldReplaceWithBarRepeat","barHasMultiplePositionedChords","renderSong","songTxt","renderOptions","parsedSong","accidentalsType","printChordsDuration","shouldSkipRepeatedSectionLine","isFirstLyricLineOfSection","renderChords","addPrintChordsDurationsFlag","shouldRenderLine","replaceRepeatedBars","renderAllLines","songTpl","accidental","simplify","useFlats","getChordSymbol","shouldRepeatLines","isFiltered","shouldSkipAutoRepeatChordLine","allFilteredLines","spaced","alignedChordSpacer","simpleChordSpacer","shouldAlignChords","chordLyricsSpacer","renderChordLineModel","renderEmptyLine","renderTimeSignature","renderLyricLine","renderLine","Boolean","renderSongCm","SongRenderer","_pick","dangerouslySetInnerHTML","__html","EditorPreview","selectedFile","Schema","nodes","marks","stateToText","toJSON","doc","acc","toSafeHtml","dirty","ProseMirrorEditorView","selectedFileId","editorContent","editorView","useRef","editorDom","previousFileId","editorExists","dom","parentNode","destroyEditor","removeChild","editorState","EditorState","pmDOMParser","editorSchema","div","document","createElement","innerHTML","preserveWhitespace","plugins","pmHistory","keymap","undo","redo","baseKeymap","createEditorState","EditorView","dispatchTransaction","transaction","applyTransaction","transactions","updateState","tr","docChanged","createEditorView","appendChild","EditorLayout","ExportPreview","PlayRenderer","Page","pageHeader","allColumnsLines","allSectionsRendered","columnLines","columnLinesTxt","pageClasses","pageContentWrapperClasses","PageHeader","cssClasses","mapLinesToColumns","allLinesWithHeight","firstPageHeight","normalPageHeight","noEmptyLinesOnColumnStart","noOrphanTextLine","allPagesColumns","pageIndex","columnIndex","maxColumnHeight","getMaxColumnHeight","currentColumnHeight","flushBuffer","buffer","shouldChangeColumn","height","changeColumn","nextHeight","shouldChangePage","insert","insertOnNextColumn","fitsOnCurrentColumn","bufferHeight","fitsOnNextColumn","get","layoutFactory","wouldProduceOrphanTextLine","hasClass","isTextLine","isEndOfParagraph","isBreakable","getDimensionsFromDom","component","measuringFn","container","add","body","Promise","resolve","ReactDOM","measure","padColumns","columnCount","allColumns","getOffsetHeight","element","offsetHeight","getClientHeight","clientHeight","cssSelectors","getAllLinesHeight","allLinesHeight","querySelectorAll","pageContent","querySelector","AllPages","setAllPagesColumns","useLayoutEffect","getDimensions","pageOptions","getPagesHeight","mapped","allPagesRendered","pageColumns","PrintPreview","Editor","OptionsPanel","widget","groupWidget","WidgetComponent","GroupComponent","isGroupInteractable","isGroupWidgetInteractable","renderedGroupWidgets","allWidgets","nonInteractableWidgets","hiddenWidgets","setOption","getEntryComponent","renderedWidgets","widgetsOrder","widgetId","groupWidgetsOrder","groupWidgetId","allGroupWidgets","renderWidget","isInteractable","localWidget","optionContext","option","optionKey","optionValue","typeOptions","OptionsGroup","isOpened","setIsOpened","shouldBeInteractable","SelectChoice","checkIcon","Select","isOpen","setIsOpen","allChoices","renderedChoices","choice","Slider","min","showPlusSymbol","valueDisplay","disabled","Toggle","SidebarOptionPanel","setOptionValue","getNonInteractableWidgets","getHiddenWidgets","stateToProps","helpers","format","Edit","fm","rightBarPanel","routes","path","universalRouter","UniversalRouter","then","controller","Controller","ReactDom","getElementById","addEventListener","router","Handlebars","module","exports","template","depth0","partials","stack1","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","lambda","helper","escapeExpression","hooks","helperMissing","nullContext","program","noop","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","m","O","result","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","keys","splice","r","getter","__esModule","d","definition","defineProperty","enumerable","g","globalThis","Function","obj","prop","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}